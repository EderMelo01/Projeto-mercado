(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1e3:function(t,e,n){t.exports={}},1005:function(t,e,n){t.exports={}},1062:function(t,e,n){t.exports={}},1063:function(t,e,n){t.exports={}},1064:function(t,e,n){t.exports={}},1065:function(t,e,n){t.exports={}},1066:function(t,e,n){t.exports={}},1067:function(t,e,n){t.exports={}},1069:function(t,e,n){t.exports={}},1070:function(t,e,n){t.exports={}},1072:function(t,e,n){t.exports={}},1073:function(t,e,n){t.exports={}},1081:function(t,e,n){t.exports={}},1082:function(t,e,n){t.exports={}},1083:function(t,e,n){t.exports={}},1103:function(t,e,n){t.exports={}},1104:function(t,e,n){t.exports={}},1105:function(t,e,n){t.exports={}},1106:function(t,e,n){t.exports={}},1107:function(t,e,n){t.exports={}},1108:function(t,e,n){t.exports={}},1109:function(t,e,n){t.exports={}},1110:function(t,e,n){t.exports={}},1111:function(t,e,n){t.exports={}},1112:function(t,e,n){t.exports={}},1113:function(t,e,n){t.exports={}},1114:function(t,e,n){t.exports={}},1115:function(t,e,n){t.exports={}},1116:function(t,e,n){t.exports={}},1170:function(t,e,n){t.exports={}},1171:function(t,e,n){t.exports={}},1180:function(t,e,n){t.exports={}},1181:function(t,e,n){t.exports={}},1183:function(t,e,n){t.exports={}},1198:function(t,e,n){t.exports={}},1210:function(t,e,n){t.exports={}},1211:function(t,e,n){t.exports={}},1231:function(t,e,n){t.exports={}},1232:function(t,e,n){t.exports={}},1233:function(t,e,n){t.exports={}},1234:function(t,e,n){t.exports={}},1235:function(t,e,n){t.exports={}},1236:function(t,e,n){t.exports={}},1237:function(t,e,n){t.exports={}},1238:function(t,e,n){t.exports={}},1239:function(t,e,n){t.exports={}},1240:function(t,e,n){t.exports={}},1241:function(t,e,n){t.exports={}},1242:function(t,e,n){t.exports={}},1243:function(t,e,n){t.exports={}},1244:function(t,e,n){t.exports={}},1245:function(t,e,n){t.exports={}},1247:function(t,e,n){t.exports={}},1248:function(t,e,n){t.exports={}},1249:function(t,e,n){t.exports={}},1250:function(t,e,n){t.exports={}},1251:function(t,e,n){t.exports={}},1252:function(t,e,n){t.exports={}},1253:function(t,e,n){t.exports={}},1254:function(t,e,n){t.exports={}},1255:function(t,e,n){t.exports={}},1256:function(t,e,n){t.exports={}},1257:function(t,e,n){t.exports={}},1258:function(t,e,n){t.exports={}},1259:function(t,e,n){t.exports={}},1260:function(t,e,n){t.exports={}},1261:function(t,e,n){t.exports={}},1262:function(t,e,n){t.exports={}},1263:function(t,e,n){t.exports={}},1264:function(t,e,n){t.exports={}},1265:function(t,e,n){t.exports={}},1266:function(t,e,n){t.exports={}},1268:function(t,e,n){t.exports={}},1269:function(t,e,n){t.exports={}},1270:function(t,e,n){t.exports={}},1271:function(t,e,n){t.exports={}},1272:function(t,e,n){t.exports={}},1273:function(t,e,n){t.exports={}},1286:function(t,e,n){t.exports={}},1287:function(t,e,n){t.exports={}},1288:function(t,e,n){t.exports={}},1289:function(t,e,n){t.exports={}},1290:function(t,e,n){t.exports={}},1291:function(t,e,n){t.exports={}},1292:function(t,e,n){t.exports={}},1293:function(t,e,n){t.exports={}},1294:function(t,e,n){t.exports={}},1295:function(t,e,n){t.exports={}},1296:function(t,e,n){t.exports={}},1297:function(t,e,n){t.exports={}},1298:function(t,e,n){t.exports={}},1300:function(t,e,n){t.exports={}},1301:function(t,e,n){t.exports={}},1302:function(t,e,n){t.exports={}},1304:function(t,e,n){t.exports={}},1305:function(t,e,n){t.exports={}},1306:function(t,e,n){t.exports={}},1307:function(t,e,n){t.exports={}},1308:function(t,e,n){t.exports={}},1309:function(t,e,n){t.exports={}},1310:function(t,e,n){t.exports={}},1311:function(t,e,n){t.exports={}},1312:function(t,e,n){t.exports={}},1313:function(t,e,n){t.exports={}},1314:function(t,e,n){t.exports={}},1316:function(t,e,n){t.exports={}},1317:function(t,e,n){t.exports={}},1318:function(t,e,n){t.exports={}},1386:function(t,e,n){t.exports={}},1387:function(t,e,n){t.exports={}},1388:function(t,e,n){t.exports={}},1389:function(t,e,n){t.exports={}},1390:function(t,e,n){t.exports={}},1391:function(t,e,n){t.exports={}},1392:function(t,e,n){t.exports={}},1393:function(t,e,n){t.exports={}},1394:function(t,e,n){t.exports={}},1395:function(t,e,n){t.exports={}},1396:function(t,e,n){t.exports={}},1397:function(t,e,n){t.exports={}},1398:function(t,e,n){t.exports={}},1399:function(t,e,n){t.exports={}},1400:function(t,e,n){t.exports={}},1401:function(t,e,n){t.exports={}},1402:function(t,e,n){t.exports={}},1403:function(t,e,n){t.exports={}},1404:function(t,e,n){t.exports={}},1405:function(t,e,n){t.exports={}},1406:function(t,e,n){t.exports={}},1407:function(t,e,n){t.exports={}},1408:function(t,e,n){t.exports={}},1409:function(t,e,n){t.exports={}},1410:function(t,e,n){t.exports={}},150:function(t,e,n){"use strict";var o=n(3),r=(n(20),n(30)),l=n(26),c={props:{modelPlay:Boolean,authorId:{type:String,default:""},needBorder:Boolean,customClass:{type:String,default:""},playIconCustomStyle:{type:Object,default:function(){return{position:"absolute",right:"-5px",bottom:"0px"}}},item:{type:Object,default:function(){}},obj:{type:Object,default:function(){}},logParams:{type:Object,default:function(){}},logParams2:{type:Object,default:function(){}},playInitIcon:{type:String}},data:function(){return{audioPlayer:null,duration:void 0,voiceUrl:"",isPlaying:!1,voiceLoading:!1}},computed:{playTime:function(){var t;return Math.floor(null===(t=this.audioPlayer)||void 0===t||null===(t=t.audioPlayer)||void 0===t?void 0:t.scheduledTime)||0},logEventParams:function(){return"{}"!==JSON.stringify(this.logParams)?this.logParams:null},logEventParams2:function(){return"{}"!==JSON.stringify(this.logParams2)?this.logParams2:null},timbreId:function(){var t,e;return(null===(t=this.item)||void 0===t?void 0:t.timbre_id)||(null===(e=this.item)||void 0===e?void 0:e.id)}},watch:{timbreId:function(t){console.log("timbreId-change",t),this.voiceUrl=""},item:{handler:function(t){t&&t.voiceUrl&&(this.voiceUrl=t.voiceUrl)},immediate:!0,deep:!0}},beforeDestroy:function(){this.stopAudio()},methods:{handleClickPlay:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.logEventParams&&t.$logEvent("log_actions",t.logEventParams),t.logEventParams2&&t.$logEvent("log_actions",t.logEventParams2),!t.voiceLoading){e.next=6;break}return t.voiceLoading=!1,t.stopAudio(),e.abrupt("return");case 6:if(!t.isPlaying){e.next=9;break}return t.stopAudio(),e.abrupt("return");case 9:if(!t.voiceUrl){e.next=14;break}t.voiceLoading=!0,t.playAudio(),e.next=16;break;case 14:return e.next=16,t.getTts();case 16:case"end":return e.stop()}}),e)})))()},getTts:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,c,d,h,v,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.voiceLoading=!0,e.prev=1,h={author_id:(null===(n=t.item)||void 0===n?void 0:n.author_id)||(null===(o=t.item)||void 0===o||null===(o=o.author)||void 0===o?void 0:o.id)||t.authorId,scene:"trial",timbre_id:t.timbreId,text:null===(c=t.item)||void 0===c?void 0:c.text,voice_id:null===(d=t.item)||void 0===d?void 0:d.id},t.modelPlay&&delete h.voice_id,e.next=6,Object(l.K)(h);case 6:if(1e4!==(v=e.sent).status.code){e.next=13;break}return t.voiceUrl=(null===(m=v.data)||void 0===m?void 0:m.url)||"",e.next=11,t.playAudio();case 11:e.next=14;break;case 13:t.voiceLoading=!1;case 14:10614===v.status.code&&(t.$message.warning(t.$t("audioPlay10614")),f={data:{obj_id:t.item.id,obj_tye:16},msg:"play",type:"playErr"},Object(r.s)(f)),80008===v.status.code&&t.$EventBus.$emit(t.isVip?"showVipComputingDialog":"showNotVipComputingDialog"),e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(1),t.voiceLoading=!1,e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})))()},playAudio:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.voiceUrl){e.next=2;break}return e.abrupt("return");case 2:if(t.audioPlayer=t.$createAudioPlayer(t.voiceUrl,t.updateStatus),e.prev=3,!t.audioPlayer){e.next=8;break}return e.next=7,t.audioPlayer.start();case 7:t.modelPlay||Object(l.l)({items:[{action:"task",obj_id:null===(n=t.item)||void 0===n?void 0:n.id,obj_type:17,count:1,val:t.playTime}]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t.$message.warning(t.$t("soundPlayFail"));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},stopAudio:function(){this.audioPlayer&&this.audioPlayer.stop()},updateStatus:function(t,e){if(console.log("updateStatus",t,e),"over"!==e&&"start"!==e&&"error"!==t&&"error"!==e||(this.voiceLoading=!1),"error"===t||"error"===e)return this.isPlaying=!1,void this.$message.warning(this.$t("soundPlayFail"));this.isPlaying=t}}},d=(n(2326),n(0)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{style:t.playIconCustomStyle},[e("div",{staticClass:"player-icon",class:[{"player-icon-border":t.needBorder},t.customClass],on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleClickPlay.apply(null,arguments)}}},[t.playInitIcon?[e("i",{directives:[{name:"show",rawName:"v-show",value:!t.voiceLoading&&!t.isPlaying,expression:"!voiceLoading && !isPlaying"}],class:["iconfont","audio-paly-icon",t.playInitIcon]})]:t._e(),t._v(" "),t.playInitIcon?t._e():[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.voiceLoading&&!t.isPlaying,expression:"!voiceLoading && !isPlaying"}],staticClass:"icon-play-custom"})],t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.voiceLoading,expression:"voiceLoading"}],staticClass:"el-icon-loading"}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.voiceLoading&&t.isPlaying,expression:"!voiceLoading && isPlaying"}],staticClass:"icon-playing"},[e("i",{staticClass:"icon-1"}),t._v(" "),e("i",{staticClass:"icon-1"})])],2)])}),[],!1,null,"ccf7b042",null);e.a=component.exports},1569:function(t,e,n){t.exports={}},1570:function(t,e,n){t.exports={}},1572:function(t,e,n){t.exports={}},1573:function(t,e,n){t.exports={}},1574:function(t,e,n){t.exports={}},1575:function(t,e,n){t.exports={}},1576:function(t,e,n){t.exports={}},1577:function(t,e,n){t.exports={}},1578:function(t,e,n){t.exports={}},1579:function(t,e,n){t.exports={}},1580:function(t,e,n){t.exports={}},1581:function(t,e,n){t.exports={}},1582:function(t,e,n){t.exports={}},1585:function(t,e,n){t.exports={}},1586:function(t,e,n){t.exports={}},1587:function(t,e,n){t.exports={}},1588:function(t,e,n){t.exports={}},1589:function(t,e,n){t.exports={}},1590:function(t,e,n){t.exports={}},1591:function(t,e,n){t.exports={}},1592:function(t,e,n){t.exports={}},1594:function(t,e,n){t.exports={}},1595:function(t,e,n){t.exports={}},1596:function(t,e,n){t.exports={}},1597:function(t,e,n){t.exports={}},1598:function(t,e,n){t.exports={}},1599:function(t,e,n){t.exports={}},1600:function(t,e,n){t.exports={}},1601:function(t,e,n){t.exports={}},1628:function(t,e,n){t.exports={}},1629:function(t,e,n){t.exports={}},167:function(t,e,n){"use strict";n(10),n(18),n(9),n(11),n(12),n(8),n(6);var o=n(31),r=n(2),l=(n(7),n(4),n(1)),c={props:{temp:{type:Object,default:function(){return{title:"",desc:""}}}}},d=(n(2435),n(0)),h=Object(d.a)(c,(function(){var t,e,n,o,r=this,l=r._self._c;return l("div",{staticClass:"temp-head"},[null!==(t=r.temp)&&void 0!==t&&t.title?l("h2",{domProps:{innerHTML:r._s(r.$t(null===(e=r.temp)||void 0===e?void 0:e.title))}}):r._e(),r._v(" "),null!==(n=r.temp)&&void 0!==n&&n.desc?l("p",{domProps:{innerHTML:r._s(r.$t(null===(o=r.temp)||void 0===o?void 0:o.desc))}}):r._e()])}),[],!1,null,"78a76196",null).exports,v={props:{temp:{type:Object,default:function(){return[]}}}},m=(n(2436),Object(d.a)(v,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content class-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"class_temp_"+i,staticClass:"info-item"},[n("img",{attrs:{src:t.img,alt:e.$t(t.alt),loading:"lazy",width:"48",height:"48"}}),e._v(" "),n("p",{staticClass:"title"},[e._v(e._s(e.$t(t.title)))]),e._v(" "),n("p",{staticClass:"desc"},[e._v(e._s(e.$t(t.desc)))])])})),0)}),[],!1,null,"990bc046",null).exports),f={props:{temp:{type:Object,default:function(){return[]}}}},_=(n(2437),Object(d.a)(f,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content banner-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"banner_item_"+i,staticClass:"info-item"},[n("img",{attrs:{src:t.img,alt:e.$t(t.alt),loading:"lazy",width:"285",height:"220"}})])})),0)}),[],!1,null,"7ab65452",null).exports),y={props:{temp:{type:Object,default:function(){return[]}}},data:function(){return{activeIndex:-1}},methods:{expandItem:function(t){this.activeIndex=this.activeIndex===t?-1:t}}},w=(n(2438),Object(d.a)(y,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content fqa-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){var o;return n("div",{key:"fqa_temp_"+i,staticClass:"info-item"},[n("span",{staticClass:"off-btn",on:{click:function(t){return e.expandItem(i)}}},[e._v(e._s(e.activeIndex===i?"-":"+"))]),e._v(" "),n("div",{staticClass:"fqa-content"},[n("p",{staticClass:"fqa-title",domProps:{innerHTML:e._s(e.$t(t.title))},on:{click:function(t){return e.expandItem(i)}}}),e._v(" "),n("div",{staticClass:"answer-list",class:{answers:(null==t||null===(o=t.list)||void 0===o?void 0:o.length)>1,expand:e.activeIndex===i}},e._l(t.list,(function(t,o){return n("p",{key:"fqa_answer_"+o,attrs:{"data-index":o+1+"."},domProps:{innerHTML:e._s(e.$t(t))}})})),0)])])})),0)}),[],!1,null,"0ed33e47",null).exports),C={props:{temp:{type:Object,default:function(){return[]}}},computed:{toLocalePath:function(){var t=this;return function(path){return"#top"===path||path.includes("http")?path:t.localePath(path)}}},methods:{switchTools:function(path){"#top"!==path?path.includes("http")?window.open(path,"_blank"):window.open(location.origin+this.localePath(path),"_blank"):window.scrollTo(0,0)}}},x=(n(2439),Object(d.a)(C,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content tools-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("a",{key:"tools_temp_"+i,attrs:{href:e.toLocalePath(t.path)},on:{click:function(n){return n.preventDefault(),e.switchTools(t.path)}}},[n("div",{staticClass:"card-info"},[n("p",{staticClass:"title ellipsis",domProps:{innerHTML:e._s(e.$t(t.title))}}),e._v(" "),n("p",{staticClass:"desc",domProps:{innerHTML:e._s(e.$t(t.desc))}})]),e._v(" "),n("img",{attrs:{src:t.img,alt:t.alt,loading:"lazy",width:"125",height:"145"}})])})),0)}),[],!1,null,"a2de3f12",null).exports),k={props:{temp:{type:Object,default:function(){return[]}}}},O=(n(2440),Object(d.a)(k,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content step-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"step_temp_"+i,staticClass:"info-item",attrs:{"data-num":i+1}},[n("p",{staticClass:"title",domProps:{innerHTML:e._s(e.$t(null==t?void 0:t.title))}}),e._v(" "),n("p",{staticClass:"desc",domProps:{innerHTML:e._s(e.$t(null==t?void 0:t.desc))}})])})),0)}),[],!1,null,"2dbb9c0f",null).exports),I=(n(16),n(28),{props:{temp:{type:Object,default:function(){return{}}},isDetail:{type:Boolean,default:!0},radius:{type:Number,default:0},showRange:{type:Boolean,default:!0}},data:function(){return{sliderWidth:50,dragging:!1,scale:1,translate:{x:0,y:0,x1:0,y1:0}}},computed:{lowImg:function(){var t=this.temp,img=t.img;return t.imgA||img},highImg:function(){var t;return null===(t=this.temp)||void 0===t?void 0:t.imgB},altA:function(){var t=this.temp,e=t.alt,n=t.altA;return this.$t(n||e)},altB:function(){var t=this.temp,e=t.alt,n=t.altB;return this.$t(n||e)}},methods:{handleWheel:function(t){if(this.isDetail){var e=t.deltaY,n=e>0,o=e<0,r=this.scale;t.preventDefault(),n&&(this.scale=r>.4?r-.1:.4),o&&(this.scale=r<3?r+.1:3)}},startDrag:function(t){if(this.isDetail&&"range"!==t.target.getAttribute("data-type")){var e=this.translate,n=e.x,o=e.y;this.dragging=!0,this.translate.x1=t.clientX-n,this.translate.y1=t.clientY-o,document.addEventListener("mousemove",this.dragIng)}},dragIng:function(t){var e=this.translate,n=e.x1,o=e.y1;this.dragging&&(this.translate.x=t.clientX-n,this.translate.y=t.clientY-o)},endDrag:function(){this.dragging=!1,document.removeEventListener("mousemove",this.dragIng)},highImgloadEnd:function(){this.sliderWidth=50,document.querySelector("#afterImageId").style.opacity=1}}}),$=(n(2441),Object(d.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"diff-img-box",class:t.isDetail&&"has-detail",on:{wheel:t.handleWheel}},[e("div",{staticClass:"low-img-box flex_c_m",style:"clip-path: polygon(0px 0px, ".concat(t.sliderWidth,"% 0px, ").concat(t.sliderWidth,"% 100%, 0px 100%);")},[e("img",{staticClass:"img-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{src:t.lowImg,alt:t.altA,loading:"lazy",width:"1050",height:"600"}})]),t._v(" "),e("div",{staticClass:"high-img-box flex_c_m"},[e("img",{staticClass:"img-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{id:"afterImageId",src:t.highImg,alt:t.altB,loading:"lazy",width:"1050",height:"600"},on:{load:t.highImgloadEnd,error:t.highImgloadEnd}})]),t._v(" "),e("div",{staticClass:"step-box",on:{mousedown:t.startDrag,mouseup:t.endDrag}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRange,expression:"showRange"}],staticClass:"guide-line",style:"left: calc(".concat(t.sliderWidth,"% - 1px);")}),t._v(" "),e("input",{directives:[{name:"show",rawName:"v-show",value:t.showRange,expression:"showRange"},{name:"model",rawName:"v-model",value:t.sliderWidth,expression:"sliderWidth"}],staticClass:"image-view-slider",attrs:{"data-type":"range",type:"range",step:.01,min:0,max:100},domProps:{value:t.sliderWidth},on:{__r:function(e){t.sliderWidth=e.target.value}}})])])}),[],!1,null,"8e4769fa",null).exports),j={components:{CompareImage:$},props:{temp:{type:Object,default:function(){return[]}}},computed:{toLocalePath:function(){var t=this;return function(path){return"#top"===path||path.includes("http")?path:t.localePath(path)}}},methods:{skipPath:function(path){path&&("#top"!==path?path.includes("http")?window.open(path,"_blank"):window.open(location.origin+this.localePath(path),"_blank"):window.scrollTo(0,0))},getTitleInfo:function(text,t){var e=text.split(":"),n=e[0];return t?this.$t(e[1]||n):["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h3"}}},T=(n(2442),Object(d.a)(j,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content text-img-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:" text-img_item_"+i,staticClass:"info-item",class:{layout:t.layout},attrs:{id:"textImgItemId-".concat(i)}},[t.imgB?n("compare-image",{attrs:{temp:t,isDetail:!1}}):n("img",{attrs:{src:t.img,alt:e.$t(t.alt),loading:"lazy",width:"600",height:"400"}}),e._v(" "),n("div",{staticClass:"card-info"},[n(e.getTitleInfo(t.title),{tag:"component",domProps:{innerHTML:e._s(e.getTitleInfo(t.title,"text"))}}),e._v(" "),n("p",{staticClass:"ellipsis-line",domProps:{innerHTML:e._s(e.$t(t.desc))}}),e._v(" "),n("a",{staticClass:"btn",attrs:{href:e.toLocalePath(t.path)},on:{click:function(n){return n.preventDefault(),e.skipPath(null==t?void 0:t.path)}}},[e._v(e._s(e.$t(t.btnText)))])],1)],1)})),0)}),[],!1,null,"4215ea85",null).exports),L={components:{CompareImage:$},props:{temp:{type:Object,default:function(){return[]}}},data:function(){return{activeIndex:0}},computed:{labelInfo:function(){return this.temp.content[this.activeIndex]||{}}}},S=(n(2443),Object(d.a)(L,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content label-temp"},[n("div",{staticClass:"label-list"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(label,i){return n("div",{key:"label_temp_"+i,staticClass:"label-item",class:{"active-item":e.activeIndex===i},on:{click:function(t){e.activeIndex=i}}},[n("img",{attrs:{src:null==label?void 0:label.img,alt:e.$t(null==label?void 0:label.alt),loading:"lazy",width:"42",height:"42"}}),e._v(" "),n("span",[e._v(e._s(e.$t(null==label?void 0:label.title)))])])})),0),e._v(" "),n("div",{staticClass:"diff-show"},[e.labelInfo.imgB?n("compare-image",{attrs:{temp:e.labelInfo,isDetail:!1}}):n("img",{staticClass:"diff-img",attrs:{src:e.labelInfo.imgA,alt:e.$t(e.labelInfo.altA),loading:"lazy",width:"1050",height:"600"}})],1)])}),[],!1,null,"5ec348a4",null).exports),D={props:{temp:{type:Object,default:function(){return[]}}},data:function(){return{activeIndex:0}},computed:{labelInfo:function(){return this.temp.content[this.activeIndex]||{}}}},P=(n(2444),Object(d.a)(D,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content video-temp"},[n("video",{attrs:{src:e.temp.video,autoplay:"",loop:"",muted:"",controls:!1},domProps:{muted:!0}}),e._v(" "),n("div",{staticClass:"video-step"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"video_temp_"+i,staticClass:"step-item",attrs:{"data-index":i+1}},[n("p",{staticClass:"step-title",domProps:{innerHTML:e._s(e.$t(null==t?void 0:t.title))}}),e._v(" "),n("p",{staticClass:"step-desc",domProps:{innerHTML:e._s(e.$t(null==t?void 0:t.desc))}})])})),0)])}),[],!1,null,"20324d83",null).exports),E=(n(14),{props:{temp:{type:Object,default:function(){return[]}}},data:function(){return{offSet:0}},methods:{pagingComment:function(t){var e,n=this.$refs.scrollDom.clientWidth,o=parseInt((null===(e=this.temp)||void 0===e?void 0:e.content.length)/3)*n;this.offSet+=t*n,this.offSet<-o&&(this.offSet=-o),this.offSet>0&&(this.offSet=0)}}}),A=(n(2445),Object(d.a)(E,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content comment-temp"},[n("div",{staticClass:"comment-list"},[n("div",{ref:"scrollDom",staticClass:"scorll-body",style:{transform:"translateX(".concat(e.offSet,"px)")}},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"comment_temp_"+i,staticClass:"info-item"},[n("p",{staticClass:"title ellipsis-line"},[e._v(e._s(e.$t(t.title)))]),e._v(" "),n("div",{staticClass:"sender-info"},[n("img",{attrs:{src:t.img,alt:e.$t(t.name),loading:"lazy",width:"48",height:"48"}}),e._v(" "),n("p",{staticClass:"sender-name"},[e._v(e._s(e.$t(t.name)))]),e._v(" "),n("p",{staticClass:"sender-desc"},[e._v(e._s(e.$t(t.desc)))])])])})),0)]),e._v(" "),n("div",{staticClass:"paging-btn",on:{click:function(t){return e.pagingComment(1)}}},[n("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),n("div",{staticClass:"paging-btn right-btn",on:{click:function(t){return e.pagingComment(-1)}}},[n("i",{staticClass:"el-icon-arrow-right"})])])}),[],!1,null,"cf87df98",null).exports),R={props:{temp:{type:Object,default:function(){return[]}}},computed:{item:function(){var t;return null===(t=this.temp)||void 0===t?void 0:t.content[0]},toLocalePath:function(){var t=this;return function(path){return"#top"===path||path.includes("http")?path:t.localePath(path)}}},methods:{switchTools:function(path){"#top"!==path?path.includes("http")?window.open(path,"_blank"):window.open(location.origin+this.localePath(path),"_blank"):window.scrollTo(0,0)}}},M=(n(2446),Object(d.a)(R,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content download-temp"},[n("div",{staticClass:"download-info"},[n("h2",{domProps:{innerHTML:e._s(e.$t(e.temp.title))}}),e._v(" "),e.temp.desc?n("p",{staticClass:"desc"},[e._v(e._s(e.$t(e.temp.desc)))]):e._e(),e._v(" "),n("div",{staticClass:"downlaod-btns"},[n("a",{attrs:{href:e.toLocalePath(e.item.btnAPath)},on:{click:function(t){return t.stopPropagation(),e.switchTools(e.item.btnAPath)}}},[n("img",{attrs:{src:e.item.btnAimg,alt:"app store",loading:"lazy",width:"200",height:"60"}})]),e._v(" "),n("a",{attrs:{href:e.toLocalePath(e.item.btnBPath)},on:{click:function(t){return t.stopPropagation(),e.switchTools(e.item.btnBPath)}}},[n("img",{attrs:{src:e.item.btnBimg,alt:"google play",loading:"lazy",width:"200",height:"60"}})])]),e._v(" "),n("div",{staticClass:"download-code"},[n("img",{attrs:{src:e.item.codeimg,alt:e.$t(e.item.codeAlt),loading:"lazy",width:"203",height:"203"}}),e._v(" "),n("p",[e._v(e._s(e.$t(e.item.info)))])])]),e._v(" "),n("img",{attrs:{src:null===(t=e.item)||void 0===t?void 0:t.img,alt:e.$t(e.item.alt),loading:"lazy",width:"600",height:"400"}})])}),[],!1,null,"7c47f264",null).exports),N={props:{temp:{type:Object,default:function(){return[]}}}};n(2447);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var B={components:{TempHead:h,ClassTemp:m,BannerTemp:_,StepTemp:O,FqaTemp:w,ToolsTemp:x,TextImgTemp:T,LabelTemp:S,VideoTemp:P,CommentTemp:A,DownloadTemp:M,CardTemp:Object(d.a)(N,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content card-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("a",{key:"card_temp_"+i,staticClass:"info-item",attrs:{href:(null==t?void 0:t.linkPath)||"javascript:void(0)",target:null!=t&&t.linkPath?"_blank":"_self"}},[n("img",{attrs:{src:t.img,alt:e.$t(t.alt)}}),e._v(" "),n("div",{staticClass:"card-info"},[n("p",{staticClass:"title ellipsis"},[e._v(e._s(e.$t(t.title)))]),e._v(" "),n("el-popover",{attrs:{placement:"top-start",width:"264",trigger:"hover"}},[n("div",{staticClass:"desc-more"},[e._v(e._s(e.$t(t.desc)))]),e._v(" "),n("p",{staticClass:"desc",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.$t(t.desc)))])])],1)])})),0)}),[],!1,null,"d77ed446",null).exports},props:{tempList:{type:Array,default:function(){return[]}}},computed:F(F({},Object(l.e)("user",["token"])),{},{isShow:function(){var t=this.getRouteBaseName();return!this.token||"customSEO"===t},bgimg:function(){var t=this.tempList.filter((function(t){return"TEXT_IMG"===t.type&&t.cover}))||[],e=Object(o.a)(t,1)[0];return null==e?void 0:e.cover}}),data:function(){return{hideHeadTemp:["DOWNLOAD"],components:{CLASS_TAB:"ClassTemp",BANNER:"BannerTemp",FQA:"FqaTemp",TOOLS:"ToolsTemp",STEP:"StepTemp",TEXT_IMG:"TextImgTemp",LABEL_TAB:"LabelTemp",VIDEO_STEP:"VideoTemp",COMMENT:"CommentTemp",DOWNLOAD:"DownloadTemp",CARD_TAB:"CardTemp"},heightBgimg:0}},mounted:function(){this.getHeightBgimg()},methods:{getHeightBgimg:function(){var t=document.querySelector("#tempHead-0"),e=document.querySelector("#textImgItemId-0"),n=(t?t.clientHeight+80:0)+(e?e.clientHeight+200:0);this.heightBgimg=n}}},H=(n(2448),Object(d.a)(B,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"page-seo"},[t._l(t.tempList,(function(n,i){return e("div",{key:"temp_index_"+i,staticClass:"seo-temp"},[t.hideHeadTemp.includes(n.type)||!n.title&&!n.desc?t._e():e("temp-head",{attrs:{id:"tempHead-".concat(i),temp:n}}),t._v(" "),e(t.components[n.type],{tag:"component",attrs:{temp:n}})],1)})),t._v(" "),t.bgimg?e("div",{staticClass:"bgimg-box",style:{height:t.heightBgimg+"px"}},[e("img",{attrs:{src:t.bgimg}})]):t._e()],2)}),[],!1,null,"6450a884",null));e.a=H.exports},1904:function(t,e,n){"use strict";n.r(e);n(47),n(10),n(43);var o={name:"makeDigitalProcessModal",data:function(){return{visible:!1,width:"460px",info:null,iconUrl:n(748),iconFailedUrl:n(747),showStep:"process",timer:null,defineBackColor:"#22D19D"}},mixins:[n(2007).a],computed:{computedPercentage:function(){var t;return(null==this||null===(t=this.list[0])||void 0===t?void 0:t.process)||0},computedLeftTime:function(){var t,e=(null==this||null===(t=this.list[0])||void 0===t?void 0:t.time_left)||0;return Math.ceil(e/6e4)||0},showProcess:function(){return!0},customClass:function(){var t="make-digital-process-modal";return"process"===this.showStep&&(t="make-digital-process-modal make-digital-process-modal2"),t}},mounted:function(){var t=this;this.$EventBus.$on("openMakeDigitalProcessModal",(function(e){console.log(e,"6666"),t.openModal(e)})),this.$EventBus.$on("setMakeDigitalProcessList",(function(e){console.log(e,"9999999999"),t.$set(t,"list",e)}))},beforeDestroy:function(){this.$EventBus.$off("openMakeDigitalProcessModal"),this.$EventBus.$off("setMakeDigitalProcessList")},methods:{openModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t||{},n=e.type,o=void 0===n?"":n,r=e.info,l=void 0===r?{}:r;null!=t&&t.info&&(this.info=l,this.list=[l]),this.showStep=o,this.visible=!0},handleClose:function(){var t=this.list.findIndex((function(t){return[4].includes(null==t?void 0:t.state)}));this.visible=!1,-1!==t&&(this.$EventBus.$emit("updateAiPhotographyDigitalCloneList",this.list[t]),this.$EventBus.$emit("updateAiPhotographyDigitalCloneItem",this.list[t]),this.list.splice(t,1))},handleConfirm:function(){if("/fastTools"===this.$route.path&&["success","failed"].includes(this.showStep))return this.handleClose(),["success"].includes(this.showStep)&&this.$EventBus.$emit("backToAiPhotography"),void(["failed"].includes(this.showStep)&&this.$EventBus.$emit("openMakeDigitalCloneModal"));"/fastTools"!==this.$route.path&&["success","failed"].includes(this.showStep)&&(this.handleClose(),this.$router.push(this.localePath({path:"/fastTools",query:{type:"ai_photography"}})))}}},r=o,l=(n(2584),n(0)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,width:t.width,"custom-class":t.customClass,center:"","close-on-click-modal":!1,"close-on-press-escape":!1,modal:!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[e("div",{staticClass:"process-modal-body"},[e("span",{staticClass:"make-digital-process-modal-close",on:{click:t.handleClose}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),"process"===t.showStep?[e("div",{staticClass:"process-box"},[e("div",{staticClass:"process-box-title1"},[t._v(t._s(t.$t("photography51"))),e("span",{staticClass:"message-process-loading-span"})]),t._v(" "),e("div",{staticClass:"process-box-title2"},[t._v("\n            "+t._s(t.$t("photography52",{number:t.computedLeftTime}))+"\n          ")]),t._v(" "),e("div",{staticClass:"process-box-main"},[e("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.showProcess,expression:"showProcess"}],staticClass:"ai-filter-card-progress",attrs:{type:"circle",percentage:t.computedPercentage,width:104,"stroke-width":11,"define-back-color":"#555967",color:t.defineBackColor}})],1)])]:t._e(),t._v(" "),"success"===t.showStep?[e("div",{staticClass:"result-box"},[e("div",{staticClass:"result-box-icon"},[e("img",{attrs:{src:t.iconUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"result-box-title-1"},[t._v(t._s(t.$t("photography49")))]),t._v(" "),e("div",{staticClass:"result-box-title-2"},[t._v(t._s(t.$t("photography50")))]),t._v(" "),e("div",{staticClass:"result-box-confirm-btn",on:{click:function(e){return e.stopPropagation(),t.handleConfirm.apply(null,arguments)}}},[t._v(t._s(t.$t("photography48")))])])]:t._e(),t._v(" "),"failed"===t.showStep?[e("div",{staticClass:"result-box"},[e("div",{staticClass:"result-box-icon"},[e("img",{attrs:{src:t.iconFailedUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"result-box-title-1",staticStyle:{color:"#F15A5A"}},[t._v(t._s(t.$t("photography46")))]),t._v(" "),e("div",{staticClass:"result-box-confirm-btn result-box-remake-btn",on:{click:function(e){return e.stopPropagation(),t.handleConfirm.apply(null,arguments)}}},[t._v(t._s(t.$t("photography47")))])])]:t._e()],2)])}),[],!1,null,null,null);e.default=component.exports},207:function(t,e,n){"use strict";var o=n(3),r=(n(20),n(16),n(4),n(29),n(5)),l={props:{fileName:{type:String,default:""}},data:function(){return{url:"",scale:1,translateX:0,translateY:0,originX:50,originY:50,isShow:!1,dragging:!1,lastX:0,lastY:0,clickTime:0,width:0,height:0,realWidth:0,realHeight:0,initInfo:{width:0,height:0,x:0,y:0}}},computed:{imageStyle:function(){return{transform:"translate3d(".concat(this.translateX,"px, ").concat(this.translateY,"px, 0) scale3d(").concat(this.scale,", ").concat(this.scale,", 1) "),transformOrigin:"".concat(this.originX,"% ").concat(this.originY,"%"),width:this.width+"px",height:this.height+"px"}},imageClass:function(){return{"move-mouse":1!==this.scale}}},mounted:function(){window.addEventListener("resize",this.handleResize),document.addEventListener("keydown",this.handleEscKey)},methods:{handleEscKey:function(t){"Escape"!==t.key&&27!==t.keyCode||this.hide()},handleResize:function(t){2!==this.scale&&this.initFull()},initFull:function(t){var e=window.innerWidth,n=window.innerHeight,o=this.realWidth,r=this.realHeight,l=o/r,c=e,d=n;l>=1?d=(c=o>e?e:o)/l:c=(d=r>n?n:r)*l,this.width=c,this.height=d,this.translateX=(e-c)/2,this.translateY=(n-d)/2},show:function(t,e){var n=arguments,r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var l,c,d,h,v,m,f,_,y;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=n.length>2&&void 0!==n[2]?n[2]:1,r.url=t,e&&(c=e.getBoundingClientRect(),d=c.width,h=c.height,v=c.x,m=c.y,r.initInfo={width:d,height:h,x:v,y:m},r.init()),o.next=5,r.getImageSize();case 5:f=o.sent,_=f.width,y=f.height,r.realWidth=_,r.realHeight=y,r.isShow=!0,setTimeout((function(){r.scale=l,r.initFull()}),100);case 12:case"end":return o.stop()}}),o)})))()},hide:function(){var t=this;this.init(),setTimeout((function(){t.isShow=!1}),100)},getImageSize:function(){var t=this;return new Promise((function(e,n){var img=new Image;img.src=t.url,img.onload=function(){t.realWidth=img.width,t.realHeight=img.height,e({width:img.width,height:img.height})},img.onerror=function(){n()}}))},init:function(){var t=this.initInfo,e=t.width,n=t.height,o=t.x,r=t.y;this.width=e,this.height=n,this.translateX=o,this.translateY=r,this.scale=1,this.originX=50,this.originY=50},imgLoad:function(){},onWheel:function(t,e){if(t.preventDefault(),1!==this.scale){var n=t.deltaY;this.translateY-=n,this.resetPosition()}},zoom:function(t,e){var n=this.$refs.imageContainer.getBoundingClientRect(),o=n.width,r=n.height;this.scale=1===this.scale?2:1,this.originX=2===this.scale&&t?t/o*100:50,this.originY=2===this.scale&&e?e/r*100:50,this.translateX=(window.innerWidth-this.width)/2,this.translateY=(window.innerHeight-this.height)/2},handle:function(t){switch(t){case"ZOOM":this.$logEvent("log_actions",{operation:"click_resizing",behavior_info:"on_work_detail_page"}),this.zoom(0,0);break;case"DOWNLOAD":this.download();break;case"CLOSE":this.hide()}},download:function(){var t=this.fileName||(new Date).getTime()+".png";Object(r.z)(this.url,t)},onMouseDown:function(t){this.startDragging(t)},startDragging:function(t){this.dragging=!0,this.clickTime="",this.lastX=t.clientX,this.lastY=t.clientY,2===this.scale&&this.$refs.imageBox.classList.add("grabbing"),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseMove:function(t){if(this.dragging&&1!==this.scale){this.clickTime=(new Date).getTime();var e=t.clientX-this.lastX,n=t.clientY-this.lastY,o=this.translateX+e,r=this.translateY+n;this.translateX=o,this.translateY=r,this.lastX=t.clientX,this.lastY=t.clientY}},onMouseUp:function(t){this.dragging=!1,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),this.$refs.imageBox.classList.remove("grabbing"),this.clickTime?this.resetPosition():this.handleScale(t)},resetPosition:function(){var t=this.$refs.imageBox.getBoundingClientRect(),e=t.width,n=t.height;if(1!==this.scale){var o=(50-this.originX)*this.width/100,r=(50-this.originY)*this.height/100;if(console.log(e,n,window.innerWidth,window.innerHeight,this.width,this.height,"this.originY: "+this.originY,"this.originX: "+this.originX),e<window.innerWidth)this.translateX=(window.innerWidth-e/2)/2;else{var l=-(e-window.innerWidth-e/4),c=this.width>window.innerWidth?-e/4:l,d=e/4;c-=o,d-=o;var h=this.translateX<c?c:this.translateX>d?d:this.translateX;this.translateX=h}if(n<window.innerHeight)this.translateY=(window.innerHeight-n/2)/2;else{var v=-(n-window.innerHeight-n/4),m=this.height>window.innerHeight?-n/4:v,f=n/4;m-=r,f-=r;var _=this.translateY<m?m:this.translateY>f?f:this.translateY;this.translateY=_}}},handleScale:function(t){var e=this.$refs.imageContainer.getBoundingClientRect(),n=e.left,o=e.top,r=t.clientX-n,l=t.clientY-o;this.zoom(r,l)}},beforeDestroy:function(){document.removeEventListener("keydown",this.handleEscKey)}},c=l,d=(n(2338),n(0)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"modal-fade"}},[t.isShow?e("div",{ref:"imageContainer",staticClass:"view-image",on:{wheel:t.onWheel}},[e("img",{ref:"imageBox",class:t.imageClass,style:t.imageStyle,attrs:{src:t.url,alt:"",draggable:"false"},on:{load:t.imgLoad,mousedown:t.onMouseDown}}),t._v(" "),e("div",{staticClass:"handle-btns"},[e("span",{staticClass:"btn-box download-btn",on:{click:function(e){return t.handle("DOWNLOAD")}}},[e("i",{staticClass:"iconfont icon-modelDownload"})]),t._v(" "),e("span",{staticClass:"btn-box zoom-btn",on:{click:function(e){return t.handle("ZOOM")}}},[e("i",{staticClass:"iconfont",class:1===t.scale?"icon-icon-enlarge":"icon-a-icon-Zoomout"})]),t._v(" "),e("span",{staticClass:"btn-box delete-btn",on:{click:function(e){return t.handle("CLOSE")}}},[e("i",{staticClass:"iconfont icon-close"})])])]):t._e()])}),[],!1,null,"1c3c4f68",null);e.a=component.exports},2326:function(t,e,n){"use strict";n(993)},2330:function(t,e,n){"use strict";n(997)},2331:function(t,e,n){"use strict";n(998)},2332:function(t,e,n){"use strict";n(999)},2333:function(t,e,n){"use strict";n(1e3)},2338:function(t,e,n){"use strict";n(1005)},2396:function(t,e,n){"use strict";n(1062)},2397:function(t,e,n){"use strict";n(1063)},2398:function(t,e,n){"use strict";n(1064)},2399:function(t,e,n){"use strict";n(1065)},2400:function(t,e,n){"use strict";n(1066)},2401:function(t,e,n){"use strict";n(1067)},2403:function(t,e,n){"use strict";n(1069)},2404:function(t,e,n){"use strict";n(1070)},2405:function(t,e,n){"use strict";n(1072)},2406:function(t,e,n){"use strict";n(1073)},2414:function(t,e,n){"use strict";n(1081)},2415:function(t,e,n){"use strict";n(1082)},2416:function(t,e,n){"use strict";n(1083)},2435:function(t,e,n){"use strict";n(1103)},2436:function(t,e,n){"use strict";n(1104)},2437:function(t,e,n){"use strict";n(1105)},2438:function(t,e,n){"use strict";n(1106)},2439:function(t,e,n){"use strict";n(1107)},2440:function(t,e,n){"use strict";n(1108)},2441:function(t,e,n){"use strict";n(1109)},2442:function(t,e,n){"use strict";n(1110)},2443:function(t,e,n){"use strict";n(1111)},2444:function(t,e,n){"use strict";n(1112)},2445:function(t,e,n){"use strict";n(1113)},2446:function(t,e,n){"use strict";n(1114)},2447:function(t,e,n){"use strict";n(1115)},2448:function(t,e,n){"use strict";n(1116)},2505:function(t,e,n){"use strict";n(1170)},2506:function(t,e,n){"use strict";n(1171)},2514:function(t,e,n){"use strict";n(1180)},2515:function(t,e,n){"use strict";n(1181)},2518:function(t,e,n){"use strict";n(1183)},2533:function(t,e,n){"use strict";n(1198)},2546:function(t,e,n){"use strict";n(1210)},2547:function(t,e,n){"use strict";n(1211)},2569:function(t,e,n){"use strict";n(1231)},2570:function(t,e,n){"use strict";n(1232)},2571:function(t,e,n){"use strict";n(1233)},2572:function(t,e,n){"use strict";n(1234)},2574:function(t,e,n){"use strict";n(1235)},2575:function(t,e,n){"use strict";n(1236)},2576:function(t,e,n){"use strict";n(1237)},2577:function(t,e,n){"use strict";n(1238)},2578:function(t,e,n){"use strict";n(1239)},2579:function(t,e,n){"use strict";n(1240)},2580:function(t,e,n){"use strict";n(1241)},2582:function(t,e,n){"use strict";n(1242)},2583:function(t,e,n){"use strict";n(1243)},2584:function(t,e,n){"use strict";n(1244)},2585:function(t,e,n){"use strict";n(1245)},2587:function(t,e,n){"use strict";n(1247)},2588:function(t,e,n){"use strict";n(1248)},2589:function(t,e,n){"use strict";n(1249)},2590:function(t,e,n){"use strict";n(1250)},2591:function(t,e,n){"use strict";n(1251)},2593:function(t,e,n){"use strict";n(1252)},2594:function(t,e,n){"use strict";n(1253)},2595:function(t,e,n){"use strict";n(1254)},2596:function(t,e,n){"use strict";n(1255)},2597:function(t,e,n){"use strict";n(1256)},2598:function(t,e,n){"use strict";n(1257)},2599:function(t,e,n){"use strict";n(1258)},2600:function(t,e,n){"use strict";n(1259)},2601:function(t,e,n){"use strict";n(1260)},2602:function(t,e,n){"use strict";n(1261)},2603:function(t,e,n){"use strict";n(1262)},2604:function(t,e,n){"use strict";n(1263)},2605:function(t,e,n){"use strict";n(1264)},2606:function(t,e,n){"use strict";n(1265)},2607:function(t,e,n){"use strict";n(1266)},261:function(t,e,n){"use strict";n(9),n(11),n(12),n(8),n(6);var o=n(3),r=n(2),l=(n(20),n(16),n(7),n(10),n(4),n(18),n(14),{name:"cardItem",props:{cardInfo:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{shows:function(){return!this.$route.path.includes(this.cardInfo.path)},path:function(){var t=this.cardInfo,path=t.path,e=t.id;return path?"/ai-tools/".concat(path):"/workFlowAppDetail/".concat(e)}},mounted:function(){},methods:{switchTools:function(){this.$router.push(this.localePath(this.path)),this.$emit("changeTools",this.cardInfo)},getWidth:function(){var t;var e=~~((null===(t=this.$parent)||void 0===t||null===(t=t.$refs)||void 0===t||null===(t=t.cnt)||void 0===t?void 0:t.offsetWidth)/4-12);return e>233?e:233},getHeight:function(){var t=this.getWidth();return parseInt(175*t/430)},goPage:function(){if(this.cardInfo.path)return this.$router.push(this.localePath({path:"/ai-tools/"+this.cardInfo.path}));this.$router.push(this.localePath({path:"/workFlowAppDetail/".concat(this.cardInfo.id)}))}}}),c=(n(2570),n(0)),component=Object(c.a)(l,(function(){var t,e,n,o=this,r=o._self._c;return o.shows?r("div",{staticClass:"c-card-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),o.switchTools.apply(null,arguments)}}},[r("a",{attrs:{href:o.localePath(o.path)}},[r("div",{staticClass:"card-item-describe"},[r("div",{staticClass:"main-title"},[r("span",{staticClass:"main-title-text ellipsis"},[o._v("\n          "+o._s(o.$t(o.cardInfo.title)||(null===(t=o.cardInfo)||void 0===t||null===(t=t.comfy_ui)||void 0===t?void 0:t.name))+"\n        ")])]),o._v(" "),r("div",{staticClass:"sub-title ellipsis-multiline",class:{"ellipsis-multiline-6":o.getHeight()>129}},[o._v("\n        "+o._s(o.$t(o.cardInfo.subTitle)||(null===(e=o.cardInfo)||void 0===e||null===(e=e.comfy_ui)||void 0===e?void 0:e.desc))+"\n      ")])]),o._v(" "),r("div",{staticClass:"card-item-banner"},[r("img",{attrs:{src:o.cardInfo.cover,alt:null===(n=o.cardInfo)||void 0===n||null===(n=n.comfy_ui)||void 0===n?void 0:n.name}})])])]):o._e()}),[],!1,null,"5f865ecc",null),d=component.exports,h=n(1),v=n(21),m=n(74),f=n(13);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={name:"cardList",components:{cardItem:d},props:{isShowApplication:{type:Boolean,default:!0},list:{type:Array,default:function(){return[]}},hasOver:{type:Boolean,default:!1}},computed:y(y(y({},Object(h.c)("user",["cdnHostFun"])),Object(h.c)("user",["isCompanyAccount"])),{},{cardList:function(){var t=[{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("ai-video-generator")),title:"ai_video_generation",subTitle:"ai_video_generation_desc",type:"ai_video_generation",dataLoggingName:"ai_video_generation",path:"ai-video-generator"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("ai-face-swap")),title:"ai_face_changing",subTitle:"ai_face_changing_desc",type:"ai_face_changing",dataLoggingName:"ai_face_changing",path:"ai-face-swap"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("ai-filter")),title:"ai_tools_4",subTitle:"ai_tools_8",type:"ai_filter",dataLoggingName:"ai_filters",path:"ai-filter"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("ai-dance")),title:"ai_dance_fitting_title",subTitle:"ai_dance_fitting_desc",type:"aiDance",path:"ai-dance"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("ai-model-fitting")),title:"ai_model_fitting_title",subTitle:"ai_model_fitting_desc",type:"aiModelFitting",path:"ai-model-fitting"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("remove-background")),title:"ai_tools_2",subTitle:"ai_tools_6",type:"remove_background",dataLoggingName:"remove_background",path:"remove-background"},{source1:"",cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("ai_erase")),title:"ai_erase",subTitle:"ai_erase_tip",type:"ai_erase",dataLoggingName:"",path:"ai_erase"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("image-upscaler")),title:"upsacler_3_H1",subTitle:"upsacler_4_H1_value",type:"hd_restoration",dataLoggingName:"hd_restoration",path:"image-upscaler"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("ai-makeup")),title:"ai_makeup",subTitle:"ai_makeup_desc",type:"ai-makeup",dataLoggingName:"ai-makeup",path:"ai-makeup"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("ai-portrait")),title:"ai_tools_10",subTitle:"ai_tools_11",type:"ai_photography",dataLoggingName:"ai_photography",path:"ai-portrait"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("scribble2img")),title:"ai_tools_3",subTitle:"ai_tools_7",type:"character_fixes",dataLoggingName:"from_sketch_to_artwork",path:"scribble2img"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("ai-comic")),title:"ai_comic_fitting_title",subTitle:"ai_comic_fitting_desc",type:"aiComic",path:"ai-comic"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("text2img")),title:"Text2imgTitle",subTitle:"Text2imgDesc",type:"easy_creation",dataLoggingName:"text_2_img",path:"text2img"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(f.D)("sora")),title:"toolsPage3",subTitle:"toolsPage4",type:"sora",path:"sora"}];return this.isCompanyAccount?t.filter((function(t){return!["ai_photography"].includes(t.type)})):t}}),data:function(){return{appList:[],paramsData:{page:1,page_size:50,order_by:"top"},isHaveMore:this.hasOver}},mounted:function(){this.appList=this.list,window.addEventListener("scroll",Object(m.throttle)(this.isScrollBottom,500))},beforeDestroy:function(){window.removeEventListener("scroll",this.isScrollBottom)},methods:{switchTools:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},path=this.$route.path.includes("/sora"),source={operation:path?"click_recommend_value":"click_tools",behavior_info:path?"on_sora":t.dataLoggingName,behavior_info_sub:path?t.dataLoggingName:void 0};this.$logEvent("log_actions",source)},getAppList:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.length>0&&void 0!==t[0]&&t[0],n.prev=1,n.next=4,Object(v.m)(e.paramsData);case 4:r=n.sent,l=r.data,c=l.items,d=l.has_more,o||(e.paramsData.page=1),e.isHaveMore=d,e.appList=o?e.appList.concat(c):c,e.scrollToCommunity(),n.next=16;break;case 14:n.prev=14,n.t0=n.catch(1);case 16:case"end":return n.stop()}}),n,null,[[1,14]])})))()},isScrollBottom:function(){var t,e;if(this.isHaveMore&&null!==(t=this.$refs)&&void 0!==t&&t.aiList){var n=(null===(e=this.$refs)||void 0===e?void 0:e.aiList)||{},o=n.clientHeight;n.scrollTop+o>=n.scrollHeight&&(this.paramsData.page+=1,this.getAppList(!0))}},scrollToCommunity:function(){var t=this.$route.query,e=void 0===t?{}:t;null!=e&&e.type&&"community"===(null==e?void 0:e.type)&&this.$nextTick((function(){var t=document.querySelector("#officialAiboxId").offsetTop-20;window.scrollTo({top:t,behavior:"smooth"})}))}}},C=w,x=(n(2571),Object(c.a)(C,(function(){var t=this,e=t._self._c;return e("div",{ref:"aiList",staticClass:"aiList"},[t.isShowApplication?e("h2",{staticClass:"title"},[t._v(t._s(t.$t("toolsPage1")))]):t._e(),t._v(" "),t.isShowApplication?e("div",{staticClass:"desc"},[t._v(t._s(t.$t("swift_ai_apps_newsub")))]):t._e(),t._v(" "),e("div",{ref:"cnt",staticClass:"c-fast-tools-card-list"},t._l(t.cardList,(function(t){return e("card-item",{key:t.type,attrs:{"card-info":t}})})),1),t._v(" "),t.isShowApplication?e("div",{attrs:{id:"officialAiboxId"}},[e("h2",{staticClass:"title"},[t._v(t._s(t.$t("Community_AI")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("commu_ai_apps_newsub")))]),t._v(" "),e("div",{staticClass:"c-fast-tools-card-list"},t._l(t.appList,(function(t){return e("card-item",{key:t.id,attrs:{"card-info":t}})})),1)]):t._e()])}),[],!1,null,"10bc3242",null));e.a=x.exports},2610:function(t,e,n){"use strict";n(1268)},2611:function(t,e,n){"use strict";n(1269)},2612:function(t,e,n){"use strict";n(1270)},2613:function(t,e,n){"use strict";n(1271)},2614:function(t,e,n){"use strict";n(1272)},2615:function(t,e,n){"use strict";n(1273)},2628:function(t,e,n){"use strict";n(1286)},2629:function(t,e,n){"use strict";n(1287)},2630:function(t,e,n){"use strict";n(1288)},2631:function(t,e,n){"use strict";n(1289)},2632:function(t,e,n){"use strict";n(1290)},2633:function(t,e,n){"use strict";n(1291)},2634:function(t,e,n){"use strict";n(1292)},2635:function(t,e,n){"use strict";n(1293)},2636:function(t,e,n){"use strict";n(1294)},2637:function(t,e,n){"use strict";n(1295)},2638:function(t,e,n){"use strict";n(1296)},2639:function(t,e,n){"use strict";n(1297)},2640:function(t,e,n){"use strict";n(1298)},2642:function(t,e,n){"use strict";n(1300)},2643:function(t,e,n){"use strict";n(1301)},2644:function(t,e,n){"use strict";n(1302)},2646:function(t,e,n){"use strict";n(1304)},2647:function(t,e,n){"use strict";n(1305)},2648:function(t,e,n){"use strict";n(1306)},2649:function(t,e,n){"use strict";n(1307)},2650:function(t,e,n){"use strict";n(1308)},2651:function(t,e,n){"use strict";n(1309)},2652:function(t,e,n){"use strict";n(1310)},2653:function(t,e,n){"use strict";n(1311)},2654:function(t,e,n){"use strict";n(1312)},2655:function(t,e,n){"use strict";n(1313)},2656:function(t,e,n){"use strict";n(1314)},2658:function(t,e,n){"use strict";n(1316)},2659:function(t,e,n){"use strict";n(1317)},2660:function(t,e,n){"use strict";n(1318)},2730:function(t,e,n){"use strict";n(1386)},2731:function(t,e,n){"use strict";n(1387)},2732:function(t,e,n){"use strict";n(1388)},2733:function(t,e,n){"use strict";n(1389)},2734:function(t,e,n){"use strict";n(1390)},2735:function(t,e,n){"use strict";n(1391)},2736:function(t,e,n){"use strict";n(1392)},2737:function(t,e,n){"use strict";n(1393)},2738:function(t,e,n){"use strict";n(1394)},2739:function(t,e,n){"use strict";n(1395)},2740:function(t,e,n){"use strict";n(1396)},2741:function(t,e,n){"use strict";n(1397)},2742:function(t,e,n){"use strict";n(1398)},2743:function(t,e,n){"use strict";n(1399)},2744:function(t,e,n){"use strict";n(1400)},2745:function(t,e,n){"use strict";n(1401)},2746:function(t,e,n){"use strict";n(1402)},2747:function(t,e,n){"use strict";n(1403)},2748:function(t,e,n){"use strict";n(1404)},2749:function(t,e,n){"use strict";n(1405)},2750:function(t,e,n){"use strict";n(1406)},2751:function(t,e,n){"use strict";n(1407)},2752:function(t,e,n){"use strict";n(1408)},2753:function(t,e,n){"use strict";n(1409)},2754:function(t,e,n){"use strict";n(1410)},2917:function(t,e,n){"use strict";n(1569)},2918:function(t,e,n){"use strict";n(1570)},2920:function(t,e,n){"use strict";n(1572)},2921:function(t,e,n){"use strict";n(1573)},2922:function(t,e,n){"use strict";n(1574)},2924:function(t,e,n){"use strict";n(1575)},2925:function(t,e,n){"use strict";n(1576)},2926:function(t,e,n){"use strict";n(1577)},2927:function(t,e,n){"use strict";n(1578)},2928:function(t,e,n){"use strict";n(1579)},2929:function(t,e,n){"use strict";n(1580)},2930:function(t,e,n){"use strict";n(1581)},2931:function(t,e,n){"use strict";n(1582)},2932:function(t,e,n){"use strict";n(1585)},2933:function(t,e,n){"use strict";n(1586)},2934:function(t,e,n){"use strict";n(1587)},2935:function(t,e,n){"use strict";n(1588)},2936:function(t,e,n){"use strict";n(1589)},2937:function(t,e,n){"use strict";n(1590)},2938:function(t,e,n){"use strict";n(1591)},2939:function(t,e,n){"use strict";n(1592)},2941:function(t,e,n){"use strict";n(1594)},2942:function(t,e,n){"use strict";n(1595)},2943:function(t,e,n){"use strict";n(1596)},2944:function(t,e,n){"use strict";n(1597)},2945:function(t,e,n){"use strict";n(1598)},2946:function(t,e,n){"use strict";n(1599)},2947:function(t,e,n){"use strict";n(1600)},2948:function(t,e,n){"use strict";n(1601)},2976:function(t,e,n){"use strict";n(1628)},2977:function(t,e,n){"use strict";n(1629)},3250:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12),n(8),n(6);var o=n(3),r=n(2),l=(n(20),n(10),n(19),n(14),n(4),n(23),n(18),n(37),n(1)),c=n(38),d=(n(16),n(32),n(5));function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"WorkAreaDialog",components:{UserPopover:n(185).a},data:function(){return{formatNumberForeign:d.i,coins:[{name:"credit",icon:n(121),type:"calculateCoins",desc:"new_credit_desc"},{name:"stamina",icon:n(226),type:"tempCoins",desc:"new_stamina_desc"}]}},computed:v(v(v({},Object(l.e)("payment",["paymentInfo"])),Object(l.c)("user",["isLoggedIn","isCompanyAccount"])),{},{getCoinTitle:function(){var t=this;return function(e){return t.$t(e.type)+"："+t.$t("balance")+" "+(t.paymentInfo[e.type]||0)+", "+t.$t(e.desc)}}}),methods:{closeDialog:function(){this.$emit("closeDialog")},toMall:function(){this.$logEvent("log_actions",{operation:"subscription_page_show",behavior_info:location.href}),this.$router.push(this.localePath("/mall"))},toFeedback:function(){window.open("https://aihelp.net/questionnaire/#/?formId=8cafbb34d13a4225a9867115f4a12161","_blank")}}},f=(n(2637),n(0)),_=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dialog-top"},[e("div",{staticClass:"dialog-top-left flex-center",on:{click:t.closeDialog}},[e("i",{staticClass:"iconfont icon-back"})]),t._v(" "),e("div",{staticClass:"dialog-top-right"},[e("div",{staticClass:"feed-back flex-center",on:{click:t.toFeedback}},[e("i",{staticClass:"iconfont icon-icon_wenjuan"}),t._v(" "),e("span",[t._v(t._s(t.$t("Feedback")))])]),t._v(" "),e("div",{staticClass:"coins-container"},t._l(t.coins,(function(n){return e("div",{key:n.name,staticClass:"item-coin flex-center",class:n.name,attrs:{title:t.getCoinTitle(n)},on:{click:function(e){return t.toMall(n)}}},[e("img",{staticClass:"icon",attrs:{src:n.icon,alt:n.name}}),t._v(" "),e("div",{staticClass:"number"},[t._v("\n\t\t\t\t\t"+t._s(t.formatNumberForeign(t.paymentInfo[n.type])||0)+"\n\t\t\t\t")])])})),0),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isCompanyAccount,expression:"!isCompanyAccount"}],staticClass:"user-balance",on:{click:t.toMall}},[e("img",{staticClass:"vip-icon",attrs:{alt:"vip icon",src:n(397)}})]),t._v(" "),t.isLoggedIn?e("UserPopover",{attrs:{signOutTo:""}}):t._e()],1)])}),[],!1,null,"4ade333b",null).exports;function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={name:"WorkAreaContentTabs",props:{currentTab:{type:String,default:"modelImage"}},data:function(){return{}},computed:w(w({},Object(l.e)("user",["cdnHost"])),{},{tabs:function(){return[{key:"productImage",label:"ProductImage",icon:"icon-icon_shangpin"},{key:"modelFitting",label:"ModelFitting",icon:"icon-icon_moteshiyi",children:[{key:"modelImage",label:"ModelImage",img:"https://".concat(this.cdnHost,"/static/upload/20240422/7fff939c-6aa5-42cf-baa8-a2164b1f9378.jpg"),hoverBeforeImg:"https://".concat(this.cdnHost,"/static/upload/20240422/0f425269-c43a-4453-84b9-6cf1f74de0fa.jpg"),hoverAfterImg:"https://".concat(this.cdnHost,"/static/upload/20240422/7fff939c-6aa5-42cf-baa8-a2164b1f9378.jpg")}]},{key:"creationRecord",label:"CreationRecord",icon:"icon-qulishirenwu"}]},isActive:function(){var t=this;return function(e){var n=e.key;return e.children?e.children.some((function(i){return i.key===t.currentTab})):n===t.currentTab}},getArrowSrc:function(){return"https://".concat(this.cdnHost,"/static/upload/20240422/d87140ec-71a3-4020-a2bc-6f7dc6c61f22.webp")}}),methods:{tabClick:function(t){var e=t.key,n=t.children;"productImage"!=e?n?this.$emit("changeCurrentTab",n[0].key):this.$emit("changeCurrentTab",e):this.$message.warning(this.$t("gpt_waiting"))},childrenClick:function(i){this.$emit("changeCurrentTab",i.key)}}},x=(n(2638),Object(f.a)(C,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dialog-content-tabs"},[e("div",{staticClass:"content-tab"},t._l(t.tabs,(function(n){return e("div",{key:n.key,staticClass:"item-tab",class:{active:t.isActive(n)},on:{click:function(e){return t.tabClick(n)}}},[n.children?e("div",{staticClass:"item-children-box"},[e("div",{staticClass:"item-tab-box"},[e("i",{staticClass:"iconfont item-tab-box-icon",class:[n.icon]}),t._v(" "),e("div",{staticClass:"item-tab-box-label"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t(n.label))+"\n\t\t\t\t\t")])]),t._v(" "),t._l(n.children,(function(i){return e("div",{key:i.key,staticClass:"item-children",on:{click:function(e){return e.stopPropagation(),t.childrenClick(i)}}},[e("el-popover",{attrs:{placement:"right","popper-class":"model-fitting-hover-popover","append-to-body":!1,"visible-arrow":!1,trigger:"hover"}},[e("div",{staticClass:"content"},[e("img",{staticClass:"arrow",attrs:{src:t.getArrowSrc,alt:""}}),t._v(" "),e("img",{staticClass:"before-img image",attrs:{src:i.hoverBeforeImg,alt:""}}),t._v(" "),e("img",{staticClass:"after-img image",attrs:{src:i.hoverAfterImg,alt:""}})]),t._v(" "),e("div",{attrs:{slot:"reference"},slot:"reference"},[e("img",{class:{active:t.currentTab===i.key},attrs:{src:i.img,alt:"image"}}),t._v(" "),e("div",{staticClass:"item-tab-box-label"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t(i.label))+"\n\t\t\t\t\t\t\t")])])])],1)}))],2):e("div",{staticClass:"item-tab-box"},[e("i",{staticClass:"iconfont item-tab-box-icon",class:[n.icon]}),t._v(" "),e("div",{staticClass:"item-tab-box-label"},[t._v("\n\t\t\t\t\t"+t._s(t.$t(n.label))+"\n\t\t\t\t")])])])})),0)])}),[],!1,null,"0c4d058f",null).exports),k=(n(85),n(101),n(75),n(36),n(49),n(50),n(48),n(29),n(140)),O=n(22),I=n(24);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={name:"ModelImageResAll",props:{type:{type:String,default:""},selectedModels:{type:Array,default:function(){return[]}},selectedScene:{type:String,default:""}},inject:["top"],data:function(){return{debounceHandleScroll:function(){},page:1,list:[],tags:[]}},mounted:function(){this.debounceHandleScroll=Object(I.debounce)(this.handleScroll,600),this.getFilters()},destroyed:function(){this.debounceHandleScroll=function(){}},computed:{isModel:function(){return"model"==this.type},selectedTags:function(){var t=[];return this.tags.forEach((function(e){e.vals.forEach((function(i){var n;t.push({category:e.label,id:i,label:(null===(n=e.options.find((function(t){return t.id==i})))||void 0===n?void 0:n.val)||""})}))})),t},isSelected:function(){var t=this;return function(e){return t.isModel?t.selectedModels.find((function(i){return i.id==e})):t.selectedScene===e}},isShowCost:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.width,o=void 0===n?0:n,r=e.height,l=void 0===r?0:r;return this.selectedModels.length&&o&&l},getEstimatedCost:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.width,o=void 0===n?0:n,r=e.height,l=void 0===r?0:r,c=this.selectedModels.length,d=[1,1.5,2.5],h=Math.max(o,l);if(h<=768){return 30*d[c-1]}if(h<=1024){return 36*d[c-1]}if(h<=1328){return 54*d[c-1]}if(h<=1536){return 78*d[c-1]}if(h<=1736){return 84*d[c-1]}return 108*d[c-1]}},watch:{type:{handler:function(t){t?this.getList():this.clearData()},immediate:!0}},methods:{handleBack:function(){this.$emit("back")},getFilters:function(){var t=this;Object(k.a)().then((function(e){var n,o=(null==e||null===(n=e.data)||void 0===n?void 0:n.model_template_tags)||{},r=Object.keys(o).map((function(t){return{label:t,options:o[t]}}));t.tags=r.map((function(t){return j(j({},t),{},{vals:[]})}))}))},getList:function(){var t,e=this,n={page:this.page,page_size:60};this.selectedTags.length&&(this.selectedTags.forEach((function(t){var e,o=t.category,r=t.id;null!==(e=n)&&void 0!==e&&e[o]?n[o].push(r):n[o]=[r]})),null!==(t=n)&&void 0!==t&&t.skin_color&&delete(n=j(j({},n),{},{skin_colors:n.skin_color})).skin_color);(this.isModel?k.b:k.c)(n).then((function(t){var n,o=(null==t||null===(n=t.data)||void 0===n?void 0:n.items)||[];e.list=e.list.concat(o),e.page++}))},clearData:function(){this.debounceHandleScroll=function(){},this.list=[],this.page=1},handleScroll:function(){try{var t=this.$refs.scrollWrapper;try{if(0===t.scrollTop&&0===t.scrollHeight)return}catch(t){}null==t||t.scrollHeight,t.scrollTop;null==t?void 0:t.clientHeight}catch(t){}},delTag:function(t){var e=this;this.tags.forEach((function(n){var o=n.vals.filter((function(e){return e!==t.id}));e.$set(n,"vals",o||[])})),this.filterList()},tagChange:function(){this.filterList()},filterList:function(){this.page=1,this.list=[],this.getList()},handleClosePopover:function(t){var e;null===(e=this.$refs)||void 0===e||null===(e=e["popover-".concat(t)])||void 0===e||null===(e=e[0])||void 0===e||e.doClose()},handleSelect:function(t){this.isModel?this.$emit("selectModel",t):this.$emit("selectScene",t.id)},addExpression:function(t,e){this.$set(t,"currentExpression",e)},handleGenerate:function(){this.$emit("generate")}}};n(2639);function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={name:"ModelImage",components:{ModelImageResAll:Object(f.a)(T,(function(){var t,e,n=this,o=n._self._c;return o("div",{staticClass:"model-image-res-all"},[o("div",{staticClass:"model-image-res-all-back",on:{click:n.handleBack}},[o("i",{staticClass:"el-icon-arrow-left"}),n._v(" "),o("span",[n._v(n._s(n.$t(n.isModel?"SelectModel":"SelectScene")))])]),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.isModel,expression:"isModel"}],staticClass:"filter-box"},n._l(n.tags,(function(t){return o("div",{key:t.label,staticClass:"item-filter"},[o("el-select",{ref:"tagSelect",refInFor:!0,attrs:{"popper-class":"custom-select",placeholder:"",multiple:""},on:{change:n.tagChange},model:{value:t.vals,callback:function(e){n.$set(t,"vals",e)},expression:"item.vals"}},[o("template",{slot:"prefix"},[n._v(n._s(n.$t(t.label)))]),n._v(" "),n._l(t.options,(function(t){return o("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})}))],2)],1)})),0),n._v(" "),o("div",{staticClass:"selected-tag-box"},n._l(n.selectedTags,(function(t){return o("div",{key:t.id,staticClass:"item-selected-tag"},[o("span",[n._v(n._s(t.label))]),n._v(" "),o("div",{staticClass:"del flex-center",on:{click:function(e){return n.delTag(t)}}},[o("i",{staticClass:"el-icon-close"})])])})),0),n._v(" "),o("div",{ref:"scrollWrapper",staticClass:"res-box",on:{scroll:n.debounceHandleScroll}},n._l(n.list,(function(t){return o("div",{key:null==t?void 0:t.id,staticClass:"item-res",class:{selected:n.isSelected(t.id)},on:{click:function(e){return n.handleSelect(t)}}},[n.isModel?o("div",{staticClass:"hover-content"},[o("el-popover",{ref:"popover-".concat(t.id),refInFor:!0,attrs:{placement:"right","popper-class":"model-info-popover","visible-arrow":!1,trigger:"click"}},[o("div",{staticClass:"model-info-box"},[o("i",{staticClass:"el-icon-close close-btn",on:{click:function(e){return n.handleClosePopover(t.id)}}}),n._v(" "),o("div",{staticClass:"model-info-header"},[o("div",{staticClass:"left model-img"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"model image"}})]),n._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"model-name"},[n._v(n._s(null==t?void 0:t.name))]),n._v(" "),o("div",{staticClass:"model-info"},[n._v("\n\t\t\t\t\t\t\t\t\t"+n._s("".concat(null==t?void 0:t.gender,"，").concat(null==t?void 0:t.race,"，").concat(null==t?void 0:t.skin_color))+"\n\t\t\t\t\t\t\t\t")])])]),n._v(" "),o("div",{staticClass:"model-info-expression"},[o("div",{staticClass:"title"},[n._v(n._s(n.$t("OPS_expression")))]),n._v(" "),o("div",{staticClass:"expressions-box"},n._l((null==t?void 0:t.expressions)||[],(function(i){var e;return o("div",{key:null==i?void 0:i.id,staticClass:"item-expression flex-center",class:{active:(null==t||null===(e=t.currentExpression)||void 0===e?void 0:e.id)===(null==i?void 0:i.id)},on:{click:function(e){return n.addExpression(t,i)}}},[n._v("\n\t\t\t\t\t\t\t\t\t"+n._s(null==i?void 0:i.val)+"\n\t\t\t\t\t\t\t\t")])})),0)])]),n._v(" "),o("div",{staticClass:"hover-content-btn flex-center",attrs:{slot:"reference"},on:{click:function(t){t.stopPropagation()}},slot:"reference"},[o("i",{staticClass:"iconfont icon-edit-03"}),n._v(" "),o("span",[n._v("\n\t\t\t\t\t\t\t"+n._s(null!=t&&t.currentExpression?t.currentExpression.val:n.$t("Adjust"))+"\n\t\t\t\t\t\t")])])])],1):n._e(),n._v(" "),o("div",{staticClass:"img-box"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"img"}})]),n._v(" "),o("div",{staticClass:"label overflow-ellipsis",attrs:{title:null==t?void 0:t.name}},[n._v("\n\t\t\t\t"+n._s(null==t?void 0:t.name)+"\n\t\t\t")])])})),0),n._v(" "),o("el-button",{staticClass:"generate-btn flex-center",attrs:{loading:!(null===(t=n.top)||void 0===t||!t.selectedLoading),disabled:!(null!==(e=n.top)&&void 0!==e&&null!==(e=e.selectedImgInfo)&&void 0!==e&&e.mask)},on:{click:n.handleGenerate}},[o("span",{staticClass:"txt"},[n._v(n._s(n.$t("Generate")))]),n._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:n.isShowCost,expression:"isShowCost"}],staticClass:"cost"},[n._v("\n\t\t\t( "+n._s(n.$t("expend"))+": "+n._s(n.getEstimatedCost)+" )\n\t\t")])])],1)}),[],!1,null,"88112d4c",null).exports},inject:["top"],data:function(){return{type:"",modelList:[],selectedModels:[],sceneList:[],selectedScene:""}},mounted:function(){this.initData()},computed:{isModelSelected:function(){var t=this;return function(e){return t.selectedModels.find((function(i){return i.id==e}))}},isShowCost:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.width,o=void 0===n?0:n,r=e.height,l=void 0===r?0:r;return this.selectedModels.length&&o&&l},getEstimatedCost:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.width,o=void 0===n?0:n,r=e.height,l=void 0===r?0:r,c=this.selectedModels.length,d=[1,1.5,2.5],h=Math.max(o,l);if(h<=768){return 30*d[c-1]}if(h<=1024){return 36*d[c-1]}if(h<=1328){return 54*d[c-1]}if(h<=1536){return 78*d[c-1]}if(h<=1736){return 84*d[c-1]}return 108*d[c-1]}},methods:{initData:function(){var t=this;Object(k.b)({page:1,page_size:6}).then((function(e){var n;t.modelList=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[]})),Object(k.c)({page:1,page_size:6}).then((function(e){var n,o;t.sceneList=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[],t.selectedScene=(null===(o=t.sceneList)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.id)||""}))},selectModel:function(t){var e=t.id;if(this.selectedModels.find((function(i){return i.id==e})))this.selectedModels=this.selectedModels.filter((function(i){return i.id!=e}));else{if(3==this.selectedModels.length)return void this.$message.warning(this.$t("SelectModelMax"));this.selectedModels.push(t)}},selectScene:function(t){this.selectedScene=t},changeVal:function(t,e){var n=this;this.selectedModels=[],t.forEach((function(t){var e=n.modelList.find((function(i){return i.id==t.model_template_id}));if(t.expression){var o,r=null==e||null===(o=e.expressions)||void 0===o?void 0:o.find((function(i){return i.id==t.expression}));r&&n.$set(e,"currentExpression",r)}n.selectedModels.push(e)})),this.selectedScene=e},handleClosePopover:function(t){var e;null===(e=this.$refs)||void 0===e||null===(e=e["popover-".concat(t)])||void 0===e||null===(e=e[0])||void 0===e||e.doClose()},addExpression:function(t,e){this.$set(t,"currentExpression",e)},getImgDimensions:function(t){return new Promise((function(e,n){var img=new Image;img.onload=function(){e({width:this.naturalWidth,height:this.naturalHeight})},img.onerror=function(){n(new Error("Failed to load image"))},img.src=t}))},handleGenerate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,h,v,m,mask,f,_,y,w,C,x,O,I,$;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.selectedModels)&&void 0!==n&&n.length){e.next=3;break}return t.$message.warning(t.$t("SelectModelTip")),e.abrupt("return");case 3:if(null!==(o=t.top)&&void 0!==o&&null!==(o=o.selectedImgInfo)&&void 0!==o&&o.url){e.next=6;break}return t.$message.warning(t.$t("UploadModelTip")),e.abrupt("return");case 6:return c=(null===(r=t.top)||void 0===r?void 0:r.selectedImgInfo)||{},d=c.idx,h=c.url,v=void 0===h?"":h,m=c.mask,mask=void 0===m?"":m,f=c.cut_source_url,_=void 0===f?"":f,y=c.segment,w=void 0===y?"":y,t.top.setGeneratedLoading(d,!0),e.next=10,t.getImgDimensions(v);case 10:C=e.sent,x=C.width,O=void 0===x?0:x,I=C.height,$={width:O,height:void 0===I?0:I,source_url:v,mask:mask,cut_source_url:_,source_segment:w,scene_template_id:t.selectedScene,models:(null===(l=t.selectedModels)||void 0===l?void 0:l.map((function(t){var e;return{model_template_id:(null==t?void 0:t.id)||"",expression:(null==t||null===(e=t.currentExpression)||void 0===e?void 0:e.id)||""}})))||[]},Object(k.e)($).then((function(e){var n=e.data.task_id,o=void 0===n?"":n;o?t.loopGetResult(o,d):t.top.setGeneratedLoading(d,!1)})).catch((function(e){console.log("err",e),t.top.setGeneratedLoading(d,!1)}));case 17:case"end":return e.stop()}}),e)})))()},loopGetResult:function(t,e){var n=this,r=setInterval(Object(o.a)(regeneratorRuntime.mark((function o(){var l,c,d,h,v,m,f,_;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(O.a)({task_ids:[t]});case 3:if(l=o.sent,null!=(c=l.data.items)&&c[0]){o.next=7;break}return o.abrupt("return");case 7:d=c[0],h=d.process,v=d.status_desc,m=d.img_uris,f=d.task_id,n.$emit("handleQuickTask",c[0]),n.top.setGeneratedLoading(e,h),o.t0=v,o.next="finish"===o.t0?13:"sysCancelDesc"===o.t0?18:"sysTimeoutDesc"===o.t0?22:26;break;case 13:return _=m.map((function(t){return S(S({},t),{},{id:f})}))||[],n.top.addGeneratedImg(_,e),clearInterval(r),n.top.setGeneratedLoading(e,!1),o.abrupt("break",27);case 18:return clearInterval(r),n.$message.warning(n.$t("systemCancel")),n.top.setGeneratedLoading(e,!1),o.abrupt("break",27);case 22:return clearInterval(r),n.$message.warning(n.$t("systemTimeoutCancel")),n.top.setGeneratedLoading(e,!1),o.abrupt("break",27);case 26:return o.abrupt("break",27);case 27:o.next=32;break;case 29:o.prev=29,o.t1=o.catch(0),console.log("error",o.t1);case 32:case"end":return o.stop()}}),o,null,[[0,29]])}))),3e3)}}},P=(n(2640),Object(f.a)(D,(function(){var t,e,n=this,o=n._self._c;return o("div",{staticClass:"model-image"},[n.type?o("ModelImageResAll",{attrs:{type:n.type,selectedModels:n.selectedModels,selectedScene:n.selectedScene},on:{back:function(t){n.type=""},selectModel:n.selectModel,selectScene:n.selectScene,generate:n.handleGenerate}}):o("div",{staticClass:"model-image-content"},[o("div",{staticClass:"select-model"},[o("div",{staticClass:"select-model-top"},[o("div",{staticClass:"select-title"},[n._v(n._s(n.$t("SelectModel")))]),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.selectedModels.length>0,expression:"selectedModels.length > 0"}],staticClass:"selected-model overflow-ellipsis"},[n._v("\n\t\t\t\t\t"+n._s(n.$t("NumModelsSelected",{num:n.selectedModels.length}))+"\n\t\t\t\t")]),n._v(" "),o("div",{staticClass:"all",on:{click:function(t){n.type="model"}}},[o("span",[n._v(n._s(n.$t("All")))]),n._v(" "),o("i",{staticClass:"el-icon-arrow-right"})])]),n._v(" "),o("div",{staticClass:"select-model-content"},n._l(n.modelList,(function(t){return o("div",{key:t.id,staticClass:"select-model-content-item",class:{selected:n.isModelSelected(t.id)},on:{click:function(e){return n.selectModel(t)}}},[o("div",{staticClass:"hover-content"},[o("el-popover",{ref:"popover-".concat(t.id),refInFor:!0,attrs:{placement:"right","popper-class":"model-info-popover","visible-arrow":!1,trigger:"click"}},[o("div",{staticClass:"model-info-box"},[o("i",{staticClass:"el-icon-close close-btn",on:{click:function(e){return n.handleClosePopover(t.id)}}}),n._v(" "),o("div",{staticClass:"model-info-header"},[o("div",{staticClass:"left model-img"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"model image"}})]),n._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"model-name"},[n._v(n._s(null==t?void 0:t.name))]),n._v(" "),o("div",{staticClass:"model-info"},[n._v("\n\t\t\t\t\t\t\t\t\t\t\t"+n._s("".concat(null==t?void 0:t.gender,"，").concat(null==t?void 0:t.race,"，").concat(null==t?void 0:t.skin_color))+"\n\t\t\t\t\t\t\t\t\t\t")])])]),n._v(" "),o("div",{staticClass:"model-info-expression"},[o("div",{staticClass:"title"},[n._v(n._s(n.$t("OPS_expression")))]),n._v(" "),o("div",{staticClass:"expressions-box"},n._l((null==t?void 0:t.expressions)||[],(function(i){var e;return o("div",{key:null==i?void 0:i.id,staticClass:"item-expression flex-center",class:{active:(null==t||null===(e=t.currentExpression)||void 0===e?void 0:e.id)===(null==i?void 0:i.id)},on:{click:function(e){return n.addExpression(t,i)}}},[n._v("\n\t\t\t\t\t\t\t\t\t\t\t"+n._s(null==i?void 0:i.val)+"\n\t\t\t\t\t\t\t\t\t\t")])})),0)])]),n._v(" "),o("div",{staticClass:"hover-content-btn flex-center",attrs:{slot:"reference"},on:{click:function(t){t.stopPropagation()}},slot:"reference"},[o("i",{staticClass:"iconfont icon-edit-03"}),n._v(" "),o("span",[n._v("\n\t\t\t\t\t\t\t\t\t"+n._s(null!=t&&t.currentExpression?t.currentExpression.val:n.$t("Adjust"))+"\n\t\t\t\t\t\t\t\t")])])])],1),n._v(" "),o("div",{staticClass:"img-box"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"img"}})]),n._v(" "),o("div",{staticClass:"label overflow-ellipsis",attrs:{title:null==t?void 0:t.name}},[n._v("\n\t\t\t\t\t\t"+n._s(null==t?void 0:t.name)+"\n\t\t\t\t\t")])])})),0)]),n._v(" "),o("div",{staticClass:"select-scene"},[o("div",{staticClass:"select-scene-top"},[o("div",{staticClass:"select-title"},[n._v(n._s(n.$t("SelectScene")))]),n._v(" "),o("div",{staticClass:"all",on:{click:function(t){n.type="scene"}}},[o("span",[n._v(n._s(n.$t("All")))]),n._v(" "),o("i",{staticClass:"el-icon-arrow-right"})])]),n._v(" "),o("div",{staticClass:"select-scene-content"},n._l(n.sceneList,(function(t){return o("div",{key:t.id,staticClass:"select-scene-content-item",class:{selected:n.selectedScene===t.id},on:{click:function(e){return n.selectScene(t.id)}}},[o("div",{staticClass:"img-box"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"img"}})]),n._v(" "),o("div",{staticClass:"label"},[n._v(n._s(null==t?void 0:t.name))])])})),0)]),n._v(" "),o("el-button",{staticClass:"generate-btn flex-center",attrs:{loading:!(null===(t=n.top)||void 0===t||!t.selectedLoading),disabled:!(null!==(e=n.top)&&void 0!==e&&null!==(e=e.selectedImgInfo)&&void 0!==e&&e.mask)},on:{click:n.handleGenerate}},[o("span",{staticClass:"txt"},[n._v(n._s(n.$t("Generate")))]),n._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:n.isShowCost,expression:"isShowCost"}],staticClass:"cost"},[n._v("\n\t\t\t\t( "+n._s(n.$t("expend"))+": "+n._s(n.getEstimatedCost)+" )\n\t\t\t")])])],1)],1)}),[],!1,null,"647f9244",null).exports),E=(n(221),n(43),n(74)),A=n(352),R=n(94),M=n.n(R);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F={name:"ModelRedrawModal",props:{mask:{type:String,default:function(){return""}}},data:function(){return{transparentCanvasBg:n(476),dialogVisible:!1,intLoading:!0,intImg:{url:"",width:0,height:0,size:50},MasterDrawing:"",intHeight:0,intWidth:0,mouseX:0,mouseY:0,isMousedown:!1,sizeList:[{name:"400%",value:400},{name:"200%",value:200},{name:"125%",value:125},{name:"100%",value:100},{name:"75%",value:75},{name:"50%",value:50},{name:"30%",value:30},{name:"20%",value:20},{name:"10%",value:10},{name:"fitToScreen",value:50},{name:"ai_erase3",value:100}],toolType:"smear",isAuto:!0,jsonActiveData:[],toolList:[{name:this.$t("addMaticSelection"),icon:"iconfont icon-zidongxuanqu",value:"quick",tip:"ModelFittingModalTip1"},{name:this.$t("cancelMaticSelection"),icon:"iconfont icon-quxiaoxuanze",value:"cancelQuick",tip:"ModelFittingModalTip2"},{name:this.$t("erasePage1"),icon:"iconfont icon-tumo",value:"smear",tip:"ModelFittingModalTip3"},{name:this.$t("fastToolsEraser"),icon:"iconfont icon-icon_zidongcachu",value:"eraser",tip:"ModelFittingModalTip4"}],brushSize:40,canvas:null,context:null,startX:0,startY:0,blankCanvas:"",currentStep:-1,historyList:[],isDrawing:!1,uploading:!1,UPLOAD:new c.a({type:2}),drewPoints:[],rectList:[],imgSegmentUrlList:[],hoverMaskUrl:"",hasHover:!0,debounceHandleMouseMove:null,imagesList:[],loading:!1,inTimes:!1,retryCount:0,jsonUrl:"",imgUrl:"",imgShow:!0,lengthOfLongSide:0,consumption:1,minScaleSize:10,maxScaleSize:400,compareMask:""}},watch:{dialogVisible:{handler:function(t){t||(this.intImg={url:"",width:0,height:0,size:100},this.toolType="smear",this.historyList=[],this.imagesList=[],this.imgSegmentUrlList=[],this.debounceHandleMouseMove=null,this.currentStep=-1,this.imgUrl="",this.imgShow=!0,this.MasterDrawing="")}}},components:{generateRectItem:A.a},computed:U(U({},Object(l.c)("user",["isLoggedIn","accountSettingsData","cdnHostFun"])),{},{setCanvasStyle:function(){var t="";if(["smear","eraser"].includes(this.toolType)){var e=this.brushSize;e<10&&(e=10);var n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'.concat(e,'" height="').concat(e,'" viewBox="0 0 ').concat(e," ").concat(e,'">\n    <circle cx="').concat(e/2,'" cy="').concat(e/2,'" r="').concat(e/2,'" fill="purple" fill-opacity="0.5" />\n  </svg>'),o=btoa(n),r="data:image/svg+xml;base64,".concat(o);t="url(".concat(r,") ").concat(e/2," ").concat(e/2,", auto")}return"rectangle"==this.toolType&&(t="url(https://".concat(this.cdnHostFun(),"/20240312/cb26a6cd-7ca5-4e32-a633-df7094cb570d.cur) 8 8, auto")),"noose"==this.toolType&&(t="url(https://".concat(this.cdnHostFun(),"/20240307/3b553f30-1a01-4287-85b9-b1840754b717.cur) 8 8, auto")),"drag"==this.toolType&&(t="grab"),t}}),created:function(){this.debounceHandleMouseMove=Object(E.throttle)(this.handleMouseMove,300)},mounted:function(){document.addEventListener("keydown",this.shortcutKey)},beforeDestroy:function(){document.removeEventListener("keydown",this.shortcutKey)},methods:{setImageZoomIn:function(){this.intImg.size+10>=this.maxScaleSize?this.intImg.size=this.maxScaleSize:this.intImg.size+=10},setImageZoomOut:function(){this.intImg.size-10<=this.minScaleSize?this.intImg.size=this.minScaleSize:this.intImg.size-=10},resetData:function(){this.intImg={url:"",width:0,height:0,size:100},this.toolType="smear",this.historyList=[],this.imagesList=[],this.imgSegmentUrlList=[],this.debounceHandleMouseMove=null,this.currentStep=-1,this.imgUrl="",this.imgShow=!0,this.MasterDrawing=""},reupload:function(){this.$emit("reupload")},shortcutKey:function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&"z"===t.key.toLowerCase()?this.handleNext():(t.ctrlKey||t.metaKey)&&"z"===t.key.toLowerCase()&&this.handlePre()},dwn:function(){Object(d.z)(this.imgUrl)},changeTool:function(t){this.toolType=t.value,this.setDrawType(),["cancelQuick","quick"].includes(this.toolType)&&!this.imgSegmentUrlList.length&&this.getSegmentMaskData()},handleMouseMove:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.checkCoordinate(t.offsetX,t.offsetY,e.imagesList);case 2:(o=n.sent)>=0&&e.hasHover&&e.setHoverMask(o);case 4:case"end":return n.stop()}}),n)})))()},getCacheSegmentMaskData:function(){var t=arguments;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["",null,void 0].includes(n=t.length>0&&void 0!==t[0]?t[0]:"")){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,M.a.getItem(n);case 5:return o=e.sent,e.abrupt("return",o||null);case 7:case"end":return e.stop()}}),e)})))()},setHoverMask:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!["",null,void 0,-1].includes(t)){n.next=3;break}return e.hoverMaskUrl="",n.abrupt("return");case 3:(r=new Image).src=e.imgSegmentUrlList[t],r.onload=Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=document.createElement("canvas")).width=e.intImg.width,n.height=e.intImg.height,(o=n.getContext("2d")).clearRect(0,0,e.intImg.width,e.intImg.height),o.globalCompositeOperation="source-in",o.fillStyle="#fff",o.fillRect(0,0,e.intImg.width,e.intImg.height),o.globalCompositeOperation="source-over",o.drawImage(r,0,0,e.intImg.width,e.intImg.height),e.hoverMaskUrl=n.toDataURL();case 11:case"end":return t.stop()}}),t)})));case 6:case"end":return n.stop()}}),n)})))()},selectRegion:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(["cancelQuick","quick"].includes(e.toolType)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.checkCoordinate(t.offsetX,t.offsetY,e.imagesList);case 4:(o=n.sent)>=0&&e.selectSegmentMask(o);case 6:case"end":return n.stop()}}),n)})))()},cancelSelectSegmentMask:function(t){var e=document.createElement("canvas"),n=this.intImg,o=n.width,r=n.height;e.width=o,e.height=r;var l=e.getContext("2d"),c=new Image;c.src=this.imgSegmentUrlList[t],c.onload=function(){for(var t=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],i=0;i<t.length;i+=2)l.drawImage(c,4*t[i],4*t[i+1],o,r);l.drawImage(c,0,0,o,r);for(var e=l.getImageData(0,0,o,r).data,n=this.context.getImageData(0,0,o,r),d=n.data,h=0;h<r;h++)for(var v=0;v<o;v++){var m=4*(h*o+v);e[m+3]>0&&(d[m]=0,d[m+1]=0,d[m+2]=0,d[m+3]=0)}this.context.putImageData(n,0,0)}},selectSegmentMask:function(t){var e=this,n=new Image,o=this.$refs.canvas.getContext("2d"),r=this.intImg,l=r.width,c=r.height;n.src=this.imgSegmentUrlList[t],n.onload=function(){o.globalCompositeOperation=["cancelQuick"].includes(e.toolType)?"destination-out":"source-over";for(var t=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],i=0;i<t.length;i+=2)o.drawImage(n,4*t[i],4*t[i+1],l,c);o.drawImage(n,0,0,l,c),e.saveToHistory()}},selectSegmentMaskAuto:function(t){var e=this,n=new Image,o=this.$refs.canvas.getContext("2d"),r=this.intImg,l=r.width,c=r.height;n.src=this.imgSegmentUrlList[t],n.onload=function(){o.globalCompositeOperation=e.isAuto?"source-over":"destination-out";for(var t=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],i=0;i<t.length;i+=2)o.drawImage(n,4*t[i],4*t[i+1],l,c);o.drawImage(n,0,0,l,c),e.saveToHistory()}},checkCoordinate:function(t,e,n){var r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",r.detectClickedImage(t,e,n));case 1:case"end":return o.stop()}}),o)})))()},detectClickedImage:function(t,e,n){for(var o=this.canvas.width/this.canvas.offsetWidth,i=n.length-1;i>=0;i--){var r=n[i],l=parseInt(t*o),c=parseInt(e*o);if(this.checkPixelTransparency(r,l,c))return i}},checkPixelTransparency:function(t,e,n){return 0!==t.data[4*(e+n*t.width)+3]},getSegmentMaskData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.loading||t.imgSegmentUrlList.length||t.uploading)){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.next=5,t.getCacheSegmentMaskData(null===(n=t.intImg)||void 0===n?void 0:n.url);case 5:if(!(o=e.sent)||!o.imgSegmentUrlList.length){e.next=12;break}return l=(r=o||{}).imgSegmentUrlList,c=void 0===l?[]:l,d=r.imagesList,h=void 0===d?[]:d,t.imgSegmentUrlList=c,t.imagesList=h,t.loading=!1,e.abrupt("return");case 12:v={action:14,meta:{smart_edit:{uri:t.intImg.url}}},Object(O.d)(v).then((function(e){1e4==e.status.code&&t.getTaskInfo([e.data.id])})).catch((function(e){t.loading=!1}));case 14:case"end":return e.stop()}}),e)})))()},getTaskInfo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o={};if(o.task_ids=t,o.scene=1,!["cancelQuick","quick"].includes(this.toolType))return this.inTimes&&clearTimeout(this.inTimes),this.loading=!1,this.uploading=!1,void(this.intLoading=!1);Object(O.a)(o).then((function(o){var r,l,c,d,h;if(1e4==o.status.code)if(null!==(r=o.data)&&void 0!==r&&r.items[0]&&3==(null===(l=o.data)||void 0===l||null===(l=l.items[0])||void 0===l?void 0:l.status))if(clearTimeout(e.inTimes),e.jsonUrl=null===(h=o.data)||void 0===h?void 0:h.items[0].segment,1==n)e.loadJsonFile(e.jsonUrl);else{var v,m;e.imgUrl=null===(v=o.data)||void 0===v||null===(v=v.items[0])||void 0===v||null===(v=v.img_uris[0])||void 0===v?void 0:v.url;var img=new Image;img.src=null===(m=o.data)||void 0===m||null===(m=m.items[0])||void 0===m||null===(m=m.img_uris[0])||void 0===m?void 0:m.url,img.onload=function(){e.intImg.url=img.src,e.uploading=!1,e.loading=!1,e.intLoading=!1,e.rectList=[],e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.saveToHistory()},img.onerror=function(){e.intImg.url=img.src,e.uploading=!1,e.loading=!1,e.intLoading=!1,e.rectList=[],e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.saveToHistory()}}else null!==(c=o.data)&&void 0!==c&&c.items[0]&&4==(null===(d=o.data)||void 0===d||null===(d=d.items[0])||void 0===d?void 0:d.status)?(clearTimeout(e.inTimes),e.loading=!1,e.intLoading=!1,e.uploading=!1):(clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t,n)}),1e3))})).catch((function(t){e.loading=!1,e.uploading=!1,e.intLoading=!1}))},loadJsonFile:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch(e).then((function(e){return e.ok||t.$message.error(t.$t("ServerError")),e.json()})).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initCanvas(null==data?void 0:data.result);case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(n){console.error("There has been a problem with your fetch operation:",n),t.retryCount<3?setTimeout((function(){t.loadJsonFile(e).finally((function(){t.loading=!1})),t.retryCount++}),500):t.$message.error(t.$t("ServerError"))}))},initCanvas:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var data,o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return data=t.length>0&&void 0!==t[0]?t[0]:[],e.imgSegmentUrlList=data.map((function(t){return"data:image/png;base64,".concat(t.mask_png)})),n.next=4,e.loadAllMask(e.imgSegmentUrlList);case 4:if(e.imagesList=n.sent,!e.imagesList.length){n.next=10;break}return{},r={imgSegmentUrlList:e.imgSegmentUrlList,imagesList:e.imagesList},n.next=10,M.a.setItem(null===(o=e.intImg)||void 0===o?void 0:o.url,r);case 10:e.jsonActiveData=data.map((function(t){return t.active})),e.jsonActiveData.forEach((function(t,n){t&&e.selectSegmentMaskAuto(n)}));case 12:case"end":return n.stop()}}),n)})))()},handleAuto:function(){var t=this;this.isAuto=!this.isAuto,this.jsonActiveData.forEach((function(e,n){e&&t.selectSegmentMaskAuto(n)}))},loadAllMask:function(){var t=this,source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.intImg||{},n=e.width,o=e.height,r=(source||[]).map((function(t){return new Promise((function(e,n){var img=new Image;img.onload=function(){return e(img)},img.onerror=function(t){return n(t)},img.src=t}))}));return Promise.all(r).then((function(e){for(var r=[],i=0;i<e.length;i++){var img=e[i],l=document.createElement("canvas");l.width=n,l.height=o;var c=l.getContext("2d");c.drawImage(img,0,0,t.intImg.width,t.intImg.height);var d=c.getImageData(0,0,t.intImg.width,t.intImg.height);d.data;c.putImageData(d,0,0);var h=l.toDataURL();t.$set(t.imgSegmentUrlList,i,h);var v=c.getImageData(0,0,t.intImg.width,t.intImg.height);r.push(v),l=null,c=null}return r}))},show:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.currentStep=-1,this.historyList=[],this.rectList=[],this.toolType="quick",["",null,void 0].includes(n)||(this.retryCount=0,this.loading=!1,this.loadJsonFile(n)),this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.intImg.url="",this.imgUrl="",this.MasterDrawing="",this.imagesList=[],this.debounceHandleMouseMove=Object(E.throttle)(this.handleMouseMove,300),this.intLoading=!0,this.$nextTick((function(){e.intImg.url=t,e.MasterDrawing=t,e.dialogVisible=!0,e.imgLoad()}))},intSize:function(){var t=window.innerHeight-240,e=this.intImg.height;this.intImg.width>2*this.intImg.height&&(t=window.innerWidth-100,e=window.innerWidth),this.intImg.size=parseInt(t/e*100)},changeSize:function(t){var e=this;if("fitToScreen"==t.name){var n=this.$refs.draggable;return n.style.left=null,n.style.top=null,void this.$nextTick((function(){e.intSize()}))}this.intImg.size=t.value},setConsumption:function(){this.consumption=1,this.lengthOfLongSide>=1024&&this.lengthOfLongSide<=2048?this.consumption=1.5:this.lengthOfLongSide>=2048&&this.lengthOfLongSide<=4096&&(this.consumption=4)},setDrawType:function(){this.context&&(this.context.globalCompositeOperation="eraser"===this.toolType?"destination-out":"source-over")},imgLoad:function(){this.intLoading=!0;var img=new Image;img.crossOrigin="anonymous",this.imgRef=img,img.src=this.intImg.url;var t=this;img.onload=function(){t.lengthOfLongSide=Math.max(this.width,this.height),t.setConsumption(),t.intImg.width=this.width,t.intImg.height=this.height,t.intSize(),t.intLoading=!1,t.$nextTick(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.canvas=t.$refs.canvas,t.context=t.canvas.getContext("2d"),t.context.fillStyle="rgba(255, 255, 255, 1)",t.context.lineJoin="round",t.context.lineCap="round",t.rectCanvas=t.$refs.rectCanvas,t.rectText=t.rectCanvas.getContext("2d"),t.rectText.strokeStyle="rgba(0,0,0,1)",t.rectText.fillStyle="rgba(255, 255, 255, 1)",t.rectText.lineJoin="round",t.rectText.lineCap="round",t.blankCanvas=t.canvas.toDataURL(),!t.mask){e.next=15;break}return e.next=15,t.displayMaskToCanvas(t.mask);case 15:t.saveToHistory();case 16:case"end":return e.stop()}}),e)}))))},img.onerror=function(){t.$message.error(t.$t("ai_erase4")),t.intLoading=!1}},displayMaskToCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this;return new Promise((function(n,o){var img=new Image;img.onload=function(){e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.context.drawImage(img,0,0,e.canvas.width,e.canvas.height),n()},img.onerror=function(t){console.log(t,"局部重绘图片回填失败"),n()},img.src=t}))},downElement:function(t){if("drag"==this.toolType){this.isMousedown=!0;var e=this.$refs.draggable;this.mouseX=t.clientX-e.offsetLeft,this.mouseY=t.clientY-e.offsetTop}},moveElement:function(t){if(this.isMousedown&&"drag"==this.toolType){var e=this.$refs.draggable;e.style.left=t.clientX-this.mouseX+"px",e.style.top=t.clientY-this.mouseY+"px"}},seupElement:function(){"drag"==this.toolType&&(this.isMousedown=!1)},startDrawing:function(t){if(["smear","eraser","noose"].includes(this.toolType))if(this.isDrawing=!0,this.startX=t.offsetX,this.startY=t.offsetY,["smear","eraser"].includes(this.toolType))this.context.strokeStyle="#fff",this.context.lineWidth=this.brushSize<10?10:this.brushSize,this.context.setLineDash([]);else if("noose"==this.toolType){var e=this.$refs.draggable;this.context.strokeStyle="rgba(0,0,0,1)";var n=e.getBoundingClientRect();this.drewPoints.push([{x:t.clientX-n.left,y:t.clientY-n.top}]),this.context.setLineDash([10,5]),this.context.lineWidth=2}},draw:function(t){if(this.isDrawing){var e,n,o=this.canvas.width/this.canvas.offsetWidth;if(this.context.scale(o,o),["smear","eraser"].includes(this.toolType)){var r=t.offsetX,l=t.offsetY;this.context.beginPath(),this.context.moveTo(this.startX,this.startY),this.context.lineTo(r,l),this.context.stroke(),this.startX=r,this.startY=l}else if("noose"==this.toolType){var c,d,h=this.$refs.draggable.getBoundingClientRect();c=t.clientX,d=t.clientY;var v=this.drewPoints[this.drewPoints.length-1];v.push({x:c-h.left,y:d-h.top});var m=v[0],f=v[1],_=v.length;this.context.beginPath(),this.context.moveTo(m.x,m.y);for(var i=1;i<_;i++){var y=(n=f,{x:(e=m).x+(n.x-e.x)/2,y:e.y+(n.y-e.y)/2});this.context.quadraticCurveTo(m.x,m.y,y.x,y.y),m=v[i],f=v[i+1]}this.context.lineTo(m.x,m.y),this.context.stroke()}this.context.scale(1/o,1/o)}},stopDrawing:function(){["smear","noose","eraser"].includes(this.toolType)&&this.isDrawing&&(this.isDrawing=!1,"noose"==this.toolType&&(this.context.closePath(),this.context.stroke(),this.context.fill()),this.saveToHistory())},startRectDrawing:function(t){"rectangle"==this.toolType&&(this.isDrawing=!0,this.startX=t.offsetX,this.startY=t.offsetY)},rectDraw:function(t){var e=this;if(this.isDrawing){var n=t.offsetX,o=t.offsetY;this.rectText.clearRect(0,0,this.rectCanvas.width,this.rectCanvas.height),this.$nextTick((function(){var t=e.rectCanvas.width/e.rectCanvas.offsetWidth;e.rectText.scale(t,t),e.rectText.beginPath(),e.rectText.rect(e.startX,e.startY,n-e.startX,o-e.startY),e.rectText.fill(),e.rectText.stroke(),e.rectText.scale(1/t,1/t)})),this.rectCanvas.style.zIndex=9999}},stopRectDrawing:function(t){if("rectangle"==this.toolType&&this.isDrawing){this.isDrawing=!1,this.rectText.clearRect(0,0,this.rectCanvas.width,this.rectCanvas.height);var e=t.offsetX,n=t.offsetY;this.rectList.push({left:e-this.startX>0?this.startX:e,top:n-this.startY>0?this.startY:n,width:Math.abs(e-this.startX),height:Math.abs(n-this.startY)}),this.saveToHistory(),this.rectCanvas.style.zIndex=2}},rectDelete:function(t){this.rectList.splice(t,1)},rectChange:function(t){this.rectList[t.index].top=t.top,this.rectList[t.index].left=t.left,this.rectList[t.index].width=t.width,this.rectList[t.index].height=t.height},saveToHistory:function(){var t=JSON.parse(JSON.stringify(this.rectList)),e=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),img=JSON.parse(JSON.stringify(this.intImg.url));this.currentStep++,1==this.currentStep&&this.historyList.splice(1,this.historyList.length-1),this.historyList.push({currentImageData:e,rects:t,img:img}),this.currentStep=this.historyList.length-1,this.updateCompareImage()},updateCompareImage:function(){var canvas=this.$refs.compareCanvas,t=canvas.getContext("2d"),e=document.createElement("canvas");e.width=this.intImg.width,e.height=this.intImg.height;var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height);for(var o=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),i=0;i<o.data.length;i+=4)255===o.data[i]&&255===o.data[i+1]&&255===o.data[i+2]||(o.data[i]=255,o.data[i+1]=255,o.data[i+2]=255);n.putImageData(o,0,0),t.clearRect(0,0,canvas.width,canvas.height),t.drawImage(this.imgRef,0,0,this.canvas.width,this.canvas.height),t.globalCompositeOperation="destination-atop",t.drawImage(e,0,0,this.canvas.width,this.canvas.height),this.compareMask=canvas.toDataURL("image/png"),e=null},handlePre:function(){this.historyList.length>0&&this.currentStep>0&&(this.currentStep--,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.historyList[this.currentStep].currentImageData,0,0),this.rectList=JSON.parse(JSON.stringify(this.historyList[this.currentStep].rects)),this.intImg.url=JSON.parse(JSON.stringify(this.historyList[this.currentStep].img)))},handleNext:function(){this.currentStep<this.historyList.length-1&&(this.currentStep++,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.historyList[this.currentStep].currentImageData,0,0),this.rectList=JSON.parse(JSON.stringify(this.historyList[this.currentStep].rects)),this.intImg.url=JSON.parse(JSON.stringify(this.historyList[this.currentStep].img)))},handleReset:function(){this.historyList.length>1&&(this.currentStep=-1,this.historyList=[],this.rectList=[],this.toolType="smear",this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.intImg.url=this.MasterDrawing,this.imgUrl="",this.imgLoad())},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;e.$set(e,"style",{width:t,height:o});var r=[t,o].every((function(t){return t<=4096}));n(r)},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},uploadMaskImage:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,i,l,c,h,v,m,f,_,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoggedIn){e.next=3;break}return t.$EventBus.$emit("openLoginDialog"),e.abrupt("return");case 3:if(t.intImg.width){e.next=5;break}return e.abrupt("return");case 5:if(!t.uploading&&!t.loading){e.next=7;break}return e.abrupt("return");case 7:for(t.uploading=!0,t.loading=!0,(n=document.createElement("canvas")).width=t.intImg.width,n.height=t.intImg.height,(o=n.getContext("2d")).clearRect(0,0,n.width,n.height),r=t.context.getImageData(0,0,t.canvas.width,t.canvas.height),i=0;i<r.data.length;i+=4)255===r.data[i]&&255===r.data[i+1]&&255===r.data[i+2]||(r.data[i]=255,r.data[i+1]=255,r.data[i+2]=255);return o.putImageData(r,0,0),l=t.canvas.width/t.canvas.offsetWidth,t.rectList.length>0&&t.rectList.forEach((function(t){o.fillStyle="rgba(255, 255, 255, 1)",o.beginPath(),o.rect(t.left*l,t.top*l,t.width*l,t.height*l),o.fill()})),c="",h=Object(d.c)(t.compareMask,"mask"),e.prev=21,e.next=24,t.UPLOAD.startUpload(h,{category:46});case 24:v=e.sent,c=v||"",e.next=31;break;case 28:e.prev=28,e.t0=e.catch(21),console.log("error",e.t0);case 31:if(console.log("sendMask",c),(m=n.toDataURL("image/png",.1))!==t.blankCanvas){e.next=39;break}return t.$emit("updateMask",""),t.uploading=!1,t.loading=!1,t.handleClose(),e.abrupt("return");case 39:return f="",_=Object(d.c)(m,"mask"),e.prev=41,e.next=44,t.UPLOAD.startUpload(_,{category:46});case 44:y=e.sent,f=y||"",e.next=53;break;case 48:e.prev=48,e.t1=e.catch(41),console.log("error",e.t1),t.uploading=!1,t.loading=!1;case 53:t.$emit("updateMask",f,c,m),t.uploading=!1,t.loading=!1,t.handleClose();case 57:case"end":return e.stop()}}),e,null,[[21,28],[41,48]])})))()},handleClose:function(){this.resetData(),this.dialogVisible=!1}}},B=F,H=(n(2642),n(2643),Object(f.a)(B,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"c-model-fitting-redraw-modal",fullscreen:!0,modal:!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.intLoading,expression:"intLoading"}],staticClass:"main"},[e("div",{staticClass:"top"},[e("div",{staticClass:"topItem"},[e("div",{staticClass:"back",on:{click:function(e){t.dialogVisible=!1}}},[e("i",{staticClass:"el-icon-back"})])]),t._v(" "),e("div",{staticClass:"topItem",class:{disabledStyle:t.intLoading}},[e("div",{staticClass:"bntBox"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsUndo"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:!t.historyList.length||1==t.historyList.length||0==t.currentStep},on:{click:function(e){return t.handlePre()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon3"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsRedo"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:t.currentStep==t.historyList.length-1},on:{click:function(e){return t.handleNext()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon2"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("S_ResetPrompt"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:t.historyList.length<2},on:{click:function(e){return t.handleReset()}}},[e("i",{staticClass:"el-icon-refresh"})])])],1)]),t._v(" "),e("div",{staticClass:"topItem",staticStyle:{visibility:"hidden"}})]),t._v(" "),e("div",{staticClass:"right",class:{disabledStyle:t.intLoading}},[e("div",{staticClass:"dragIcon",on:{click:function(e){"drag"==t.toolType?t.toolType="smear":t.toolType="drag"}}},[e("i",{staticClass:"iconfont icon-zhuashou-copy",style:{color:"drag"==t.toolType?"#4784FF":null}})]),t._v(" "),e("div",{staticClass:"sizeBox"},[e("div",{staticClass:"sizeBnt",class:{disabledStyle:t.intImg.size<=t.minScaleSize},on:{click:t.setImageZoomOut}},[e("i",{staticClass:"el-icon-minus"})]),t._v(" "),e("el-popover",{attrs:{placement:"top",trigger:"hover","visible-arrow":!1,"popper-class":"sizeListBox"}},[e("div",{staticClass:"sizeList"},t._l(t.sizeList,(function(n,o){return e("div",{key:o,staticClass:"sizeItem",on:{click:function(e){return t.changeSize(n)}}},[t._v(t._s(t.$t(n.name)))])})),0),t._v(" "),e("div",{staticClass:"sizeNum",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.intImg.size)+"%")])]),t._v(" "),e("div",{staticClass:"sizeBnt",class:{disabledStyle:t.intImg.size>=t.maxScaleSize},on:{click:t.setImageZoomIn}},[e("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),e("div",{staticClass:"compare",on:{mousedown:function(e){t.imgShow=!1},mouseup:function(e){t.imgShow=!0}}},[e("i",{staticClass:"iconfont icon-icon_duibi"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_erase2")))])])]),t._v(" "),e("div",{staticClass:"left",class:{disabledStyle:t.intLoading}},[e("el-tooltip",{attrs:{effect:"dark",placement:"right","open-delay":0}},[e("div",{staticClass:"toolItem",class:{activateToolItem:t.isAuto},on:{click:t.handleAuto}},[e("i",{staticClass:"iconfont icon-zidongshibie"}),t._v(" "),e("span",[t._v(t._s(t.$t("AutomaticIdentification")))])]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n          "+t._s(t.$t(t.isAuto?"ModelFittingModalTip5":"ModelFittingModalTip6"))+"\n        ")])]),t._v(" "),t._l(t.toolList,(function(n,o){return e("el-tooltip",{key:o,attrs:{effect:"dark",placement:"right","open-delay":0}},[e("div",{staticClass:"toolItem",class:{activateToolItem:t.toolType==n.value},on:{click:function(e){return t.changeTool(n)}}},[e("i",{class:n.icon}),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))]),t._v(" "),"smear"==n.value&&"smear"==t.toolType||"eraser"==n.value&&"eraser"==t.toolType?e("div",{staticClass:"lineSize"},[e("span",[t._v(t._s(t.$t("Size")))]),t._v(" "),e("el-slider",{attrs:{"show-input":"","show-input-controls":!1,min:10},model:{value:t.brushSize,callback:function(e){t.brushSize=e},expression:"brushSize"}})],1):t._e()]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n          "+t._s(t.$t(n.tip))+"\n        ")])])}))],2),t._v(" "),t.intLoading?t._e():e("div",{ref:"draggable",staticClass:"draggable",style:{width:t.intImg.width*t.intImg.size/100+"px",height:t.intImg.height*t.intImg.size/100+"px",cursor:t.setCanvasStyle,backgroundImage:t.imgShow?null:"url('".concat(t.transparentCanvasBg,"')")},attrs:{id:"draggable"},on:{mousedown:function(e){return e.preventDefault(),t.downElement.apply(null,arguments)},mousemove:function(e){return e.preventDefault(),t.moveElement.apply(null,arguments)},mouseup:function(e){return e.preventDefault(),t.seupElement.apply(null,arguments)}}},[t.loading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"laodMsk"}):t._e(),t._v(" "),t.intImg.url?e("img",{directives:[{name:"show",rawName:"v-show",value:t.imgShow,expression:"imgShow"}],attrs:{src:t.intImg.url,alt:""}}):t._e(),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:!t.imgShow,expression:"!imgShow"}],ref:"compareCanvas",staticClass:"compareCanvas",attrs:{width:t.intImg.width,height:t.intImg.height}}),t._v(" "),e("canvas",{ref:"canvas",attrs:{width:t.intImg.width,height:t.intImg.height},on:{"&mousedown":function(e){return t.startDrawing.apply(null,arguments)},"&mousemove":function(e){["cancelQuick","quick"].includes(t.toolType)?t.debounceHandleMouseMove(e):t.draw(e)},"&mouseup":function(e){return t.stopDrawing.apply(null,arguments)},mouseenter:function(e){t.hasHover=!0},mouseleave:function(e){t.hasHover=!1,t.hoverMaskUrl="",t.stopDrawing()},mousedown:t.selectRegion}}),t._v(" "),t.hoverMaskUrl?e("img",{staticClass:"segment-image-draw-img-hover-mask",style:{width:t.intImg.width*t.intImg.size/100+"px",height:t.intImg.height*t.intImg.size/100+"px"},attrs:{src:t.hoverMaskUrl,alt:""}}):t._e(),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:"rectangle"==t.toolType,expression:"toolType == 'rectangle'"}],ref:"rectCanvas",staticClass:"rectCanvas",attrs:{width:t.intImg.width,height:t.intImg.height},on:{"&mousedown":function(e){return t.startRectDrawing.apply(null,arguments)},"&mousemove":function(e){return t.rectDraw.apply(null,arguments)},"&mouseup":function(e){return t.stopRectDrawing.apply(null,arguments)}}}),t._v(" "),t._l(t.rectList,(function(n,o){return e("generate-rect-item",{key:"rect"+o,attrs:{item:n,index:o,size:t.intImg.size},on:{delete:t.rectDelete,change:t.rectChange}})}))],2),t._v(" "),e("el-button",{staticClass:"start",class:{disabledStyle:t.intLoading||t.loading},attrs:{disabled:t.intLoading||t.loading,loading:t.uploading},on:{click:t.uploadMaskImage}},[e("span",[t._v(t._s(t.$t("Done")))])])],1)])}),[],!1,null,"51e7d293",null)),z=H.exports,V=(n(28),n(89),n(441),n(65)),W=n(154),G=n(272);function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var Q={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},X=Object(W.a)()?"DOMMouseScroll":"mousewheel",J={name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},originalImg:{type:String,default:""}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:Q.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var t=this.transform,e=t.scale,n=t.deg,o=t.offsetX,r=t.offsetY,l=t.enableTransition,style={transform:"scale(".concat(e,") rotate(").concat(n,"deg)"),transition:l?"transform .3s":"","margin-left":"".concat(o,"px"),"margin-top":"".concat(r,"px")};return this.mode===Q.CONTAIN&&(style.maxWidth=style.maxHeight="100%"),style},viewerZIndex:function(){var t=G.a.nextZIndex();return this.zIndex>t?this.zIndex:t}},watch:{index:{handler:function(t){this.reset(),this.onSwitch(t)}},currentImg:function(t){var e=this;this.$nextTick((function(t){e.$refs.img[0].complete||(e.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var t=this;this._keyDownHandler=function(e){switch(e.stopPropagation(),e.keyCode){case 27:t.hide();break;case 32:t.toggleMode();break;case 37:t.prev();break;case 38:t.handleActions("zoomIn");break;case 39:t.next();break;case 40:t.handleActions("zoomOut")}},this._mouseWheelHandler=Object(W.b)((function(e){(e.wheelDelta?e.wheelDelta:-e.detail)>0?t.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):t.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),Object(V.e)(document,"keydown",this._keyDownHandler),Object(V.e)(document,X,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(V.d)(document,"keydown",this._keyDownHandler),Object(V.d)(document,X,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(t){this.loading=!1},handleImgError:function(t){this.loading=!1,t.target.alt="加载失败"},handleMouseDown:function(t){var e=this;if(!this.loading&&0===t.button){var n=this.transform,o=n.offsetX,r=n.offsetY,l=t.pageX,c=t.pageY;this._dragHandler=Object(W.b)((function(t){e.transform.offsetX=o+t.pageX-l,e.transform.offsetY=r+t.pageY-c})),Object(V.e)(document,"mousemove",this._dragHandler),Object(V.e)(document,"mouseup",(function(t){Object(V.d)(document,"mousemove",e._dragHandler)})),t.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var t=Object.keys(Q),e=(Object.values(Q).indexOf(this.mode)+1)%t.length;this.mode=Q[t[e]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var t=this.urlList.length;this.index=(this.index-1+t)%t}},next:function(){if(!this.isLast||this.infinite){var t=this.urlList.length;this.index=(this.index+1)%t}},handleActions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({zoomRate:.2,rotateDeg:90,enableTransition:!0},e),o=n.zoomRate,l=n.rotateDeg,c=n.enableTransition,d=this.transform;switch(t){case"zoomOut":d.scale>.2&&(d.scale=parseFloat((d.scale-o).toFixed(3)));break;case"zoomIn":d.scale=parseFloat((d.scale+o).toFixed(3));break;case"clocelise":d.deg+=l;break;case"anticlocelise":d.deg-=l}d.enableTransition=c}},handleOperate:function(t){this.$emit("operate",t,this.index),this.$logEvent("log_actions",{operation:"click_".concat(t),behavior_info:"model_fitting_detail_page"})}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},K=J,Z=(n(2644),Object(f.a)(K,(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"viewer-fade"}},[e("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper c-task-image-viewer",style:{"z-index":t.viewerZIndex},attrs:{tabindex:"-1"}},[e("div",{staticClass:"el-image-viewer__mask",on:{click:function(e){return e.target!==e.currentTarget?null:t.handleMaskClick.apply(null,arguments)}}}),t._v(" "),e("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:t.hide}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),t.isSingle?t._e():[e("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!t.infinite&&t.isFirst},on:{click:t.prev}},[e("i",{staticClass:"el-icon-arrow-left"})]),t._v(" "),e("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!t.infinite&&t.isLast},on:{click:t.next}},[e("i",{staticClass:"el-icon-arrow-right"})])],t._v(" "),e("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[e("div",{staticClass:"el-image-viewer__actions__inner"},[e("i",{staticClass:"el-icon-zoom-out",on:{click:function(e){return t.handleActions("zoomOut")}}}),t._v(" "),e("i",{staticClass:"el-icon-zoom-in",on:{click:function(e){return t.handleActions("zoomIn")}}}),t._v(" "),e("i",{staticClass:"el-image-viewer__actions__divider"}),t._v(" "),e("i",{class:t.mode.icon,on:{click:t.toggleMode}}),t._v(" "),e("i",{staticClass:"el-image-viewer__actions__divider"}),t._v(" "),e("i",{staticClass:"el-icon-refresh-left",on:{click:function(e){return t.handleActions("anticlocelise")}}}),t._v(" "),e("i",{staticClass:"el-icon-refresh-right",on:{click:function(e){return t.handleActions("clocelise")}}})])]),t._v(" "),e("div",{staticClass:"el-image-viewer__canvas"},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.originalImg,expression:"originalImg"}],staticClass:"original-img",style:t.imgStyle,attrs:{src:t.originalImg,alt:"Original Image"}}),t._v(" "),t._l(t.urlList,(function(n,i){return e("img",{directives:[{name:"show",rawName:"v-show",value:i===t.index,expression:"i === index"}],key:n,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img generated-img",style:t.imgStyle,attrs:{src:t.currentImg},on:{load:t.handleImgLoad,error:t.handleImgError,mousedown:t.handleMouseDown}})}))],2),t._v(" "),e("div",{staticClass:"custom-image-viewer__side"},[e("div",{staticClass:"line-1"},[e("div",{staticClass:"save btn",on:{click:function(e){return t.handleOperate("save")}}},[e("i",{staticClass:"iconfont icon-baocun"}),t._v(" "),e("span",[t._v(t._s(t.$t("Save")))])]),t._v(" "),e("div",{staticClass:"delete btn",on:{click:function(e){return t.handleOperate("delete")}}},[e("i",{staticClass:"iconfont icon-shanchu"}),t._v(" "),e("span",[t._v(t._s(t.$t("Delete")))])])]),t._v(" "),e("div",{staticClass:"line-2"},[e("div",{staticClass:"download btn",on:{click:function(e){return t.handleOperate("download")}}},[e("i",{staticClass:"iconfont icon-icon_xiazai"}),t._v(" "),e("span",[t._v(t._s(t.$t("Download")))])])])])],2)])}),[],!1,null,"251e75fa",null)),tt=Z.exports,et=n(267),it=n(98);function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return ot(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ot(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,l=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw l}}}}function ot(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}var lt={name:"WorkAreaContentDisplay",inject:["top"],props:{exampleList:{type:Array,default:function(){return[]}}},components:{ModelImage:P,ModelRedrawModal:z,ModelFittingImageViewer:tt,CircularLoading:et.a,QuickQueue:it.a},data:function(){return{transparentCanvasBg:n(476),isShowOriginal:!0,hoverBtns:[{icon:"icon-icon_xiazai",type:"download",tip:"Download"},{icon:"icon-baocun",type:"save",tip:"SavePersonalCenter"}],moreBtns:[{label:"upsacler_3_H1",type:"upscale"},{label:"ai_erase",type:"erase"},{label:"PartialRedrawing",type:"redraw"},{label:"RemoveBackground",type:"remove_bg"},{label:"Expansion",type:"expansion"}],imageViewerVisible:!1,currentIdx:0,renderWidth:450,renderHeight:600,resizeObserver:null,quickOptions:{}}},mounted:function(){var t=this;this.resizeObserver=new ResizeObserver((function(e){var n,o=nt(e);try{for(o.s();!(n=o.n()).done;){var r=n.value.contentRect,l=r.width,c=r.height;t.changeRenderWH(l,c)}}catch(t){o.e(t)}finally{o.f()}}));var e=document.querySelector("#content");e&&this.resizeObserver.observe(e)},beforeDestroy:function(){var t=document.querySelector("#content");t&&this.resizeObserver.unobserve(t)},computed:st(st({},Object(l.e)("user",["cdnHost"])),{},{getWHStyle:function(){return{width:"".concat(this.renderWidth,"px"),height:"".concat(this.renderHeight,"px")}},getWHStyleBg:function(){return{width:"".concat(this.renderWidth,"px"),height:"".concat(this.renderHeight,"px"),backgroundImage:this.isShowOriginal?null:"url(".concat(this.transparentCanvasBg,")")}},urlList:function(){var t;return(null===(t=this.top)||void 0===t||null===(t=t.selectedImgInfo)||void 0===t||null===(t=t.generatedImg)||void 0===t?void 0:t.map((function(t){return t.url})))||[]},generatedProcess:function(){var t,e=null===(t=this.top)||void 0===t||null===(t=t.selectedImgInfo)||void 0===t?void 0:t.isLoading;return"number"==typeof e?e:0}}),watch:{"top.selectedImgInfo":{handler:function(t){var content=this.$refs.content,e=(null==content?void 0:content.getBoundingClientRect())||{},n=e.width,o=void 0===n?450:n,r=e.height,l=void 0===r?600:r;this.changeRenderWH(o,l)},deep:!0}},methods:{changeRenderWH:function(t,e){var n=this.top.selectedImgInfo||{},o=n.width,r=n.height,l=o/r,c=o,d=r;o>t/2-22-10&&(d=(c=t/2-22-10)/l),d>e-20&&(c=(d=e-20)*l),this.renderWidth=c,this.renderHeight=d},selectExample:function(t){this.top.uploadSuccess(t,"add")},handleUpload:function(t){this.$EventBus.$emit("addModelImages",t)},handleUploadReplace:function(t){var e,n=null===(e=this.top)||void 0===e||null===(e=e.selectedImgInfo)||void 0===e?void 0:e.idx;this.$EventBus.$emit("addModelImages",t,n)},openMaskDialog:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.url,o=void 0===n?"":n,r=e.segment,l=void 0===r?"":r;this.$refs.modelRedrawModal.show(o,l),this.handleLog("edit")},updateMask:function(t,mask,e){this.top.changeMask(t,mask,e)},handleQuickTask:function(t){this.quickOptions=t},handleOperate:function(t,e){var n=this;this.handleLog(t);var o=e.id,r=void 0===o?"":o,l=e.index,c=void 0===l?0:l,h=e.url,v=void 0===h?"":h;switch(t){case"download":case"download":Object(d.z)(v,"ai-model-fitting-".concat(c));break;case"delete":this.top.deleteImg(r,c,(function(){n.top.delGeneratedImg(r,c)}));break;case"save":this.top.saveImg(r,c)}},handleClick:function(t){this.currentIdx=t,this.imageViewerVisible=!0},handleViewerOperate:function(t,e){var n,o=(null===(n=this.top.selectedImgInfo)||void 0===n||null===(n=n.generatedImg)||void 0===n?void 0:n[e])||{},r=o.id,l=void 0===r?"":r,c=o.url,h=void 0===c?"":c,v=o.index,m=void 0===v?0:v;switch(t){case"save":this.top.saveImg(l,m);break;case"delete":default:break;case"download":Object(d.z)(h,"ai-model-fitting-".concat(e))}},handleLog:function(t){this.$logEvent("log_actions",{operation:"click_".concat(t),behavior_info:"model_fitting_function_page"})}}},ct=(n(2646),Object(f.a)(lt,(function(){var t,e,n,o,r,l,c,d,h=this,v=h._self._c;return v("div",{staticClass:"dialog-content-display"},[v("ModelImage",{ref:"modelImage",on:{handleQuickTask:h.handleQuickTask}}),h._v(" "),v("div",{ref:"content",staticClass:"dialog-content-display-content flex-center",attrs:{id:"content"}},[null!==(t=h.top)&&void 0!==t&&t.selectedImgInfo?v("div",{staticClass:"display-img-box"},[v("div",{staticClass:"display-img",style:h.getWHStyleBg},[v("div",{directives:[{name:"show",rawName:"v-show",value:h.top.uploading&&!(null!==(e=h.top)&&void 0!==e&&null!==(e=e.selectedImgInfo)&&void 0!==e&&e.segment),expression:"top.uploading && !top?.selectedImgInfo?.segment"}],staticClass:"mask-loading"},[v("CircularLoading",{attrs:{font:18,process:(null===(n=h.top)||void 0===n||null===(n=n.selectedImgInfo)||void 0===n?void 0:n.recognitionProcess)||0,circleWH:80}}),h._v(" "),v("div",{staticClass:"txt"},[h._v(h._s(h.$t("uploading"))+"...")])],1),h._v(" "),v("div",{directives:[{name:"show",rawName:"v-show",value:h.isShowOriginal,expression:"isShowOriginal"}],staticClass:"hover-btn"},[v("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":0}},[v("el-upload",{staticClass:"uploader",attrs:{action:"/",accept:".jpg,.jpeg,.png,.webp",disabled:h.top.uploading,"show-file-list":!1,"http-request":h.handleUploadReplace}},[v("div",{staticClass:"item-btn flex-center",on:{click:function(t){return h.handleLog("reupload")}}},[v("i",{staticClass:"iconfont icon-shangchuan"})])]),h._v(" "),v("div",{attrs:{slot:"content"},slot:"content"},[h._v("\n\t\t\t\t\t\t\t"+h._s(h.$t("CreativeCenterPopup33"))+"\n\t\t\t\t\t\t")])],1),h._v(" "),v("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":0}},[v("div",{staticClass:"item-btn flex-center",on:{click:h.openMaskDialog}},[v("i",{staticClass:"iconfont icon-icon-baoliuqu"})]),h._v(" "),v("div",{attrs:{slot:"content"},slot:"content"},[h._v("\n\t\t\t\t\t\t\t"+h._s(h.$t("EditReservedArea"))+"\n\t\t\t\t\t\t")])])],1),h._v(" "),v("div",{staticClass:"change-box flex-center",on:{mousedown:function(t){t.preventDefault(),h.isShowOriginal=!1},mouseup:function(t){t.preventDefault(),h.isShowOriginal=!0},mouseleave:function(t){h.isShowOriginal=!0}}},[v("i",{staticClass:"iconfont icon-a-duibi1"}),h._v(" "),v("span",[h._v(h._s(h.$t("preview")))])]),h._v(" "),v("img",{directives:[{name:"show",rawName:"v-show",value:h.isShowOriginal,expression:"isShowOriginal"}],staticClass:"original-img",style:h.getWHStyle,attrs:{src:h.top.selectedImgInfo.url,alt:"selected image"}}),h._v(" "),v("img",{directives:[{name:"show",rawName:"v-show",value:!h.isShowOriginal,expression:"!isShowOriginal"}],staticClass:"comparison-img",style:h.getWHStyle,attrs:{src:null===(o=h.top.selectedImgInfo)||void 0===o?void 0:o.cut_source_url,alt:"comparison image"}})]),h._v(" "),v("div",{staticClass:"display-generated"},[v("div",{directives:[{name:"show",rawName:"v-show",value:null===(r=h.top)||void 0===r?void 0:r.selectedLoading,expression:"top?.selectedLoading"}],staticClass:"item-generated-img loading",style:h.getWHStyle},[v("CircularLoading",{attrs:{font:18,process:h.generatedProcess,circleWH:80}}),h._v(" "),v("div",{staticClass:"txt"},[h._v(h._s(h.$t("photography37"))+"...")]),h._v(" "),v("QuickQueue",{attrs:{quickOptions:h.quickOptions,quickStyle:{height:"36px",fontSize:"14px"}}})],1),h._v(" "),h._l((null===(l=h.top.selectedImgInfo)||void 0===l?void 0:l.generatedImg)||[],(function(t,e){return v("div",{key:"generated-img-".concat(e),staticClass:"item-generated-img"},[v("div",{staticClass:"hover-btns"},h._l(h.hoverBtns,(function(e){return v("el-tooltip",{key:e.type,attrs:{effect:"dark",placement:"top","open-delay":0}},[v("div",{staticClass:"item-btn flex-center",on:{click:function(n){return h.handleOperate(e.type,t)}}},[v("i",{staticClass:"iconfont",class:e.icon})]),h._v(" "),v("div",{attrs:{slot:"content"},slot:"content"},[h._v("\n\t\t\t\t\t\t\t\t"+h._s(h.$t(e.tip))+"\n\t\t\t\t\t\t\t")])])})),1),h._v(" "),v("img",{style:h.getWHStyle,attrs:{src:t.url,alt:"generated image"},on:{click:function(t){return h.handleClick(e)}}})])}))],2)]):v("div",{staticClass:"display-uploader"},[v("el-upload",{staticClass:"uploader",attrs:{action:"/",accept:".jpg,.jpeg,.png,.webp",disabled:h.top.uploading,"show-file-list":!1,"http-request":h.handleUpload}},[v("el-button",{staticClass:"display-uploader-btn",attrs:{loading:h.top.uploading}},[h._v("\n\t\t\t\t\t"+h._s(h.$t("ModelFittingUploadBtn"))+"\n\t\t\t\t")])],1),h._v(" "),v("div",{staticClass:"display-uploader-desc"},[h._v("\n\t\t\t\t"+h._s(h.$t("ModelFittingUploadDesc"))+"\n\t\t\t")]),h._v(" "),v("div",{staticClass:"display-uploader-tip flex-center"},[v("i",{staticClass:"el-icon-bottom"}),h._v(" "),v("span",[h._v(h._s(h.$t("ModelFittingUploadTip")))])]),h._v(" "),v("div",{staticClass:"display-uploader-example"},h._l(h.exampleList,(function(t,e){return v("img",{key:"image-".concat(e),attrs:{alt:"image",src:t},on:{click:function(e){return h.selectExample(t)}}})})),0)],1)]),h._v(" "),v("ModelRedrawModal",{ref:"modelRedrawModal",attrs:{mask:(null===(c=h.top)||void 0===c||null===(c=c.selectedImgInfo)||void 0===c?void 0:c.maskBase64)||""},on:{updateMask:h.updateMask}}),h._v(" "),h.imageViewerVisible?v("ModelFittingImageViewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"2001"},attrs:{"initial-index":h.currentIdx,"on-close":function(){return h.imageViewerVisible=!1},"url-list":h.urlList,originalImg:(null===(d=h.top)||void 0===d||null===(d=d.selectedImgInfo)||void 0===d?void 0:d.url)||""},on:{operate:h.handleViewerOperate}}):h._e()],1)}),[],!1,null,"08785e43",null).exports),ut=n(53),pt=n(45);function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var vt={name:"WorkAreaContentUpload",inject:["top"],components:{CircularLoading:et.a},data:function(){return{imgSize:{width:0,height:0},loopInterval:null}},mounted:function(){var t=this;this.$EventBus.$on("addModelImages",(function(e,n){"number"==typeof n?t.handleUploadReplace(e,n):t.handleUpload(e)}))},destroyed:function(){this.$EventBus.$off("addModelImages"),this.clearInterval()},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)("user",["isLoggedIn"])),methods:{clearInterval:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){clearInterval(this.loopInterval),this.loopInterval=null})),checkUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isLoggedIn){n.next=3;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return",!1);case 3:if(["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 7:if(!(t.size/1024/1024>10)){n.next=18;break}return n.prev=8,n.next=11,Object(pt.a)(t,10485760);case 11:t=n.sent,n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(8),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}}),n,null,[[8,14]])})))()},handleUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.file,e.checkUpload(o)){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,e.scaleImage(o,o.type);case 6:r=n.sent,e.top.imgList.push("loading"),e.top.setUploading(!0),new c.a({type:21}).startUpload(r).then((function(t){e.top.uploadSuccess(t,"replace")})).catch((function(t){console.log(e.$t("uploadError"),t),e.top.setUploading(!1),e.top.imgList.pop()}));case 11:case"end":return n.stop()}}),n)})))()},handleUploadReplace:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r=t.file,n.checkUpload(r)){o.next=4;break}return o.abrupt("return");case 4:return o.next=6,n.scaleImage(r,r.type);case 6:l=o.sent,new c.a({type:21}).startUpload(l).then((function(t){n.top.uploadSuccessReplace(t,e)})).catch((function(t){console.log(n.$t("uploadError"),t)}));case 9:case"end":return o.stop()}}),o)})))()},scaleImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";return new Promise((function(n,o){var r=new FileReader;r.onload=function(o){var img=new Image;img.src=o.target.result,img.onload=function(){var o=this.naturalWidth,r=this.naturalHeight,l=2048;if(this.imgSize={width:this.naturalWidth,height:this.naturalHeight},o>l||r>l){var c=Math.min(l/o,l/r),d=o*c,h=r*c,canvas=document.createElement("canvas"),v=canvas.getContext("2d");canvas.width=d,canvas.height=h,v.drawImage(img,0,0,d,h);var m=canvas.toDataURL(e),f=Object(ut.a)(m),_=new File([f],t.name.replace(/\.\w+$/,".png"),{type:"image/png"});n(_)}else n(t)}},r.readAsDataURL(t)})).catch((function(t){return console.error(t),Promise.reject(new Error("error"))}))},changeCurrentImgInfo:function(t){this.top.changeCurrentImgInfo(t)},getRecognition:function(t,e){var n=this;this.top.setUploading(!0),Object(k.g)({source_url:t,width:this.imgSize.width,height:this.imgSize.height}).then((function(t){var o=((null==t?void 0:t.data)||{}).task_id,r=void 0===o?"":o;r?n.loopGetResult(r,e):n.top.setUploading(!1)})).catch((function(t){console.log("err",t),n.top.setUploading(!1)}))},loopGetResult:function(t,e){var n=this;this.loopInterval=setInterval(Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,h,v,m;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(O.a)({task_ids:[t]});case 3:if(r=o.sent,null!=(l=r.data.items)&&l[0]){o.next=7;break}return o.abrupt("return");case 7:c=l[0],d=c.process,h=c.status_desc,v=c.img_uris,m=c.segment,n.top.setRecognitionProcess(e,d),o.t0=h,o.next="finish"===o.t0?12:"sysCancelDesc"===o.t0?16:"sysTimeoutDesc"===o.t0?20:24;break;case 12:return n.top.saveInfo(v,m,e),clearInterval(n.loopInterval),n.top.setUploading(!1),o.abrupt("break",25);case 16:return clearInterval(n.loopInterval),n.top.setUploading(!1),n.$message.warning(n.$t("systemCancel")),o.abrupt("break",25);case 20:return clearInterval(n.loopInterval),n.top.setUploading(!1),n.$message.warning(n.$t("systemTimeoutCancel")),o.abrupt("break",25);case 24:return o.abrupt("break",25);case 25:o.next=30;break;case 27:o.prev=27,o.t1=o.catch(0),console.log("error",o.t1);case 30:case"end":return o.stop()}}),o,null,[[0,27]])}))),3e3)}}},gt=vt,mt=(n(2647),Object(f.a)(gt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dialog-content-upload"},[e("div",{staticClass:"dialog-content-upload-images"},t._l(t.top.imgList,(function(n){var o;return e("div",{key:"img-".concat(n.idx),staticClass:"item-img flex-center",class:{active:(null===(o=t.top)||void 0===o||null===(o=o.selectedImgInfo)||void 0===o?void 0:o.idx)==n.idx},on:{click:function(e){return t.changeCurrentImgInfo(n.idx)}}},["loading"==n?e("div",{staticClass:"item-img-loading flex-center"},[e("i",{staticClass:"el-icon-loading image-loading"})]):e("div",{staticClass:"item-img-box"},[n.isLoading||"number"==typeof n.isLoading?e("div",{staticClass:"mask-loading generated"},[e("CircularLoading",{attrs:{process:"number"==typeof n.isLoading?n.isLoading:0,circleWH:38}}),t._v(" "),e("div",{staticClass:"txt"},[t._v(t._s(t.$t("photography37"))+"...")])],1):e("div",{directives:[{name:"show",rawName:"v-show",value:t.top.uploading&&!(null!=n&&n.segment),expression:"top.uploading && !item?.segment"}],staticClass:"mask-loading"},[e("CircularLoading",{attrs:{process:(null==n?void 0:n.recognitionProcess)||0,circleWH:38}}),t._v(" "),e("div",{staticClass:"txt"},[t._v(t._s(t.$t("uploading"))+"...")])],1),t._v(" "),e("div",{staticClass:"del-item flex-center",on:{click:function(e){return t.top.imgDelItem(n.idx)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("img",{attrs:{src:n.url,alt:"image"}})])])})),0),t._v(" "),e("div",{staticClass:"dialog-content-upload-uploader"},[e("el-upload",{directives:[{name:"show",rawName:"v-show",value:t.top.imgList.length<5,expression:"top.imgList.length < 5"}],staticClass:"uploader",attrs:{action:"/",accept:".jpg,.jpeg,.png,.webp",disabled:t.top.uploading,"show-file-list":!1,"http-request":t.handleUpload}},[e("div",{staticClass:"upload-btn flex-center",class:{loading:t.top.uploading}},[e("i",{staticClass:"el-icon-circle-plus-outline"}),t._v(" "),e("span",[t._v(t._s(t.$t("ContinueUpload")))])])]),t._v(" "),e("div",{staticClass:"del-all flex-center",on:{click:t.top.imgDelAll}},[e("i",{staticClass:"el-icon-delete"}),t._v(" "),e("span",[t._v(t._s(t.$t("DeleteAll")))])])],1)])}),[],!1,null,"77ef4530",null).exports);n(76);function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bt={name:"WorkAreaContentHistories",inject:["top"],components:{ModelFittingImageViewer:tt},data:function(){return{debounceHandleScroll:function(){},list:[],hoverBtns:[{icon:"icon-shanchu",type:"delete"},{icon:"icon-baocun",type:"save"}],moreBtns:[{label:"upsacler_3_H1",type:"upscale"},{label:"ai_erase",type:"erase"},{label:"PartialRedrawing",type:"redraw"},{label:"RemoveBackground",type:"remove_bg"},{label:"Expansion",type:"expansion"}],bottomBtns:[{icon:"icon-icon-edit",label:"EditAgain",type:"edit_again"},{icon:"icon-icon-Download",label:"DownloadImmediately",type:"download"}],imageViewerVisible:!1,currentImg:{}}},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),h=e.getSeconds().toString().padStart(2,"0");return Object(d.u)(e,new Date)?"".concat(l,":").concat(c,":").concat(h):"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(h)}},mounted:function(){this.debounceHandleScroll=Object(I.debounce)(this.handleScroll,600)},destroyed:function(){this.debounceHandleScroll=function(){}},computed:_t(_t({},Object(l.c)("user",["isCompanyAccount"])),{},{isShowExpireTime:function(){return function(t){return t&&t>0}},urlList:function(){var t;return(null===(t=this.currentImg)||void 0===t||null===(t=t.img_uris)||void 0===t?void 0:t.map((function(t){return t.url})))||[]}}),watch:{"top.isCreationRecord":{handler:function(t){t&&(this.list=[],this.initData())},immediate:!0}},methods:{initData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(k.f)({after_id:e,limit:30}).then((function(e){var n,o=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[];t.list=t.list.concat(o)}))},handleScroll:function(){try{var t=this.$refs.scrollWrapper;try{if(0===t.scrollTop&&0===t.scrollHeight)return}catch(t){}var e=(null==t?void 0:t.scrollHeight)-t.scrollTop;if(e-=null==t?void 0:t.clientHeight,t&&e<=30){var n,o=this.list.length;this.initData((null===(n=this.list[o-1])||void 0===n?void 0:n.id)||"")}}catch(t){}},getExpireTime:function(t){var e=(new Date).getTime();if(t&&t>e){var n=t-e,o=Math.floor(n/864e5);return o?this.$t("TaskExpireTime",{param:o}):this.$t("ExpiresSoon")}return this.$t("ExpiresSoon")},handleOperate:function(t,e,n){var o=this;this.$logEvent("log_actions",{operation:"click_".concat(t),behavior_info:"model_fitting_history_page"});var r=e.id,l=void 0===r?"":r,c=e.img_uris,h=void 0===c?[]:c,v=n.index,m=void 0===v?0:v,f=n.url,_=void 0===f?"":f;switch(t){case"delete":this.top.deleteImg(l,m,(function(){if(h.length>1){var t=o.list.find((function(t){return t.id===l}));if(t){var e=t.img_uris.filter((function(t){return t.index!==m}));o.$set(t,"img_uris",e)}}else o.list=o.list.filter((function(t){return t.id!==l}))}));break;case"save":this.top.saveImg(l,m);break;case"upscale":case"erase":case"redraw":case"remove_bg":case"expansion":default:break;case"edit_again":this.top.sendParams(e,m);break;case"download":Object(d.z)(_,"ai-model-fitting-".concat(m))}},handleClick:function(t,e){this.currentImg=_t(_t({},t),{},{idx:e}),this.imageViewerVisible=!0},handleViewerOperate:function(t,e){var n=this,o=this.currentImg,r=o.id,l=void 0===r?"":r,c=o.img_uris,h=void 0===c?[]:c,v=(null==h?void 0:h[e])||{},m=v.index,f=void 0===m?0:m,_=v.url,y=void 0===_?"":_;switch(t){case"save":this.top.saveImg(l,f);break;case"delete":this.top.deleteImg(l,e,(function(){if(h.length>1){var t=n.list.find((function(t){return t.id===l}));if(t){var o=t.img_uris.filter((function(t){return t.index!==e}));n.$set(t,"img_uris",o)}}else n.list=n.list.filter((function(t){return t.id!==l}))})),this.imageViewerVisible=!1;break;case"download":Object(d.z)(y,"ai-model-fitting-".concat(e))}}}},yt=bt,wt=(n(2648),Object(f.a)(yt,(function(){var t,e,o=this,r=o._self._c;return r("div",{ref:"scrollWrapper",staticClass:"dialog-content-histories",on:{scroll:o.debounceHandleScroll}},[o._l(o.list,(function(t){var e,l,c,d,h,v;return r("div",{key:t.id,staticClass:"dialog-content-histories-item"},[r("div",{staticClass:"dialog-content-histories-item-header"},[r("img",{staticClass:"dialog-content-histories-item-header-logo",attrs:{src:n(124),alt:"logo"}}),o._v(" "),r("span",{staticClass:"dialog-content-histories-item-header-bot"},[o._v("\n\t\t\t\t\t"+o._s(o.$t("SeaArtBot"))+"\n\t\t\t\t")]),o._v(" "),25==(null==t?void 0:t.sub_type)?r("span",{staticClass:"dialog-content-histories-item-header-tag flex-center"},[o._v("\n\t\t\t\t\t"+o._s(o.$t("ModelImage"))+"\n\t\t\t\t")]):o._e(),o._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.create_at,expression:"item.create_at"}],staticClass:"dialog-content-histories-item-header-create-time"},[o._v("\n\t\t\t\t\t"+o._s(o._f("formatDateTime")(t.create_at))+"\n\t\t\t\t")]),o._v(" "),r("el-popover",{attrs:{trigger:"click","popper-class":"custom-popver"}},[r("div",{staticClass:"task-info-tips"},[r("p",[r("span",[o._v(o._s(o.$t("TaskID")))]),o._v(" "),r("span",[o._v(o._s(t.id))])]),o._v(" "),3!==t.status||o.isCompanyAccount?o._e():[[1,2,"1","2"].includes(null==t?void 0:t.pub_community)?r("p",[r("span",{staticClass:"task-info-tips-label"},[o._v(o._s(o.$t("status")))]),o._v(" "),r("span",{staticClass:"task-pub-status"},[o._v("\n\t\t\t\t\t\t\t\t\t"+o._s([2,"2"].includes(null==t?void 0:t.pub_community)?o.$t("createSetting1"):o.$t("createSetting2"))+"\n\t\t\t\t\t\t\t\t")])]):o._e(),o._v(" "),r("p",[r("span",{staticClass:"task-info-tips-label"},[o._v(o._s(o.$t("expend")))]),o._v(" "),r("span",{staticClass:"task-info-tips-content"},[r("span",[o._v("\n\t\t\t\t\t\t\t\t\t\t"+o._s(o.$t("tempCoins"))+" :\n\t\t\t\t\t\t\t\t\t\t"+o._s(null==t||null===(e=t.deduction_detail)||void 0===e?void 0:e.temp_hashrate)+"\n\t\t\t\t\t\t\t\t\t")]),o._v(" "),r("span",[o._v("\n\t\t\t\t\t\t\t\t\t\t"+o._s(o.$t("calculateCoins"))+" :\n\t\t\t\t\t\t\t\t\t\t"+o._s(null==t||null===(l=t.deduction_detail)||void 0===l?void 0:l.hashrate)+"\n\t\t\t\t\t\t\t\t\t")])])]),o._v(" "),null!=t&&null!==(c=t.deduction_detail)&&void 0!==c&&c.history_hashrate?r("p",[r("span",{staticClass:"task-info-tips-label"},[o._v("\n\t\t\t\t\t\t\t\t\t"+o._s(o.$t("currentBalance"))+"\n\t\t\t\t\t\t\t\t")]),o._v(" "),r("span",{staticClass:"task-info-tips-content"},[r("span",[o._v("\n\t\t\t\t\t\t\t\t\t\t"+o._s(o.$t("tempCoins"))+" :\n\t\t\t\t\t\t\t\t\t\t"+o._s(null==t||null===(d=t.deduction_detail)||void 0===d?void 0:d.after_temp_hashrate)+"\n\t\t\t\t\t\t\t\t\t")]),o._v(" "),r("span",[o._v("\n\t\t\t\t\t\t\t\t\t\t"+o._s(o.$t("calculateCoins"))+" :\n\t\t\t\t\t\t\t\t\t\t"+o._s(null==t||null===(h=t.deduction_detail)||void 0===h?void 0:h.after_hashrate)+"\n\t\t\t\t\t\t\t\t\t")])])]):o._e()]],2),o._v(" "),r("i",{staticClass:"iconfont icon-task_tips dialog-content-histories-item-header-info",attrs:{slot:"reference"},slot:"reference"})]),o._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:o.isShowExpireTime(t.expiration_time),expression:"isShowExpireTime(item.expiration_time)"}],staticClass:"dialog-content-histories-item-header-expiration-time"},[o._v("\n\t\t\t\t\t"+o._s(o.getExpireTime(t.expiration_time))+"\n\t\t\t\t")])],1),o._v(" "),r("div",{staticClass:"dialog-content-histories-item-images"},[r("div",{staticClass:"original-image item-image"},[r("div",{staticClass:"txt"},[o._v(o._s(o.$t("OriginalPicture")))]),o._v(" "),r("img",{attrs:{src:null==t||null===(v=t.model_beautify_meta)||void 0===v?void 0:v.source_url,alt:"original image"}})]),o._v(" "),o._l((null==t?void 0:t.img_uris)||[],(function(e,i){return r("div",{key:"image-".concat(i),staticClass:"generated-images item-image"},[r("div",{staticClass:"hover-btns"},o._l(o.hoverBtns,(function(n){return r("div",{key:n.type,staticClass:"item-btn flex-center",on:{click:function(r){return o.handleOperate(n.type,t,e)}}},[r("i",{staticClass:"iconfont",class:n.icon})])})),0),o._v(" "),r("img",{attrs:{src:null==e?void 0:e.url,alt:"generated image"},on:{click:function(e){return o.handleClick(t,i)}}}),o._v(" "),r("div",{staticClass:"bottom-btns"},o._l(o.bottomBtns,(function(n){return r("div",{key:n.type,staticClass:"item-btn flex-center",on:{click:function(r){return o.handleOperate(n.type,t,e)}}},[r("i",{staticClass:"iconfont",class:n.icon}),o._v(" "),r("span",[o._v(o._s(o.$t(n.label)))])])})),0)])}))],2)])})),o._v(" "),o.imageViewerVisible?r("ModelFittingImageViewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"2001"},attrs:{"initial-index":(null===(t=o.currentImg)||void 0===t?void 0:t.idx)||0,"on-close":function(){return o.imageViewerVisible=!1},"url-list":o.urlList,originalImg:(null===(e=o.currentImg)||void 0===e||null===(e=e.model_beautify_meta)||void 0===e?void 0:e.source_url)||""},on:{operate:o.handleViewerOperate}}):o._e()],2)}),[],!1,null,"674796b2",null).exports);function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kt={name:"WorkAreaDialog",provide:function(){return{top:this}},props:{exampleList:{type:Array,default:function(){return[]}}},components:{WorkAreaTop:_,WorkAreaContentTabs:x,WorkAreaContentDisplay:ct,WorkAreaContentUpload:mt,WorkAreaContentHistories:wt},data:function(){return{dialogVisible:!1,imgUrl:"",currentTab:"modelImage",imgList:[],selectedImgInfo:null,num:0,uploading:!1,maskUrl:""}},computed:xt(xt({},Object(l.c)("user",["isLoggedIn"])),{},{isModelImage:function(){return"modelImage"===this.currentTab},isCreationRecord:function(){return"creationRecord"===this.currentTab},selectedLoading:function(){var t,e;return(null===(t=this.selectedImgInfo)||void 0===t?void 0:t.isLoading)||"number"==typeof(null===(e=this.selectedImgInfo)||void 0===e?void 0:e.isLoading)}}),watch:{isLoggedIn:{handler:function(t){!t&&this.closeDialog()}},dialogVisible:{handler:function(t){t?this.uploadSuccess(this.imgUrl,"add"):this.imgList=[]},immediate:!0}},methods:{openDialog:function(t){this.imgUrl=t,this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1,this.clearData()},clearData:function(){this.imgUrl="",this.currentTab="modelImage",this.imgList=[],this.selectedImgInfo=null,this.num=0,this.uploading=!1,this.maskUrl=""},changeCurrentTab:function(t){this.currentTab=t},changeCurrentImgInfo:function(t){var e=this.imgList.find((function(e){return e.idx==t}));this.selectedImgInfo=e||{}},addGeneratedImg:function(t,e){var n=t||[],o=this.imgList.find((function(t){return t.idx==e}));null!=o&&o.generatedImg&&(n=t.concat(o.generatedImg)),this.$set(o,"generatedImg",n)},delGeneratedImg:function(t,e){var n,o=null===(n=this.selectedImgInfo)||void 0===n||null===(n=n.generatedImg)||void 0===n?void 0:n.filter((function(n){return n.id==t&&n.index!==e}));this.$set(this.selectedImgInfo,"generatedImg",o)},saveInfo:function(t,e,n){var o=t.find((function(t){return 1==t.sub_type}))||{},mask=t.find((function(t){return 2==t.sub_type}))||{},r=this.imgList.find((function(t){return t.idx==n}));this.$set(r,"segment",e),this.$set(r,"cut_source_url",(null==o?void 0:o.url)||""),this.$set(r,"mask",(null==mask?void 0:mask.url)||"")},setRecognitionProcess:function(t,e){var n=this.imgList.find((function(e){return e.idx==t}));this.$set(n,"recognitionProcess",e)},uploadSuccess:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,h,v,m;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=0==n.imgList.length?0:n.imgList.length-1,o.next=3,n.getImgInfo(t);case 3:l=o.sent,c=l.width,d=void 0===c?0:c,h=l.height,v=void 0===h?0:h,m={url:t,idx:n.num,width:d,height:v},n.num++,"add"==e?n.imgList.push(m):n.$set(n.imgList,r,m),n.selectedImgInfo=m,n.$nextTick((function(){var e;null===(e=n.$refs)||void 0===e||null===(e=e.workAreaContentUpload)||void 0===e||e.getRecognition(t,m.idx)}));case 13:case"end":return o.stop()}}),o)})))()},uploadSuccessReplace:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,h;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.getImgInfo(t);case 2:r=o.sent,l=r.width,c=void 0===l?0:l,d=r.height,h={url:t,idx:e,width:c,height:void 0===d?0:d},n.$set(n.imgList,e,h),n.selectedImgInfo=h,n.$nextTick((function(){var e;null===(e=n.$refs)||void 0===e||null===(e=e.workAreaContentUpload)||void 0===e||e.getRecognition(t,h.idx)}));case 11:case"end":return o.stop()}}),o)})))()},getImgInfo:function(t){return new Promise((function(e,n){var img=new Image;img.src=t,img.onload=function(){var t=this.naturalWidth,n=this.naturalHeight;e({width:t,height:n})}})).catch((function(t){return console.error(t),Promise.reject(new Error("error"))}))},imgDelItem:function(t){var e;t==(null===(e=this.selectedImgInfo)||void 0===e?void 0:e.idx)&&(this.selectedImgInfo=null);var n=this.imgList.filter((function(e){return e.idx!=t}));this.$set(this,"imgList",n)},imgDelAll:function(){var t=this;this.$confirm(this.$t("deleteConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var e;t.imgList=[],t.selectedImgInfo=null,t.setUploading(!1),null===(e=t.$refs)||void 0===e||null===(e=e.workAreaContentUpload)||void 0===e||e.clearInterval()}))},saveImg:function(t,e){var n=this;Object(k.h)({folder_no:"default",id:t,index:e}).then((function(t){console.log("res",t),n.$message.success(n.$t("SaveToPersonalCenter"))}))},deleteImg:function(t,e,n){var o=this;Object(k.d)({id:t,index:e}).then((function(t){"function"==typeof n&&n(),o.$message.success(o.$t("DeleteSuccess"))}))},setUploading:function(t){this.uploading=t},changeMask:function(t,e,n){this.$set(this.selectedImgInfo,"mask",t),this.$set(this.selectedImgInfo,"cut_source_url",e),this.$set(this.selectedImgInfo,"maskBase64",n)},setGeneratedLoading:function(t,e){var n=this.imgList.find((function(e){return e.idx==t}));this.$set(n,"isLoading",e)},sendParams:function(t,e){var n;if(this.imgList.length>=5)this.$message.error(this.$t("ModelFittingSendTip"));else{var o=t.img_uris,r=void 0===o?[]:o,l=t.model_beautify_meta,c=void 0===l?{}:l,d=r[e]||{},h=d.width,v=void 0===h?0:h,m=d.height,f=void 0===m?0:m,_=c.source_url,mask=c.mask,y=c.cut_source_url,w=c.source_segment,C=c.scene_template_id,x=c.models;null===(n=this.$refs)||void 0===n||null===(n=n.workAreaContentDisplay)||void 0===n||null===(n=n.$refs)||void 0===n||null===(n=n.modelImage)||void 0===n||n.changeVal(x,C);var k={url:_,idx:this.num,width:v,height:f,mask:mask,segment:w,cut_source_url:y};this.num++,this.imgList.push(k),this.selectedImgInfo=k,this.currentTab="modelImage"}}}},Ot=(n(2649),Object(f.a)(kt,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{"custom-class":"work-area-dialog","destroy-on-close":"",fullscreen:!0,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("WorkAreaTop",{on:{closeDialog:t.closeDialog}}),t._v(" "),e("div",{staticClass:"dialog-content"},[e("WorkAreaContentTabs",{attrs:{currentTab:t.currentTab},on:{changeCurrentTab:t.changeCurrentTab}}),t._v(" "),e("WorkAreaContentDisplay",{directives:[{name:"show",rawName:"v-show",value:t.isModelImage,expression:"isModelImage"}],ref:"workAreaContentDisplay",attrs:{exampleList:t.exampleList}}),t._v(" "),e("WorkAreaContentUpload",{directives:[{name:"show",rawName:"v-show",value:t.isModelImage,expression:"isModelImage"}],ref:"workAreaContentUpload"}),t._v(" "),e("WorkAreaContentHistories",{directives:[{name:"show",rawName:"v-show",value:!t.isModelImage,expression:"!isModelImage"}]})],1)],1)}),[],!1,null,"059465f1",null).exports),It=n(59);function $t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tt={name:"ModelClothesChanging",data:function(){return{isUploading:!1,exampleList:[]}},components:{WorkAreaDialog:Ot},mounted:function(){var t=this;Object(It.r)({type:5}).then((function(e){var n,o=(null==e||null===(n=e.data)||void 0===n?void 0:n.model_beautify_covers)||[];t.exampleList=o.map((function(i){return(null==i?void 0:i.url)||""}))}))},computed:jt(jt({},Object(l.e)("user",["cdnHost"])),Object(l.c)("user",["cdnHostFun","isLoggedIn"])),methods:{handleUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.file,e.isLoggedIn){n.next=4;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 4:if(!e.isUploading){n.next=6;break}return n.abrupt("return");case 6:if(["image/jpeg","image/png","image/jpg","image/webp"].includes(o.type)){n.next=10;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return");case 10:if(!(o.size/1024/1024>10)){n.next=21;break}return n.prev=11,n.next=14,Object(pt.a)(o,10485760);case 14:o=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),n.abrupt("return");case 21:return n.next=23,e.scaleImage(o,o.type);case 23:r=n.sent,e.isUploading=!0,new c.a({type:21}).startUpload(r).then((function(t){e.openWorkArea(t)})).catch((function(t){e.$message.error(e.$t(30005==t.code?"uploadImageViolatesRules":"uploadError"))})).finally((function(){e.isUploading=!1}));case 27:case"end":return n.stop()}}),n,null,[[11,17]])})))()},scaleImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";return new Promise((function(n,o){var r=new FileReader;r.onload=function(o){var img=new Image;img.src=o.target.result,img.onload=function(){var o=this.naturalWidth,r=this.naturalHeight,l=2048;if(this.imgSize={width:this.naturalWidth,height:this.naturalHeight},o>l||r>l){var c=Math.min(l/o,l/r),d=o*c,h=r*c,canvas=document.createElement("canvas"),v=canvas.getContext("2d");canvas.width=d,canvas.height=h,v.drawImage(img,0,0,d,h);var m=canvas.toDataURL(e),f=Object(ut.a)(m),_=new File([f],t.name.replace(/\.\w+$/,".png"),{type:"image/png"});n(_)}else n(t)}},r.readAsDataURL(t)})).catch((function(t){return console.error(t),Promise.reject(new Error("error"))}))},openWorkArea:function(t){this.isLoggedIn?this.$refs.workAreaDialog.openDialog(t):this.$EventBus.$emit("openLoginDialog")}}},Lt=Tt,St=(n(2650),Object(f.a)(Lt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai-model-fitting"},[e("img",{staticClass:"ai-model-fitting-icon",attrs:{src:n(634),alt:"icon"}}),t._v(" "),e("div",{staticClass:"ai-model-fitting-title"},[t._v(t._s(t.$t("ai_model_fitting_title")))]),t._v(" "),e("div",{staticClass:"ai-model-fitting-desc"},[t._v(t._s(t.$t("ai_model_fitting_desc")))]),t._v(" "),e("div",{staticClass:"ai-model-fitting-content"},[e("div",{staticClass:"ai-model-fitting-content-left"},[e("video",{attrs:{src:"https://".concat(t.cdnHost,"/20240418/089d7871-bd21-451e-9d49-e295e2612952.mov"),loop:"",autoplay:"",muted:""},domProps:{muted:!0}})]),t._v(" "),e("div",{staticClass:"ai-model-fitting-content-right"},[e("el-upload",{ref:"upload",staticClass:"upload-box",attrs:{accept:".jpg, .jpeg, .webp, .png",drag:"",action:"/",multiple:!1,"show-file-list":!1,"http-request":t.handleUpload}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n\t\t\t\t\t"+t._s(t.$t("ModelFittingUploadTips"))+"\n\t\t\t\t")])]),t._v(" "),e("div",{staticClass:"tip"},[e("i",{staticClass:"el-icon-bottom"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_tools_9")))])]),t._v(" "),e("div",{staticClass:"example"},t._l(t.exampleList,(function(n,o){return e("img",{key:o,attrs:{alt:"image",src:n},on:{click:function(e){return t.openWorkArea(n)}}})})),0)],1)]),t._v(" "),e("WorkAreaDialog",{ref:"workAreaDialog",attrs:{exampleList:t.exampleList}})],1)}),[],!1,null,"a55b100c",null));e.default=St.exports},3251:function(t,e,n){"use strict";n.r(e);n(10),n(14),n(9),n(7),n(11),n(12),n(8),n(6);var o=n(2),r=(n(32),n(19),n(4),n(24)),l={name:"noticeModal",data:function(){return{visible:!1,iconUrl:n(753)}},methods:{openModal:function(){this.visible=!0},handleClose:function(){this.visible=!1},handleConfirm:function(){this.handleClose(),localStorage.setItem("aiPhotographConfirm",!0),this.$emit("confirm")}}},c=(n(2583),n(0)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"提示",visible:t.visible,width:"440px","custom-class":"c-ai-photography-notice-modal","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[e("div",{staticClass:"notice-modal-wrap"},[e("div",{staticClass:"notice-icon"},[e("img",{attrs:{src:t.iconUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"photography-notice-modal-title"},[t._v(t._s(t.$t("photography6")))]),t._v(" "),e("div",{staticClass:"photography-notice-modal-content"},[e("p",[t._v("1. "+t._s(t.$t("photography3")))]),t._v(" "),e("p",[t._v("2. "+t._s(t.$t("photography4")))])]),t._v(" "),e("div",{staticClass:"photography-notice-modal-confirm-btn-wrap",on:{click:function(e){return e.stopPropagation(),t.handleConfirm.apply(null,arguments)}}},[e("div",{staticClass:"confirm-btn"},[t._v(t._s(t.$t("photography5")))])])])])}),[],!1,null,null,null),d=component.exports,h=(n(28),n(15)),v=(n(16),n(47),n(43),n(1904)),m=n(59),f=n(1),_=n(53);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={name:"digitalCloneList",components:{makeDigitalProcessModal:v.default},props:{baseShowNum:{type:Number,default:4}},data:function(){return{list:[],taskInfo:null,loading:!1,pageInfo:{page:1,page_size:30},debounceHandleScroll:null,scrollTop:0}},computed:w(w({},Object(f.c)("creation",["aiPhotoTrainList"])),{},{computedPercentage:function(){var t;return"".concat(this.$t("photography37")," ").concat((null==this||null===(t=this.list[0])||void 0===t?void 0:t.train_process)||0,"%")},showDeleteBtn:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[3,4].includes(null==t?void 0:t.train_status)}},renderBaseShowNum:function(){return this.baseShowNum<=4?4:this.baseShowNum}}),mounted:function(){var t=this;this.getList(),this.$EventBus.$on("refreshAiPhotographyDigitalCloneList",(function(){t.handleSearch()})),this.$EventBus.$on("updateAiPhotographyDigitalCloneList",(function(e){t.updateListItem(e)})),this.debounceHandleScroll=Object(r.debounce)(this.handleScroll,600),window.addEventListener("scroll",this.debounceHandleScroll)},beforeDestroy:function(){this.$EventBus.$off("refreshAiPhotographyDigitalCloneList"),this.$EventBus.$off("updateAiPhotographyDigitalCloneList"),window.removeEventListener("scroll",this.debounceHandleScroll),this.debounceHandleScroll=null},methods:w(w({},Object(f.b)("creation",["setAiPhotographyTrainList"])),{},{openMakeDigitalCloneModal:function(){this.$emit("openModal")},openProcessModal:function(t){[1,2].includes(null==t?void 0:t.train_status)&&this.$EventBus.$emit("openMakeDigitalProcessModal",{type:"process"})},updateListItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(this.list||[]).forEach((function(n){(null==e?void 0:e.id)===(null==n?void 0:n.train_id)&&(console.log(e,"变动---"),t.$set(n,"train_status",e.state||(null==n?void 0:n.train_status)),t.$set(n,"train_process",e.process>100?100:e.process),t.$set(n,"train_status_desc",e.state_desc||n.train_status_desc))}))},handleSearch:function(){this.pageInfo.page=1,this.getList()},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||(this.loading=!0),Object(m.l)({limit:100}).then((function(n){var o;if(1e4!==(null==n||null===(o=n.status)||void 0===o?void 0:o.code))return n;if(e){var r,l=n.data,data=void 0===l?{}:l,c=Object(_.e)(t.list,(null==data?void 0:data.items)||[]);c=(c||[]).map((function(e){return e.name="".concat(t.$t("photography7")).concat(e.name),[1,2].includes(null==e?void 0:e.train_status)&&t.setAiPhotographyTrainList([{id:e.train_id,state:null==e?void 0:e.train_status,process:(null==e?void 0:e.train_process)||0}]),e})),(r=t.list).push.apply(r,Object(h.a)(c))}else{var d;t.list=((null==n||null===(d=n.data)||void 0===d?void 0:d.items)||[]).map((function(e){return e.name="".concat(t.$t("photography7")).concat(e.name),[1,2].includes(null==e?void 0:e.train_status)&&t.setAiPhotographyTrainList([{id:e.train_id,state:null==e?void 0:e.train_status,process:(null==e?void 0:e.train_process)||0}]),e}))}})).finally((function(){t.loading=!1}))},handleScroll:function(){var t=this,e=document.documentElement.scrollHeight,n=window.innerHeight;this.$nextTick((function(){t.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset,e-t.scrollTop-n<300&&(console.log("loadMore------------"),t.handleLoadMore())}))},handleLoadMore:function(){var t=this.list.length?this.list[this.list.length-1]:"",e=t?t.id:"";this.getList(e)},deleteDigitalCloneItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};[3,4].includes(null==e?void 0:e.train_status)&&this.$confirm(this.$t("photography33"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){Object(m.v)({id:e.id}).then((function(n){var o;if(1e4===(null==n||null===(o=n.status)||void 0===o?void 0:o.code)){var r=t.list.findIndex((function(t){return t.id===e.id}));-1!==r&&t.list.splice(r,1),t.$message.success(t.$t("deleteSuccess"))}})).finally((function(){}))})).catch((function(){}))}})},x=C,k=(n(2585),Object(c.a)(x,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"c-ai-photography-digital-clone-list",style:{gridTemplateColumns:"repeat(".concat(t.renderBaseShowNum,", 1fr)")}},[e("div",{staticClass:"card-item card-item-add",on:{click:function(e){return e.stopPropagation(),t.openMakeDigitalCloneModal.apply(null,arguments)}}},[e("span",{staticClass:"el-icon-plus"}),t._v(" "),e("div",{staticClass:"card-item-add-title"},[t._v(t._s(t.$t("photography9")))])]),t._v(" "),t._l(t.list,(function(n,o){return e("div",{directives:[{name:"loading",rawName:"v-loading",value:[1,2].includes(null==n?void 0:n.train_status),expression:"[1, 2].includes(item?.train_status)"}],key:o,staticClass:"card-item",class:[[4].includes(null==n?void 0:n.train_status)?"cart-item-failed":""],attrs:{"element-loading-text":t.computedPercentage},on:{click:function(e){return e.stopPropagation(),t.openProcessModal(n)}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteBtn(n),expression:"showDeleteBtn(item)"}],staticClass:"card-item-delete-btn",on:{click:function(e){return e.stopPropagation(),t.deleteDigitalCloneItem(n)}}},[e("span",{staticClass:"el-icon-delete"})]),t._v(" "),null!=n&&n.cover?e("img",{directives:[{name:"webp",rawName:"v-webp",value:t.$imgL,expression:"$imgL"},{name:"show",rawName:"v-show",value:[3].includes(null==n?void 0:n.train_status),expression:"[3].includes(item?.train_status)"}],staticClass:"card-item-image",attrs:{src:(null==n?void 0:n.cover)||"",alt:""}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:[4].includes(null==n?void 0:n.train_status),expression:"[4].includes(item?.train_status)"}],staticClass:"card-item-failed"},[t._v("\n      "+t._s(t.$t("photography46"))+"\n    ")]),t._v(" "),e("div",{staticClass:"bottom-bar"},[t._v("\n      "+t._s(n.name)+"\n    ")])])}))],2)}),[],!1,null,"1fe7abeb",null)),O=k.exports,I=(n(165),n(49),n(76),n(5)),$=n(35),j=n.n($),T=n(33),L=n(22),S=n(356),D=(n(18),n(168)),P=n(152);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R={name:"MessageImg",components:{taskImageViewer:D.a,SaveTo:P.a},props:{src:{type:String,required:!0,default:function(){return""}},nsfw:{type:Number,default:2},message:{type:Object,default:function(){return{}}},gridBanner:{type:Object,default:function(){return{}}},operateNumber:{type:Number,default:function(){return 1}}},data:function(){return{loading:!0,loaded:!0,error:!1,dialogVisible:!1,retryCount:0,isShowImage:!0,baseImageWidth:337,imageUrl:"",hoverBtnList:[{code:"extraUpscale",icon:"upload-image-icon",useText:!1,order:1,tips:"photography39",show:!0,showTypeOptions:[]},{code:"download",icon:"modelDownload",useText:!1,order:5,tips:"DownloadImg",show:!0,showTypeOptions:[]}]}},computed:A(A(A({},Object(f.c)(["isSupportWebp"])),Object(f.e)("user",["cdnHost"])),{},{showExtraUpscale:function(){return[22,"22","23",23].includes(this.message.type)},showRemoveBackground:function(){return[2,"2",13,"13"].includes(this.message.type)},isShowBtn:function(){var t={extraUpscale:[this.showExtraUpscale],download:[!0]};return function(e){return!!Object.keys(t).includes(e)&&t[e].every((function(t){return!!t}))}},hoverBtnRenderList:function(){var t=this;return this.hoverBtnList.map((function(e){return e.show=t.isShowBtn(e.code),e})).filter((function(t){return t.show}))},renderUrl:function(){return"https://".concat(this.cdnHost,"/static/upload/20230401/62f66fbd-bc27-44f6-b744-5c5d7e5b18ee.webp")},isShowOperateBtn:function(){return["22",22,4,"4",23,"23"].includes(this.message.type)&&!this.error},convertPictureWidthAndHeight:function(){var t=this.message.banner,e=(void 0===t?{}:t)||{},n=e.width,o=void 0===n?200:n,r=e.height,l=void 0===r?200:r,c=Object(_.f)(o,l,this.baseImageWidth);return isNaN(c.height)?{}:{width:"".concat(c.width,"px"),height:"".concat(c.height,"px")}},covertSmallWidth:function(){var t=this.message.banner,e=void 0===t?{}:t,n=e.width,o=void 0===n?0:n;e.height;return o<=200?{minWidth:"".concat(150,"px"),maxWidth:"".concat(150,"px")}:{}},viewImageList:function(){var t=this.message,e=t.banner,n=void 0===e?{}:e,o=t.img_uris,r=void 0===o?[]:o;t.preprocess_images,t.type;return Array.isArray(r)&&r.length?(j()(this.message.img_uris||[])||[]).map((function(t,e){return t.operateNumber=e+1,t})).filter((function(t){return![1,"1"].includes(t.nsfw)})):[Object.assign({},j()(n),{operateNumber:1})]},currentImageIndex:function(){var t,e=this;return-1===(t=this.viewImageList.findIndex((function(t){return t.operateNumber===e.operateNumber})))?0:t},getImageUrl:function(){return this.isShowImage?this.imageUrl:""}}),mounted:function(){},watch:{src:{handler:function(t){t&&"string"==typeof t&&(this.imageUrl=Object(I.x)(t,"low"))},immediate:!0}},methods:{downloadImage:function(){Object(I.z)(this.src,this.$t("photography8"))},onLoad:function(t){this.loading=!1,this.loaded=!0,this.error=!1,this.$EventBus.$emit("needScrollBottom",j()(this.message))},onError:function(){this.loading=!1,this.imageUrl&&(this.imageUrl.includes("_high.webp")||this.imageUrl.includes("_low.webp"))&&(this.imageUrl=this.src),this.reLoadImage(),this.error=!0},reLoadImage:function(){var t=this;this.retryCount>=1||(this.isShowImage=!1,this.retryCount++,this.loading=!0,this.$nextTick((function(){t.isShowImage=!0})))},clickReloadImage:function(){this.retryCount=0,this.error=!1,this.imageUrl=this.isSupportWebp?Object(I.x)(this.src,"low"):this.src,this.reLoadImage()},viewBigImage:function(){this.dialogVisible=!0},closeViewBigImage:function(){this.dialogVisible=!1},handleContextMenu:function(t){1===this.nsfw&&t.preventDefault()},handleClick:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"download"!==e?this.$emit("imageOperate",e,this.operateNumber,null===(t=this.message)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.url):this.downloadImage()}}},M=R,N=(n(2587),n(2588),Object(c.a)(M,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-media-attachments-container"},[e("div",{staticClass:"attachments-wrap"},[e("div",{staticClass:"message-attachment-media"},[e("div",{staticClass:"image-content"},[e("div",{staticClass:"image-content-wrap",style:{"max-width":"".concat(t.baseImageWidth,"px"),"min-width":"".concat(200,"px")}},[e("div",{staticClass:"image-render-box"},[1===t.nsfw?[e("img",{staticClass:"media-attachments-img image-opacity-0",style:t.loading?t.convertPictureWidthAndHeight:t.covertSmallWidth,attrs:{src:t.renderUrl,alt:"",decoding:"async",loading:"lazy"},on:{load:t.onLoad,error:t.onError,contextmenu:function(e){return t.handleContextMenu(e)}}})]:[e("img",{staticClass:"media-attachments-img",class:[t.loading?"":"media-attachments-img-show",t.loading?"image-opacity-0":""],style:t.loading?t.convertPictureWidthAndHeight:t.covertSmallWidth,attrs:{src:t.getImageUrl,alt:"",decoding:"async",loading:"lazy"},on:{load:t.onLoad,error:t.onError,click:t.viewBigImage,contextmenu:function(e){return t.handleContextMenu(e)}}})],t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading&&1!==t.nsfw,expression:"loading && nsfw !== 1"}],staticClass:"loading-wrapper"},[e("div",{staticClass:"loading-wrapper-inner"},[e("span",{staticClass:"spinner",attrs:{role:"img","aria-label":t.$t("Loading")}},[t._m(0)])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowOperateBtn&&t.isShowImage&&t.src&&!t.loading&&![0,"0"].includes(this.operateNumber),expression:"isShowOperateBtn && isShowImage && src && !loading && ![0,'0'].includes(this.operateNumber)"}],staticClass:"image-hover-mask",on:{click:t.viewBigImage}},[e("div",{staticClass:"image-hover-mask-btn-box"},[t._l(t.hoverBtnRenderList,(function(n){return[e("el-tooltip",{key:n.code,attrs:{"popper-class":"task-image-viewer-popover",effect:"light",placement:"top",content:t.$t(null==n?void 0:n.tips)}},[e("span",{staticClass:"image-hover-mask-btn image-hover-mask-btn-single",on:{click:function(e){return e.stopPropagation(),t.handleClick(n.code)}}},[n.useText?[t._v("\n                            "+t._s(n.text)+"\n                          ")]:e("i",{staticClass:"iconfont image-hover-mask-btn-icon",class:"icon-".concat(n.icon)})],2)])]}))],2)])],2)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.error&&!t.loading,expression:"error && !loading"}],staticClass:"image-load-error"},[e("i",{staticClass:"iconfont icon-image-load-error image-load-error-icon"}),t._v(" "),e("span",{staticClass:"image-load-error-text",on:{click:function(e){return e.stopPropagation(),t.clickReloadImage.apply(null,arguments)}}},[t._v(t._s(t.$t("reloadImage")))])])])]),t._v(" "),t.dialogVisible?e("task-image-viewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"9999"},attrs:{"on-close":t.closeViewBigImage,"initial-index":t.currentImageIndex,"show-operate-btn":!1,message:t.message,"url-list":t.viewImageList}}):t._e()],1)])}),[function(){var t=this._self._c;return t("span",{staticClass:"inner-MGEKwh wanderingCubes-2A046F"},[t("span",{staticClass:"item-2VgEex"}),t("span",{staticClass:"item-2VgEex"})])}],!1,null,"3c82a66c",null)),U=N.exports,F=n(98);function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var z={name:"MsgItem",mixins:[T.a],props:{message:{type:Object,default:function(){return{}},required:!0}},components:{MessageImg:U,SwipeList:S.a,QuickQueue:F.a},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),d=e.getSeconds().toString().padStart(2,"0");return Object(I.u)(e,new Date)?"".concat(l,":").concat(c,":").concat(d):"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(d)}},computed:H(H(H(H({},Object(f.c)(["isSupportWebp"])),Object(f.c)("user",["userInfo","isCompanyAccount"])),Object(f.e)("payment",["paymentInfo"])),{},{getTemplateName:function(){var t,e,text="";["custom_portrait_template"].includes(null===(t=this.message)||void 0===t||null===(t=t.create_metadata)||void 0===t?void 0:t.portrait_template_id)?text=this.$t("photography19"):text=(null===(e=this.message)||void 0===e||null===(e=e.create_metadata)||void 0===e?void 0:e.portrait_template_name)||"";return text},computedRemakeTaskCost:function(){var t;return["custom_portrait_template"].includes(null===(t=this.message)||void 0===t||null===(t=t.create_metadata)||void 0===t?void 0:t.portrait_template_id)?4:12},isShowExpireTime:function(){var t=this.message.expire_time;return t&&t>0},getExpireTime:function(){var t=this.message.expire_time,e=(new Date).getTime();if(t&&t>e){var n=t-e,o=Math.floor(n/864e5);return o?this.$t("TaskExpireTime",{param:o}):this.$t("ExpiresSoon")}return this.$t("TaskExpireTime",{param:0})},computedPercentage:function(){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).process;return void 0===t?0:t}},convertStatusText:function(){var t={userCancelDesc:this.$t("userCancel"),sysCancelDesc:this.$t("systemCancel"),sysTimeoutDesc:this.$t("photography56")};return this.message.status_desc?t[this.message.status_desc]:""},getGridImageUrl:function(){return function(t){var e="";return t&&!["",null,void 0].includes(t.url)?e=t.url:e}},getImageInfo:function(){return function(t){return Object.assign(j()(this.message),{banner:t})}}}),data:function(){return{customColor:"#2E9E60",isPosting:!1,morePopoverVisible:!1}},mounted:function(){},beforeDestroy:function(){},methods:{autoResizeScrollBtn:function(){var t=this;this.$nextTick((function(){try{var e;null==t||null===(e=t.$refs)||void 0===e||e.swipeList.setMoveBtnShow()}catch(t){}}))},moreActions:function(){if("delete"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""))this.handleDeleteTask()},handleDeleteTask:function(){var t=this;this.$confirm(this.$t("photography38"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var e={ids:[t.message.id]};t.globalLoading=!0,Object(L.f)(e).then((function(e){var n,o;["10000",1e4].includes(null==e||null===(n=e.status)||void 0===n?void 0:n.code)?(t.$emit("operate",{type:"deleteTask",info:t.message}),t.$message({message:t.$t("deleteSuccess"),type:"success"})):t.$message({message:(null==e||null===(o=e.status)||void 0===o?void 0:o.msg)||t.$t("ServerError"),type:"error"})})).finally((function(){t.globalLoading=!1}))})).catch((function(t){console.log("err",t)}))},handleReStart:function(){this.$emit("operate",{info:this.message,type:"reStart"})},handleImageOperate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("extraUpscale"===t)this.$emit("operate",{info:this.message,type:"extraUpscale",btnInfo:{btnType:"U",id:e}})}}},V=z,W=(n(2589),n(2590),n(2591),Object(c.a)(V,(function(){var t,e,n,o=this,r=o._self._c;return r("div",{staticClass:"c-msg-item"},[r("div",{staticClass:"chat-message-header"},[r("h3",{staticClass:"chat-message__title"},[r("span",{staticClass:"chat-message__title-task-tag"},[o._v(o._s(o.$t("photography43")))]),o._v(" "),r("span",{staticClass:"chat-message__title-task-text"},[o._v(o._s(o.getTemplateName))]),o._v(" "),r("span",{staticClass:"chat-message__title-task-tag-2"},[o._v(o._s(o.$t("photography7"))+o._s((null===(t=o.message)||void 0===t||null===(t=t.create_metadata)||void 0===t?void 0:t.portrait_model_name)||""))]),o._v(" "),o.message.create_at?r("span",{staticClass:"chat-message__title-time"},[o._v(o._s(o._f("formatDateTime")(o.message.create_at)))]):o._e(),o._v(" "),r("el-popover",{attrs:{trigger:"click","popper-class":"custom-popver"}},[r("div",{staticClass:"task-info-tips"},[3===o.message.status?[r("p",[o._v(o._s(o.$t("TempTokensConsumption")+(null===(e=o.message)||void 0===e||null===(e=e.task_deduction_detail)||void 0===e?void 0:e.temp_hashrate)+"，"+o.$t("balance")+"："+o.paymentInfo.tempCoins))]),o._v(" "),r("p",[o._v(o._s(o.$t("TokensConsumption")+"  "+(null===(n=o.message)||void 0===n||null===(n=n.task_deduction_detail)||void 0===n?void 0:n.hashrate)+"，"+o.$t("balance")+"："+o.paymentInfo.calculateCoins))])]:o._e(),o._v(" "),r("p",[o._v(o._s(o.$t("TaskID"))+": "+o._s(o.message.id))])],2),o._v(" "),r("i",{staticClass:"iconfont icon-task_tips task-info-icon",attrs:{slot:"reference"},slot:"reference"})]),o._v(" "),o.isShowExpireTime?r("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"custom-tips-popper",content:o.$t("photography10")}},[r("span",{staticClass:"chat-message__title-task-tag-expire-time"},[r("span",[o._v(o._s(o.getExpireTime))])])]):o._e()],1)]),o._v(" "),[3,"3",4,"4"].includes(o.message.status)?r("div",{staticClass:"msg-item-more-panel",class:[o.morePopoverVisible?"msg-item-more-panel-show":""]},[r("el-popover",{ref:"myPopover",attrs:{placement:"bottom-end","popper-class":"msg-item-more-popover","visible-arrow":!1,width:"100",trigger:"click"},model:{value:o.morePopoverVisible,callback:function(t){o.morePopoverVisible=t},expression:"morePopoverVisible"}},[r("div",{staticClass:"pop-btns flex"},[r("button",{on:{click:function(t){return o.moreActions("delete")}}},[r("span",{staticClass:"pop-btns-text"},[o._v(o._s(o.$t("Delete")))]),o._v(" "),r("span",{staticClass:"pop-btns-icon"},[r("i",{staticClass:"iconfont icon-shanchu"})])])]),o._v(" "),r("div",{staticClass:"msg-item-more-icon",attrs:{slot:"reference"},slot:"reference"},[r("i",{staticClass:"iconfont icon-more"})])]),o._v(" "),![4,"4"].includes(o.message.status)&&[22,"22",23,"23"].includes(o.message.type)?r("div",{staticClass:"msg-item-more-icon",on:{click:function(t){return t.stopPropagation(),o.handleReStart.apply(null,arguments)}}},[r("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"custom-tips-popper",content:o.$t("photography45",{number:o.computedRemakeTaskCost})}},[r("i",{staticClass:"iconfont icon-refresh-icon2"})])],1):o._e()],1):o._e(),o._v(" "),[2,"2",3,"3"].includes(o.message.status)&&o.message.img_uris.length?r("div",{staticClass:"message-accessories",on:{mouseenter:o.autoResizeScrollBtn}},[r("swipe-list",{ref:"swipeList",attrs:{"move-leng":200}},[r("div",{staticClass:"media-attachments-container"},[o.message&&Array.isArray(o.message.img_uris)&&o.message.img_uris.length?o._l(o.message.img_uris,(function(t,e){return r("message-img",{key:e,attrs:{src:o.getGridImageUrl(t),nsfw:t.nsfw,"grid-banner":o.message.banner,message:o.getImageInfo(t),"operate-number":e+1},on:{imageOperate:o.handleImageOperate}})})):o._e()],2)])],1):o._e(),o._v(" "),[1,"1",2,"2",4,"4"].includes(o.message.status)?r("div",{staticClass:"message-process-container"},[[2,"2"].includes(o.message.status)&&o.computedPercentage(o.message)?r("div",{staticClass:"message-process-panel"},[r("el-progress",{attrs:{percentage:o.computedPercentage(o.message),color:o.customColor,"show-text":!1,"stroke-width":7}})],1):o._e(),o._v(" "),r("div",{staticClass:"message-process-operate-box"},[[1,"1"].includes(o.message.status)?[r("span",{staticClass:"process-operate-box-text"},[o._v(o._s(o.$t("TaskStatusWaitingToStart"))+" "),r("span",{staticClass:"message-process-loading-span"})]),o._v(" "),r("QuickQueue",{attrs:{quickOptions:o.message,quickStyle:{height:"34px",fontSize:"12px"}}})]:[2,"2"].includes(o.message.status)&&!o.computedPercentage(o.message)?[r("span",{staticClass:"process-operate-box-text"},[o._v(o._s(o.$t("TaskStatusPreparing"))+" "),r("span",{staticClass:"message-process-loading-span"})])]:[4,"4"].includes(o.message.status)?r("span",{staticClass:"process-operate-box-text",staticStyle:{color:"#DA373D"}},[o._v(o._s(o.convertStatusText))]):r("span",{staticClass:"process-operate-box-text"},[o._v(o._s(o.$t("youHaveCompleted"))),r("span",{staticClass:"process-operate-box-text-strong",staticStyle:{"margin-left":"5px"}},[o._v(o._s(o.computedPercentage(o.message))+"%")]),o._v(" "),r("span",{staticClass:"message-process-loading-span"})])],2)]):o._e()])}),[],!1,null,"6537a8c1",null));function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Q={name:"taskView",inject:["photographyRef"],components:{MsgItem:W.exports},mixins:[n(2592).a],data:function(){return{loading:!1,list:[],emptyImgUrl:n(577),showScroll:!1,debounceHandleScroll:function(){},last1:0,last2:0,timer:null,scrollTop:0}},mounted:function(){this.getList(),this.debounceHandleScroll=Object(r.debounce)(this.handleScroll,600),window.addEventListener("scroll",this.debounceHandleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.debounceHandleScroll),this.debounceHandleScroll=null},methods:{handleTaskOperate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.info,n=void 0===e?{}:e,o=t.type,r=void 0===o?"":o;t.callback;switch(console.log("type: ",r),r){case"reStart":this.$logEvent("log_actions",{operation:"click_redraw_button",behavior_info:"".concat(null==n?void 0:n.id),behavior_info_sub:"photo_history"}),this.handleTaskRestart(n);break;case"extraUpscale":this.$logEvent("log_actions",{operation:"click_hd_repair_button",behavior_info:"".concat(null==n?void 0:n.id),behavior_info_sub:"photo_history"}),this.handleExtraUpscale(t);break;case"deleteTask":this.$logEvent("log_actions",{operation:"click_delete_button",behavior_info:"".concat(null==n?void 0:n.id),behavior_info_sub:"photo_history"}),this.handleDeleteTask(n.id)}},handleTaskRestart:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};n.task_id=e.id,Object(m.j)(n).then((function(e){var n=e||{},o=n.status,r=void 0===o?{}:o,l=n.data,data=void 0===l?{}:l;1e4===(null==r?void 0:r.code)&&(t.list.unshift(Y(Y({},data),{},{status:1})),t.$message.success(t.$t("CreateSuccess")),t.checkUpdateMessageNeedScrollToBottom())})).catch((function(t){})).finally((function(){}))},handleExtraUpscale:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})||{},n=e.info,o=e.btnInfo.id,r={};r.id=n.id,r.num=o,Object(m.y)(r).then((function(e){var n=e||{},o=n.data,data=void 0===o?{}:o,r=n.status,l=(void 0===r?{}:r).code;if([1e4,"10000"].includes(void 0===l?"":l)){var c=Y(Y({},data),{},{status:1});t.list.unshift(c),t.$message.success(t.$t("CreateSuccess")),t.checkUpdateMessageNeedScrollToBottom()}})).finally((function(){}))},checkUpdateMessageNeedScrollToBottom:function(){try{var t=this.$refs.scrollWrapper;t.scrollHeight-t.scrollTop<=2*t.clientHeight&&this.scrollToTop()}catch(t){}},handleDeleteTask:function(t){var e=this.list.findIndex((function(e){return e.id===t}));-1!==e&&this.list.splice(e,1)},handleClick:function(){this.photographyRef.backTo()},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.loading)return Promise.resolve();var n={limit:50};["",null,void 0].includes(e)||(n.after_id=e),n.keyword=this.keyword,this.loading=!0,Object(m.u)(n).then((function(e){var o;if(1e4!==(null==e||null===(o=e.status)||void 0===o?void 0:o.code))return e;var r=e.data,data=void 0===r?{}:r;if(n.after_id){var l,c,d=Object(_.e)(t.list,data.items||[]),v=null===(l=t.$refs)||void 0===l||null===(l=l.scrollWrapper)||void 0===l?void 0:l.scrollHeight;d=d.map((function(t){return t.img_uris=(t.img_uris||[]).filter((function(t){return null==t?void 0:t.url})),t})),(c=t.list).push.apply(c,Object(h.a)(d)),v&&d.length&&t.scrollToTop(v,"instant")}else t.list=(data.items||[]).map((function(t){return t.img_uris=(t.img_uris||[]).filter((function(t){return null==t?void 0:t.url})),t})),t.scrollToTop(0,"instant")})).finally((function(){t.loading=!1}))},sortByField:function(t,e){var n=function(a,b){var t=a[e],n=b[e];return t<n?-1:t>n?1:0};return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?t.sort(n):t.sort((function(a,b){return n(b,a)}))},scrollToTop:function(){this.$nextTick((function(){window.scrollTo(0,0)}))},isScrollEnd:function(){try{var t=this.$refs.scrollWrapper;this.last2=null==t?void 0:t.scrollTop,this.last2==this.last1&&(this.showScroll=!1)}catch(t){}},handleScroll:function(){var t=this,e=document.documentElement.scrollHeight,n=window.innerHeight;this.$nextTick((function(){t.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset,e-t.scrollTop-n<300&&(console.log("loadMore------------"),t.handleLoadMore())}))},handleLoadMore:function(){var t=this.list.length?this.list[this.list.length-1]:"",e=t?t.id:"";this.getList(e)},updateMessageList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.list.findIndex((function(e){return t.id===e.id})),n=Y({},t);-1===e&&this.list.unshift(n)}}},X=Q,J=(n(2593),Object(c.a)(X,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-ai-photography-digital-task-view"},[e("div",{staticClass:"tips-title"},[e("span",{staticClass:"el-icon-info tips-title-icon"}),t._v("\n    "+t._s(t.$t("photography10"))+"\n  ")]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}],ref:"scrollContainer",staticClass:"message-list"},[e("div",{staticClass:"messages-wrapper"},[e("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",class:[t.showScroll?"":"show-scroll-bar"],on:{scroll:t.debounceHandleScroll}},[t._l(t.list,(function(n){return[n.id?e("msg-item",{key:n.id,attrs:{message:n},on:{operate:t.handleTaskOperate}}):t._e()]}))],2)])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.list.length,expression:"!loading && !list.length"}],staticClass:"empty-box"},[e("div",{staticClass:"empty-img-box"},[e("img",{attrs:{src:t.emptyImgUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"empty-text-box"},[t._v("\n      "+t._s(t.$t("photography17"))+"\n    ")]),t._v(" "),e("div",{staticClass:"empty-btn-box"},[e("div",{staticClass:"empty-btn",on:{click:function(e){return e.stopPropagation(),t.handleClick.apply(null,arguments)}}},[t._v(t._s(t.$t("photography11")))])])])])}),[],!1,null,"becb1958",null)),K=J.exports,Z=n(3),tt=(n(20),n(29),n(38)),et=n(45),it={name:"aiPhotographyUploadImageItem",props:["value","createId","max","showUpload"],components:{},data:function(){return{replaceImageType:I.x,isUploading:!1,accept:".jpg,.jpeg,.png,.svg,.webp,.bmp,.tif",fileList:[],tempList:[],batchSize:2,selectedFilesCount:0}},computed:{showImgLoading:function(){return function(img){return!img.tags&&!img.disabled_tag&&"check"!=img.type&&(100!=img.uploadStatus||!img.error&&!img.ready)}}},watch:{value:function(t){t&&this.$set(this,"fileList",t)}},mounted:function(){this.value&&this.value&&this.$set(this,"fileList",this.value)},methods:{curstomUpload:function(t){var e=this;return Object(Z.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.fileList.length>=e.max)){n.next=2;break}return n.abrupt("return",!1);case 2:if(e.isUploading=!0,!((o=t.file).size/1024/1024>10)){n.next=16;break}return n.prev=5,n.next=8,Object(et.a)(o,10485760);case 8:o=n.sent,n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(5),console.error("Compression failed:",n.t0),e.isUploading=!1,n.abrupt("return",!1);case 16:return n.next=18,e.checkImageSize(o);case 18:r=n.sent,e.addFileByUpload(o).then((function(t){console.log("自定义id",t);var n=new tt.a({type:2});n.startUpload(o,{name:"post_img".concat(Date.now(),".png"),type:"png",category:14,size:o.size}).then((function(o){var l=e.fileList.find((function(e){return e.imageId===t}));l.url=o,l.uploadStatus=100,l.ready=!0,l.file_id=n.fileId,l.width=r.width,l.height=r.height})).catch((function(n){var o=e.fileList.findIndex((function(e){return e.imageId===t}));e.deleteFile(o)})).finally((function(){console.log("finally"),e.isUploading=!1}))}));case 20:case"end":return n.stop()}}),n,null,[[5,11]])})))()},checkImageSize:function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){var img=new Image;img.onload=function(){var t=img.naturalWidth,n=img.naturalHeight;e({width:t,height:n})},img.onerror=function(){n(!1)},img.src=t.target.result},o.readAsDataURL(t)}))},handleOpenPickArtWorkModal:function(){this.fileList.length>=this.max||this.$emit("openPickWorkModal",this.fileList)},handleChange:function(t,e){var n=this;this.tempList=e,this.$emit("input",this.fileList),setTimeout((function(){n.$emit("handleChange",n.fileList)}),500)},addFileByUpload:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){var o={imageId:e.fileList.length+t.name,uploadStatus:0,ready:!1};e.fileList.push(o),n(o.imageId)},r.onerror=function(t){return o(t)}}))},addFile:function(t){var e=t.imageId,n=t.url;this.fileList.push({file_id:e,url:n,uploadStatus:100,ready:!0})},updateProgress:function(t,e){var n=t.loaded,o=t.total,r=Math.round(n/o*100),l=this.fileList.findIndex((function(t){return t.file_id==e.file_id}));l>-1&&(this.fileList[l].uploadStatus=r)},clear:function(){var t=this;this.$confirm(this.$t("DeleteAllFiles"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){t.fileList=[],t.$emit("clearAll",t.fileList),t.$emit("handleChange",t.fileList)})).catch((function(){}))},deleteFile:function(t){var e=this.fileList[t];this.fileList.splice(t,1),this.$emit("delete",e),this.$emit("handleChange",this.fileList)},fileExceed:function(){this.$message({type:"warning",message:this.$t("CreativeCenterPopup20",{number:this.max})})},refreshUpload:function(t){var e=this.fileList[t].file_id;this.fileList[t].error=!1,this.fileList[t].uploadStatus=0,e?this.startUpload(e):this.getUploadSign(e)},imgError:function(t){console.log("图片加载失败",this.$refs[t.url]),this.$refs[t.url][0].src=t.url}}};n(2594);function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nt={name:"makeDigitalCloneModal",components:{aiPhotographyUploadImageItem:Object(c.a)(it,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai-photography-upload-image-item flex flex-col"},[e("div",{staticClass:"upload-content flex flex-wrap"},[e("el-upload",{directives:[{name:"show",rawName:"v-show",value:t.fileList.length<t.max,expression:"fileList.length < max"}],ref:"imageUpload",staticClass:"upload-image",attrs:{action:"/",disabled:t.fileList.length==t.max,drag:"",multiple:"","http-request":t.curstomUpload,limit:20,"on-exceed":t.fileExceed,accept:t.accept,"show-file-list":!1,"on-change":t.handleChange}},[e("i",{staticClass:"el-icon-plus"})]),t._v(" "),t._l(t.fileList,(function(img,i){return e("div",{key:"upload_".concat(i),staticClass:"image-item flex"},[e("div",{staticClass:"img-handle"},[e("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.deleteFile(i)}}})]),t._v(" "),img.url?e("img",{ref:img.url,refInFor:!0,attrs:{src:t.replaceImageType(img.url,"low")},on:{error:function(e){return t.imgError(img)}}}):t._e(),t._v(" "),t.showImgLoading(img)?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.showImgLoading(img),expression:"showImgLoading(img)"}],staticClass:"loading"}):t._e()])}))],2)])}),[],!1,null,"f5dacc18",null).exports},data:function(){return{visible:!1,step:1,titleMap:{1:{mainText:"photography12",subText:"photography13"},2:{mainText:"photography14",subText:"photography15"}},selectList:[],maxNum:20,accept:".jpg,.jpeg,.png,.svg,.webp,.bmp,.tif",correctConfigList:[{url:"https://image.cdn2.seaart.ai/static/upload/20231120/d06e7555-8de6-46c9-a194-f20aafb11287.webp",text:"多光线 多背景",i18nKey:"photography25",icon:"icon-gpt_select",id:"correctConfigList1"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/8539f608-4055-472f-a238-895af3e30521.webp",text:"多视角",i18nKey:"photography26",icon:"icon-gpt_select",id:"correctConfigList2"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/8f79c4ba-188d-4d4c-b966-678023bbacd1.webp",text:"多表情",i18nKey:"photography27",icon:"icon-gpt_select",id:"correctConfigList3"}],errorConfigList:[{url:"https://image.cdn2.seaart.ai/static/upload/20231120/fb192548-f7c5-42f5-ae14-3414f75646c1.webp",text:"面部有遮挡",i18nKey:"photography28",icon:"round-wrong",id:"errorConfigList1"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/007e9d04-d732-4494-9476-2de4e329372b.webp",text:"头部过小",i18nKey:"photography29",icon:"round-wrong",id:"errorConfigList2"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/63269448-8341-4696-b02d-69385ffd3e6b.webp",text:"多人照片",i18nKey:"photography30",icon:"round-wrong",id:"errorConfigList3"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/e4c0df7e-d495-4199-be7f-45de940ca1fa.webp",text:"宠物照片",i18nKey:"photography31",icon:"round-wrong",id:"errorConfigList4"}],loading:!0,costNum:1e3,realCostNum:600}},computed:st(st({},Object(f.e)("payment",["paymentInfo","activeState","liteActiveState","tempCoins","calculateCoins"])),{},{isVip:function(){return this.activeState||this.liteActiveState},isNoCoins:function(){return(this.tempCoins||0)+(this.calculateCoins||0)<1e3}}),methods:{openModal:function(){this.visible=!0},handleClose:function(){this.visible=!1},handleBeforeUpload:function(t){var e=this;return this.$nextTick((function(){e.$refs.uploadImageItem.curstomUpload({file:t})})),!1},handleBeforeUploadEmpty:function(){},fileExceed:function(){this.$message({type:"warning",message:this.$t("CreativeCenterPopup20",{number:this.maxNum})})},imagDelete:function(){},imgUpChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log(t,"视图里的list")},onClearAll:function(){this.selectList=[]},handleStartMake:function(){var t=this;if(this.selectList.length<5)this.$message.warning(this.$t("photography36",{number:5}));else if(this.selectList.length>20)this.$message.warning(this.$t("UploadImageExceed20"));else if(this.isNoCoins)this.$EventBus.$emit(this.isVip?"showVipComputingDialog":"showNotVipComputingDialog");else{var e={};e.images=(this.selectList||[]).map((function(t){return{url:t.url}})),this.loading=!0,Object(m.x)(e).then((function(e){var n;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&(t.handleClose(),t.$EventBus.$emit("refreshAiPhotographyDigitalCloneList"),t.$store.dispatch("creation/setAiPhotographyTrainList",[{id:e.data.id,state:1}]),t.$EventBus.$emit("openMakeDigitalProcessModal",{type:"process",info:{id:e.data.id,state:1}}))})).finally((function(){t.loading=!1}))}}}},ot=nt,lt=(n(2595),Object(c.a)(ot,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,"custom-class":"c-make-digital-clone-modal",center:"",width:"974px","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[e("div",{staticClass:"modal-title",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"title-text-box"},[e("div",{staticClass:"title-main-text"},[t._v(t._s(t.$t("photography21")))]),t._v(" "),e("div",{staticClass:"title-sub-text"},[t._v(t._s(t.$t("photography22")))])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.selectList.length,expression:"!selectList.length"}],staticClass:"upload-box"},[e("el-upload",{ref:"imageUpload2",staticClass:"image-upload",attrs:{action:"#",drag:"","before-upload":t.handleBeforeUpload,accept:t.accept,multiple:"",limit:20,"on-exceed":t.fileExceed,"http-request":t.handleBeforeUploadEmpty,"show-file-list":!1}},[e("i",{staticClass:"el-icon-upload image-upload-icon"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n          "+t._s(t.$t("TaskUploadImageClickUploadTips"))+"\n        ")])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.selectList.length,expression:"selectList.length"}],staticClass:"step-box"},[e("ai-photography-upload-image-item",{ref:"uploadImageItem",attrs:{max:t.maxNum},on:{delete:t.imagDelete,clearAll:t.onClearAll,handleChange:t.imgUpChange},model:{value:t.selectList,callback:function(e){t.selectList=e},expression:"selectList"}})],1),t._v(" "),e("div",{staticClass:"example-box"},[e("div",{staticClass:"example-box-item"},[e("div",{staticClass:"example-box-item-title"},[e("div",{staticClass:"example-box-item-title-line"}),t._v(" "),e("div",{staticClass:"example-box-item-title-text"},[e("svg-icon",{staticClass:"example-box-item-title-text-icon",attrs:{"icon-class":"correct-icon"}}),t._v(t._s(t.$t("photography23"))+"\n          ")],1),t._v(" "),e("div",{staticClass:"example-box-item-title-line"})]),t._v(" "),e("div",{staticClass:"show-example-box"},[t._l(t.correctConfigList,(function(n){return[e("div",{key:n.id,staticClass:"show-example-box-item"},[e("div",{staticClass:"show-example-box-item-img"},[e("img",{attrs:{src:n.url,alt:""}})]),t._v(" "),e("div",{staticClass:"show-example-box-item-text"},[t._v(t._s(t.$t(n.i18nKey)))]),t._v(" "),n.icon?e("div",{staticClass:"show-example-box-item-icon"},[e("i",{staticClass:"iconfont",class:n.icon})]):t._e()])]}))],2)]),t._v(" "),e("div",{staticClass:"example-box-item"},[e("div",{staticClass:"example-box-item-title"},[e("div",{staticClass:"example-box-item-title-line"}),t._v(" "),e("div",{staticClass:"example-box-item-title-text"},[e("svg-icon",{staticClass:"example-box-item-title-text-icon",attrs:{"icon-class":"error-icon"}}),t._v(t._s(t.$t("photography24"))+"\n          ")],1),t._v(" "),e("div",{staticClass:"example-box-item-title-line"})]),t._v(" "),e("div",{staticClass:"show-error-example-box"},[t._l(t.errorConfigList,(function(n){return[e("div",{key:n.id,staticClass:"show-example-box-item"},[e("div",{staticClass:"show-example-box-item-img"},[e("img",{attrs:{src:n.url,alt:""}})]),t._v(" "),e("div",{staticClass:"show-example-box-item-text"},[t._v(t._s(t.$t(n.i18nKey)))]),t._v(" "),n.icon?e("div",{staticClass:"show-example-box-item-icon"},[e("i",{staticClass:"iconfont",class:"icon-".concat(n.icon)})]):t._e()])]}))],2)])]),t._v(" "),e("div",{staticClass:"modal-bottom-btn",on:{click:function(e){return e.stopPropagation(),t.handleStartMake.apply(null,arguments)}}},[e("span",{staticClass:"bottom-btn-text"},[e("span",{staticClass:"bottom-btn-text-main"},[t._v(t._s(t.$t("photography20")))]),t._v(" "),e("span",{staticClass:"bottom-btn-text-sub"},[t._v("\n            ( "+t._s(t.$t("PhysicalExertion"))+" : "),e("span",{staticClass:"bottom-btn-text-sub-text-gray"},[t._v(t._s(t.costNum))]),e("span",{staticClass:"bottom-btn-text-sub-text"},[t._v(t._s(t.realCostNum))]),t._v(" )\n            "),e("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"custom-tips-popper",content:t.$t("photography41")}},[e("span",{staticClass:"el-icon-info bottom-btn-text-sub-tips"})])],1),t._v(" "),e("div",{staticClass:"free-try",attrs:{title:t.$t("Sale")}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("Sale"))+"\n\t\t\t\t")])])])])}),[],!1,null,null,null)),ct=lt.exports,ut={name:"contentList",props:{baseShowNum:{type:Number,default:5}},components:{digitalCloneList:O,taskView:K,makeDigitalCloneModal:ct},data:function(){return{loading:!1,activeTab:"photo",tabList:[{label:"数字分身",i18nKey:"photography7",type:"digitalClone"},{label:"写真",i18nKey:"photography8",type:"photo"}]}},mounted:function(){},beforeDestroy:function(){},methods:{handleClick:function(){},changeTab:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.activeTab=t},openMakeDigitalCloneModal:function(){this.activeTab="digitalClone",this.$refs.makeDigitalCloneModal.openModal()},updateTaskList:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$refs.taskView.updateMessageList(data)}}},pt=ut,ht=(n(2596),Object(c.a)(pt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-content-list"},[e("task-view",{directives:[{name:"show",rawName:"v-show",value:"photo"===t.activeTab,expression:"activeTab === 'photo'"}],ref:"taskView"}),t._v(" "),e("make-digital-clone-modal",{ref:"makeDigitalCloneModal"})],1)}),[],!1,null,null,null).exports);function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var mt={name:"makePortraitModal",data:function(){return{visible:!1,costNum:12,detailInfo:null,digitalCloneList:[],type:"normal",info:null,loading:!1,selectDigitalClone:"",submitLoading:!1,activeIndex:0,customTemplate:{url:""},face_image:"",face_image_base64:"",uploading:!1,pollingTimer:null,imageLoading:!1,UPLOAD:new tt.a({type:13}),uploadingFaceImage:!1}},computed:gt(gt({},Object(f.e)("payment",["paymentInfo","activeState","liteActiveState","tempCoins","calculateCoins"])),{},{computedTaskCost:function(){return"custom"===this.type?3:12},templateBanners:function(){var t;return(null==this||null===(t=this.detailInfo)||void 0===t?void 0:t.banners)||[]},getBannerUrl:function(){return function(t){return Object(I.x)(t.banners[0]||"","high")||""}},isVip:function(){return this.activeState||this.liteActiveState},isNoCoins:function(){return this.tempCoins<0||this.calculateCoins<0},activeClass:function(){return function(t){var e="";return null!=t&&t.id&&t.id===this.selectDigitalClone&&(e="digital-clone-item-active"),e}}}),methods:{openModal:function(t){var e=t.info,n=t.type;this.resetData(),this.detailInfo=e||null,this.type=n||"normal",this.visible=!0},removeFaceImage:function(){this.face_image="",this.face_image_base64=""},handleClose:function(){this.visible=!1,this.resetData()},handleScroll:function(){var t=this.$refs.scrollWrapper;try{t&&t.scrollTop+t.clientHeight>=t.scrollHeight-30&&this.getList(!0)}catch(t){}},setActiveIndex:function(t){this.activeIndex=t,console.log(this.activeIndex,"当前的activeIndex")},removeCustomImage:function(){this.customTemplate={url:""},this.uploading=!1},handleImageLoad:function(){this.imageLoading=!1},handleImageLoadError:function(){this.imageLoading=!1},resetData:function(){this.type="normal",this.digitalCloneList=[],this.detailInfo=null,this.selectDigitalClone="",this.activeIndex=0,this.customTemplate={url:""},this.face_image_base64="",this.face_image="",this.uploadingFaceImage=!1},handleSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(null==t?void 0:t.id)||"";e&&this.selectDigitalClone===e||(this.selectDigitalClone=e)},handleAddDigitalClone:function(){this.handleClose(),this.$EventBus.$emit("openMakeDigitalCloneModal")},getList:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o={limit:100};n&&(o.after_id=this.digitalCloneList.length?null===(t=this.digitalCloneList[this.digitalCloneList.length-1])||void 0===t?void 0:t.id:"");this.loading=!0,Object(m.l)(o).then((function(t){var o;if(1e4===(null==t||null===(o=t.status)||void 0===o?void 0:o.code))if(n){var r=e.digitalCloneList.map((function(t){return t.id})),l=(t.data.items||[]).filter((function(t){return!r.includes(t.id)})).map((function(t){return t.name="".concat(e.$t("photography7")).concat(t.name),t})).filter((function(t){return[3,"3"].includes(null==t?void 0:t.train_status)}));e.digitalCloneList=e.digitalCloneList.concat(l)}else{var c;e.digitalCloneList=((null==t||null===(c=t.data)||void 0===c?void 0:c.items)||[]).map((function(t){return t.name="".concat(e.$t("photography7")).concat(t.name),t})).filter((function(t){return[3,"3"].includes(null==t?void 0:t.train_status)})),e.selectDigitalClone=e.digitalCloneList.length?e.digitalCloneList[0].id:""}})).finally((function(){e.loading=!1}))},handleSubmit:function(){var t=this;if(["",null,void 0].includes(this.face_image))this.$message.warning(this.$t("photography55"));else if("custom"===this.type&&["",null,void 0].includes(this.customTemplate.url))this.$message.warning(this.$t("photography35"));else{this.submitLoading=!0;var e=this.getParams();Object(m.j)(e).then((function(e){var n=e||{},o=n.status,r=void 0===o?{}:o;n.data;1e4===(null==r?void 0:r.code)&&(t.handleClose(),t.$EventBus.$emit("jumpToPhotoList",e.data||{}))})).catch((function(t){})).finally((function(){t.submitLoading=!1}))}},getParams:function(){var t={};return t.portrait_model_id=this.selectDigitalClone||"","normal"===this.type?(t.portrait_template_id=this.detailInfo.id,t.portrait_template_num=this.activeIndex):t.custom_portrait_template=this.customTemplate.url,t.face_image=this.face_image||"",t},handleBeforeUploadEmpty:function(){},handleBeforeUpload:function(t){var e=this;return Object(Z.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.loading){n.next=4;break}return n.abrupt("return");case 4:if(r.includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 7:if(!(l=t)||l.size){n.next=10;break}return n.abrupt("return",!1);case 10:if(!(l.size/1024/1024>10)){n.next=21;break}return n.prev=11,n.next=14,Object(et.a)(l,10485760);case 14:l=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 21:if(!e.uploading){n.next=23;break}return n.abrupt("return");case 23:return e.uploading=!0,o.startUpload(l,{category:13}).then((function(t){e.uploading=!1,e.imageLoading=!0,e.customTemplate.url=t})).catch((function(t){console.log(t),e.uploading=!1,e.imageLoading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 26:case"end":return n.stop()}}),n,null,[[11,17]])})))()},handleFaceImageBeforeUpload:function(t){var e=this;return Object(Z.a)(regeneratorRuntime.mark((function n(){var o,r,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.loading){n.next=4;break}return n.abrupt("return");case 4:if(r.includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 7:if(!(l=t)||l.size){n.next=10;break}return n.abrupt("return",!1);case 10:if(!(l.size/1024/1024>10)){n.next=21;break}return n.prev=11,n.next=14,Object(et.a)(l,10485760);case 14:l=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 21:if(!e.uploadingFaceImage){n.next=23;break}return n.abrupt("return");case 23:return n.next=25,e.checkImageSize(t);case 25:return c=n.sent,e.face_image_base64=(null==c?void 0:c.url)||"",e.uploadingFaceImage=!0,o.startUpload(l,{category:13}).then((function(t){e.uploadingFaceImage=!1,e.face_image=t})).catch((function(t){console.log(t),e.uploadingFaceImage=!1,e.$message.error(e.$t("uploadError")),e.face_image="",e.face_image_base64=""})),n.abrupt("return",!1);case 30:case"end":return n.stop()}}),n,null,[[11,17]])})))()},checkImageSize:function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){var img=new Image;img.onload=function(){var t={width:img.width,height:img.height,realWidth:img.naturalWidth,realHeight:img.naturalHeight};t.url=img.src,e(t)},img.onerror=function(){n(!1)},img.src=t.target.result},o.readAsDataURL(t)}))}}},ft=mt,_t=(n(2597),Object(c.a)(ft,(function(){var t,e,n,o,r=this,l=r._self._c;return l("el-dialog",{attrs:{title:r.$t("photography11"),visible:r.visible,width:"729px","custom-class":"c-make-portrait-modal",center:"","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":r.handleClose},on:{"update:visible":function(t){r.visible=t}}},[l("div",{staticClass:"make-portrait-modal-content"},[l("div",{staticClass:"category-box"},["normal"===r.type?l("el-carousel",{attrs:{autoplay:!1,"initial-index":0},on:{change:r.setActiveIndex}},r._l(r.templateBanners,(function(t,e){var n;return l("el-carousel-item",{key:e},[l("div",{staticClass:"category-card-item"},[l("img",{staticClass:"content-list-item-image",attrs:{src:t,alt:""}}),r._v(" "),l("div",{staticClass:"content-list-item-bottom"},[l("div",{staticClass:"main-title"},[r._v(r._s(null===(n=r.detailInfo)||void 0===n?void 0:n.name))])])])])})),1):r._e(),r._v(" "),"custom"===r.type?l("div",{staticClass:"category-card-item category-card-item-custom"},[null!==(t=r.customTemplate)&&void 0!==t&&t.url?r._e():[l("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:r.uploading,expression:"uploading"}],staticClass:"image-upload custom-item-banner",attrs:{action:"#",drag:"","before-upload":r.handleBeforeUpload,"http-request":r.handleBeforeUploadEmpty,"show-file-list":!1,disabled:r.uploading}},[l("span",{staticClass:"el-icon-plus custom-item-banner-icon"}),r._v(" "),l("div",{staticClass:"custom-item-banner-text"},[r._v(r._s(r.$t("photography19")))])])],r._v(" "),null!==(e=r.customTemplate)&&void 0!==e&&e.url?l("img",{staticClass:"content-list-item-image",attrs:{src:null===(n=r.customTemplate)||void 0===n?void 0:n.url,alt:""},on:{load:r.handleImageLoad,error:r.handleImageLoadError}}):r._e(),r._v(" "),l("span",{directives:[{name:"show",rawName:"v-show",value:(null===(o=r.customTemplate)||void 0===o?void 0:o.url)&&!r.uploading&&!r.imageLoading&&!r.submitLoading,expression:"(customTemplate?.url) && !uploading && !imageLoading && !submitLoading"}],staticClass:"image-viewer__close",on:{click:function(t){return t.stopPropagation(),r.removeCustomImage.apply(null,arguments)}}},[l("i",{staticClass:"el-icon-close"})]),r._v(" "),l("div",{staticClass:"content-list-item-bottom"},[l("div",{staticClass:"main-title"},[r._v(r._s(r.$t("photography18")))])])],2):r._e()],1),r._v(" "),l("div",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],ref:"scrollWrapper",staticClass:"digital-clone-box"},[l("div",{staticClass:"digital-clone-item digital-clone-item-add"},[l("div",{staticClass:"digital-clone-item-name"}),r._v(" "),l("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:r.uploadingFaceImage,expression:"uploadingFaceImage"}],staticClass:"image-file-upload",attrs:{action:"#",drag:"","before-upload":r.handleFaceImageBeforeUpload,"http-request":r.handleBeforeUploadEmpty,"show-file-list":!1,disabled:r.uploadingFaceImage}},[l("div",{staticClass:"digital-clone-item-content",attrs:{slot:"trigger"},slot:"trigger"},[l("span",{staticClass:"el-icon-plus"}),r._v(" "),l("div",{staticClass:"digital-clone-item-content-add-title"},[r._v(r._s(r.$t("photography53")))]),r._v(" "),l("div",{staticClass:"digital-clone-item-content-add-title"},[r._v(r._s(r.$t("photography54")))])])])],1),r._v(" "),r.face_image_base64?l("div",{directives:[{name:"loading",rawName:"v-loading",value:r.uploadingFaceImage,expression:"uploadingFaceImage"}],staticClass:"digital-clone-item"},[l("div",{staticClass:"digital-clone-item-image"},[l("img",{attrs:{src:r.face_image_base64||r.face_image||"",alt:""}}),r._v(" "),l("span",{directives:[{name:"show",rawName:"v-show",value:r.face_image&&!r.uploadingFaceImage&&!r.submitLoading,expression:"(face_image) && !uploadingFaceImage && !submitLoading"}],staticClass:"image-viewer__close",on:{click:function(t){return t.stopPropagation(),r.removeFaceImage.apply(null,arguments)}}},[l("i",{staticClass:"el-icon-close"})])])]):r._e()])]),r._v(" "),"custom"===r.type?l("div",{staticClass:"tips-box"},[l("span",{staticClass:"el-icon-info tips-box-icon"}),r._v("\n      "+r._s(r.$t("photography34"))+"\n    ")]):r._e(),r._v(" "),l("div",{staticClass:"make-portrait-modal-bottom-btn",on:{click:function(t){return t.stopPropagation(),r.handleSubmit.apply(null,arguments)}}},[l("span",{staticClass:"bottom-btn-text"},[l("span",{staticClass:"bottom-btn-text-main"},[r._v(r._s(r.$t("startGenerate")))]),r._v(" "),l("span",{staticClass:"bottom-btn-text-sub"},[r._v("( "+r._s(r.$t("PhysicalExertion"))+" : "+r._s(r.computedTaskCost)+" )")])])])])}),[],!1,null,null,null));function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wt={name:"AiPhotography",components:{noticeModal:d,contentList:ht,makePortraitModal:_t.exports},provide:function(){return{photographyRef:this}},data:function(){return{formatNumberForeign:I.i,iconUrl:n(735),loading:!1,categoryList:[],orderList:[{name:"默认",value:"default",i18nKey:"createModeType1",iconClass:"sort-arrow-down"},{name:"最近",value:"new",i18nKey:"New",iconClass:"new1"},{name:"最热",value:"hot",i18nKey:"Hot",iconClass:"hot"}],queryParams:{category:"",order_by:"default"},customTemplate:{id:"custom",type:"custom",name:"自定义写真模版",i18nKey:"photography18"},list:[],baseShowNum:5,activeTab:"",currentPage:"category",lastTemplate:null,processItem:null}},mounted:function(){var t=this;this.debounceResize=Object(r.debounce)(this.handleResize,500),window.addEventListener("resize",this.debounceResize),this.$nextTick((function(){t.handleResize()})),this.getCategoryList(),this.getList(),this.$EventBus.$on("backToAiPhotography",(function(e){t.currentPage="category"})),this.$EventBus.$on("jumpToPhotoList",(function(e){t.jumpToPhotoList(e)}))},beforeDestroy:function(){window.removeEventListener("resize",this.debounceResize),this.$EventBus.$off("openMakeDigitalCloneModal"),this.$EventBus.$off("updateAiPhotographyDigitalCloneItem"),this.$EventBus.$off("backToAiPhotography"),this.debounceResize=null,this.lastTemplate=null},computed:yt(yt({},Object(f.e)("user",["token"])),{},{getBannerUrl:function(){return function(t){return null!=t&&t.banners?Object(I.x)(t.banners[0]||"","high"):""}},renderCategoryList:function(){return this.categoryList},computedPercentage:function(){var t;return"".concat((null==this||null===(t=this.processItem)||void 0===t?void 0:t.process)||0,"%")},getCurrentOrderItem:function(){var t=this.queryParams.order_by;return this.orderList.find((function(e){return e.value===t}))||null}}),watch:{currentPage:function(t){document.querySelector(".page-seo").style.display="category"===t?"block":"none"}},methods:yt(yt({},Object(f.b)("creation",["setAiPhotographyTrainList"])),{},{checkProcessingDigitalClone:function(){var t=this;Object(m.l)({limit:30}).then((function(e){var n,o;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&((null==e||null===(o=e.data)||void 0===o?void 0:o.items)||[]).map((function(e){return[1,2].includes(null==e?void 0:e.train_status)&&t.setAiPhotographyTrainList([{id:e.train_id,state:null==e?void 0:e.train_status,process:(null==e?void 0:e.train_process)||0}]),e}))})).finally((function(){}))},openProcessModal:function(){this.$EventBus.$emit("openMakeDigitalProcessModal",{type:"process"})},handleCommand:function(t){this.queryParams.order_by!==t&&(this.queryParams.order_by=t,this.$logEvent("log_actions",{operation:"click_filter_button",behavior_info:"ai_photo_template_square",behavior_info_sub:this.queryParams.order_by||""}),this.handleSearch())},updateListItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$set(this,"processItem",t)},openMakePortraitModal:function(){this.$refs.makePortraitModal.openModal(this.lastTemplate)},openMakeDigitalCloneModal:function(){var t=this;this.changeCurrentPage("generate"),this.$nextTick((function(){t.$refs.contentList.changeTab("digitalClone"),t.$refs.contentList.openMakeDigitalCloneModal()}))},jumpToPhotoList:function(){var t=this,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.changeCurrentPage("generate"),this.$nextTick((function(){var e,n;null===(e=t.$refs.contentList)||void 0===e||e.changeTab("photo"),null===(n=t.$refs.contentList)||void 0===n||n.updateTaskList(data)}))},backTo:function(){"generate"!==this.currentPage?this.$router.back():this.currentPage="category"},handleResize:function(){try{var t=this.$refs.aiPhotography.offsetWidth,e=this.$refs.operateBarLeft.offsetWidth;e>900&&console.log(e,"tempWidth---------"),console.log("海艺页面实际宽度变为：",t),this.computedBaseNum(t)}catch(t){}},computedBaseNum:function(t){try{var e=Math.floor((t-16)/278);t>=1534&&(e=5),t>1300&&t<1534&&(e=5),t>=1120&&t<=1300&&(e=4),t<1120&&(e=4),t<900&&(e=3),this.baseShowNum=isNaN(e)||e>=5?5:e}catch(t){}},getList:function(){var t=this,e={};e.category=this.queryParams.category,e.order_by_field=this.queryParams.order_by,this.loading=!0,Object(m.n)(e).then((function(e){var n;1e4===e.status.code&&(t.list=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[])})).finally((function(){t.loading=!1}))},getCategoryList:function(){var t=this;Object(m.m)({}).then((function(e){var n;1e4===e.status.code&&(t.categoryList=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[])})).finally((function(){}))},selectCategory:function(t){t.value!==this.queryParams.category&&(this.$logEvent("log_actions",{operation:"click_up_tab_button",behavior_info:"ai_photo_template_square",behavior_info_sub:this.queryParams.category||""}),this.queryParams.category=t.value,this.handleSearch())},handleSelectChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log(t),this.$logEvent("log_actions",{operation:"click_filter_button",behavior_info:"ai_photo_template_square",behavior_info_sub:this.queryParams.order_by||""}),this.handleSearch()},handleSearch:function(){this.loading=!0,this.list=[],this.getList()},handleGenerate:function(t,e){if(this.$logEvent("log_actions",{operation:"click_photo_template",behavior_info:"ai_photo_template_square"}),this.token){if(this.lastTemplate=null,!(localStorage.getItem("aiPhotographConfirm")||!1))return this.lastTemplate={info:t,type:e},void this.$refs.noticeModal.openModal();this.$refs.makePortraitModal.openModal({info:t,type:e})}else this.$EventBus.$emit("openLoginDialog")},changeCurrentPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentPage=t,e&&this.$logEvent("log_actions",{operation:"click_digital_avatar_jump_button",behavior_info:"ai_photo_template_square"})}}),head:function(){return{title:this.$t("seoPortrait_tag_title"),meta:[{hid:"description",name:"description",content:this.$t("seoPortrait_tag_desc")},{hid:"keywords",name:"keywords",content:this.$t("AIPortraitKeyword")},{hid:"og:title",name:"og:title",content:this.$t("seoPortrait_tag_title")},{hid:"og:description",name:"og:description",content:this.$t("seoPortrait_tag_desc")}]}}},Ct=wt,xt=(n(2598),Object(c.a)(Ct,(function(){var t,e,n,o=this,r=o._self._c;return r("div",{ref:"aiPhotography",staticClass:"c-fast-tools-ai-photography"},[r("el-backtop",{attrs:{bottom:30,right:30}},[r("i",{staticClass:"el-icon-top"})]),o._v(" "),r("div",{staticClass:"tools-back-to",on:{click:function(t){return t.stopPropagation(),o.backTo.apply(null,arguments)}}},[r("i",{staticClass:"el-icon-back"})]),o._v(" "),["category"].includes(o.currentPage)?[r("div",{staticClass:"top-bar"},[r("div",{staticClass:"top-bar-icon"},[r("img",{attrs:{src:o.iconUrl,alt:""}})]),o._v(" "),r("h1",{staticClass:"top-bar-main-title"},[o._v(o._s(o.$t("AIPortrait_top_title")))]),o._v(" "),r("div",{staticClass:"top-bar-sub-title"},[o._v(o._s(o.$t("AIPortrait_top_sub")))])]),o._v(" "),r("div",{staticClass:"content-list-operate-bar"},[r("div",{ref:"operateBarLeft",staticClass:"content-list-operate-bar-left"},[o._l(o.renderCategoryList,(function(t,e){return[r("span",{key:"category_".concat(e),staticClass:"category-btn",class:[t.value===o.queryParams.category?"category-btn-active":""],on:{click:function(e){return e.stopPropagation(),o.selectCategory(t)}}},[o._v(o._s(t.name))])]}))],2),o._v(" "),r("div",{staticClass:"content-list-operate-bar-right"},[r("el-dropdown",{attrs:{trigger:"click"},on:{command:o.handleCommand}},[r("div",{staticClass:"el-dropdown-link"},[r("div",[r("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(null===(t=o.getCurrentOrderItem)||void 0===t?void 0:t.iconClass)}),o._v(" "),r("span",[o._v(o._s(o.$t(null===(e=o.getCurrentOrderItem)||void 0===e?void 0:e.i18nKey)))])]),o._v(" "),r("i",{staticClass:"el-icon-arrow-down"})]),o._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},o._l(o.orderList,(function(t,e){return r("el-dropdown-item",{key:e,attrs:{command:t.value}},[r("div",{staticClass:"el-dropdown-item el-dropdown-item-2"},[r("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(t.iconClass)}),o._v(" "),r("span",[o._v(o._s(o.$t(t.i18nKey)))])])])})),1)],1),o._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:o.token,expression:"token"}],staticClass:"jump-btn-wrapper",on:{click:function(t){return t.stopPropagation(),o.changeCurrentPage("generate",!0)}}},[r("div",{staticClass:"jump-btn"},[r("span",{staticClass:"jump-btn-text"},[o._v(o._s(o.$t("MyArtworks")))]),o._v(" "),r("span",{staticClass:"el-icon-right jump-btn-icon"})])])],1)]),o._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:o.loading,expression:"loading"}],staticClass:"content-list",style:{gridTemplateColumns:"repeat(".concat(o.baseShowNum,", 1fr)")}},[o._l(o.list,(function(t,e){return["custom"===t.id?r("div",{key:"".concat((null==t?void 0:t.id)+e),staticClass:"content-list-item content-list-item-custom"},[r("div",{staticClass:"bottom-btn-mask"}),o._v(" "),r("div",{staticClass:"custom-item-banner"},[r("span",{staticClass:"el-icon-plus custom-item-banner-icon"}),o._v(" "),r("div",{staticClass:"custom-item-banner-text"},[o._v(o._s(o.$t("photography19")))])]),o._v(" "),r("div",{staticClass:"content-list-item-bottom"},[r("div",{staticClass:"main-title"},[o._v(o._s(o.$t(o.customTemplate.i18nKey)))]),o._v(" "),r("div",{staticClass:"sub-title"},[r("span",{staticClass:"sub-title-left"},[r("span",{staticClass:"el-icon-time sub-tittle-left-icon"}),o._v(" "),r("span",{staticClass:"sub-tittle-left-title"},[o._v(o._s(o.$t("recentlyUsed")))])]),o._v(" "),r("span",{staticClass:"sub-title-right"},[r("span",{staticClass:"sub-title-right-text"},[o._v(o._s(o.formatNumberForeign((null==t?void 0:t.total_used)||0)))]),o._v(" "),o._m(0,!0)])])]),o._v(" "),r("span",{staticClass:"bottom-play-btn",on:{click:function(t){return t.stopPropagation(),o.handleGenerate(o.customTemplate,"custom")}}},[r("i",{staticClass:"iconfont icon-play bottom-download-btn-icon"}),o._v(" "),r("span",{staticClass:"bottom-download-btn-text"},[o._v(o._s(o.$t("photography2")))])])]):r("div",{key:"".concat((null==t?void 0:t.id)+e),staticClass:"content-list-item"},[r("div",{staticClass:"bottom-btn-mask"}),o._v(" "),r("img",{staticClass:"content-list-item-image",attrs:{src:o.getBannerUrl(t),alt:""}}),o._v(" "),r("div",{staticClass:"content-list-item-bottom"},[r("div",{staticClass:"main-title"},[o._v(o._s(t.name))]),o._v(" "),r("div",{staticClass:"sub-title"},[r("span",{staticClass:"sub-title-left"},[r("span",{staticClass:"el-icon-time sub-tittle-left-icon"}),o._v(" "),r("span",{staticClass:"sub-tittle-left-title"},[o._v(o._s(o.$t("recentlyUsed")))])]),o._v(" "),r("span",{staticClass:"sub-title-right"},[r("span",{staticClass:"sub-title-right-text"},[o._v(o._s(o.formatNumberForeign((null==t?void 0:t.total_used)||0)))]),o._v(" "),o._m(1,!0)])])]),o._v(" "),r("span",{staticClass:"bottom-play-btn",on:{click:function(e){return e.stopPropagation(),o.handleGenerate(t)}}},[r("i",{staticClass:"iconfont icon-play bottom-download-btn-icon"}),o._v(" "),r("span",{staticClass:"bottom-download-btn-text"},[o._v(o._s(o.$t("photography2")))])])])]}))],2)]:o._e(),o._v(" "),["generate"].includes(o.currentPage)&&o.token?[r("content-list",{ref:"contentList",attrs:{baseShowNum:o.baseShowNum}})]:o._e(),o._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:o.processItem&&[1,2].includes(null===(n=o.processItem)||void 0===n?void 0:n.state)&&["category"].includes(o.currentPage),expression:"processItem && [1,2].includes(processItem?.state) && ['category'].includes(currentPage)"}],staticClass:"process-bar",on:{click:o.openProcessModal}},[o._v("\n    "+o._s(o.$t("photography37"))),r("span",{staticClass:"process-bar-text"},[o._v(o._s(o.computedPercentage))])]),o._v(" "),r("notice-modal",{ref:"noticeModal",on:{confirm:o.openMakePortraitModal}}),o._v(" "),r("make-portrait-modal",{ref:"makePortraitModal"})],2)}),[function(){var t=this._self._c;return t("span",{staticClass:"sub-title-right-icon"},[t("i",{staticClass:"iconfont icon-hot"})])},function(){var t=this._self._c;return t("span",{staticClass:"sub-title-right-icon"},[t("i",{staticClass:"iconfont icon-hot"})])}],!1,null,null,null));e.default=xt.exports},3252:function(t,e,n){"use strict";n.r(e);var o=n(347),r=n(348),l=(n(14),{name:"FirstContainer",props:{showGender:{type:String,default:"female"}},computed:{boxColors:function(){return{male:{borderColor:"#0099FF",boxShadow:"rgba(181, 133, 249, 0.27) 0px 0px 64px 20px, rgb(87, 60, 125) 0px 0px 40px 1px inset"},female:{borderColor:"#BF96FA",boxShadow:"0px 0px 64px 20px rgba(181, 133, 249, 0.27), inset 0px 0px 40px 1px #573C7D"},other:{borderColor:"#6098FD",boxShadow:"rgba(181, 133, 249, 0.27) 0px 0px 64px 20px, rgb(87, 60, 125) 0px 0px 40px 1px inset"}}[this.showGender]}},data:function(){return{rateValue:4.5,genders:[{value:"male",name:"Male",icon:"icon-icon-male"},{value:"female",name:"Female",icon:"icon-icon-female"},{value:"other",name:"otherSex",icon:"icon-icon-Non-binary"}]}},methods:{changeGender:function(t){this.showGender!==t.value&&(this.$emit("changeGender",t.value),this.$logEvent("log_actions",{operation:"click_select_character",behavior_info:"on_ai_profile_generation_page",behavior_info_sub:t.value}))},handleGenerate:function(){this.$emit("generate"),this.$logEvent("log_actions",{operation:"click_start_generate",behavior_info:"on_ai_profile_generation_page"})}}}),c=(n(2929),n(0)),d=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"first-container"},[e("div",{staticClass:"select-container"}),t._v(" "),e("div",{staticClass:"select-content"},[e("div",{staticClass:"select-title justify-center"},[t._v(t._s(t.$t("aiShortTitle")))]),t._v(" "),e("span",{staticClass:"sub-title"},[t._v(t._s(t.$t("aiShortSubTitle")))]),t._v(" "),e("div",{staticClass:"select-gender-fra"},[e("div",{staticClass:"genders"},t._l(t.genders,(function(n,o){return e("div",{key:n+o,staticClass:"gender flex flex-col items-center justify-center",class:{active:t.showGender===n.value},style:t.showGender===n.value?t.boxColors:null,on:{click:function(e){return t.changeGender(n)}}},[e("i",{staticClass:"iconfont",class:n.icon+" ".concat(n.value)}),t._v("\n          "+t._s(t.$t(n.name))+"\n        ")])})),0)]),t._v(" "),e("div",{staticClass:"generate-btn ai-avatar-btn flex items-center",attrs:{title:t.$t("StartGenerating")},on:{click:t.handleGenerate}},[e("i",{staticClass:"iconfont icon-search-magic"}),t._v(" "+t._s(t.$t("startGeneration"))+"\n    ")])]),t._v(" "),e("div",{staticClass:"footer-rate"},[e("div",{staticClass:"footer-item"},[e("span",{staticClass:"g-text"},[t._v("100M+")]),t._v(" "),e("span",{staticClass:"sm-text"},[t._v(t._s(t.$t("Users")))])]),t._v(" "),e("div",{staticClass:"footer-item"},[e("i",{staticClass:"iconfont icon-maisui-you"}),t._v(" "),e("i",{staticClass:"iconfont icon-maisui-zuo"}),t._v(" "),e("span",{staticClass:"g-text"},[t._v("2000M+")]),t._v(" "),e("span",{staticClass:"sm-text"},[t._v(t._s(t.$t("processImg")))])]),t._v(" "),e("div",{staticClass:"footer-item"},[e("div",{staticClass:"g-text flex"},[e("span",[t._v("4.8")]),t._v(" "),e("el-rate",{attrs:{colors:["#ffffff99","#ffffff99","#ffffff99"],"disabled-void-color":"#2e2e2f",disabled:"","score-template":"{rateValue}"},model:{value:t.rateValue,callback:function(e){t.rateValue=e},expression:"rateValue"}})],1),t._v(" "),e("span",{staticClass:"sm-text"},[t._v(t._s(t.$t("rating")))])])])])}),[],!1,null,"c760c2a2",null).exports,h=(n(9),n(7),n(11),n(12),n(8),n(4),n(6),n(2)),v=n(1);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(h.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _={name:"FtBanner",props:{},computed:f(f({},Object(v.e)("user",["cdnHost"])),{},{imgs:function(){return{left:"https://".concat(this.cdnHost,"/static/upload/20241127/61a69aa1-0cc6-4d64-997a-e326e2f388d4_low.webp"),right:"https://".concat(this.cdnHost,"/static/upload/20241127/98ec5e99-3f23-4f1a-b1df-4870f65a0997_high.webp")}}})},y=(n(2930),{name:"StepOne",components:{FtBanner:Object(c.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ft_banner"},[t._m(0),t._v(" "),e("div",{staticClass:"ft_left_banner"},[e("img",{attrs:{src:t.imgs.left,alt:"background-image-left",loading:"lazy",width:"440",height:"487"}})]),t._v(" "),e("div",{staticClass:"ft_right_banner"},[e("img",{attrs:{src:t.imgs.right,alt:"background-image-right",loading:"lazy",width:"390",height:"671"}})]),t._v(" "),e("div",{staticClass:"linear-gradient-left"}),t._v(" "),e("div",{staticClass:"linear-gradient-right"})])}),[function(){var t=this._self._c;return t("div",{staticClass:"ft-bg-container"},[t("div",{staticClass:"ft_bg"})])}],!1,null,"189dcae4",null).exports,FirstContainer:d}}),w=(n(2931),Object(c.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ft-step-one"},[e("FirstContainer",t._g(t._b({},"FirstContainer",t.$attrs,!1),t.$listeners)),t._v(" "),e("FtBanner")],1)}),[],!1,null,"290b7b9c",null).exports),C=(n(1583),n(44),n(680)),x=n.n(C),k=(n(1584),n(681)),O=n.n(k),I=(n(10),n(18),{name:"BackArrow"}),$=(n(2932),Object(c.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"arrow",on:{click:function(e){return t.$emit("back")}}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" "+t._s(t.$t("Back")))])}),[],!1,null,"c5692262",null).exports),j={name:"ContainerText"},T=(n(2933),Object(c.a)(j,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("p",[t._t("default")],2),t._v(" "),e("p",[t._t("sub")],2)])}),[],!1,null,"749c8f3a",null).exports),L=(n(36),{name:"CardContainer",props:{info:{type:Object,default:function(){return{}}},allSelected:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},components:{},computed:{isSelected:function(){return this.allSelected.includes(this.info.id)},tagText:function(){var t,e=null===(t=this.info)||void 0===t||null===(t=t.labels)||void 0===t?void 0:t[0];if(!e)return"";var n=e.charAt(0).toUpperCase()+e.slice(1);return this.$t(n)},tagBgColor:function(){var t,e=null===(t=this.info)||void 0===t||null===(t=t.labels)||void 0===t?void 0:t[0];if(!e)return{};return{background:{new:"#FF2D5F",hot:"#EDB13C",free:"#0ABF94"}[e]||""}}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}});n(2934);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(h.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P={name:"SelectStyle",props:{},components:{BackArrow:$,ContainerText:T,CardContainer:Object(c.a)(L,(function(){var t,e,n,o,r,l=this,c=l._self._c;return c("div",{staticClass:"container"},[c("div",{staticClass:"inner",class:{active:l.isSelected,disable:l.disabled&&!l.isSelected}},[null!==(t=l.info)&&void 0!==t&&null!==(t=t.labels)&&void 0!==t&&t.length?c("div",{staticClass:"tags",class:null===(e=l.info)||void 0===e||null===(e=e.labels)||void 0===e?void 0:e[0],style:l.tagBgColor},[l._v("\n      "+l._s(l.tagText)+"\n    ")]):l._e(),l._v(" "),l._m(0),l._v(" "),null!==(n=l.info)&&void 0!==n&&n.cover?c("div",{staticClass:"img-container"},[c("img",{attrs:{src:null===(o=l.info)||void 0===o?void 0:o.cover,loading:"lazy",alt:"tempalte",width:"155",height:"210"}})]):l._e(),l._v(" "),c("div",{staticClass:"img-bottom"},[l._v("\n      "+l._s(null===(r=l.info)||void 0===r?void 0:r.name)+"\n    ")])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"check-box"},[t("i",{staticClass:"el-icon-check"})])}],!1,null,"7f3ee4ca",null).exports,ElSkeleton:O.a,ElSkeletonItem:x.a},computed:D(D({},Object(v.c)("AIAvatar",["maleTemplate","femaleTemplate","otherTemplate","styleLanguage"])),{},{selectedNumbers:function(){var t=this;return function(template){var e=((null==template?void 0:template.styles)||[]).filter((function(e){return t.selectedImages.includes(e.id)}));return e.length?e.length:""}},isFullSelected:function(){return this.selectedImages.length>=this.maxSelect},isNotEnoughSelected:function(){return this.selectedImages.length<this.minSelect},languageChanged:function(){return this.$i18n.locale!==this.styleLanguage}}),data:function(){return{allTemplate:[],currentTemplate:null,selectedImages:[],maxSelect:10,minSelect:3}},methods:D(D({},Object(v.b)("AIAvatar",["getTemplate","saveStyleLanguage","clearAlbums"])),{},{getStyle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"male",e=this[t+"Template"];null==e||!e.length||this.languageChanged?this.getTemplateList(t):(this.allTemplate=e.filter((function(t){return t.styles&&t.styles.length>0}))||[],this.setTemplate(this.allTemplate[0]))},initSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.selectedImages=t||[]},getTemplateList:function(){var t=this,e={gender:{male:1,female:2,other:3}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"male"]||"male"};this.languageChanged&&this.clearAlbums(),this.getTemplate(e).then((function(e){var n;if(console.log("getTemplate",e),1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var o;if(t.allTemplate=(null===(o=e.data)||void 0===o?void 0:o.items.filter((function(t){return t.styles&&t.styles.length>0})))||[],!t.allTemplate.length)return t.$message.warning(t.$t("done_tip")),void t.$emit("back");t.saveStyleLanguage(t.$i18n.locale),console.log("allTemplate",t.allTemplate),t.setTemplate(t.allTemplate[0])}}))},setTemplate:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.currentTemplate=t,null===(e=this.$refs.scrollContent)||void 0===e||e.scrollTo({top:0,behavior:"smooth"}),"click"===n&&this.$logEvent("log_actions",{operation:"click_style",behavior_info:"on_ai_profile_generation_page",behavior_info_sub:t.name})},toggleCard:function(t){this.selectedImages.includes(t.id)?this.selectedImages=this.selectedImages.filter((function(e){return e!==t.id})):(!this.isFullSelected&&this.selectedImages.push(t.id),this.$logEvent("log_actions",{operation:"click_template",behavior_info:"on_ai_profile_generation_page",behavior_info_sub:t.id||t.name})),this.$emit("updateSelect",this.selectedImages)},goGenerate:function(){this.$logEvent("log_actions",{operation:"click_continue",behavior_info:"on_ai_profile_generation_page",behavior_info_sub:this.selectedImages}),this.$emit("next")}})},E=P,A=(n(2935),Object(c.a)(E,(function(){var t,e,n=this,o=n._self._c;return o("div",{staticClass:"select-style"},[o("div",{staticClass:"content-inner-fra"},[o("div",{staticClass:"head-container"},[o("ContainerText",{scopedSlots:n._u([{key:"sub",fn:function(){return[n._v(n._s(n.$t("selectStyleSub")))]},proxy:!0}])},[n._v("\n        "+n._s(n.$t("selectStyle"))+"\n        ")]),n._v(" "),o("BackArrow",n._g({},n.$listeners))],1),n._v(" "),o("div",{staticClass:"tabs-container"},n._l(n.allTemplate,(function(t,e){var r;return o("div",{key:(null==t?void 0:t.name)+e,staticClass:"tabs_container_item",class:{tabs_active:t.name===(null===(r=n.currentTemplate)||void 0===r?void 0:r.name)},on:{click:function(e){return n.setTemplate(t,"click")}}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e>0&&n.selectedNumbers(t),expression:"index > 0 && selectedNumbers(tempType)"}],staticClass:"tabs_container_item_icon"},[o("span",[n._v(n._s(n.selectedNumbers(t)))])]),n._v(" "),o("span",{staticClass:"tabs_container_item_span"},[n._v(n._s(t.name))])])})),0)]),n._v(" "),o("div",{staticClass:"section"},[o("div",{staticClass:"custom-scroll"},[o("div",{ref:"scrollContent",staticClass:"custom-scroll-overflow"},[o("div",{staticClass:"section-select-styles-fra"},[n.currentTemplate?o("div",{staticClass:"ft-scroll-fra"},n._l(null===(t=n.currentTemplate)||void 0===t?void 0:t.styles,(function(t,e){return o("div",{key:t.id+e,staticClass:"scroll-fra-son",on:{click:function(e){return n.toggleCard(t)}}},[o("CardContainer",{attrs:{info:t,allSelected:n.selectedImages,disabled:n.isFullSelected}})],1)})),0):o("el-skeleton",{attrs:{loading:!0,animated:"",count:30}},[o("template",{slot:"template"},[o("el-skeleton-item",{staticStyle:{width:"140px",height:"180px"},attrs:{variant:"rect"}})],1)],2)],1)])])]),n._v(" "),o("div",{staticClass:"footer"},[o("div",{staticClass:"footer-inner"},[o("div",{directives:[{name:"show",rawName:"v-show",value:null===(e=n.selectedImages)||void 0===e?void 0:e.length,expression:"selectedImages?.length"}],staticClass:"select-nums"},[n._v(n._s(n.selectedImages.length))]),n._v(" "),o("div",{staticClass:"footer-btn ai-avatar-btn",class:{"footer-disable-btn":n.isNotEnoughSelected},on:{click:n.goGenerate}},[n._v("\n        "+n._s(n.$t("Continue"))+" "),o("i",{staticClass:"el-icon-right"})])])])])}),[],!1,null,"517a4f96",null).exports),R=n(3);n(20),n(28),n(29);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){Object(h.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U={name:"ExampleLeft",props:{genderType:{type:Number,default:1}},components:{},computed:N(N({},Object(v.e)("user",["cdnHost"])),{},{images:function(){return 2!==this.genderType?{good:"https://".concat(this.cdnHost,"/static/upload/20241115/2a5bb3a6-3410-4aa5-b1f5-ad32fb349bd4.webp"),bad:["https://".concat(this.cdnHost,"/static/upload/20241115/a4305a90-2235-4f5d-ab48-09fbd6f1fbd3.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/852ba6de-81e7-46b4-9547-e4fa4b3695e9.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/2abae9ec-a712-4ff6-9b85-bded00dd1175.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/35c1be91-3c16-45b1-ac03-7cac1fe37a7d.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/4f46d597-7976-4143-bea5-a45f0f653be0.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/9c0a43e1-569c-4e4a-86e9-20dc41789f37.webp")]}:{good:"https://".concat(this.cdnHost,"/static/upload/20241115/51f4aaaa-a5f8-49ff-ad95-d95dcb9c0a84.webp"),bad:["https://".concat(this.cdnHost,"/static/upload/20241115/48e79445-bf37-4fb1-acf9-36b2783091bb.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/4681ffd2-2ddd-4ee7-8e30-f11a7b48638f.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/f81fb469-80ba-498b-b2b3-82d8afd3f3a4.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/bc94edda-e00c-4904-8a7a-788658c49a2e.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/e7d4f2a9-1821-4175-861e-cfc3f4d39ba4.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/6cac4f5b-ce94-45fd-a7d6-00c97fcfd532.webp")]}}}),data:function(){return{photoText:{photoExample:"photoExample",photoExampleDtl:"photoExampleDtl",badTitle:"badPhotoTitle",bad:["badPhoto1","badPhoto2","badPhoto3","badPhoto4","badPhoto5","badPhoto6"]}}},mounted:function(){},methods:{}},F=(n(2936),Object(c.a)(U,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"example"},[e("div",{staticClass:"example-fra_new",staticStyle:{"margin-top":"32px"}},[e("div",{staticClass:"example-content"},[e("p",{staticClass:"titles"},[t._v(t._s(t.$t("photoRequire")))]),t._v(" "),e("div",{staticClass:"example-container"},[e("div",{staticClass:"example-left"},[e("div",{staticClass:"example-goods-top"},[e("img",{attrs:{loading:"lazy",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAK3SURBVFiFzZdNSFRRFIC/c+eZouGEY5qLpI3iBCLtykolCFyIUJILkSwIbNXCTQvXLnOdIP2IuBAqkAihiLQ0aBcGoy6FErUxlHQcxvdOC8e/8Y0zjk/trB7v3Hu/j/fu3xHSjOKxviLHNjUCjeJoEKFUIQAgEEaZUSMhhSHjc0bnrt6dT2dcSQke6a9UoQPllqD+dAZVZAnhjSjdc7WtExkJ5A/3FuTmZHeq0A7kpQN2iRVRelbXol3L9Q8W0xYIjA9UWDF7EKjMEJwYE+tZvuZwdctkSoGiTy+vIOaVQIlHcAAUZlGnab6u7WtSgcD4QIUvZn/0Gr5Tws7y3dj5JczmQ/5wb4EVswePCg4gUGLF7MH84d6CPQK5OdmdePfP94vKOGtbIL7U2r0mNRSWMlXdzJPyy7veq9BePNJfuSWgQgeZL7Wk8KfBa/itUzQUliam8+JMpHisr0jXzXS6m8xB4JYY1tXhYegLb3/P7GqjyJJYTrnZ2F6PFw4gqN+xTY0RaDxu+LYEjUYcDZ4EHEAcDRqEPTME4PqZczy+UEWBlX0k8A0DSi2FgNuB0HuxZmsG3/7+noXYmrdwQCFgkiU/LP4EoCzXz+uqm5zNyvEUvhlGIOyWeDQ1vjWYm4QXcIGwQXHtZavSHvrsKuEFHABlxqiRULK8m8S7S/XewAE1EjIKQ/s1SpQ4n3PaEziAwpAxPmdUkaWDSHgDlyXjc0YFoGi0/7mo3kvVySdCW0kZP/7+4dvyQsZwABV5MV/Tet8CEKUbuEOKE9FW5dmv6UOB47ESZ24cx3O1rROi9HgxcjohSs/mdX1rI1pdi3YB+97hPYqJOGtDZmfmRC+lAOHqlknUaVKYPQo46jQl1gYnXpi4Hkbh6pbJSCRaF5+pK4cAr4jSHYlE69zg8D8Xp3tEjqg8/wdElJpvZtfbZgAAAABJRU5ErkJggg==",alt:""}}),t._v(" "),e("div",{staticClass:"example-goods-top-title"},[t._v(t._s(t.$t(t.photoText.photoExample)))])]),t._v(" "),e("div",{staticClass:"example-seat"},[e("div",{staticClass:"container"},[e("img",{staticClass:"lzy",staticStyle:{opacity:"1"},attrs:{loading:"lazy",src:t.images.good},on:{contextmenu:function(t){t.preventDefault()},mousedown:function(t){t.preventDefault()}}})])]),t._v(" "),e("p",[t._v(t._s(t.$t(t.photoText.photoExampleDtl)))])]),t._v(" "),e("div",{staticClass:"example-right-wrap"},[e("div",{staticClass:"example-goods-top"},[e("img",{attrs:{loading:"lazy",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAALRSURBVFiFzZdPSBRhGIef91tjlQ6CguCli4cMm1IIokMiYUQXQQShS1AG/tuTHTtEB0/Rntws0HMghOBNkAg7KBRoTqEXL14kIcGDqLS7b4dvddd25ptx2YV+p93Z95vnYWfemfcTYkZvjLSA6UYSfYheA66ANttf5Tewg8ommluA/LJsvNuLc16JBHspj4ROgPQDjTF9D0DnyUla/Cm/IgHtGGqirv4FIsPA5Zjgf3OI6nuyx5Pyc3Y/toB6qXYMcwheheB/TohPnkHxp7YiBdQbv0NCPgKtVYEXs0tOB8TPrIQKqJdqJ8GnGsBLJLhX+k+YM3jHUBOGuRrCAVoxzGnHUFOZgL3hqnTNXRE86upfnBNQL+UV7vbyPLkPq2l4/RQaktGAhqStXU3btYESMqxeyjsTsH0e0mrDDyF5CXq7IDPqlmhI2preLrvm2YOwyssFJsY+4aQ/9KSfN4qfu9rCJU7hXW3FY19+hMsi/XpjpMWA6cb1hHv1Ada33RJB8PVtuzY8jWC6DZLoc1VxdAJj0+ESYfCxabvWFUn0iXamvgK33JVY0NtR6CwBrW0XhS4Kt/km2pn6BbTEqQ6UKM3F4AB7pvhKjZGgy1E5HNBmE10UtC7msRgxhWEiXoJuuNO4WjQ08tsAOxXD17ejW9SdHYPKZsXwsWl3i0ZFZdPYGa5C+NFJ9HPCKZBbMJBfBg5CiyYfR/d5mMTLRy78AeSXjZ1edT607PZVN9wlcfe6g6/zsvFuz7ZhTtLAYWDdzCKc/IGlteg+P5VYWrNrZhbDKg8LzOJIpjfH3yAy4VCuXlTT8j3zHEonouzxJIpzhq8OHJ/s8eTp1zMB+Tm7T55BYLeG+F3yDJbuEc49isWf2iKnAzWSKIzl5/cGZe8C8TMr5LhX1cuh+HYcP78nCBSwElNbZI96UA3vjng5RDVN9qgnaFcE//PmtEykRtvzv6RjTYGiRRSXAAAAAElFTkSuQmCC",alt:""}}),t._v(" "),e("div",{staticClass:"example-goods-top-title"},[t._v(t._s(t.$t(t.photoText.badTitle)))])]),t._v(" "),e("div",{staticClass:"example-right"},t._l(t.photoText.bad,(function(n,o){return e("div",{key:"example_bad"+o},[e("div",[e("div",{staticClass:"container"},[e("img",{staticClass:"lzy",staticStyle:{opacity:"1"},attrs:{loading:"lazy",src:t.images.bad[o],width:"90",height:"90",alt:"bad-example"},on:{contextmenu:function(t){t.preventDefault()},mousedown:function(t){t.preventDefault()}}})])]),t._v(" "),e("p",[t._v(t._s(t.$t(n)))])])})),0)])])])])])}),[],!1,null,"6285bec3",null).exports),B=n(98),H=n(45),z=n(38),V=n(163);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){Object(h.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y={name:"UploadHead",props:{styles:{type:Array,default:function(){return[]}},genderNumber:{type:Number,default:1}},components:{QuickQueue:B.a,BackArrow:$,ContainerText:T,ExampleLeft:F},computed:G(G(G({},Object(v.c)("user",["isLoggedIn"])),Object(v.e)("user",["cdnHost"])),{},{showCreatBtn:function(){return this.imgUrl&&!this.isLoading&&this.checkSuccesss},taskId:function(){var t;return null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.task}}),data:function(){return{imgUrl:"",uploading:!1,imgLoading:!1,isShowResult:!1,isLoading:!1,checkSuccesss:null,checkReason:"",UPLOAD:new z.a({type:53})}},mounted:function(){},methods:{handleBeforeUpload:function(t){var e=this;return Object(R.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("上传",t),o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.isLoading){n.next=5;break}return n.abrupt("return");case 5:if(r.includes(t.type)){n.next=8;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 8:if(l=t,console.log("大小检测"),!(l.size/1024/1024>5)){n.next=21;break}return n.prev=11,n.next=14,Object(H.a)(l,5242880);case 14:l=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 21:if(!e.uploading){n.next=23;break}return n.abrupt("return");case 23:return e.uploading=!0,console.log("开始上传"),e.$logEvent("log_actions",{operation:"click_upload_now",behavior_info:"on_ai_profile_generation_page"}),o.startUpload(l).then((function(t){e.uploading=!1,e.imgLoading=!0,e.imgUrl=t,e.scanImage()})).catch((function(t){console.log(t),e.uploading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 28:case"end":return n.stop()}}),n,null,[[11,17]])})))()},handleImageLoad:function(){this.imgLoading=!1},removeImage:function(){this.imgUrl="",this.imgLoading=!1,this.isShowResult=!1,this.checkSuccesss=null,this.checkReason=""},replaceImage:function(){this.removeImage();var input=this.$refs.upload.$el.querySelector('input[type="file"]');input&&input.click()},scanImage:function(){var t=this;this.isLoading=!0;var e={scene:"ai_photo",url:this.imgUrl};Object(V.c)(e).then((function(e){var n,o;if(1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code))if(t.isLoading=!1,null!=e&&null!==(o=e.data)&&void 0!==o&&o.is_face)t.checkSuccesss=!0;else{var r;t.checkSuccesss=!1;var l=null==e||null===(r=e.data)||void 0===r?void 0:r.error_reason,c={NO_FACE_DETECTED:t.$t("imgNoFace"),FACE_ANGLE_INCORRECT:t.$t("imgWrongAngle"),MULTIPLE_FACES_DETECTED:t.$t("imgMultipleFaces"),FACE_TOO_SMALL:t.$t("imgFaceTooSmall")};t.checkReason=c[l]||t.$t("imgNoFace")}})).catch((function(){t.isLoading=!1}))},createTask:function(){var t=this;if(console.log("开始生成",this.styles,this.genderNumber),this.$logEvent("log_actions",{operation:"click_generate_now",behavior_info:"on_ai_profile_generation_page"}),this.isLoggedIn)this.addTask();else{this.$logEvent("log_actions",{operation:"register_popup",behavior_info:"click_generate"});var e="https://".concat(this.cdnHost,"/static/upload/20241128/d41378aa-7629-47b6-b0f1-f4eee435b932.png");this.$EventBus.$emit("openLoginDialog",{callBack:function(){return t.addTask()},backGroundUrl:e||"",autoActive:!0})}},addTask:function(){var t=this,e={gender:this.genderNumber,image:this.imgUrl,styles:this.styles};this.taskId&&(e.task_id=this.taskId),this.$emit("creating",!0),Object(V.d)(e).then((function(e){var n;if(1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var o,r,l=null==e||null===(o=e.data)||void 0===o?void 0:o.task_id;if(t.taskId)localStorage.setItem("photoPaySuccessId",l),t.successCallback();else t.$EventBus.$emit("openAIPhotoPayment",l,null===(r=t.styles)||void 0===r?void 0:r.length,(function(){localStorage.setItem("photoPaySuccessId",l),t.successCallback()}))}})).finally((function(){return t.$emit("creating",!1)}))},successCallback:function(){var t=this,e=setTimeout((function(){t.$router.push(t.localePath("/ai-headshot-creations")),clearTimeout(e)}),1e3)}}},Q=(n(2937),Object(c.a)(Y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload-head-page flex w-full"},[e("div",{staticClass:"upload-container"},[e("div",{staticClass:"head-container"},[e("ContainerText",{scopedSlots:t._u([{key:"sub",fn:function(){return[t._v(t._s(t.$t("uploadBestImgSub")))]},proxy:!0}])},[t._v("\n        "+t._s(t.$t("uploadBestImg"))+"\n        ")]),t._v(" "),e("BackArrow",t._g({},t.$listeners))],1),t._v(" "),e("div",{staticClass:"upload-down"},[e("div",{staticClass:"ft-avatar-upload flex_line_c"},[e("div",{staticClass:"ft-avatar-upload-container"},[e("div",{staticClass:"ft-avatar-upload-example"},[e("ExampleLeft",{attrs:{genderType:t.genderNumber}})],1),t._v(" "),e("div",{staticClass:"ft-avatar-upload-operation"},[e("div",{staticClass:"ft-avatar-upload-area"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgUrl,expression:"!imgUrl"}],staticClass:"upload-box"},[[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],ref:"upload",staticClass:"image-upload",attrs:{accept:"image/*",action:"/",drag:"","before-upload":t.handleBeforeUpload,"http-request":function(){},"show-file-list":!1}},[e("i",{staticClass:"el-icon-upload image-upload-icon"}),t._v(" "),e("div",{staticClass:"ft-avatar-upload-area--title"},[t._v(t._s(t.$t("upload1Photo")))]),t._v(" "),e("div",{staticClass:"ft-avatar-upload-area--desc"},[t._v(t._s(t.$t("TaskUploadImageClickUploadTips")))]),t._v(" "),e("div",{staticClass:"upload-btn ai-avatar-btn flex items-center"},[t._v("\n                      "+t._s(t.$t("uploadPhoto1"))+"\n                    ")])])]],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"imgUrl"},{name:"loading",rawName:"v-loading",value:t.imgUrl&&t.imgLoading,expression:"imgUrl && imgLoading"}],staticClass:"show-content w-full h-full flex flex-col items-center"},[t.imgUrl?e("img",{directives:[{name:"show",rawName:"v-show",value:!t.isShowResult,expression:"!isShowResult"}],attrs:{src:t.imgUrl,alt:""},on:{load:t.handleImageLoad,error:t.handleImageLoad}}):t._e(),t._v(" "),t.isLoading?e("div",{staticClass:"scanner-container"}):t._e(),t._v(" "),[e("span",{directives:[{name:"mytip",rawName:"v-mytip.top",value:t.$t("CreativeCenterPopup33"),expression:"$t('CreativeCenterPopup33')",modifiers:{top:!0}},{name:"show",rawName:"v-show",value:t.imgUrl&&!t.isLoading,expression:"imgUrl && !isLoading"}],staticClass:"el-image-viewer__replace",on:{click:function(e){return e.stopPropagation(),t.replaceImage.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-task-img-2-img-icon"})]),t._v(" "),e("span",{directives:[{name:"mytip",rawName:"v-mytip.top",value:t.$t("Delete"),expression:"$t('Delete')",modifiers:{top:!0}},{name:"show",rawName:"v-show",value:t.imgUrl&&!t.isLoading,expression:"imgUrl && !isLoading"}],staticClass:"el-image-viewer__close",on:{click:function(e){return e.stopPropagation(),t.removeImage.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-postDelete"})]),t._v(" "),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:!1===t.checkSuccesss&&t.imgUrl,expression:"checkSuccesss === false && imgUrl"}],attrs:{title:t.checkReason,type:"warning",closable:!1,"show-icon":""}})]],2),t._v(" "),e("div",{staticClass:"ft-avatar-upload-tip-txt"},[t._v("\n                "+t._s(t.$t("autoDeleteImage"))+"\n              ")])])])]),t._v(" "),t.showCreatBtn?e("div",{staticClass:"create-btn ai-avatar-btn flex items-center",on:{click:t.createTask}},[e("i",{staticClass:"iconfont icon-search-magic"}),t._v(" "+t._s(t.$t("StartGenerating"))+"\n        ")]):t._e()])])])])}),[],!1,null,"d1bdd89c",null)),X=Q.exports,J=n(531),K={name:"AIAvatar",components:{HeadTop:o.a,AvatarFrame:r.a,StepOne:w,SelectStyle:A,UploadHead:X,SpinLoading:J.a},computed:{genderNumber:function(){if(!this.showGender)return 2;return{male:1,female:2,other:3}[this.showGender]||2}},data:function(){return{step:1,showGender:"male",allGenderSelected:{},currentSelected:[],isCreateLoading:!1}},mounted:function(){this.initTask()},methods:{initTask:function(){var t,e=this,n=null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.task;n&&(this.step=3,Object(V.g)({task_id:n}).then((function(t){var n;if(1e4===(null==t||null===(n=t.status)||void 0===n?void 0:n.code)){var o,r,l=(null==t||null===(o=t.data)||void 0===o?void 0:o.gender)||2;e.showGender=e.getGenderSring(l);var c=(null==t||null===(r=t.data)||void 0===r?void 0:r.styles)||[];console.log("获取已选中",c,e.showGender),e.currentSelected=c,e.allGenderSelected[e.showGender]=e.currentSelected,e.changeGender(e.showGender),e.generate()}})))},generate:function(){this.showGender&&(this.$refs.SelectStyleRef.getStyle(this.showGender),1===this.step&&this.offsetStep())},changeGender:function(t){this.showGender=t,this.currentSelected=this.allGenderSelected[this.showGender]||[],this.$refs.SelectStyleRef.initSelect(this.currentSelected)},offsetStep:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.step=this.step+t},updateSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.showGender;this.currentSelected=t,this.allGenderSelected[e]=t},getGenderSring:function(t){return{1:"male",2:"female",3:"other"}[t]}},head:function(){return{title:this.$t("headshot_home_title"),meta:[{hid:"description",name:"description",content:this.$t("headshot_home_desc")},{hid:"og:title",name:"og:title",content:this.$t("headshot_home_title")},{hid:"og:description",name:"og:description",content:this.$t("headshot_home_desc")}]}}},Z=K,tt=(n(2938),n(2939),Object(c.a)(Z,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"AIAvatar flex flex-col"},[e("HeadTop"),t._v(" "),e("AvatarFrame",[e("StepOne",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],attrs:{showGender:t.showGender},on:{generate:t.generate,changeGender:t.changeGender}}),t._v(" "),e("SelectStyle",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}],ref:"SelectStyleRef",on:{back:function(e){return t.offsetStep(-1)},next:function(e){return t.offsetStep(1)},updateSelect:t.updateSelect}}),t._v(" "),e("UploadHead",{directives:[{name:"show",rawName:"v-show",value:3===t.step,expression:"step === 3"}],attrs:{styles:t.currentSelected,genderNumber:t.genderNumber},on:{back:function(e){return t.offsetStep(-1)},creating:function(e){t.isCreateLoading=e}}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCreateLoading,expression:"isCreateLoading"}],staticClass:"loading-part flex flex-col justify-center items-center"},[e("SpinLoading"),t._v(" "),e("div",{staticClass:"waiting"},[t._v(t._s(t.$t("toAlbumLoading")))])],1)],1)}),[],!1,null,"480b7f8f",null));e.default=tt.exports},3257:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12),n(8),n(4),n(6);var o=n(2),r=(n(10),n(16),n(28),n(431)),l={inject:["top"],props:{lowImg:{type:String,default:""},highImg:{type:String,default:""},isDetail:{type:Boolean,default:!0},radius:{type:Number,default:0},showRange:{type:Boolean,default:!0}},data:function(){return{sliderWidth:50,dragging:!1,scale:1,translate:{x:0,y:0,x1:0,y1:0}}},mounted:function(){this.top.eventFn.initImagePoin=this.initImagePoin},methods:{handleWheel:function(t){if(this.isDetail){var e=t.deltaY,n=e>0,o=e<0,r=this.scale;t.preventDefault(),n&&(this.scale=r>.4?r-.1:.4),o&&(this.scale=r<3?r+.1:3)}},startDrag:function(t){if(this.isDetail&&"range"!==t.target.getAttribute("data-type")){var e=this.translate,n=e.x,o=e.y;this.dragging=!0,this.translate.x1=t.clientX-n,this.translate.y1=t.clientY-o,document.addEventListener("mousemove",this.dragIng)}},dragIng:function(t){var e=this.translate,n=e.x1,o=e.y1;this.dragging&&(this.translate.x=t.clientX-n,this.translate.y=t.clientY-o)},endDrag:function(){this.dragging=!1,document.removeEventListener("mousemove",this.dragIng)},initImagePoin:function(){this.scale=1,this.translate.x=0,this.translate.y=0,this.translate.x1=0,this.translate.y1=0,this.sliderWidth=100,document.querySelector("#afterImageId").style.opacity=0},highImgloadEnd:function(){this.sliderWidth=50,document.querySelector("#afterImageId").style.opacity=1}}},c=(n(2603),n(0)),d=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"diff-img-box",class:t.isDetail&&"has-detail",on:{wheel:t.handleWheel}},[e("div",{staticClass:"low-img-box flex_c_m",style:"clip-path: polygon(0px 0px, ".concat(t.sliderWidth,"% 0px, ").concat(t.sliderWidth,"% 100%, 0px 100%);")},[e("img",{staticClass:"img-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{src:t.lowImg}})]),t._v(" "),e("div",{staticClass:"high-img-box flex_c_m"},[e("img",{staticClass:"img-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{id:"afterImageId",src:t.highImg},on:{load:t.highImgloadEnd,error:t.highImgloadEnd}})]),t._v(" "),e("div",{staticClass:"step-box",on:{mousedown:t.startDrag,mouseup:t.endDrag}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRange,expression:"showRange"}],staticClass:"guide-line",style:"left: calc(".concat(t.sliderWidth,"% - 1px);")}),t._v(" "),e("input",{directives:[{name:"show",rawName:"v-show",value:t.showRange,expression:"showRange"},{name:"model",rawName:"v-model",value:t.sliderWidth,expression:"sliderWidth"}],staticClass:"image-view-slider",attrs:{"data-type":"range",type:"range",step:.01,min:0,max:100},domProps:{value:t.sliderWidth},on:{__r:function(e){t.sliderWidth=e.target.value}}})])])}),[],!1,null,"3179cbf0",null).exports,h=(n(29),n(32),n(47),n(19),n(14),n(3)),v=(n(20),n(18),n(38)),m=n(53),f=n(1),_=n(45);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var w={props:{type:{type:String,default:"big"}},data:function(){return{imgUrl:"",uploading:!1,UPLOAD:new v.a({type:19}),realWidth:0,realHeight:0,style:{}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(f.e)("user",["token"])),methods:{handleBeforeUpload:function(t){var e=this;return Object(h.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.token){n.next=3;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 3:if(o=e.UPLOAD,["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)){n.next=8;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 8:if(!(r=t)||r.size){n.next=11;break}return n.abrupt("return",!1);case 11:return n.next=13,e.checkImageSize(t);case 13:if("boundary"!==(l=n.sent)){n.next=17;break}return e.$message.warning(e.$t("HD_Erorr_Minimum")),n.abrupt("return",!1);case 17:if(l){n.next=20;break}return e.$message.warning(e.$t("HD_Erorr")),n.abrupt("return",!1);case 20:if(!(r.size/1024/1024>10)){n.next=31;break}return n.prev=21,n.next=24,Object(_.a)(r,10485760);case 24:r=n.sent,n.next=31;break;case 27:return n.prev=27,n.t0=n.catch(21),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 31:if(!e.uploading){n.next=33;break}return n.abrupt("return");case 33:return e.uploading=!0,o.startUpload(r).then((function(t){e.uploading=!1,e.imgUrl=t,e.$emit("onSuccess",{url:e.imgUrl})})).catch((function(t){e.uploading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 36:case"end":return n.stop()}}),n,null,[[21,27]])})))()},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;(t<512||o<512)&&n("boundary");var r=Object(m.f)(t,o,512);e.$set(e,"realWidth",img.naturalWidth),e.$set(e,"realHeight",img.naturalHeight),e.$set(e,"style",{width:"".concat(r.width,"px"),height:"".concat(r.height,"px")}),n(3072>t&&3072>o)},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},handleBeforeUploadEmpty:function(){}}},C=w,x=(n(2604),Object(c.a)(C,(function(){var t=this,e=t._self._c;return e("div",{class:["big"===t.type?"upload-box":"min-upload-box"]},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],attrs:{drag:"",action:"#","before-upload":t.handleBeforeUpload,disabled:t.uploading,"http-request":t.handleBeforeUploadEmpty,"show-file-list":!1}},["big"===t.type?[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n        "+t._s(t.$t("TaskUploadImageClickUploadTips"))+"\n      ")])]:t._e(),t._v(" "),"min"===t.type?[e("i",{staticClass:"el-icon-plus"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n        "+t._s(t.$t("TaskUploadImageClickUploadTips"))+"\n      ")])]:t._e()],2)],1)}),[],!1,null,"079c24fa",null).exports),k=n(59),O=n(35),I=n.n(O);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={inject:["top"],components:{UploadImg:x},props:{lowImg:{type:String,default:""},repairing:{type:Boolean,default:!1}},data:function(){return{numList:[{num:"x2",val:2,active:!0},{num:"x4",val:4,active:!1},{num:"x6",val:6,active:!1},{num:"x8",val:8,active:!1}],formData:{image_url:"",hd_scale:2,prompt:"",width:0,height:0,creativity:0,fractality:0,hdr:0,resemblance:0,engine:"",style:""},sliderData:[{label:"parameter1",tips:"parameter1_tips",key:"creativity",value:.4,step:.1,min:.1,max:1,handle:function(){}},{label:"parameter2",tips:"parameter2_tips",key:"hdr",value:.5,step:.1,min:.1,max:1,handle:function(){}},{label:"parameter3",tips:"parameter3_tips",key:"resemblance",value:.5,step:.1,min:.1,max:1,handle:function(){}},{label:"parameter4",tips:"parameter4_tips",key:"fractality",value:.6,step:.1,min:.1,max:1,handle:this.getEstimate}],styleList:[],engineList:[],estimate:0,setting:!0}},watch:{},computed:j({imgRate:function(){var t=this.formData,e=t.width,n=t.height,o=t.hd_scale,r=this.handleAutoSize(e*o,n*o);return r.x+"x"+r.y}},Object(f.c)("user",["isLoggedIn"])),methods:{handleAutoSize:function(t,e){var n=t,o=e;if(n/o>0&&n>1e4){var r=n/1e4;n=1e4,o=parseInt(o/r)}else if(o>1e4){var l=o/1e4;o=1e4,n=parseInt(n/l)}return{x:n,y:o}},fileSuccess:function(t){var e=this,n=t.url;Object(r.a)(n,(function(t){var o=t.width,r=t.height;e.formData.image_url=n,e.formData.width=o,e.formData.height=r,e.formData.hd_scale=2,e.formData.prompt="",e.changeScale(2),e.getEstimate(),e.$emit("onFileSuccess",{url:n}),e.$logEvent("log_actions",{operation:"click_upload_image",behavior_info:"on_hd_restoration_detail_page"})}))},changePrompt:function(){this.$logEvent("log_actions",{operation:"input_prompt",behavior_info:"on_hd_restoration_detail_page"})},changeScaleFn:function(t){this.$logEvent("log_actions",{operation:"click_adjust_magnification",behavior_info:"on_hd_restoration_detail_page"}),this.changeScale(t)},changeScale:function(t){var e=this.numList.findIndex((function(e){return e.val===t}));this.formData.hd_scale=t,this.numList=this.numList.map((function(t){return j(j({},t),{},{active:!1})})),this.numList[e].active=!0,this.getEstimate()},submitForm:function(){if(!this.repairing)if(this.isLoggedIn){var t=I()(this.formData);t.style=Number(t.style)||0,t.engine=Number(t.engine),this.sliderData.forEach((function(e){t[e.key]=e.value})),this.$emit("onSubmit",t)}else this.$EventBus.$emit("openLoginDialog")},initForm:function(t){var e,n,o=this,r=t.lowImg,l=t.hdScale,c=t.prompt,d=t.width,h=t.height,v=t.defFormData;this.formData.image_url=r,this.formData.hd_scale=l,this.formData.prompt=c,this.formData.width=d,this.formData.height=h;var m=function(t){o.sliderData.forEach((function(e){if(e.key===t){var n=v[t],o=n.max,r=n.min,l=n.default_val,c=n.type,d=n.step;e.max=o,e.min=r,e.value=l,e.type=c,e.step=d}}))};for(var f in v)m(f);this.engineList=null===(e=v.engine)||void 0===e||null===(e=e.enums)||void 0===e?void 0:e.map((function(t){return{label:t.name,value:t.value}})),this.formData.engine=v.engine.default_val,this.styleList=null===(n=v.style)||void 0===n||null===(n=n.enums)||void 0===n?void 0:n.map((function(t){return{label:t.name,value:t.value}})),this.formData.style=v.style.default_val,this.changeScale(l),console.log(this.formData,"data===")},resetForm:function(){this.formData.image_url="",this.formData.hd_scale=2,this.formData.prompt="",this.formData.width=0,this.formData.height=0,this.formData.fractality=1,this.formData.hdr=1,this.formData.resemblance=1,this.formData.fractality=1,this.formData.style="",this.formData.engine="",this.changeScale(2)},delImg:function(){this.formData.image_url="",this.formData.width=0,this.formData.height=0,this.formData.hd_scale=2,this.formData.prompt="",this.changeScale(2),this.top.eventFn.initImagePoin()},getEstimate:function(){var t,e=this,n=this.formData,o=n.width,r=n.height,l={action:17,meta:{width:o,height:r,swift_tool_uhd_meta:{hd_scale:n.hd_scale,fractality:(null===(t=this.sliderData.find((function(t){return"fractality"===t.key})))||void 0===t?void 0:t.value)||.5}}};o&&r?Object(k.q)(l).then((function(t){e.estimate=t.data.calculate_coins})):this.estimate=0},handleCollapse:function(){this.setting&&this.$logEvent("log_actions",{operation:"click_expand_settings",behavior_info:"on_hd_restoration_page"}),this.setting=!this.setting},handleStyle:function(t){t&&this.$logEvent("log_actions",{operation:"click_expand_template",behavior_info:"on_hd_restoration_page"})}}},L=(n(2605),Object(c.a)(T,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[""===t.formData.image_url?[e("upload-img",{attrs:{type:"min"},on:{onSuccess:t.fileSuccess}})]:t._e(),t._v(" "),""!==t.formData.image_url?[e("div",{staticClass:"img-thumbnail"},[e("el-image",{staticClass:"img-item",attrs:{src:t.formData.image_url}}),t._v(" "),e("div",{staticClass:"close-img flex_c_m",on:{click:t.delImg}},[e("i",{staticClass:"el-icon-close"})])],1)]:t._e(),t._v(" "),e("div",{staticClass:"magnification-box"},[e("div",{staticClass:"title-box flex_m"},[e("div",{staticClass:"left flex_m"},[e("i",{staticClass:"el-icon-zoom-in"}),t._v(" "),e("span",[t._v(t._s(t.$t("magnification")))])])]),t._v(" "),e("div",{staticClass:"num-list flex"},t._l(t.numList,(function(n,i){return e("div",{key:i,staticClass:"item flex_c_m",class:n.active&&"act-item",on:{click:function(e){return t.changeScaleFn(n.val)}}},[t._v("\n        "+t._s(n.num)+"\n      ")])})),0),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.formData.width>0,expression:"formData.width > 0"}],staticClass:"text-info"},[e("span",[t._v(t._s(t.$t("theImageSize")))]),t._v(" "),e("b",[t._v(t._s(t.imgRate))]),t._v(" "),e("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:t.$t("HD_Tips"),placement:"top-start"}},[e("span",{staticClass:"el-icon-warning custom-tips"})])],1)]),t._v(" "),e("div",{staticClass:"up-style"},[e("div",{staticClass:"left"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("up_style")))]),t._v(" "),e("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:t.$t("newVaeTip"),placement:"top-start"}},[e("span",{staticClass:"el-icon-warning custom-tips"})])],1),t._v(" "),e("div",{staticClass:"right"},[e("el-select",{staticClass:"custom-select-transparent",attrs:{"popper-append-to-body":!0,"popper-class":"custom-select"},on:{"visible-change":t.handleStyle},model:{value:t.formData.style,callback:function(e){t.$set(t.formData,"style",e)},expression:"formData.style"}},t._l(t.styleList,(function(t,i){return e("el-option",{key:"item_"+i,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._v(" "),e("div",{staticClass:"setup-box",class:{hide:t.setting}},[e("div",{staticClass:"title-box flex_m",on:{click:t.handleCollapse}},[e("div",{staticClass:"left flex_m"},[e("i",{staticClass:"el-icon-s-tools"}),t._v(" "),e("span",[t._v(t._s(t.$t("TaskUploadImageMoreSetting")))])]),t._v(" "),e("div",{staticClass:"right"},[e("i",{staticClass:"el-icon-caret-bottom",class:{iconRate:!t.setting}})])]),t._v(" "),e("div",{staticClass:"tips-word-box"},[e("div",{staticClass:"word-text"},[e("span",[t._v(t._s(t.$t("Prompt")))])]),t._v(" "),e("el-input",{attrs:{type:"textarea",rows:3,placeholder:""},on:{change:t.changePrompt},model:{value:t.formData.prompt,callback:function(e){t.$set(t.formData,"prompt",e)},expression:"formData.prompt"}})],1),t._v(" "),e("div",{staticClass:"up-style"},[e("div",{staticClass:"left"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("parameter5")))])]),t._v(" "),e("div",{staticClass:"right"},[e("el-select",{staticClass:"custom-select-transparent",attrs:{"popper-append-to-body":!0,"popper-class":"custom-select"},model:{value:t.formData.engine,callback:function(e){t.$set(t.formData,"engine",e)},expression:"formData.engine"}},t._l(t.engineList,(function(t,i){return e("el-option",{key:"item_"+i,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._v(" "),e("div",{staticClass:"slider-box"},t._l(t.sliderData,(function(n,o){return e("div",{key:n.label,staticClass:"slider-list"},[e("div",{staticClass:"top"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t(n.label)))]),t._v(" "),e("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:t.$t(n.tips),placement:"top-start"}},[e("span",{staticClass:"el-icon-warning custom-tips"})])],1),t._v(" "),e("div",{staticClass:"slider"},[e("el-slider",{attrs:{min:.1,max:1,step:n.step,"show-tooltip":!0,"show-input":""},on:{change:n.handle},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"item.value"}})],1)])})),0)]),t._v(" "),e("div",{staticClass:"submit-box flex_c_m"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.repairing,expression:"repairing"}],staticClass:"btn",on:{click:t.submitForm}},[e("p",{staticClass:"text-1"},[t._v(t._s(t.$t("Tasks")))]),t._v(" "),e("p",{staticClass:"text-2"},[t._v(t._s(t.$t("expend"))+"："+t._s(t.estimate||"--"))])])])],2)}),[],!1,null,"3c973f42",null).exports),S=n(15),D=(n(49),n(76),n(5));function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var E={inject:["top"],props:{repairing:{type:Boolean,default:!1}},data:function(){return{loading:!1,list:[],logo:n(742),layerType:"one",actIndex:-1}},mounted:function(){this.isLoggedIn&&this.getHdHistoryList()},watch:{isLoggedIn:function(t){t&&this.getHdHistoryList()}},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),d=e.getSeconds().toString().padStart(2,"0");return"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(d)}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(f.c)("user",["isLoggedIn"])),methods:{getHdHistoryList:function(){var t=this,param={after_id:this.getListLast(),limit:3};this.loading=!0,Object(k.s)(param).then((function(e){var n=(e.data.items||[]).map((function(t){var e=t.meta,meta=void 0===e?{}:e,n=t.create_at,o=t.local_prompt,r=t.id,l=t.deduction_detail,c=t.status,d=meta.swift_tool_uhd_meta,h=t.img_uris?t.img_uris[0]:{};return{id:r,lowImg:d.image,highImg:(null==h?void 0:h.url)||"",hdScale:d.hd_scale,prompt:o,createAt:n,deduction_detail:l,style:d.style||1,engine:d.engine||1,hdr:d.hdr||1,fractality:d.fractality||1,resemblance:d.resemblance||1,creativity:d.creativity||1,status:c}}));t.list=[].concat(Object(S.a)(t.list),Object(S.a)(n)),t.loading=!1})).catch((function(){t.loading=!1}))},getListLast:function(){var t=this.list;return(t[t.length-1]||{}).id||""},updateList:function(){this.actIndex=-1,this.list=[],this.getHdHistoryList()},toggleType:function(t){this.layerType=t},goHistoryItem:function(t,e){this.repairing?this.$message(this.$t("loading_tip")):(this.actIndex=e,this.top.eventFn.initImagePoin(),this.$emit("onClick",t))},scroolLoad:function(){var t=this.$refs.historyListRef;t.scrollTop+t.clientHeight>=t.scrollHeight&&!this.loading&&this.getHdHistoryList()},delHdHistoryItem:function(t){var e=this,param={ids:[t]};this.$confirm(this.$t("deleteTaskConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning"}).then((function(){Object(k.k)(param).then((function(){e.updateList()}))})).catch((function(){}))},downloadImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&(this.$logEvent("log_actions",{operation:"click_download_images_on_tools",behavior_info:"hd_restoration"}),Object(D.z)(t,this.$t("ai_tools_1")))},handleStatus:function(t){return this.$t({1:"Queuing",2:"Queuing",3:"upsacle",4:"up_task_failed"}[t.status]||"upsacle")}}},A=E,R=(n(2606),Object(c.a)(A,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[e("div",{staticClass:"nav-sell flex_m"},[e("div",{staticClass:"left"},[e("i",{staticClass:"iconfont icon-workflow_icon_list left_iconfont",class:"one"===t.layerType&&"active-icon",on:{click:function(e){return e.stopPropagation(),t.toggleType("one")}}}),t._v(" "),e("i",{staticClass:"iconfont icon-workflow_icon_grid left_iconfont",class:"two"===t.layerType&&"active-icon",on:{click:function(e){return e.stopPropagation(),t.toggleType("two")}}})]),t._v(" "),e("div",{staticClass:"right"},[e("i",{staticClass:"iconfont icon-zhonghui",on:{click:t.updateList}})])]),t._v(" "),e("div",{ref:"historyListRef",staticClass:"history-list flex",on:{scroll:t.scroolLoad}},[t._l(t.list,(function(n,i){var o,r,l,c,d;return e("div",{key:n.id,class:"itembox-".concat(t.layerType)},[e("div",{directives:[{name:"show",rawName:"v-show",value:"one"===t.layerType,expression:"layerType === 'one'"}],staticClass:"item"},[e("div",{staticClass:"title-nav flex_m"},[e("div",{staticClass:"left flex_m"},[e("el-image",{staticClass:"head-img",attrs:{src:t.logo}}),t._v(" "),e("span",{staticClass:"name-text"},[t._v(t._s(t.$t("SeaArtBot")))]),t._v(" "),e("div",{staticClass:"tag-box"},[t._v(t._s(t.handleStatus(n)))])],1),t._v(" "),e("div",{staticClass:"right"},[e("span",[t._v(t._s(t._f("formatDateTime")(n.createAt)))]),t._v(" "),e("el-popover",{attrs:{trigger:"click","popper-class":"custom-popver"}},[e("div",{staticClass:"task-info-tips"},[e("p",[e("span",[t._v(t._s(t.$t("TaskID")))]),e("span",[t._v(t._s(n.id))])]),t._v(" "),e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("expend")))]),t._v(" "),e("span",{staticClass:"task-info-tips-content"},[e("span",[t._v(t._s(t.$t("tempCoins"))+" : "+t._s(null==n||null===(o=n.deduction_detail)||void 0===o?void 0:o.temp_hashrate))]),t._v(" "),e("span",[t._v(t._s(t.$t("calculateCoins"))+" : "+t._s(null==n||null===(r=n.deduction_detail)||void 0===r?void 0:r.hashrate))])])]),t._v(" "),null!=n&&null!==(l=n.deduction_detail)&&void 0!==l&&l.history_hashrate?e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("currentBalance")))]),t._v(" "),e("span",{staticClass:"√"},[e("span",[t._v(t._s(t.$t("tempCoins"))+" : "+t._s(null==n||null===(c=n.deduction_detail)||void 0===c?void 0:c.after_temp_hashrate))]),t._v(" "),e("span",[t._v(t._s(t.$t("calculateCoins"))+" : "+t._s(null==n||null===(d=n.deduction_detail)||void 0===d?void 0:d.after_hashrate))])])]):t._e()]),t._v(" "),e("i",{staticClass:"iconfont icon-task_tips task-info-icon",attrs:{slot:"reference"},slot:"reference"})])],1)]),t._v(" "),e("div",{staticClass:"img-box"},[e("el-image",{staticClass:"action-img",class:t.actIndex===i&&"hisact-item",attrs:{fit:"cover",src:n.highImg||n.lowImg},on:{click:function(e){return t.goHistoryItem(n,i)}}}),t._v(" "),e("div",{staticClass:"btn-bord"},[3===n.status?e("div",{staticClass:"item flex_c_m",on:{click:function(e){return t.downloadImage(n.highImg)}}},[e("i",{staticClass:"iconfont icon-icon_xiazai",staticStyle:{"font-size":"14px"}})]):t._e(),t._v(" "),e("div",{staticClass:"item flex_c_m",on:{click:function(e){return t.delHdHistoryItem(n.id)}}},[e("i",{staticClass:"iconfont icon-shanchu3"})])])],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"two"===t.layerType,expression:"layerType === 'two'"}],staticClass:"item-two"},[e("el-image",{staticClass:"action-img",class:t.actIndex===i&&"hisact-item",attrs:{fit:"cover",src:n.highImg||n.lowImg},on:{click:function(e){return t.goHistoryItem(n,i)}}}),t._v(" "),e("div",{staticClass:"btn-bord"},[3===n.status?e("div",{staticClass:"item flex_c_m",on:{click:function(e){return t.downloadImage(n.highImg)}}},[e("i",{staticClass:"iconfont icon-icon_xiazai"})]):t._e(),t._v(" "),e("div",{staticClass:"item flex_c_m",on:{click:function(e){return t.delHdHistoryItem(n.id)}}},[e("i",{staticClass:"iconfont icon-shanchu3"})])])],1)])})),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.list.length,expression:"list.length === 0"}],staticClass:"nolist-item flex_c_m"},[e("span",[t._v(t._s(t.$t("no_data"))+"...")])]),t._v(" "),e("div",{staticClass:"loading-box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"loading-item"})])],2)])}),[],!1,null,"7bf840c4",null).exports),M=n(98),N=n(22);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var B={inject:["top"],components:{ImageDiffLook:d,LeftParams:L,RightHistory:R,QuickQueue:M.a},data:function(){return{dialogVisible:!1,showHistory:!1,repairing:!1,pollingTimer:null,lowImg:"",highImg:"",actImageItem:{},parameterList:[{label:"parameter1",key:"creativity",value:.5},{label:"parameter2",key:"hdr",value:.5},{label:"parameter3",key:"resemblance",value:.5},{label:"parameter4",key:"fractality",value:.5}],quickOptions:{},quickStyle:{height:"32px",fontSize:"14px",background:"rgba(0,0,0,0.3)"}}},methods:{show:function(t){var e=this,n=t.lowImg,o=t.defFormData,l=void 0===o?{}:o;this.dialogVisible=!0,this.lowImg=n,this.highImg="",this.$nextTick((function(){e.top.eventFn.initImagePoin(),e.$refs.rightHistoryRef.actIndex=-1,e.showHistory=!1,Object(r.a)(n,(function(t){var o=t.width,r=t.height;e.$refs.leftParamsRef.initForm({lowImg:n,hdScale:2,prompt:"",width:o,height:r,defFormData:l})}))}))},close:function(){this.dialogVisible=!1},fileSuccess:function(t){var e=t.url;this.lowImg=e,this.highImg=""},submitForm:function(t){var e=this;this.lowImg=t.image_url,this.top.eventFn.initImagePoin(),Object(k.w)(t).then((function(n){var o=n.data.task_id;e.actImageItem=F(F(F({},e.actImageItem),t),{},{id:o}),e.parameterList.forEach((function(e){e.value=t[e.key]})),e.pollingTask(o)}))},pollingTask:function(t){var e=this;return new Promise((function(n,o){e.repairing=!0,e.pollingTimer=setTimeout((function(){Object(N.a)({task_ids:[t]}).then((function(r){var l=r.data.items;if(e.quickOptions=l[0],4===l[0].status)return e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.$message.error(e.$t("ServerError")),e.repairing=!1,void o();if(3===l[0].status){var c=l[0]||{},d=c.img_uris,h=void 0===d?[]:d,v=c.task_id,m=(h[0]||{}).url,f=void 0===m?"":m;Object(k.t)({id:v}).then((function(t){var o,r=(null===(o=t.data)||void 0===o||null===(o=o.meta)||void 0===o||null===(o=o.swift_tool_uhd_meta)||void 0===o?void 0:o.image)||"";e.highImg=f,e.lowImg=r,e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.repairing=!1,e.$refs.rightHistoryRef.updateList(),n()}))}else[1,2].includes(l[0].status)&&e.pollingTask(t)})).catch((function(n){e.$message.error(e.$t("ServerError")),e.repairing=!1,e.pollingTask(t),o()}))}),1e3)}))},stopTask:function(){this.pollingTimer&&window.clearTimeout(this.pollingTimer),this.pollingTimer=null,this.isLoading=!1},toggleHistory:function(t){this.showHistory=!t},handHistory:function(t){this.lowImg=t.lowImg,this.highImg=t.highImg,this.actImageItem=F({id:t.id,image_url:t.lowImg,hd_scale:t.hdScale},t),this.parameterList.forEach((function(e){e.value=t[e.key]}));try{delete this.actImageItem.lowImg,delete this.actImageItem.hdScale}catch(t){}},downloadImage:function(){var t=this.highImg,e=void 0===t?"":t;e&&(this.$logEvent("log_actions",{operation:"click_download_images_on_tools",behavior_info:"hd_restoration"}),Object(D.z)(e,this.$t("ai_tools_1")))},delHdimg:function(){var t=this,param={ids:this.actImageItem.id?[this.actImageItem.id]:[]};this.$confirm(this.$t("deleteTaskConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning"}).then((function(){Object(k.k)(param).then((function(){t.lowImg="",t.highImg="",t.$refs.leftParamsRef.resetForm(),t.$refs.rightHistoryRef.updateList()}))})).catch((function(){}))},copyfn:function(){var text=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";text&&(Object(D.d)(text),this.$message.success(this.$t("CopySuccess")))},repeatParam:function(t){var e=this,n=this.$refs.leftParamsRef.formData,o=this.actImageItem;"img"===t&&Object(r.a)(o.image_url,(function(t){var r=t.width,l=t.height;n.image_url=o.image_url,n.width=r,n.height=l,e.lowImg=o.image_url,e.highImg=""})),"data"===t&&(n.hd_scale=o.hd_scale,n.prompt=o.prompt,this.$refs.leftParamsRef.changeScale(o.hd_scale))}}},H=B,z=(n(2607),Object(c.a)(H,(function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{staticClass:"my-eldialog-style",attrs:{visible:t.dialogVisible,fullscreen:"","show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{attrs:{slot:"title"},slot:"title"}),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"}),t._v(" "),e("div",{staticClass:"work-content-box"},[e("div",{staticClass:"nav-box flex"},[e("div",{staticClass:"left flex_m"},[e("div",{staticClass:"back flex_c_m",on:{click:t.close}},[e("i",{staticClass:"iconfont icon-back"})])]),t._v(" "),e("div",{staticClass:"center flex_c_m"},[e("p",[t._v(t._s(t.$t("hdnavTips")))])]),t._v(" "),e("div",{staticClass:"right flex"},[e("div",{staticClass:"history-btn flex_c_m",on:{click:function(e){return t.toggleHistory(t.showHistory)}}},[e("i",{staticClass:"iconfont icon-qulishirenwu"}),t._v(" "),e("span",[t._v(t._s(t.$t("workFlow11")))])])])]),t._v(" "),e("div",{staticClass:"update-work-box flex"},[e("div",{staticClass:"left-params"},[e("left-params",{ref:"leftParamsRef",attrs:{lowImg:t.lowImg,repairing:t.repairing},on:{onFileSuccess:t.fileSuccess,onSubmit:t.submitForm}})],1),t._v(" "),e("div",{staticClass:"centre-hdimg"},[e("div",{staticClass:"diffimg-box",class:t.repairing&&"vague-box"},[e("image-diff-look",{ref:"imageDiffLookRef",attrs:{lowImg:t.lowImg,highImg:t.highImg||t.lowImg,showRange:""!==t.highImg&&!t.repairing}})],1),t._v(" "),e("div",{staticClass:"loading-box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.repairing,expression:"repairing"}],staticClass:"repairing-tips flex_c_m"},[e("i",{staticClass:"el-icon-loading"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_tools_1"))+"...")])]),t._v(" "),e("QuickQueue",{attrs:{quickOptions:t.quickOptions,quickStyle:t.quickStyle}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:""!==t.highImg&&!t.repairing,expression:"highImg !== '' && !repairing"}],staticClass:"operate-tool-box flex"},[e("div",{staticClass:"left flex"},[e("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[e("div",{staticClass:"item flex_c_m",attrs:{slot:"reference"},slot:"reference"},[e("i",{staticClass:"iconfont icon-zhonghui"})]),t._v(" "),e("div",{staticClass:"use-param-item flex_m",on:{click:function(e){return t.repeatParam("img")}}},[e("span",[t._v(t._s(t.$t("repeatImage")))])])]),t._v(" "),e("div",{staticClass:"item flex_c_m",on:{click:t.downloadImage}},[e("i",{staticClass:"iconfont icon-icon_xiazai"})]),t._v(" "),e("div",{staticClass:"item flex_c_m",on:{click:t.delHdimg}},[e("i",{staticClass:"iconfont icon-shanchu3"})])],1),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"parameter"},t._l(t.parameterList,(function(n,o){return e("div",{key:o,staticClass:"top-list"},[e("span",[t._v(t._s(t.$t(n.label)))]),t._v(" "),e("span",[t._v(t._s(n.value))])])})),0),t._v(" "),e("div",{staticClass:"param-list flex"},[e("div",{staticClass:"prompt"},[e("div",{staticClass:"name-text flex_c_m"},[e("span",[t._v(t._s(t.$t("Prompt")))]),t._v(" "),e("span",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("div",{staticClass:"info-prompt"},[e("p",{staticStyle:{"margin-bottom":"8px"}},[t._v(t._s(t.$t("Prompt")))]),t._v(" "),e("p",[t._v(t._s(t.actImageItem.prompt))]),t._v(" "),e("div",{staticClass:"copy-text",on:{click:function(e){return t.copyfn(t.actImageItem.prompt)}}},[e("i",{staticClass:"iconfont icon-copy-template1"}),t._v("\n                        "+t._s(t.$t("CopyPrompts"))+"\n                      ")])])])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showHistory,expression:"showHistory"}],staticClass:"right-history-list"},[e("right-history",{ref:"rightHistoryRef",attrs:{repairing:t.repairing},on:{onClick:t.handHistory}})],1)])])])],1)}),[],!1,null,"cd1d5308",null).exports),V=n(533),W=n(261),G=n(2609);function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X={name:"HDRestoration",provide:function(){return{top:this}},components:{ImageDiffLook:d,ImageWorkModal:z,UploadImg:x,CommonProblem:V.a,CardList:W.a},data:function(){return{eventFn:{initImagePoin:null},decsData:G.a,iconUrl:n(445),eximgList:[],diffImgix:0,defFormData:{}}},mounted:function(){this.getExampleData()},computed:Q(Q(Q({},Object(f.e)("user",["cdnHost"])),Object(f.c)("user",["cdnHostFun"])),{},{diffImgExample:function(){return{low:"https://".concat(this.cdnHost,"/static/upload/20240314/206f8d51-0e87-4f87-afd6-ee782fa7b984.png"),high:"https://".concat(this.cdnHost,"/static/upload/20240314/f823bd3f-b398-40a8-91ac-fd07ba097609.png")}},diffImgList:function(){return[{name:"canvas_car",low:"https://".concat(this.cdnHost,"/static/upload/20240318/949c5e13-2d9e-4a06-9dbd-4928ee90a7fb.png"),high:"https://".concat(this.cdnHost,"/static/upload/20240318/6f7913a9-451b-410f-9c60-7f7b5388779e.png")},{name:"upsacler_photo_alt_2",low:"https://".concat(this.cdnHost,"/static/upload/20240318/ee764164-c7bc-4a2f-b55a-2be696273316.png"),high:"https://".concat(this.cdnHost,"/static/upload/20240318/5a0aa93a-999c-49bf-940d-3c42ca10ff1d.png")},{name:"upsacler_photo_alt_3",low:"https://".concat(this.cdnHost,"/static/upload/20240318/9d782a47-eeb3-4fd5-a753-562cfdc68dec.png"),high:"https://".concat(this.cdnHost,"/static/upload/20240318/fdb055a0-b507-42a5-bfa2-f6ec9d773e3e.jpg")}]}}),methods:{goWorkView:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).before,e=void 0===t?"":t;this.$refs.ImageWorkModal.show({lowImg:e,defFormData:this.defFormData})},getExampleData:function(){var t=this;Object(k.r)({type:1}).then((function(e){var n=e.status.code,code=void 0===n?"":n,o=e.data,r=o.extra_upscale,l=void 0===r?[]:r,c=o.ultra_hd_param,d=void 0===c?{}:c;[1e4,"10000"].includes(code)&&(t.eximgList=l,t.defFormData=d)}))},fileSuccess:function(t){var e=t.url;this.$refs.ImageWorkModal.show({lowImg:e,defFormData:this.defFormData})},changeTypeImg:function(i){this.diffImgix=i}}},J=X,K=(n(2610),Object(c.a)(J,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"c-fast-tools-hd-restoration"},[e("div",{staticClass:"top-bar"},[e("div",{staticClass:"top-bar-icon"},[e("img",{attrs:{src:t.iconUrl}})]),t._v(" "),e("h1",{staticClass:"top-bar-main-title"},[t._v(t._s(t.$t("upsacler_3_H1")))]),t._v(" "),e("p",{staticClass:"top-bar-sub-title"},[t._v(t._s(t.$t("upsacler_4_H1_value")))])])]),t._v(" "),e("div",{staticClass:"example-bord-box flex_c"},[e("div",{staticClass:"left"},[e("image-diff-look",{attrs:{isDetail:!1,lowImg:t.diffImgExample.low,highImg:t.diffImgExample.high,radius:24}})],1),t._v(" "),e("div",{staticClass:"right"},[e("upload-img",{attrs:{type:"big"},on:{onSuccess:t.fileSuccess}}),t._v(" "),e("div",{staticClass:"example-title flex_c_m"},[e("span",{staticClass:"el-icon-bottom example-title-icon"}),t._v("\n        "+t._s(t.$t("ai_tools_9"))+"\n      ")]),t._v(" "),e("div",{staticClass:"example-img-list flex_c_m"},t._l(t.eximgList,(function(n,i){return e("el-image",{key:i,staticClass:"item",attrs:{src:n.before},on:{click:function(e){return t.goWorkView(n)}}})})),1)],1)]),t._v(" "),e("image-work-modal",{ref:"ImageWorkModal"})],1)}),[],!1,null,"03c9c895",null));e.default=K.exports},3261:function(t,e,n){"use strict";n.r(e);n(9),n(11),n(12),n(6);var o=n(2),r=(n(667),n(44),n(428)),l=n.n(r),c=(n(668),n(429)),d=n.n(c),h=(n(7),n(10),n(8),n(4),n(71),n(1)),v=n(73),m=(n(110),n(21));function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={name:"ChangePassword",props:{},computed:{},data:function(){return{loading:!1,formData:{passwordNow:"",passwordNew:"",passwordNewAgain:""},rules:{passwordNow:[{required:!0,message:this.$t("PleaseIAP"),trigger:"blur"},{min:8,max:20,message:this.$t("PasswordLMBB"),trigger:"blur"},{pattern:/^\S*$/,message:this.$t("PasswordANATCS"),trigger:"blur"},{pattern:/^[^\u4e00-\u9fa5]*$/,message:"密码不能包含汉字",trigger:"blur"}],passwordNew:[{required:!0,message:this.$t("passwordNewTips"),trigger:"blur"},{min:8,max:20,message:this.$t("PasswordLMBB"),trigger:"blur"},{pattern:/^\S*$/,message:this.$t("PasswordANATCS"),trigger:"blur"},{pattern:/^(?=.*[A-Z]).+$/,message:this.$t("PasswordUpper"),trigger:"blur"},{pattern:/^[^\u4e00-\u9fa5]*$/,message:"密码不能包含汉字",trigger:"blur"},{validator:this.validateConfirmPassword2,trigger:"blur"}],passwordNewAgain:[{required:!0,message:this.$t("PleaseETPA"),trigger:"blur"},{validator:this.validateConfirmPassword,trigger:"blur"}]}}},mounted:function(){},methods:_(_({},Object(h.b)("user",["logout"])),{},{validateConfirmPassword:function(t,e,n){e!==this.formData.passwordNew?n(new Error(this.$t("EnterPswDis"))):n()},validateConfirmPassword2:function(t,e,n){e===this.formData.passwordNow?n(new Error(this.$t("EnterPswSame"))):n()},handleSaveSettings:function(){var t=this;this.$refs.formData.validate((function(e){if(e){var n={old:t.formData.passwordNow,new:t.formData.passwordNew};t.loading=!0,Object(m.d)(n).then((function(e){var n;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&(t.$message({message:t.$t("SaveSuccess"),type:"success"}),t.toHome())})).finally((function(){t.loading=!1}))}}))},toHome:function(){var t=this;this.logout().then((function(){t.$router.push(t.localePath("/?openLoginDialog=1"))}))}})},w=(n(2396),n(0)),C=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"change-password"},[e("el-form",{ref:"formData",staticClass:"tagView-form",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"100px","label-position":"top"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title",attrs:{label:t.$t("passwordNow"),prop:"passwordNow"}},[e("el-input",{attrs:{type:"password",maxlength:"20","show-password":"",placeholder:t.$t("PleaseIAP")},model:{value:t.formData.passwordNow,callback:function(e){t.$set(t.formData,"passwordNow","string"==typeof e?e.trim():e)},expression:"formData.passwordNow"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title",attrs:{label:t.$t("passwordNew"),prop:"passwordNew"}},[e("el-input",{attrs:{type:"password",maxlength:"20","show-password":"",placeholder:t.$t("passwordNewTips")},model:{value:t.formData.passwordNew,callback:function(e){t.$set(t.formData,"passwordNew","string"==typeof e?e.trim():e)},expression:"formData.passwordNew"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title",attrs:{label:t.$t("passwordNewAgain"),prop:"passwordNewAgain"}},[e("el-input",{attrs:{type:"password",maxlength:"20","show-password":"",placeholder:t.$t("passwordNewAgainTips")},model:{value:t.formData.passwordNewAgain,callback:function(e){t.$set(t.formData,"passwordNewAgain","string"==typeof e?e.trim():e)},expression:"formData.passwordNewAgain"}})],1)],1),t._v(" "),e("el-col",[e("div",{staticClass:"flex justify-center"},[e("el-button",{staticClass:"bottom-btn",attrs:{type:"primary",disabled:t.loading},on:{click:t.handleSaveSettings}},[t._v(t._s(t.$t("SaveSettings")))])],1)])],1)],1)}),[],!1,null,"6c87b244",null).exports,x=(n(14),n(3)),k=n(15),O=(n(20),n(32),n(19),n(18),n(5));function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j={name:"NameAndTag",props:{},computed:$($($({},Object(h.e)("user",["userInfo"])),Object(h.c)("user",["accountData","accountSettingsData","name","allTags","officialTags","myCollectTags"])),{},{zhLang:function(){return this.$i18n.locale.startsWith("zh")}}),data:function(){return{replaceImageType:O.x,loading:!1,officialTagsLocal:[],collectTagsLocal:[],oldCollectTags:[],sameName:!1,sameTags:!1,formData:{name:"",tags:[]},rules:{name:[{pattern:/^[^~!@$%^&*()_+]+$/,message:this.$t("UserNameRule"),trigger:"blur"},{min:2,max:20,message:this.$t("UserNameRuleLength"),trigger:"blur"}]},codeMap:{10405:"code_10405",10407:"code_10407",10408:"code_10408",20302:"UserNameRepeat",20305:"NicknameLimitReached",20306:"ImgLimitReached"}}},beforeDestroy:function(){this.officialTagsLocal.forEach((function(t){t.selected=!1}))},mounted:function(){this.formData.name=this.name||JSON.parse(localStorage.getItem("userInfo")).name,this.getSettingsInfo()},methods:$($({},Object(h.b)("user",["getAccountInfo","getHotTags","getMyCollectTags","getOfficialTags"])),{},{goTagDetails:function(t){this.$router.push(this.localePath("/tagInfo/"+t))},getCollect:function(){this.officialTags.length>0?(this.oldCollectTags=this.myCollectTags.map((function(t){return t.id})),this.collectTagsLocal=Object(k.a)(this.myCollectTags),this.officialTagsLocal=Object(k.a)(this.officialTags),this.handleTags()):this.getSavedTags()},getSettingsInfo:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt("return");case 2:t.loading=!0,!t.sameName&&t.getAccountInfo().finally((function(){t.loading=!1})),!t.sameTags&&t.getSavedTags();case 5:case"end":return e.stop()}}),e)})))()},getSavedTags:function(){var t=this;this.getMyCollectTags().then(function(){var e=Object(x.a)(regeneratorRuntime.mark((function e(n){var o,r,code,l,data,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(o=n||{}).status.code,code=void 0===r?"":r,l=o.data,data=void 0===l?{mine:[],other:[]}:l,!["10000",1e4].includes(code)){e.next=14;break}return c=(null==data?void 0:data.mine)||[],t.oldCollectTags=c.map((function(t){return t.id})),t.collectTagsLocal=c,e.prev=5,e.next=8,t.getOfficialTags();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:t.officialTagsLocal=t.officialTags||[],t.handleTags();case 14:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loading=!1}))},handleTags:function(){var t=this;this.collectTagsLocal.length>0&&this.officialTagsLocal.forEach((function(e){var n=t.collectTagsLocal.some((function(t){return t.id===e.id}));e.selected=n}))},collectAdd:function(t){this.collectTagsLocal.find((function(e){return e.id===t.id}))||this.collectTagsLocal.push(t)},collectRemove:function(t){this.collectTagsLocal=this.collectTagsLocal.filter((function(e){return e.id!==t.id})),this.officialTagsLocal.forEach((function(e){e.id===t.id&&(e.selected=!1)}))},handleSaveSettings:function(){var t=this;this.$refs.formData.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.formData.tags=Object(k.a)(t.collectTagsLocal),console.log("this.formData",t.formData),t.submitPerson($({},t.formData))}))},submitPerson:function(t){var e,n=this;console.log("accountData",this.accountData);var o=t.name,r=t.tags;this.sameName=(null===(e=this.userInfo)||void 0===e?void 0:e.name)===o;var l=this.sameName,c=r.map((function(t){var e=t.id,o=t.name;return n.oldCollectTags.includes(t.id)||(l=!1,n.sameTags=!1),{id:e,name:o}}));if(l&&this.oldCollectTags.length===c.length)this.$message.success(this.$t("SaveSuccess"));else{var param={collect_tags:c,tags:null,name:o};Object(m.u)(param).then((function(t){var code=t.status.code;1e4===code?(n.$message.success(n.$t("SaveSuccess")),n.getSettingsInfo()):n.handleTaskError(code)})).finally((function(){n.sameTags=!1,n.sameName=!1}))}},selectTag:function(t,e){this.collectTagsLocal.length>20&&!t.selected?this.$message.warning(this.$t("error_code_40312")):(t.selected=!t.selected,t.selected?this.collectAdd(t):this.collectRemove(t),this.$set(this.officialTagsLocal,e,t))},handleImgError:function(img){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"myTagImg")+img.id;this.$refs[t].src=img.cover},handleTaskError:function(code){code&&Object.keys(this.codeMap).includes(String(code))?this.$message.error(this.$t(this.codeMap[String(code)])):this.$message.error(this.$t("ServerError"))}})},T=j,L=(n(2397),n(2398),Object(w.a)(T,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-and-tag-setting"},[e("div",{staticClass:"person-content"},[e("el-form",{ref:"formData",staticClass:"tagView-form",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"100px","label-position":"top"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title",attrs:{label:t.$t("EnterNickname"),prop:"name"}},[e("el-input",{attrs:{placeholder:t.$t("Nickname"),minlength:"2",maxlength:"20","show-word-limit":""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),t._v(" "),e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title"},[e("template",{slot:"label"},[e("div",{staticClass:"label-wrap flex"},[e("div",{staticClass:"name"},[t._v(t._s(t.$t("settingTag1")))]),t._v(" "),e("el-popover",{attrs:{placement:"right",trigger:"hover","visible-arrow":!1,"popper-class":"tag-setting-tips"}},[e("div",{staticClass:"balance-tips-text"},[t._v("\n                  "+t._s(t.$t("settingTagTxt1"))+"\n                ")]),t._v(" "),e("i",{staticClass:"iconfont icon-help-icon balance-tips-icon",attrs:{slot:"reference"},slot:"reference"})])],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap selected-tag"},t._l(t.collectTagsLocal,(function(n,i){return e("button",{key:"_tag".concat(i),staticClass:"tag-btn flex items-center inline-flex",class:{"zh-width":t.zhLang}},[e("div",{staticClass:"content flex justify-between items-center w-full"},[e("div",{staticClass:"left flex items-center text-no-wrap",on:{click:function(e){return t.goTagDetails(n.id)}}},[e("div",{staticClass:"tag-img"},[n.cover?e("img",{ref:"myTagImg".concat(n.id),refInFor:!0,staticClass:"tag-img",attrs:{src:t.replaceImageType(n.cover,"low")},on:{error:function(e){return t.handleImgError(n,"myTagImg")}}}):t._e()]),t._v(" "),e("span",{attrs:{title:t.$t(n.name)}},[t._v(t._s(t.$t(n.name)))])]),t._v(" "),e("div",{staticClass:"right",on:{click:function(e){return t.collectRemove(n)}}},[e("i",{staticClass:"iconfont icon-close"})])])])})),0)],2)],1),t._v(" "),e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title"},[e("template",{slot:"label"},[e("div",{staticClass:"label-wrap flex"},[e("div",{staticClass:"name"},[t._v(t._s(t.$t("settingTag2")))]),t._v(" "),e("el-popover",{attrs:{placement:"right",trigger:"hover","visible-arrow":!1,"popper-class":"tag-setting-tips"}},[e("div",{staticClass:"balance-tips-text"},[t._v("\n                  "+t._s(t.$t("settingTagTxt2"))+"\n                ")]),t._v(" "),e("i",{staticClass:"iconfont icon-help-icon balance-tips-icon",attrs:{slot:"reference"},slot:"reference"})])],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap interestTag-wrap"},t._l(t.officialTagsLocal,(function(n,i){return e("el-button",{key:"_tag".concat(i),staticClass:"tag-btn flex items-center inline-flex",class:{"zh-width":t.zhLang,selected:n.selected},attrs:{round:"",size:"mini"},on:{click:function(e){return t.selectTag(n,i)}}},[e("div",{staticClass:"content flex items-center"},[e("div",{staticClass:"tag-img"},[n.cover?e("img",{ref:"sysTagImg".concat(n.id),refInFor:!0,staticClass:"tag-img",attrs:{src:t.replaceImageType(n.cover,"low")},on:{error:function(e){return t.handleImgError(n,"sysTagImg")}}}):t._e()]),t._v(" "),e("span",{attrs:{title:t.$t(n.name)}},[t._v(t._s(t.$t(n.name)))])])])})),1)],2)],1),t._v(" "),e("el-col",[e("div",{staticClass:"flex justify-center"},[e("el-button",{staticClass:"bottom-btn",attrs:{type:"primary",disabled:t.loading},on:{click:t.handleSaveSettings}},[t._v(t._s(t.$t("SaveSettings")))])],1)])],1)],1)])}),[],!1,null,"2033c17a",null).exports);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P={name:"DeleteAccount",props:{},computed:D({},Object(h.e)("user",["userInfo"])),data:function(){return{loading:!1,dialogVisible:!1,inputValue:""}},mounted:function(){},methods:D(D({},Object(h.b)("user",["logout"])),{},{handleDelete:function(){var t,e=this;if(console.log("value",this.inputValue),this.inputValue&&this.inputValue===(null===(t=this.userInfo)||void 0===t?void 0:t.name)){console.log("调接口");var n={username:this.inputValue};this.loading=!0,Object(m.r)(n).then((function(t){var n;1e4===(null==t||null===(n=t.status)||void 0===n?void 0:n.code)&&(e.$message({message:e.$t("deleteSus"),type:"success"}),e.toHome())})).finally((function(){e.loading=!1,e.dialogVisible=!1,e.inputValue=""}))}else{var o=this.inputValue?this.$t("nameErrorTip"):this.$t("inputRightPls");this.$message({message:o,type:"warning"})}},toHome:function(){var t=this;this.logout().then((function(){t.$router.push(t.localePath("/"))}))}})},E=(n(2399),n(2400),Object(w.a)(P,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"delete-account"},[n("div",{staticClass:"up-content flex"},[e._m(0),e._v(" "),n("div",{staticClass:"delete-account-text flex flex-col"},[n("div",{staticClass:"delete-account-title"},[n("span",{staticClass:"delete-account-title-text"},[e._v(e._s(e.$t("delActTitle")))])]),e._v(" "),n("div",{staticClass:"delete-account-content"},[n("div",{staticClass:"delete-account-content-text"},[n("span",[e._v(e._s(e.$t("delActTipsTxt")))])])])])]),e._v(" "),n("div",{staticClass:"flex justify-center"},[n("el-button",{staticClass:"bottom-btn",attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(e._s(e.$t("delActBtn")))])],1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"delete-account-dialog","close-on-press-escape":!0,"close-on-click-modal":!1,"append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"}),e._v(" "),n("div",{staticClass:"main-part"},[n("div",{staticClass:"title flex justify-center items-center flex-col"},[n("div",{staticClass:"title-main"},[e._v(e._s(e.$t("delActTitle")))]),e._v(" "),n("div",{staticClass:"title-sub"},[e._v(e._s(e.$t("delActDlgTips")))])]),e._v(" "),n("div",{staticClass:"confirm-input flex flex-col items-center"},[n("div",{staticClass:"input-text"},[n("div",{staticClass:"text"},[e._v("\n            "+e._s(e.$t("delActDlgCfmTxt1"))+"\n            "),n("span",{staticClass:"name"},[e._v(" "+e._s(null===(t=e.userInfo)||void 0===t?void 0:t.name))]),e._v("\n            "+e._s(e.$t("delActDlgCfmTxt2"))+"\n          ")])]),e._v(" "),n("el-input",{ref:"input",staticClass:"input",attrs:{placeholder:e.$t("delActDlgInput"),maxlength:20,"show-word-limit":!0},model:{value:e.inputValue,callback:function(t){e.inputValue="string"==typeof t?t.trim():t},expression:"inputValue"}})],1)]),e._v(" "),n("span",{staticClass:"dialog-footer flex justify-center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"my-dialog-btn btn-left",on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),e._v(" "),n("el-button",{staticClass:"my-dialog-btn btn-right",on:{click:e.handleDelete}},[e._v(e._s(e.$t("delActBtn")))])],1)])],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"warning flex justify-center items-center"},[t("i",{staticClass:"iconfont icon-warningTip warning-icon"})])}],!1,null,"81f03300",null).exports),A=n(184);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N={name:"PersonalCenter",components:{DeleteAccount:E,ChangePassword:C,NameAndTag:L,ElMenu:d.a,ElMenuItem:l.a},watch:{accountSettingsData:{handler:function(){this.updatePublicSetting()},immediate:!0,deep:!0}},computed:M(M(M(M({},Object(h.e)("user",["userInfo"])),Object(h.c)("user",["accountData","accountSettingsData","name","isCompanyAccount"])),Object(h.c)("payment",["productLevel","activeState"])),{},{showDeleteAccount:function(){var t;return!(null!==(t=this.userInfo)&&void 0!==t&&null!==(t=t.enterprise)&&void 0!==t&&t.id)},isEmailLogin:function(){var t;return 1===(null===(t=this.userInfo)||void 0===t?void 0:t.account_login_channel)},isAllowEditAutoPublishedToCommunity:function(){return this.activeState&&this.productLevel&&this.productLevel>=3},zhLang:function(){return this.$i18n.locale.startsWith("zh")}}),mounted:function(){this.paymentInfo=JSON.parse(localStorage.getItem("paymentInfo"))},data:function(){return{loading:!1,form:{autoPublishedToCommunity:!0,offLocalization:!1,isAutoUnlock:!0},paymentInfo:null,activeIndex:"1",personLoading:!1}},methods:M(M(M(M({},Object(h.b)("user",["getAccountInfo","updateAccountSettings","logout"])),Object(h.b)("chatgpt",["getMainMessage"])),Object(h.b)("app",["setLang"])),{},{showTxt:function(){this.$EventBus.$emit("showBreakDialog","PrivateWorkTipWeb","basic"),this.paymentInfo.show_auto_pub_switch||(this.form.autoPublishedToCommunity=!0)},updatePublicSetting:function(){this.updateSettingsConfig(this.accountSettingsData)},updateSettingsConfig:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=data.is_auto_pub_community,e=void 0===t||t,n=data.localization,o=data.is_off_localization,r=void 0!==o&&o,l=data.ai_video_auto_play,c=n?2===n:r;this.form.autoPublishedToCommunity=e,this.form.offLocalization=c,this.form.isAutoUnlock=1==l},selectTag:function(t,e){t.selected=!t.selected,this.$set(this.tags,e,t)},handleClick:function(){var t=this;this.$refs.formData.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.formData.tags=t.tags.filter((function(t){return t.selected})),console.log("this.formData",t.formData),t.submit(M({},t.formData))}))},handleSaveSettings:function(){var t,e,n,o=this;this.loading=!0;var r={};r.is_auto_pub_community=this.form.autoPublishedToCommunity,r.localization=this.form.offLocalization?2:1,r.ai_video_auto_play=this.form.isAutoUnlock?1:2;var l=r.is_auto_pub_community===(null===(t=this.accountSettingsData)||void 0===t?void 0:t.is_auto_pub_community),c=r.localization===(null===(e=this.accountSettingsData)||void 0===e?void 0:e.is_off_localization),d=r.ai_video_auto_play===(null===(n=this.accountSettingsData)||void 0===n?void 0:n.ai_video_auto_play);if(l&&c&&d)return this.$message.success(this.$t("SaveSuccess")),void(this.loading=!1);Object(v.b)(r).then((function(t){var e=(t||{}).status.code;["10000",1e4].includes(void 0===e?"":e)?(o.loading=!1,o.$message.success(o.$t("SaveSuccess")),o.updateAccountSettings(r),o.$logEvent("log_actions",{operation:r.is_auto_pub_community?"click_all_public":"click_all_hidden"}),o.$logEvent("log_actions",{operation:1==r.ai_video_auto_play?"click_open_auto_unlock":"click_close_auto_unlock",behavior_info:"on_personal_settings"})):o.updateSettingsConfig(o.accountSettingsData)})).finally((function(){o.loading=!1}))},changeLang:function(){this.$i18n.locale!==this.language&&(Object(A.b)(this.language),localStorage.setItem("language",this.language),this.$i18n.setLocale(this.language))},initLang:function(){var t=this.$i18n.locale;this.language=t||"en"},handleSelect:function(t){this.activeIndex=t,console.log("当前选中的菜单项：",t)},backTo:function(){window.history.length>1&&"/"!=this.fromPath?this.$router.back():this.$router.push(this.localePath("/"))}})},U=N,F=(n(2401),Object(w.a)(U,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-settings-page"},[e("el-backtop",{attrs:{bottom:30,right:30}},[e("i",{staticClass:"el-icon-top"})]),t._v(" "),e("div",{staticClass:"backIcon",on:{click:function(e){return e.stopPropagation(),t.backTo.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-back"})]),t._v(" "),e("div",{staticClass:"settings-page__wrapper"},[e("div",{staticClass:"setting-card-box-wrapper"},[e("el-menu",{staticClass:"my-el-menu",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[e("el-menu-item",{attrs:{index:"1"}},[t._v(t._s(t.$t("PersonalSettings")))]),t._v(" "),e("el-menu-item",{attrs:{index:"2"}},[t._v(t._s(t.$t("SystemSettings")))]),t._v(" "),e("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isEmailLogin,expression:"isEmailLogin"}],attrs:{index:"3"}},[t._v(t._s(t.$t("ChangePassword")))]),t._v(" "),e("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteAccount,expression:"showDeleteAccount"}],attrs:{index:"4"}},[t._v(t._s(t.$t("delAct")))])],1),t._v(" "),"1"===t.activeIndex?e("div",[e("NameAndTag")],1):t._e(),t._v(" "),"2"===t.activeIndex?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("div",{staticClass:"setting-card-box"},[e("h2",{staticClass:"setting-card-main-title"},[t._v(t._s(t.$t("SystemSettings")))]),t._v(" "),e("div",{staticClass:"settings--card-content"},[t.isCompanyAccount?t._e():e("div",{staticClass:"settings--card-content-item"},[e("div",{on:{click:function(e){!t.paymentInfo.show_auto_pub_switch&&t.showTxt()}}},[e("el-switch",{staticClass:"settings-switch",attrs:{disabled:t.loading},model:{value:t.form.autoPublishedToCommunity,callback:function(e){t.$set(t.form,"autoPublishedToCommunity",e)},expression:"form.autoPublishedToCommunity"}})],1),t._v(" "),e("span",{staticClass:"settings-name"},[t._v(t._s(t.$t("AutomaticallyPublished")))])]),t._v(" "),e("div",{staticClass:"settings--card-content-item"},[e("el-switch",{staticClass:"settings-switch",attrs:{disabled:t.loading},model:{value:t.form.offLocalization,callback:function(e){t.$set(t.form,"offLocalization",e)},expression:"form.offLocalization"}}),t._v(" "),e("span",{staticClass:"settings-name"},[t._v(t._s(t.$t("offLocalization")))])],1)]),t._v(" "),t.$isChinaSite?t._e():e("h2",{staticClass:"setting-card-main-title"},[t._v("\n            "+t._s(t.$t("PlaybackSettings"))+"\n          ")]),t._v(" "),t.$isChinaSite?t._e():e("div",{staticClass:"settings--card-content"},[e("div",{staticClass:"settings--card-content-item"},[e("el-switch",{staticClass:"settings-switch",attrs:{disabled:t.loading},model:{value:t.form.isAutoUnlock,callback:function(e){t.$set(t.form,"isAutoUnlock",e)},expression:"form.isAutoUnlock"}}),t._v(" "),e("span",{staticClass:"settings-name"},[t._v(t._s(t.$t("AIDramaAutoUnlock")))])],1)])]),t._v(" "),e("div",{staticClass:"flex justify-center"},[e("el-button",{staticClass:"bottom-btn",attrs:{type:"primary",disabled:t.loading},on:{click:t.handleSaveSettings}},[t._v(t._s(t.$t("SaveSettings")))])],1)]):t._e(),t._v(" "),"3"===t.activeIndex&&t.isEmailLogin?e("div",[e("ChangePassword")],1):t._e(),t._v(" "),"4"===t.activeIndex?e("div",[e("DeleteAccount")],1):t._e()],1)]),t._v(" "),e("button",{staticClass:"settings-page-close-button close-button",on:{click:t.backTo}},[e("i",{staticClass:"el-icon-close"})])],1)}),[],!1,null,"448552a1",null));e.default=F.exports},3263:function(t,e,n){"use strict";n.r(e);n(9),n(11),n(12);var o=n(3),r=n(2),l=(n(20),n(16),n(7),n(47),n(10),n(19),n(8),n(4),n(18),n(6),n(1)),c=n(436),d=n(22),h=n(81),v=n(235),m=n(2573),f=n(13),_=n(5),y=n(38),w=n(209),C=n(45),x=(n(29),n(260));function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={name:"EmptyArea",props:{activeTab:{type:String,default:""}},computed:O(O({},Object(l.e)("user",["cdnHost"])),{},{getEmptyUrl:function(){return"https://".concat(this.cdnHost,"/static/upload/20240926/1afb6810-3f8e-4073-8143-c2e6b1cc2daa.webp")}})},$=(n(2574),n(0)),j=Object($.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"empty-area"},[e("img",{attrs:{src:t.getEmptyUrl,alt:"empty"}}),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("ai_video_generation_empty")))])])}),[],!1,null,"63806894",null).exports,T=n(39);function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={name:"VideoDisplay",props:{activeTab:{type:String,default:""},currentTask:{type:Object,default:function(){}}},components:{MyPlayer:x.a,EmptyArea:j},data:function(){return{formatDate:T.a,copyTime:null,rightOprateArr:[{icon:"icon-refresh-icon2",value:"retry"},{icon:"icon-icon-Download",value:"download"}],moreOprateArr:[{icon:"icon-share-icon",label:"Share",value:"share"},{icon:"icon-shanchu",label:"Delete",value:"delete"}]}},computed:S(S({},Object(l.e)("user",["cdnHost"])),{},{getCancelImg:function(){return"https://".concat(this.cdnHost,"/static/upload/20240930/2442cc6c-9bad-4ca5-bd62-71b127dcc9fc.webp")},selectedTask:function(){var t;return null===(t=Object.keys(this.currentTask))||void 0===t?void 0:t.length},isFinished:function(){var t;return 3==(null===(t=this.currentTask)||void 0===t?void 0:t.status)},getProcess:function(){var t;return(null===(t=this.currentTask)||void 0===t?void 0:t.process)||0},alreadyUpscale:function(){var t;return 34==(null===(t=this.currentTask)||void 0===t?void 0:t.type)},leftOprateArr:function(){var t=[{icon:"icon-icon-HD",label:"IntelligentUpscale",value:"upscale"},{icon:"icon-myPostIcon",label:"VideoSubmission",value:"post"}];return this.alreadyUpscale&&(t=t.filter((function(t){return"upscale"!==t.value}))),t},getVideoUrl:function(){var t;return(null===(t=this.currentTask)||void 0===t||null===(t=t.components)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url)||""}}),methods:{copyPrompt:function(){var t,e=this,n=(null===(t=this.currentTask)||void 0===t?void 0:t.local_prompt)||"";this.copyTime||(this.copyTime=setTimeout((function(){Object(_.d)(n),e.$message.success(e.$t("CopySuccess")),clearTimeout(e.copyTime),e.copyTime=null}),500))},moreActions:function(t){this.$emit("moreActions",t)},handleRetry:function(){this.$emit("regenerate")}}},P=(n(2575),Object($.a)(D,(function(){var t,e,n=this,o=n._self._c;return o("div",{staticClass:"video-display"},[n.isFinished?o("div",{staticClass:"video-display-time"},[n._v("\n\t\t"+n._s(n.formatDate(n.currentTask.create_at,null===(t=n.$i18n)||void 0===t?void 0:t.locale.includes("zh")))+"\n\t")]):n._e(),n._v(" "),n.isFinished?o("div",{staticClass:"video-display-header"},[o("div",{staticClass:"type"},[n._v("\n\t\t\t"+n._s(n.$t(n.alreadyUpscale?"IntelligentUpscale":n.activeTab))+"\n\t\t")]),n._v(" "),o("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:n.currentTask.local_prompt,placement:"top-start"}},[o("div",{staticClass:"prompt overflow-ellipsis"},[n._v("\n\t\t\t\t"+n._s(n.currentTask.local_prompt)+"\n\t\t\t")])]),n._v(" "),n.currentTask.local_prompt?o("i",{staticClass:"iconfont icon-codeCopy1",on:{click:n.copyPrompt}}):n._e()],1):n._e(),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.selectedTask,expression:"selectedTask"}],staticClass:"video-display-box"},[[1,2,"1","2"].includes(n.currentTask.status)?o("div",{staticClass:"loading-box"},[o("div",{staticClass:"percentage"},[n._v(n._s(n.getProcess)+"%")]),n._v(" "),o("div",{staticClass:"progress-bar"},[o("div",{staticClass:"inner",style:{width:"".concat(n.getProcess,"%")}})]),n._v(" "),o("div",{staticClass:"desc"},[n._v(n._s(n.$t("GeneratingPlsWaitMins",{param:3})))]),n._v(" "),o("div",{staticClass:"tips"},[n._v(n._s(n.$t("ExitingAndContinue")))])]):4==n.currentTask.status?o("div",{staticClass:"cancel-box"},[o("img",{staticClass:"cancel-retry-img",attrs:{src:n.getCancelImg,alt:"cancel image"}}),n._v(" "),o("div",{staticClass:"retry-txt"},[n._v(n._s(n.$t("SystemCancelPlsRetry")))]),n._v(" "),o("el-button",{staticClass:"retry-btn",on:{click:n.handleRetry}},[n._v("\n\t\t\t\t"+n._s(n.$t("Regenerate"))+"\n\t\t\t")])],1):o("video",{staticClass:"video-box",attrs:{src:n.getVideoUrl,autoplay:"",loop:"",controls:""}})]),n._v(" "),n.isFinished?o("div",{staticClass:"video-display-footer"},[o("div",{staticClass:"footer-left"},n._l(n.leftOprateArr,(function(t){return o("div",{key:t.value,staticClass:"left-operate-btn",on:{click:function(e){return n.moreActions(t.value)}}},[o("i",{staticClass:"iconfont",class:t.icon}),n._v(" "),o("span",{staticClass:"txt"},[n._v(n._s(n.$t(t.label)))])])})),0),n._v(" "),o("div",{staticClass:"footer-right"},[n._l(n.rightOprateArr,(function(t){return o("div",{key:t.value,staticClass:"right-operate-btn",on:{click:function(e){return n.moreActions(t.value)}}},[o("i",{staticClass:"iconfont",class:t.icon})])})),n._v(" "),o("el-popover",{ref:"myPopover",attrs:{placement:"top-end","popper-class":"water-fall-popover","append-to-body":!0,"visible-arrow":!1,width:"100",trigger:"click"}},[o("div",{staticClass:"pop-btns flex"},n._l(n.moreOprateArr,(function(t){return o("button",{key:t.value,on:{click:function(e){return n.moreActions(t.value)}}},[o("i",{staticClass:"iconfont",class:t.icon}),n._v(" "),o("span",[n._v(n._s(n.$t(t.label)))])])})),0),n._v(" "),o("div",{staticClass:"right-operate-btn",attrs:{slot:"reference"},slot:"reference"},[o("i",{staticClass:"iconfont icon-more"})])])],2)]):n._e(),n._v(" "),4==(null===(e=n.currentTask)||void 0===e?void 0:e.status)?o("div",{staticClass:"video-display-footer-del"},[o("el-popover",{ref:"myPopover",attrs:{placement:"top-end","popper-class":"water-fall-popover","append-to-body":!0,"visible-arrow":!1,width:"100",trigger:"click"}},[o("div",{staticClass:"pop-btns flex"},[o("button",{on:{click:function(t){return n.moreActions("delete")}}},[o("i",{staticClass:"iconfont icon-shanchu"}),n._v(" "),o("span",[n._v(n._s(n.$t("Delete")))])])]),n._v(" "),o("div",{staticClass:"right-operate-btn",attrs:{slot:"reference"},slot:"reference"},[o("i",{staticClass:"iconfont icon-more"})])])],1):n._e(),n._v(" "),o("empty-area",{directives:[{name:"show",rawName:"v-show",value:!n.selectedTask,expression:"!selectedTask"}],attrs:{activeTab:n.activeTab}})],1)}),[],!1,null,"4991fe41",null).exports),E=(n(32),n(24)),A={name:"VideoHistory",props:{currentTaskId:{type:String,default:""},list:{type:Array,default:function(){return[]}}},data:function(){return{debounceHandleScroll:function(){}}},mounted:function(){this.debounceHandleScroll=Object(E.debounce)(this.handleScroll,600)},beforeDestroy:function(){this.debounceHandleScroll=null},computed:{getCoverUrl:function(){return function(t){var e=((null==t?void 0:t.components)||[]).find((function(t){return 3==t.sub_type}));return(null==e?void 0:e.url)||""}},getCancelLabel:function(){var t=this;return function(e){return t.$t({userCancelDesc:"userCancel",sysCancelDesc:"systemCancel",sysTimeoutDesc:"systemTimeoutCancel"}[e]||"")}}},methods:{changeCurrentTask:function(t){this.$emit("changeCurrentTask",t)},handleScroll:function(){var t=this.$refs.scrollWrapper;try{t&&t.scrollTop+t.clientHeight>=t.scrollHeight-30&&this.$emit("updateHistory","add")}catch(t){console.log("error",t)}}}},R=(n(2576),Object($.a)(A,(function(){var t=this,e=t._self._c;return e("div",{ref:"scrollWrapper",staticClass:"video-history",on:{scroll:t.debounceHandleScroll}},[e("div",{staticClass:"video-history-title"},[t._v(t._s(t.$t("AllVideos")))]),t._v(" "),e("div",{staticClass:"video-history-list"},t._l(t.list,(function(n){return e("div",{key:n.id,staticClass:"item-task",class:{active:t.currentTaskId==n.id},on:{click:function(e){return t.changeCurrentTask(n)}}},[[1,2,"1","2"].includes(null==n?void 0:n.status)?e("div",{staticClass:"loading-box flex-center"},[e("i",{staticClass:"el-icon-loading"}),t._v(" "),e("div",{staticClass:"txt"},[t._v(t._s(t.$t("VideoGenerating")))]),t._v(" "),e("div",{staticClass:"sub-txt"},[t._v("\n\t\t\t\t\t"+t._s(t.$t("CheckInMins",{param:3}))+"\n\t\t\t\t")])]):4==(null==n?void 0:n.status)?e("div",{staticClass:"cancel-box"},[e("i",{staticClass:"iconfont icon-warn"}),t._v(" "),e("div",{staticClass:"txt"},[t._v(t._s(t.$t(t.getCancelLabel(null==n?void 0:n.status_desc))))])]):e("img",{staticClass:"cover",attrs:{src:t.getCoverUrl(n),alt:"video url"}})])})),0)])}),[],!1,null,"69d579de",null).exports);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U={name:"VideoGeneration",mixins:[m.a],components:{pickWorkModal:w.a,VideoDisplay:P,VideoHistory:R,EmptyArea:j},data:function(){return{accept:".jpg,.jpeg,.png,.webp",tabs:["ImageToVideo","TextToVideo"],activeTab:"ImageToVideo",generateEstimate:0,isUploading:!1,uploadImg:{url:"",width:0,height:0},imgToVideoParams:{prompt:"",isPromptModify:!1},textToVideoParams:{},histories:[],after_id:"",currentTask:{},generateLoading:!1}},mounted:function(){var t=this.$route.query.info;t&&(t=JSON.parse(t),this.handleSame(t))},computed:N(N(N({},Object(l.e)("app",["topBanner"])),Object(l.c)("user",["isLoggedIn"])),{},{getStyle:function(){return{height:"calc(100vh - 60px - ".concat(this.topBanner?"120px":"74px",")")}},isImgToVideo:function(){return"ImageToVideo"===this.activeTab}}),watch:{isLoggedIn:{handler:function(t,e){t&&!e&&this.getVideoHistoriesData()},immediate:!0},"uploadImg.url":{handler:function(t){t?this.getEstimatedCost():this.generateEstimate=0}}},methods:{handleSame:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,h,meta,v,m,f,_,image,y,w,C,x;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.template_id,r=t.cover,!o){n.next=14;break}return n.next=4,Object(d.o)({task_id:o,source:4});case 4:l=n.sent,c=l.data,h=c.meta,meta=void 0===h?{}:h,v=c.local_prompt,f=(m=meta||{}).width,_=m.height,image=m.image,y=m.generate_video,e.uploadImg={url:image,width:f,height:_},e.imgToVideoParams={prompt:v,isPromptModify:1===(null==y?void 0:y.prompt_magic_mode)},n.next=19;break;case 14:return n.next=16,e.checkImageSize(r);case 16:w=n.sent,C=w.width,x=w.height,e.uploadImg={url:r,width:C,height:x};case 19:case"end":return n.stop()}}),n)})))()},checkImageSize:function(t){return new Promise((function(e,n){var img=new Image;img.onload=function(){e({width:this.width,height:this.height})},img.onerror=function(){n(new Error("Failed to load image"))},img.src=t}))},getVideoHistoriesData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"init",n={after_id:"",keyword:"",limit:30};if("add"==e){if(!this.after_id)return;n.after_id=this.after_id}Object(c.c)(n).then((function(n){var o,r,l=(null==n||null===(o=n.data)||void 0===o?void 0:o.items)||[];t.after_id=(null==n||null===(r=n.data)||void 0===r?void 0:r.after_id)||"",t.histories="add"==e?t.histories.concat(l):l}))},changeCurrentTask:function(t){this.currentTask=t},changTab:function(t){"ImageToVideo"!=t&&this.$message.warning(this.$t("gpt_waiting"))},handleDelete:function(){this.uploadImg={url:"",width:0,height:0}},handleBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isLoggedIn){n.next=3;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 3:if(["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return");case 7:if(!(t.size/1024/1024>5)){n.next=18;break}return n.prev=8,n.next=11,Object(C.a)(t,5242880);case 11:t=n.sent,n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(8),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 18:e.handleUploadImage(t);case 19:case"end":return n.stop()}}),n,null,[[8,14]])})))()},handleUploadImage:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isUploading=!0,n.next=3,e.getImageSize(t);case 3:o=n.sent,new y.a({type:36}).startUpload(t,{category:36}).then((function(t){var n=o.width,r=void 0===n?0:n,l=o.height,c=void 0===l?0:l;e.uploadImg={url:t,width:r,height:c}})).finally((function(){e.isUploading=!1}));case 6:case"end":return n.stop()}}),n)})))()},getImageSize:function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){var img=new Image;img.onload=function(){var t=img.naturalWidth,n=img.naturalHeight;e({width:t,height:n})},img.onerror=function(){n(!1)},img.src=t.target.result},o.readAsDataURL(t)}))},openPickWorkModal:function(){this.isLoggedIn?this.$refs.pickWorkModal.openModal([]):this.$EventBus.$emit("openLoginDialog")},handlePickImage:function(t){var e=t.url,n=void 0===e?"":e,o=t.width,r=void 0===o?0:o,l=t.height,c=void 0===l?0:l;this.uploadImg={url:n,width:r,height:c}},promptModifyChange:function(t){this.uploadImg.url&&this.getEstimatedCost(),this.$logEvent("log_actions",{operation:"click_polish_prompt",behavior_info:"on_ai_video_create_detail_page",behavior_info_sub:t?"open":"close"})},getParams:function(){var t={};if(this.isImgToVideo){var e=this.imgToVideoParams,n=e.prompt,o=e.isPromptModify,r=this.uploadImg;t={source:17100,meta:{image:r.url,width:r.width,height:r.height,prompt:n,generate_video:{prompt_magic_mode:o?1:2}}}}return t},getEstimatedCost:function(){var t=this;(this.isImgToVideo?c.a:null)(this.getParams()).then((function(e){var n=((null==e?void 0:e.data)||{}).calculate_coins,o=void 0===n?0:n;t.generateEstimate=o})).catch((function(e){t.generateEstimate=0,console.error("Estimated cost failed:",e)}))},handleGenerate:function(){var t=this;if(this.uploadImg.url){var e=window.location.href.split("?")[0];window.history.replaceState(null,"",e),this.generateLoading=!0,(this.isImgToVideo?c.b:null)(this.getParams()).then((function(e){var n=N(N({},(null==e?void 0:e.data)||{}),{},{process:0,status:1,status_desc:"waiting"});t.currentTask=n,t.histories.unshift(n),t.$message.success(t.$t("CreateSuccess"))})).finally((function(){t.generateLoading=!1}))}else this.$message.warning(this.$t("pleaseUoloadImage"))},handleRegenerate:function(){var t,e=this,n={action:4,task_id:null===(t=this.currentTask)||void 0===t?void 0:t.id};Object(d.r)(n).then((function(t){var n;if(1e4==(null==t||null===(n=t.status)||void 0===n?void 0:n.code)){var o=(t.data||{}).new_task,r=void 0===o?{}:o,l=e.histories.findIndex((function(t){return t.id===(null==r?void 0:r.id)})),c=e.histories[l];Object.assign(c,r),-1!==l?e.$set(e.histories,l,c):e.histories.unshift(c),e.currentTask=itemHistory}}))},moreActions:function(t){var e,n=this;switch(t){case"upscale":this.handleUpscale();break;case"post":this.handlePost();break;case"retry":this.handleRetry();break;case"download":var o=null===(e=this.currentTask)||void 0===e||null===(e=e.components)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url;Object(_.A)({url:o});break;case"delete":var r=this.$createElement,l=r("div",{style:"display: flex;"},[r("div",{class:"flex-center",style:"width: 33px; height: 33px; background: rgba(220,38,38,0.2); border-radius: 50%;"},[r("i",{class:"iconfont icon-warn",style:"font-size: 18px; color: #DC2626;"}),""]),r("div",{style:"flex: 1; margin-left: 16px;"},[r("div",{style:"color: #fff; font-size: 16px; font-weight: 600"},this.$t("deleteVideo")),r("div",{style:"margin: 16px 0 35px; color: rgba(255,255,255,0.5); font-size: 14px;"},this.$t("audioDelSoundQuery"))])]);this.$confirm(l,this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"ai-face-swap-confirm"}).then((function(){n.handleDeleteTask()}));break;case"share":this.handleShare()}this.$logEvent("log_actions",{operation:"click_".concat(t),behavior_info:"on_ai_video_create_detail_page"})},handleUpscale:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,data,h,v,meta,m,f,_,y,image,w,C,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.h)({id:null===(n=t.currentTask)||void 0===n?void 0:n.id});case 2:l=e.sent,data=l.data,v=(h=data||{}).meta,meta=void 0===v?{}:v,m=h.local_prompt,_=(f=meta||{}).width,y=f.height,image=f.image,w=f.generate_video,C=null===(o=t.currentTask)||void 0===o||null===(o=o.components)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.url,x={source:17100,parent_task_id:null===(r=t.currentTask)||void 0===r?void 0:r.id,meta:{image:image,width:_,height:y,prompt:m,generate_video:{prompt_magic_mode:null==w?void 0:w.prompt_magic_mode,video_url:C}}},Object(c.e)(x).then((function(e){var n=N(N({},(null==e?void 0:e.data)||{}),{},{process:0,status:1,status_desc:"waiting"});t.currentTask=n,t.histories.unshift(n),t.$message.success(t.$t("CreateSuccess"))})).catch((function(t){console.error("Upscale failed:",t)}));case 9:case"end":return e.stop()}}),e)})))()},handlePost:function(){var t,e=this;Object(d.h)({id:null===(t=this.currentTask)||void 0===t?void 0:t.id}).then((function(t){var n,o,r=((null==t?void 0:t.data)||{}).meta,l=(void 0===r?{}:r)||{},c=l.width,d=l.height,image=l.image,h=null===(n=e.currentTask)||void 0===n||null===(n=n.components)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.url,v={type:"video",cover:image,video:"",cover_height:d,cover_width:c,duration:0,url:h,originalUrl:"",templateId:null===(o=e.currentTask)||void 0===o?void 0:o.id},video=document.createElement("video");video.src=h,video.addEventListener("loadedmetadata",(function(){var t=video.duration;v.duration=Math.floor(t),video=null,e.$EventBus.$emit("openCreativeCenterModal",{list:[v],type:v.type,source:"img_to_video"})}))}))},handleRetry:function(){var t,e=this;Object(d.h)({id:null===(t=this.currentTask)||void 0===t?void 0:t.id}).then((function(t){var n=(null==t?void 0:t.data)||{},o=n.meta,meta=void 0===o?{}:o,r=n.local_prompt,l=meta||{},c=l.width,d=l.height,image=l.image,h=l.generate_video;e.uploadImg={url:image,width:c,height:d},e.imgToVideoParams={prompt:r,isPromptModify:1===(null==h?void 0:h.prompt_magic_mode)}}))},handleDeleteTask:function(){var t,e=this;Object(d.f)({ids:[null===(t=this.currentTask)||void 0===t?void 0:t.id]}).then((function(){e.histories=e.histories.filter((function(t){var n;return t.id!==(null===(n=e.currentTask)||void 0===n?void 0:n.id)})),e.currentTask={},e.$message.success(e.$t("deleteSuccess"))})).catch((function(t){console.error("Delete failed:",t)}))},handleShare:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,m,y,w,C,x,k,O,I,data,$,j,T,L,image,S,video;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.d)({template_id:null===(n=t.currentTask)||void 0===n?void 0:n.id,source:"img_to_video"});case 3:if(m=e.sent,!(y=(null==m||null===(o=m.data)||void 0===o?void 0:o.id)||"")){e.next=11;break}return w=t.localePath("/video/".concat(y,"?source=share_link")),C=location.origin+w,Object(_.d)(C),t.$message.success(t.$t("CopiedURLToClipboard")),e.abrupt("return");case 11:return e.next=13,Object(h.a)({show_area:"ai_video"});case 13:return x=e.sent,(k=(null==x?void 0:x.data)||[]).length&&k.forEach((function(e){return e.title=e[f.l[t.$i18n.locale]],e.label=e.title||e.id,e.searchLabel=(f.m||[]).map((function(t){return e[t]?e[t]:""})).filter((function(t){return!!t})),e})),O=k.filter((function(t){return"ai video"==t.id}))||[],e.next=19,Object(d.h)({id:null===(r=t.currentTask)||void 0===r?void 0:r.id});case 19:I=e.sent,data=I.data,$=(data||{}).meta,T=(j=(void 0===$?{}:$)||{}).width,L=j.height,image=j.image,S=null===(l=t.currentTask)||void 0===l||null===(l=l.components)||void 0===l||null===(l=l[0])||void 0===l?void 0:l.url,(video=document.createElement("video")).src=S,video.addEventListener("loadedmetadata",(function(){var e,n=Math.floor(video.duration);video=null;var o={look_book_tpl_info:{id:null===(e=t.currentTask)||void 0===e?void 0:e.id,url:""},tags:O,intro:"",video_url:S,cover_url:image,duration:n,title:"",cover_width:T,cover_height:L,source:"img_to_video",link:[]};Object(v.f)(o).then((function(e){var n,o=(null==e||null===(n=e.data)||void 0===n?void 0:n.id)||"",r=t.localePath("/video/".concat(o,"?source=share_link")),l=location.origin+r;Object(_.d)(l),t.$message.success(t.$t("CopiedURLToClipboard"))}))})),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),console.error("error",e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,29]])})))()}}},F=U,B=(n(2577),Object($.a)(F,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"video-generation",style:e.getStyle},[n("div",{staticClass:"video-generation-params-area"},[n("div",{staticClass:"video-generation-tabs"},e._l(e.tabs,(function(t){return n("div",{key:t,staticClass:"item-tab",class:{active:e.activeTab===t},on:{click:function(n){return e.changTab(t)}}},[n("div",{staticClass:"tab-name flex-center"},[e._v(e._s(e.$t(t)))])])})),0),e._v(" "),n("div",{staticClass:"image-box"},[n("div",{staticClass:"image-box-title"},[e._v("\n\t\t\t\t"+e._s(e.$t("selectImage"))+"\n\t\t\t")]),e._v(" "),e.uploadImg.url?n("div",{staticClass:"image-box-display"},[n("img",{staticClass:"img width-height-hundred",attrs:{src:e.uploadImg.url,alt:"image"}}),e._v(" "),n("i",{staticClass:"iconfont delete-icon icon-shanchu",on:{click:e.handleDelete}})]):n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isUploading,expression:"isUploading"}],staticClass:"image-box-uploader"},[n("el-upload",{attrs:{action:"#",accept:e.accept,"before-upload":e.handleBeforeUpload,"show-file-list":!1,"http-request":function(){}}},[n("div",{staticClass:"uploader"},[n("i",{staticClass:"iconfont icon-a-icon-addimg2img"}),e._v(" "),n("div",{staticClass:"upload-item-text"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.$t("UploadImg"))+"\n\t\t\t\t\t\t")])])]),e._v(" "),n("div",{staticClass:"el-upload",on:{click:function(t){return t.stopPropagation(),e.openPickWorkModal.apply(null,arguments)}}},[n("i",{staticClass:"iconfont icon-a-icon-addimg2img"}),e._v(" "),n("div",{staticClass:"upload-item-text"},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("CreativeCenterPopup21"))+"\n\t\t\t\t\t")])]),e._v(" "),n("pick-work-modal",{ref:"pickWorkModal",attrs:{type:"workFlowAppDetail"},on:{confirm:e.handlePickImage}})],1)]),e._v(" "),n("div",{staticClass:"prompt-box"},[n("div",{staticClass:"prompt-box-title"},[n("span",[e._v(e._s(e.$t("Prompt")))]),e._v(" "),n("span",{staticClass:"sub"},[e._v("("+e._s(e.$t("Optional"))+")")])]),e._v(" "),n("el-input",{staticClass:"video-prompt",attrs:{type:"textarea",resize:"none",maxlength:"1500","show-word-limit":"",placeholder:e.$t("ai_video_generation_prompt"),autosize:!1},model:{value:e.imgToVideoParams.prompt,callback:function(t){e.$set(e.imgToVideoParams,"prompt",t)},expression:"imgToVideoParams.prompt"}}),e._v(" "),n("div",{staticClass:"floatign-footer"},[n("el-switch",{staticClass:"prompt-modify",on:{change:e.promptModifyChange},model:{value:e.imgToVideoParams.isPromptModify,callback:function(t){e.$set(e.imgToVideoParams,"isPromptModify",t)},expression:"imgToVideoParams.isPromptModify"}}),e._v(" "),n("span",{staticClass:"txt"},[e._v(e._s(e.$t("PromptModify")))]),e._v(" "),n("HelpTip",{staticClass:"help",attrs:{color:"#ffffff",content:e.$t("ai_video_generation_prompt_modify")}})],1)],1),e._v(" "),n("el-button",{staticClass:"generate-btn",attrs:{loading:e.generateLoading},on:{click:e.handleGenerate}},[n("span",{staticClass:"txt"},[e._v(e._s(e.$t("Generate")))]),e._v(" "),n("span",{staticClass:"cost"},[e._v("\n\t\t\t\t( "+e._s(e.$t("expend"))+": "+e._s(e.generateEstimate)+" )\n\t\t\t")])])],1),e._v(" "),e.histories.length?n("div",{staticClass:"video-generation-content-area"},[n("video-display",{attrs:{activeTab:e.activeTab,currentTask:e.currentTask},on:{moreActions:e.moreActions,regenerate:e.handleRegenerate}}),e._v(" "),n("video-history",{attrs:{currentTaskId:null===(t=e.currentTask)||void 0===t?void 0:t.id,list:e.histories},on:{changeCurrentTask:e.changeCurrentTask,updateHistory:e.getVideoHistoriesData}})],1):n("div",{staticClass:"video-generation-empty-area flex-center"},[n("empty-area",{attrs:{activeTab:e.activeTab}})],1)])}),[],!1,null,"82a9f040",null));e.default=B.exports},3264:function(t,e,n){"use strict";n.r(e);n(9),n(11),n(12);var o=n(3),r=n(2),l=(n(20),n(16),n(221),n(7),n(10),n(19),n(28),n(89),n(8),n(4),n(23),n(49),n(18),n(50),n(76),n(37),n(6),n(48),n(29),n(142),n(143),n(112),n(1)),c=n(64),d={name:"CTabs",components:{SwipeableList:c.a},props:{tabs:{type:Array,default:function(){return[]}},currentTab:{type:String,default:""},moveLength:{type:Number,default:100}},data:function(){return{}},methods:{changeTab:function(t){this.$emit("changeTab",t)}}},h=(n(2578),n(0)),v=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-tab"},[e("SwipeableList",{attrs:{top:"0px",iconBntWidth:20,bntTop:"-14px"}},[e("div",{ref:"scrollArea",staticClass:"scroll-box"},t._l(t.tabs,(function(n){return e("div",{key:n.value,staticClass:"item-tab",class:{active:t.currentTab==n.value},on:{click:function(e){return t.changeTab(n)}}},[t._v("\n          "+t._s(t.$t(n.label))+"\n        ")])})),0)])],1)}),[],!1,null,"7d9dfff2",null).exports,m={name:"Categorys",components:{SwipeableList:c.a},props:{categorys:{type:Array,default:function(){return[]}},currentCategory:{type:String,default:""},moveLength:{type:Number,default:100}},data:function(){return{}},methods:{changeCategory:function(t){this.$emit("changeCategory",t)}}},f=(n(2579),Object(h.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-category"},[e("SwipeableList",{attrs:{top:"0px",iconBntWidth:20}},[e("div",{ref:"scrollArea",staticClass:"categorys"},t._l(t.categorys,(function(n){return e("div",{key:n.value,staticClass:"item-category",class:{active:t.currentCategory==n.value},on:{click:function(e){return t.changeCategory(n)}}},[t._v("\n          "+t._s(t.$t(n.label))+"\n        ")])})),0)])],1)}),[],!1,null,"3a0aade2",null).exports),_=n(344),y={name:"ExampleDialog",data:function(){return{isShowDialog:!1,correctImgs:["https://image.cdn2.seaart.ai/static/upload/20231226/0f15262a-7083-4e6b-b0f3-960c17d252f9.png","https://image.cdn2.seaart.ai/static/upload/20231226/56cf23ee-9437-4fb7-9a14-ac1748d75c69.png","https://image.cdn2.seaart.ai/static/upload/20231226/f7b59936-ae21-4110-91a3-42f626e1e12b.png","https://image.cdn2.seaart.ai/static/upload/20231226/4be738c1-c7a7-4370-aad3-055ef5073055.png"],incorrectImgs:["https://image.cdn2.seaart.ai/static/upload/20231226/d2feb87d-6575-4120-96f4-ff1b39c69f34.png","https://image.cdn2.seaart.ai/static/upload/20231226/cc7d3b64-ff9a-4263-b132-78639c5c2456.png","https://image.cdn2.seaart.ai/static/upload/20231226/f7f9e378-84ba-4966-bb1e-69648444fd78.png","https://image.cdn2.seaart.ai/static/upload/20231226/011c5a5b-f287-464f-ab43-926d1bae73c4.png"]}},methods:{showDialog:function(){this.isShowDialog=!0},closeDialog:function(){this.isShowDialog=!1}}},w=(n(2580),Object(h.a)(y,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"face-changing-example",attrs:{visible:t.isShowDialog,"destroy-on-close":!0},on:{"update:visible":function(e){t.isShowDialog=e}}},[e("i",{staticClass:"el-icon-close close-icon",on:{click:t.closeDialog}}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v("\n\t\t\t"+t._s(t.$t("MakeHightQuality"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"explain"},[e("div",[t._v("1. "+t._s(t.$t("FaceChangingExample1")))]),t._v(" "),e("div",[t._v("2. "+t._s(t.$t("FaceChangingExample2")))]),t._v(" "),e("div",[t._v("3. "+t._s(t.$t("FaceChangingExample3")))])]),t._v(" "),e("div",{staticClass:"correct-example"},[e("div",{staticClass:"header"},[e("svg-icon",{attrs:{"icon-class":"correct-icon"}}),t._v(" "),e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography23")))])],1),t._v(" "),e("div",{staticClass:"img-container"},t._l(t.correctImgs,(function(t,n){return e("img",{key:n,staticClass:"item-img",attrs:{src:t,alt:"correct images"}})})),0)]),t._v(" "),e("div",{staticClass:"incorrect-example"},[e("div",{staticClass:"header"},[e("svg-icon",{attrs:{"icon-class":"error-icon"}}),t._v(" "),e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography24")))])],1),t._v(" "),e("div",{staticClass:"img-container"},t._l(t.incorrectImgs,(function(t,n){return e("img",{key:n,staticClass:"item-img",attrs:{src:t,alt:"correct images"}})})),0)])]),t._v(" "),e("div",{staticClass:"footer"},[e("el-button",{staticClass:"btn",on:{click:t.closeDialog}},[t._v("\n\t\t\t"+t._s(t.$t("ok_got_it"))+"\n\t\t")])],1)])}),[],!1,null,"ee4a5bac",null).exports),C=n(281),x=n(38),k=n(5),O=n(22),I=n(2581),$=n(81),j=n(282),T=n(24),L=n(98),S=n(45),D=n(13);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A={name:"AiFaceChanging",mixins:[j.a],components:{Tabs:v,Categorys:f,HelpTip:_.a,ExampleDialog:w,QuickQueue:L.a},data:function(){return{materialSource:[],tabs:[{label:"Video",value:"video"},{label:"Image",value:"image"},{label:"Gif",value:"gif"},{label:"MultipleFaceSwap",value:"multipleImage"}],categorys:[],currentTab:"video",currentCategory:"",uploading:!1,faceUploading:!1,source:{video:{url:"",cover:"",estimated:3},image:{url:"",estimated:3},gif:{url:"",estimated:3},multipleImage:{url:"",estimated:3}},targetFace:"",multipleTargetFace:[],multipleOriginalFace:[],faceArr:[],generateStatus:"before",percentComplete:0,result:{type:"",url:"",width:"",height:"",duration:0},postParams:{type:"",cover:"",video:"",cover_height:0,cover_width:0,duration:0,url:""},loopInterval:null,page:1,pageSize:20,total:20,debounceHandleScroll:function(){},templateId:"",requesting:!1,quickOptions:{},lastTimeTab:""}},mounted:function(){var t=this.$route.query.info;t&&(t=JSON.parse(t),this.handleTryLogic(t));var e=JSON.parse(localStorage.getItem("faceArr"));this.faceArr=e||[];var n=localStorage.getItem("faceSwapTaskId");n&&(this.generateStatus="generating",this.loopGetResult(n)),this.getCategory(),this.debounceHandleScroll=Object(T.debounce)(this.handleScroll,600)},beforeDestroy:function(){clearInterval(this.loopInterval),this.loopInterval=null,this.debounceHandleScroll=null},computed:E(E(E(E({},Object(l.e)("user",["token"])),Object(l.e)("payment",["paymentInfo"])),Object(l.c)("user",["cdnHostFun","isCompanyAccount"])),{},{getExplain:function(){return this.$t(this.isVideo?"ai_face_changing_support_video":"ai_face_changing_support_img")},getSource:function(){return this.source[this.currentTab]},getRightSource:function(){return this.isVideo?this.getSource.cover:this.getSource.url},getTip:function(){var t=this.isVideo?"FaceSwapVideoLimit":"FaceSwapImageLimit";return this.$t(t)},replaceLowWebp:function(){var t=this;return function(e){return Object(k.x)(e,t.$imgL)}},isBeforeGenerate:function(){return"before"==this.generateStatus},isGenerating:function(){return"generating"==this.generateStatus},isAfterGenerate:function(){return"after"==this.generateStatus},isForbidden:function(){return this.isGenerating||this.isAfterGenerate},isMultiple:function(){return"multipleImage"===this.currentTab},isVideo:function(){return"video"===this.currentTab},isGif:function(){return"gif"===this.currentTab},getUploaderAccept:function(){return this.isVideo?"video/*":"image/*"},getPercentComplete:function(){return Math.max(0,Math.min(100,this.percentComplete))},getEstimatedCost:function(){var t=this.getSource,e=t.type,n=t.estimated;return"image"===e?3:n},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount}}),methods:{scrollTop:function(){window.scrollTo({top:0,behavior:"smooth"})},getCategory:function(){var t=this;Object($.a)({show_area:"ishow"}).then((function(e){1e4==e.status.code&&(e.data.length&&e.data.forEach((function(e){e.label=e[D.l[t.$i18n.locale]]||e.en||"",e.value=e.id})),t.categorys=e.data,t.setDefaultCategory())}))},setDefaultCategory:function(){var t;this.currentCategory=null===(t=this.categorys)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value,this.getTemplates()},getTemplates:function(){var t=this,e=Math.ceil(this.total/this.pageSize);if(!(this.page>e||this.requesting)){this.requesting=!0;Object(I.a)({category:this.currentCategory,page:this.page,page_size:this.pageSize,template_type:{video:1,image:2,multipleImage:3,gif:4}[this.currentTab]}).then((function(e){var n=e.data,o=n.items,r=n.total;t.total=r;var l=o.map((function(e){var time=e.duration,n=t.formatSecondsToTime(time);return E(E({},e),{},{duration:n})}));t.materialSource=t.materialSource.concat(l),t.page++})).finally((function(){t.requesting=!1}))}},formatSecondsToTime:function(t){var e=Math.floor(t/60),n=t%60;return"".concat(e,": ").concat(n.toString().padStart(2,"0"))},changeTab:function(t){if(!this.requesting&&!this.uploading){var e=t.value;this.$logEvent("log_actions",{operation:{video:"click_video_tab",image:"click_image_tab",gif:"click_gif_tab",multipleImage:"click_multiple_face_swap_tab"}[e],behavior_info:"on_ai_face_swap_page"}),this.clearPageData(),this.currentTab=e,this.setDefaultCategory()}},changeCategory:function(t){this.requesting||(this.$logEvent("log_actions",{operation:this.isVideo?"click_video_tab":"click_image_tab",behavior_info:"on_ai_exchange_face",behavior_info_sub:t.value}),this.clearPageData(),this.currentCategory=t.value,this.getTemplates())},clearPageData:function(){this.page=1,this.total=20,this.materialSource=[]},handleToast:function(){if(this.isForbidden){var t=this.isGenerating?"ai_dance_loading_toast":"ai_face_clear_toast";return this.$message.warning(this.$t(t))}},handleScroll:function(){var t=this.$refs.scrollWrapper;try{t&&t.scrollTop+t.clientHeight>=t.scrollHeight-30&&this.getTemplates()}catch(t){console.log("error",t)}},openExampleDialog:function(){this.$refs.exampleDialog.showDialog()},toMall:function(){this.$logEvent("log_actions",{operation:"click_get_more_cal",behavior_info:"on_create_ai_change_face"}),this.isVip?this.$EventBus.$emit("showVipComputingDialog","GetMoreCredits"):this.$EventBus.$emit("openDailyDialog")},changeSource:function(t){if(this.handleToast(),!this.isForbidden){var e=t.id,n=t.cover,o=t.store_url,r=void 0===o?"":o,l=t.estimated,c=t.face_urls,d=void 0===c?[]:c;this.templateId=e,this.isMultiple?null!=d&&d.length?(this.source.multipleImage={url:n,estimated:3+2*(d.length-1)},this.multipleOriginalFace=d.map((function(t){return{url:t,loading:!1}})),this.multipleTargetFace=new Array(d.length).fill("")):(this.requesting=!0,this.getFaceTask(n)):(this.source[this.currentTab].url=this.isVideo||this.isGif?r:n,this.source[this.currentTab].estimated=l||3,this.isVideo&&(this.source[this.currentTab].cover=n)),!this.targetFace&&this.faceArr.length>0&&(this.targetFace=this.faceArr[0])}},clearTargetFace:function(){this.handleToast(),this.isForbidden||(this.targetFace="")},clearMtpTargetFaces:function(t){this.handleToast(),this.isForbidden||this.$set(this.multipleTargetFace,t,"")},clearData:function(t){var e=this;"clear"!=t?(this.$logEvent("log_actions",{operation:"click_delete",behavior_info:"on_create_ai_change_face"}),this.$confirm(this.$t("DeleteResourceConfim"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"ai-face-swap-confirm"}).then((function(){e.clear()})).catch((function(t){console.log("err",t)}))):this.clear()},clear:function(){this.source={video:{url:"",cover:"",estimated:3},image:{url:"",estimated:3},gif:{url:"",estimated:3},multipleImage:{url:"",estimated:3}},this.result={type:"",url:"",width:"",height:"",duration:0},this.generateStatus="before",this.percentComplete=0,this.targetFace="",this.multipleTargetFace=[],this.multipleOriginalFace=[],this.postParams={type:"",cover:"",video:"",cover_height:0,cover_width:0,duration:0,url:""},localStorage.setItem("faceSwapTaskId","")},generateThumbnail:function(t){return this.getBestPoster(t,30)},handleBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.token){n.next=3;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 3:e.isVideo?e.uploadVideo(t):e.uploadImage(t);case 4:case"end":return n.stop()}}),n)})))()},uploadVideo:function(t){this.uploading=!0;if(!["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb","video/quicktime"].includes(t.type))return this.uploading=!1,this.$message.warning(this.$t("OnlySupportVideo"));if(t.size>524288e3)return this.$message.warning(this.$t("ExceedingNumberMB",{number:500})),void(this.uploading=!1);this.handleUploadVideo(t)},uploadImage:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.uploading=!0,o=t.size,r=10485760,["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)||e.isGif){n.next=8;break}return e.$message.error(e.$t("AllowImageFiles")),e.uploading=!1,n.abrupt("return");case 8:if(!e.isGif||["image/gif"].includes(t.type)){n.next=12;break}return e.$message.error(e.$t("ai_gif_toast")),e.uploading=!1,n.abrupt("return");case 12:if(!(o>r)){n.next=24;break}return n.prev=13,n.next=16,Object(S.a)(t,10485760);case 16:t=n.sent,n.next=24;break;case 19:return n.prev=19,n.t0=n.catch(13),console.error("Compression failed:",n.t0),e.uploading=!1,n.abrupt("return");case 24:if(!e.isGif){n.next=26;break}return n.abrupt("return",e.handleUploadVideo(t));case 26:e.handleUploadImage(t);case 27:case"end":return n.stop()}}),n,null,[[13,19]])})))()},handleUploadVideo:function(t){var e=this;new C.a({file:t,category:this.isGif?54:15}).beforeUpload().then(function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(o){var r,l,c,d,h,v,m,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=o.url,l=o.info,c=l.frame_count,d=l.resolution,e.templateId="",h=e.getVideoEstimated(c,d)){n.next=5;break}return n.abrupt("return");case 5:return e.isGif?e.source.gif={url:r,cover:"",estimated:h}:e.source.video={url:r,cover:"",estimated:h},v=URL.createObjectURL(t),n.next=9,e.generateThumbnail(v);case 9:m=n.sent,f=m.posterUrl,e.isGif?e.source.video.gif=f:e.source.video.cover=f,URL.revokeObjectURL(v),e.uploading=!1;case 14:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(t){console.log("outer err",t),e.uploading=!1}))},handleUploadImage:function(t){var e=this;new x.a({type:16}).startUpload(t).then((function(t){e.templateId="",e.isMultiple?e.getFaceTask(t):(e.source.image={url:t,estimated:3},e.uploading=!1)})).catch((function(t){console.log(e.$t("uploadError"),t),e.uploading=!1}))},handleFaceBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.token){n.next=3;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 3:if(e.faceUploading=!0,o=t.size,r=10485760,["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)){n.next=11;break}return e.$message.error(e.$t("AllowImageFiles")),e.faceUploading=!1,n.abrupt("return");case 11:if(!(o>r)){n.next=23;break}return n.prev=12,n.next=15,Object(S.a)(t,10485760);case 15:t=n.sent,n.next=23;break;case 18:return n.prev=18,n.t0=n.catch(12),console.error("Compression failed:",n.t0),e.faceUploading=!1,n.abrupt("return");case 23:e.handleUploadFace(t);case 24:case"end":return n.stop()}}),n,null,[[12,18]])})))()},handleMtpFaceUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.file,r=t.data,l=r.index,c=r.item,e.token){n.next=4;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 4:if(e.$set(c,"loading",!0),d=o.size,h=10485760,["image/jpeg","image/png","image/jpg","image/webp"].includes(o.type)){n.next=12;break}return e.$message.error(e.$t("AllowImageFiles")),e.$set(c,"loading",!1),n.abrupt("return");case 12:if(!(d>h)){n.next=24;break}return n.prev=13,n.next=16,Object(S.a)(o,10485760);case 16:o=n.sent,n.next=24;break;case 19:return n.prev=19,n.t0=n.catch(13),console.error("Compression failed:",n.t0),e.$set(c,"loading",!1),n.abrupt("return");case 24:new x.a({type:16}).startUpload(o).then((function(t){e.$set(e.multipleTargetFace,l,t),e.$set(c,"loading",!1)})).catch((function(t){console.log(e.$t("uploadError"),t),e.$set(c,"loading",!1)}));case 26:case"end":return n.stop()}}),n,null,[[13,19]])})))()},handleUploadFace:function(t){var e=this;new x.a({type:16}).startUpload(t).then((function(t){var n=localStorage.getItem("faceArr");if(n){var o=JSON.parse(n);if(o.length>=10)return e.$message.warning(e.$t("FaceLimit")),void(e.faceUploading=!1);e.faceArr.unshift(t),o.unshift(t);var r=JSON.stringify(o);localStorage.setItem("faceArr",r)}else{e.faceArr=[t];var l=JSON.stringify([t]);localStorage.setItem("faceArr",l)}!e.getSource.url&&e.targetFace||(e.targetFace=t),e.faceUploading=!1})).catch((function(t){console.log(e.$t("uploadError"),t),e.faceUploading=!1}))},handleSelectedFace:function(t){this.handleToast(),this.isForbidden||(this.targetFace=t)},handleDeleteFace:function(t){var e=this;this.handleToast(),this.isForbidden||this.$confirm(this.$t("DeleteFace"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"ai-face-swap-confirm"}).then((function(){var n=JSON.parse(localStorage.getItem("faceArr"));n=n.filter((function(e){return e!=t})),e.faceArr=n;var o=JSON.stringify(n);localStorage.setItem("faceArr",o)})).catch((function(t){console.log("err",t)}))},handleGenerate:function(){var t,e,n=this;if(this.percentComplete=0,this.isAfterGenerate)return this.lastTimeTab&&(this.currentTab=this.lastTimeTab,this.lastTimeTab=""),this.targetFace="",this.multipleTargetFace.forEach((function(t,e){n.$set(n.multipleTargetFace,e,"")})),void(this.generateStatus="before");if(this.getSource.url){var o,r=Object(k.v)(this.getSource.url)||(null===(t=this.getSource.url)||void 0===t?void 0:t.includes(".gif"));if(this.isMultiple){if(this.multipleTargetFace.every((function(t){return!t})))return this.$message.warning(this.$t("first_pls_add_face"));this.multipleTargetFace.forEach((function(t){!t&&(t="")})),o={action:22,source:17100,template_id:this.templateId,meta:{exchange_face:{action:2,target_uri:this.getSource.url,source_uris:this.multipleTargetFace}}}}else{if(!this.targetFace)return void this.$message.warning(this.$t("PlsAddFace"));o={action:r?26:22,source:17100,template_id:this.templateId,meta:{exchange_face:{target_uri:this.getSource.url,source_uri:this.targetFace,face_distance:1.5}}}}this.isGif&&null!==(e=this.getSource.url)&&void 0!==e&&e.includes(".gif")&&(o.meta.exchange_face.action=3),this.generateStatus="generating",Object(O.d)(o).then((function(t){var e=t.data.id;e&&(n.loopGetResult(e),localStorage.setItem("faceSwapTaskId",e))})).catch((function(t){n.generateStatus="before",n.clear(),console.log("err",t)}))}else this.$message.warning(this.$t("PlsAddMaterial"))},loopGetResult:function(t){var e=this;this.loopInterval=setInterval(Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,h,v,m,f,_;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(O.a)({task_ids:[t]});case 3:if(o=n.sent,null!=(r=o.data.items)&&r[0]){n.next=7;break}return n.abrupt("return");case 7:if(l=r[0],c=l.process,d=l.status_desc,h=l.img_uris,v=l.type,m=l.reason,f=l.sub_type,2!=m){n.next=13;break}return e.$message.warning(e.$t("NotFaceError")),clearInterval(e.loopInterval),e.clear(),n.abrupt("return");case 13:_=null==h?void 0:h[0],e.quickOptions=r[0],e.percentComplete=c,n.t0=d,n.next="finish"===n.t0?19:"sysCancelDesc"===n.t0?28:"sysTimeoutDesc"===n.t0?32:36;break;case 19:return clearInterval(e.loopInterval),e.result.url=null==_?void 0:_.url,e.result.width=null==_?void 0:_.width,e.result.height=null==_?void 0:_.height,e.result.type=26==v&&9===f?"video":"image",localStorage.setItem("faceSwapTaskId",""),e.generateStatus="after",e.lastTimeTab=e.currentTab,n.abrupt("break",37);case 28:return clearInterval(e.loopInterval),e.$message.warning(e.$t("systemCancel")),e.clear(),n.abrupt("break",37);case 32:return clearInterval(e.loopInterval),e.$message.warning(e.$t("systemTimeoutCancel")),e.clear(),n.abrupt("break",37);case 36:return n.abrupt("break",37);case 37:n.next=42;break;case 39:n.prev=39,n.t1=n.catch(0),console.log("error",n.t1);case 42:case"end":return n.stop()}}),n,null,[[0,39]])}))),3e3)},handlePost:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,video;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$logEvent("log_actions",{operation:"click_post",behavior_info:"on_create_ai_change_face",behavior_info_sub:t.currentTab}),n=t.result,o=n.type,r=n.url,l=n.width,c=n.height,d=n.duration,"video"==o?(t.postParams={type:"video",cover:r.replace(".mp4","_low.webp"),video:"",cover_height:c,cover_width:l,duration:d,url:r,originalUrl:t.getSource.url,templateId:t.templateId},(video=document.createElement("video")).src=r,video.addEventListener("loadedmetadata",(function(){var e=video.duration;t.postParams.duration=Math.floor(e),video=null,t.openPostDialog()}))):(t.postParams={type:"text",cover:r,video:"",cover_height:c,cover_width:l,duration:0,url:r},t.openPostDialog());case 3:case"end":return e.stop()}}),e)})))()},openPostDialog:function(){this.$EventBus.$emit("openCreativeCenterModal",{list:[this.postParams],type:this.postParams.type,source:this.isGif?"face_swap_gif":"swift_ai"})},handleDownload:function(){this.$logEvent("log_actions",{operation:"click_download",behavior_info:"on_create_ai_change_face",behavior_info_sub:this.currentTab});var t=this.result.url;Object(k.v)(t)?Object(k.A)({url:t}):Object(k.z)(t)},handleTryLogic:function(t){var e=this,n=t.url,o=t.cover,r=t.template_id;this.templateId=r,Object(O.k)({url:n}).then((function(t){var r=t.data,l=r.frame_count,c=r.resolution,d=e.getVideoEstimated(l,c);d&&(e.source.video={url:n,cover:o,estimated:d})}))},getVideoEstimated:function(t,e){var n=3;if(!(e>1080))return n=e>720?.2*t:.1*t,n=Number(n.toFixed(2));this.$message.warning(this.$t(this.isGif?"ai_gif_definition":"VideoClarityLimit"))},getFaceTask:function(t){var e=this,n={action:22,source:17100,template_id:this.templateId,meta:{exchange_face:{action:1,target_uri:t}}};Object(O.d)(n).then((function(n){var o=n.data.id;o&&e.loopGetFaceResult(o,t)}))},loopGetFaceResult:function(t,e){var n=this;this.loopInterval=setInterval(Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,h,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(O.a)({task_ids:[t]});case 3:if(r=o.sent,null!=(l=r.data.items)&&l[0]){o.next=7;break}return o.abrupt("return");case 7:if(c=l[0],d=c.process,h=c.status_desc,v=c.img_uris,2!=c.reason){o.next=15;break}return n.$message.warning(n.$t("NotFaceError")),n.uploading=!1,n.requesting=!1,clearInterval(n.loopInterval),n.clear(),o.abrupt("return");case 15:v=v||[],n.percentComplete=d,o.t0=h,o.next="finish"===o.t0?20:"sysCancelDesc"===o.t0?27:"sysTimeoutDesc"===o.t0?33:39;break;case 20:return n.uploading=!1,n.requesting=!1,clearInterval(n.loopInterval),n.source.multipleImage={url:e,estimated:v.length?3+2*(v.length-1):0},n.multipleOriginalFace=v.map((function(t){return E(E({},t),{},{loading:!1})})),n.multipleTargetFace=new Array(v.length).fill(""),o.abrupt("break",40);case 27:return n.uploading=!1,n.requesting=!1,clearInterval(n.loopInterval),n.$message.warning(n.$t("systemCancel")),n.clear(),o.abrupt("break",40);case 33:return n.uploading=!1,n.requesting=!1,clearInterval(n.loopInterval),n.$message.warning(n.$t("systemTimeoutCancel")),n.clear(),o.abrupt("break",40);case 39:return o.abrupt("break",40);case 40:o.next=45;break;case 42:o.prev=42,o.t1=o.catch(0),console.log("error",o.t1);case 45:case"end":return o.stop()}}),o,null,[[0,42]])}))),3e3)}},head:function(){return{title:this.$t("AIFaceTitle"),meta:[{hid:"description",name:"description",content:this.$t("AIFaceDesc")},{hid:"keywords",name:"keywords",content:this.$t("AIFaceKeyword")},{hid:"og:title",name:"og:title",content:this.$t("AIFaceTitle")},{hid:"og:description",name:"og:description",content:this.$t("AIFaceDesc")}]}}},R=A,M=(n(2582),Object(h.a)(R,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai-face-changing"},[e("div",{staticClass:"face-swap"},[e("div",{staticClass:"left-area",class:{generating:t.isGenerating,"after-generate":t.isAfterGenerate}},[e("Tabs",{class:{"not-allow":t.uploading},attrs:{tabs:t.tabs,currentTab:t.currentTab},on:{changeTab:t.changeTab}}),t._v(" "),e("Categorys",{attrs:{categorys:t.categorys,currentCategory:t.currentCategory},on:{changeCategory:t.changeCategory}}),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.requesting,expression:"requesting"}],ref:"scrollWrapper",staticClass:"content-container",on:{scroll:t.debounceHandleScroll}},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],ref:"uploader",staticClass:"left-uploader item-box",attrs:{action:"#",disabled:t.isForbidden,"before-upload":t.handleBeforeUpload,accept:t.getUploaderAccept,"show-file-list":!1,"http-request":function(){}}},[e("div",{staticClass:"uploader"},[e("i",{staticClass:"el-icon-plus"}),t._v(" "),e("div",{staticClass:"tip"},[e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography19")))]),t._v(" "),e("HelpTip",{staticClass:"help",attrs:{color:"rgb(163, 166, 173)",content:t.getTip}})],1)])]),t._v(" "),t._l(t.materialSource,(function(n,o){return e("div",{key:o,staticClass:"item-box",on:{click:function(e){return t.changeSource(n)}}},[t.isVideo?e("div",{staticClass:"duration"},[t._v(t._s(n.duration))]):t._e(),t._v(" "),e("div",{staticClass:"author"},[t._v(t._s(t.$t("by"))+" "+t._s(n.author))]),t._v(" "),e("img",{staticClass:"material",attrs:{src:t.replaceLowWebp(n.cover),alt:"image"}})])}))],2)],1),t._v(" "),e("div",{staticClass:"middle-area"},[e("img",{staticClass:"icon",attrs:{src:n(734),alt:"face changing"}}),t._v(" "),e("h1",{staticClass:"title"},[t._v(t._s(t.$t("ai_face_changing")))]),t._v(" "),e("div",{staticClass:"explain"},[e("span",{staticClass:"words"},[t._v(t._s(t.getExplain))]),t._v(" "),t.isMultiple?t._e():e("HelpTip",{staticClass:"help",attrs:{color:"rgb(105, 103, 110)",content:t.$t("FaceChangingSuggestion")}})],1),t._v(" "),e("div",{staticClass:"preview-box"},[t.isBeforeGenerate?e("div",{staticClass:"before-generate"},[t.getSource.url?[e("div",{staticClass:"close-btn",on:{click:function(e){return t.clearData("clear")}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),t.isVideo?e("video",{staticClass:"video-preview",attrs:{src:t.getSource.url,autoplay:"",loop:"",controls:""}}):e("img",{staticClass:"image-preview",attrs:{src:t.getSource.url,alt:"img"}})]:e("span",{staticClass:"empty",domProps:{innerHTML:t._s(t.$t("PlsSelectTemplate"))}})],2):t.isGenerating?e("div",{staticClass:"generating"},[e("div",{staticClass:"percentage"},[t._v(t._s(t.percentComplete)+"%")]),t._v(" "),e("div",{staticClass:"progress-bar"},[e("div",{staticClass:"inner",style:{width:"".concat(t.percentComplete,"%")}})]),t._v(" "),e("div",{staticClass:"tips"},[t._v(t._s(t.$t("GeneratingAndWait")))]),t._v(" "),e("div",{staticClass:"buttons"},[e("div",{staticClass:"get-more-credits",on:{click:t.toMall}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$t("GetMoreCredits"))+"\n\t\t\t\t\t\t\t"),e("i",{staticClass:"el-icon-right"})]),t._v(" "),e("QuickQueue",{attrs:{quickOptions:t.quickOptions,quickStyle:{height:"40px",fontSize:"14px"}}})],1)]):e("div",{staticClass:"after-generate"},[t.result.url?[e("div",{staticClass:"post-btn",on:{click:t.handlePost}},[e("i",{staticClass:"iconfont icon-myPostIcon"})]),t._v(" "),e("div",{staticClass:"download-btn",on:{click:t.handleDownload}},[e("i",{staticClass:"iconfont icon-icon-Download"})]),t._v(" "),e("div",{staticClass:"delete-btn",on:{click:function(e){return t.clearData("delete")}}},[e("i",{staticClass:"iconfont icon-shanchu"})]),t._v(" "),"video"==t.result.type?e("video",{staticClass:"video-preview",attrs:{src:t.result.url,autoplay:"",loop:"",controls:""}}):e("img",{staticClass:"image-preview",attrs:{src:t.result.url,alt:"img"}})]:t._e()],2)]),t._v(" "),t.isGenerating?t._e():e("div",{staticClass:"generate-box"},[e("div",{staticClass:"generate",on:{click:t.handleGenerate}},[t._v("\n\t\t\t\t\t"+t._s(t.$t(t.isAfterGenerate?"TryAgain":"Generate"))+"\n\t\t\t\t\t"),t.getSource.url&&t.isBeforeGenerate&&!t.isCompanyAccount?e("span",{staticClass:"estimated-cost"},[t._v("\n\t\t\t\t\t\t("+t._s(t.$t("estimatedCost"))+": "+t._s(t.getEstimatedCost)+")\n\t\t\t\t\t")]):t._e()])])]),t._v(" "),e("div",{staticClass:"right-area",class:{generating:t.isGenerating,"after-generate":t.isAfterGenerate}},[e("div",{staticClass:"title"},[e("span",{staticClass:"words"},[t._v(t._s(t.$t("FaceChanging")))]),t._v(" "),t.isMultiple?t._e():e("i",{staticClass:"iconfont icon-help-icon",on:{click:t.openExampleDialog}})]),t._v(" "),t.isMultiple?e("div",{staticClass:"process"},[e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("Process")))]),t._v(" "),e("div",{staticClass:"multiple-avatar-container"},t._l(t.multipleOriginalFace,(function(n,o){return e("div",{key:"face_".concat(o),staticClass:"avatar-container"},[e("div",{staticClass:"original-box"},[n.url?e("img",{staticClass:"source-image",attrs:{src:n.url,alt:"target face"}}):t._e()]),t._v(" "),e("div",{staticClass:"target-box"},[t.multipleTargetFace[o]?[e("div",{staticClass:"delete-face",on:{click:function(e){return t.clearMtpTargetFaces(o)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("img",{staticClass:"target-face",attrs:{src:t.multipleTargetFace[o],alt:"target face"}})]:e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"item.loading"}],staticClass:"face-uploader item-face",attrs:{disabled:t.isForbidden,action:"/",accept:"image/*","show-file-list":!1,data:{item:n,index:o},"http-request":t.handleMtpFaceUpload}},[e("div",{staticClass:"uploader"},[e("i",{staticClass:"el-icon-plus"})])])],2)])})),0)]):[e("div",{staticClass:"process"},[e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("Process")))]),t._v(" "),e("div",{staticClass:"avatar-container"},[e("div",{staticClass:"original-box"},[t.getRightSource?e("img",{staticClass:"source-image",attrs:{src:t.getRightSource,alt:"target face"}}):t._e()]),t._v(" "),e("div",{staticClass:"target-box",class:{active:t.targetFace,generating:t.isGenerating,"after-generate":t.isAfterGenerate}},[t.targetFace?e("div",{staticClass:"delete-face",on:{click:t.clearTargetFace}},[e("i",{staticClass:"el-icon-close"})]):t._e(),t._v(" "),t.targetFace?e("img",{staticClass:"target-face",attrs:{src:t.targetFace,alt:"target face"}}):t._e()])])]),t._v(" "),e("div",{staticClass:"select-face"},[e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("SelectFace")))]),t._v(" "),e("div",{staticClass:"face-box"},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.faceUploading,expression:"faceUploading"}],staticClass:"face-uploader item-face",attrs:{disabled:t.isForbidden,action:"/",accept:"image/*","show-file-list":!1,"before-upload":t.handleFaceBeforeUpload}},[e("div",{staticClass:"uploader"},[e("i",{staticClass:"el-icon-plus"})])]),t._v(" "),t._l(t.faceArr,(function(n,o){return e("div",{key:o,staticClass:"item-face",on:{click:function(e){return t.handleSelectedFace(n)}}},[e("div",{staticClass:"delete-face",class:{generating:t.isGenerating,"after-generate":t.isAfterGenerate},on:{click:function(e){return e.stopPropagation(),t.handleDeleteFace(n)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("img",{staticClass:"face-image",attrs:{src:n,alt:"face image"}})])}))],2)])]],2)]),t._v(" "),e("ExampleDialog",{ref:"exampleDialog"})],1)}),[],!1,null,"0f618d2f",null));e.default=M.exports},3265:function(t,e,n){"use strict";n.r(e);n(14),n(9),n(7),n(11),n(12),n(8),n(4),n(6);var o=n(3),r=n(2),l=(n(29),n(20),n(10),n(36),n(50),n(48),n(142),n(143),n(112),n(5)),c=n(98),d=n(45),h={props:["info","quickOptions"],data:function(){return{isShowResult:!1,downLoading:!1}},components:{QuickQueue:c.a},methods:{handleUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.size/1024/1024>10)){n.next=11;break}return n.prev=1,n.next=4,Object(d.a)(t,10485760);case 4:t=n.sent,n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),console.error("Compression failed:",n.t0),n.abrupt("return");case 11:o=URL.createObjectURL(new Blob([e.fileToBlob(t)])),Object(l.l)(o).then((function(t){var n=t.width,o=t.height;e.$emit("change",{width:n,height:o})})),e.$emit("change",{base64:o,file:t});case 14:case"end":return n.stop()}}),n,null,[[1,7]])})))()},fileToBlob:function(t){return t.slice(0,t.size,t.type)},delImg:function(){this.$emit("change",{base64:"",img_url:"",resultUrl:"",file:null})},changeStrength:function(t){this.$emit("change",{beauty_gear:t})},downloadImg:function(){var t=this;this.downLoading||(this.downLoading=!0,Object(l.z)(this.info.resultUrl,"seaart",(function(){t.downLoading=!1})),this.collectionData("click_download_image"))},collectionData:function(t){var e;this.$logEvent("log_actions",{operation:t,behavior_info:"on_ai_makeup",behavior_info_sub:(null==this||null===(e=this.info)||void 0===e?void 0:e.resultUrl)||""})},viewImage:function(){this.info.resultUrl&&this.$viewImage([this.info.resultUrl])},imgLoad:function(){3===this.info.loading&&this.$emit("change",{loading:0})}}},v=(n(2632),n(0)),m=Object(v.a)(h,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"handle-panel"},[n("div",{staticClass:"upload-box"},[null!==(t=e.info)&&void 0!==t&&t.base64?[n("img",{directives:[{name:"show",rawName:"v-show",value:!e.isShowResult,expression:"!isShowResult"}],attrs:{src:e.info.resultUrl||e.info.base64||e.info.img_url,alt:""},on:{click:e.viewImage,load:e.imgLoad}}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.isShowResult,expression:"isShowResult"}],attrs:{src:e.info.base64||e.info.img_url,alt:""}}),e._v(" "),n("span",{staticClass:"del-btn handle-btn",on:{click:e.delImg}},[e._v("×")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.info.resultUrl,expression:"info.resultUrl"}],staticClass:"handle-btns"},[n("span",{staticClass:"handle-btn",on:{click:e.downloadImg}},[n("i",{class:e.downLoading?"el-icon-loading":"iconfont icon-icon_xiazai"})]),e._v(" "),n("span",{staticClass:"handle-btn",on:{mousedown:function(t){e.isShowResult=!0},click:function(t){return e.collectionData("click_ai_makeup_compare")},mouseup:function(t){e.isShowResult=!1}}},[n("i",{staticClass:"iconfont icon-a-duibi1"})])])]:n("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.info.loading,expression:"info.loading"}],staticClass:"upload-btn",attrs:{action:"/",drag:"","before-upload":e.handleUpload,accept:".jpg,.png,.jpeg,.webp","show-file-list":!1}},[e._v("\n        ＋\n        "),n("p",[e._v(e._s(e.$t("UploadImg")))])])],2),e._v(" "),n("div",{staticClass:"strength-box"},[e._v("\n      "+e._s(e.$t("MakeupIntensity"))+"\n      "),n("el-slider",{staticClass:"custom-tooltip",attrs:{value:e.info.beauty_gear,min:1,max:5,step:1},on:{input:e.changeStrength}}),e._v(" "),n("span",{staticClass:"num"},[e._v(e._s(e.info.beauty_gear))])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.info.loading,expression:"info.loading"}],staticClass:"loading"},[[1,3].includes(e.info.loading)?[n("i",{staticClass:"el-icon-loading"}),e._v(" "),n("p",[e._v(e._s(e.$t(1===e.info.loading?"Uploading":"loading_tip"))+"...")])]:2===e.info.loading?[e._v("\n        "+e._s(e.info.process?e.info.process+"%":e.$t("TaskStatusPreparing")+"...")+"\n        "),n("el-progress",{attrs:{percentage:e.info.process,"show-text":!1}}),e._v(" "),n("p",{staticClass:"wait-text"},[e._v(e._s(e.$t("MakeupWait")))]),e._v(" "),n("QuickQueue",{attrs:{quickOptions:e.quickOptions,quickStyle:{height:"36px",fontSize:"14px"}}})]:e._e()],2)])}),[],!1,null,"6c0ee43f",null).exports,f=n(38),_=n(702),y=n(22),w=n(1);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={components:{UploadBox:m},props:["exampleList"],data:function(){return{isShowPopup:!1,loading:0,process:0,template_id:0,UPLOAD:new f.a({type:27}),pollingTimer:null,imgInfo:{width:0,height:0,base64:"",img_url:"",resultUrl:"",file:null,beauty_gear:2},quickOptions:{}}},computed:x(x(x({},Object(w.e)("user",["token"])),Object(w.c)("user",["isCompanyAccount"])),{},{info:function(){return x({loading:this.loading,process:this.process},this.imgInfo)}}),methods:{show:function(t){var e=t.id,n=t.beauty_gear;this.template_id=e,this.imgInfo.beauty_gear=n,this.isShowPopup=!0},changeImg:function(t){void 0===t.loading?this.$set(this,"imgInfo",x(x({},this.imgInfo),t)):this.loading=t.loading},changeTemp:function(t){var e=t.id,n=t.beauty_gear;this.loading||(this.template_id=e,this.imgInfo.beauty_gear=n)},generate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.imgInfo.file,t.token){e.next=4;break}return t.$EventBus.$emit("openLoginDialog"),e.abrupt("return");case 4:if(n){e.next=6;break}return e.abrupt("return",t.$message.error(t.$t("pleaseSelectImage")));case 6:if(t.loading=1,e.prev=7,null!==(o=t.imgInfo)&&void 0!==o&&o.img_url){e.next=12;break}return e.next=11,t.UPLOAD.startUpload(n);case 11:t.imgInfo.img_url=e.sent;case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(7),t.loading=0,e.abrupt("return");case 18:t.loading=2,Object(_.a)(t.getParams()).then((function(e){t.pollingTask(e.data.id)})).catch((function(e){t.clearPolltime(0)}));case 20:case"end":return e.stop()}}),e,null,[[7,14]])})))()},pollingTask:function(t){var e=this;this.pollingTimer=setTimeout((function(){Object(y.a)({task_ids:[t]}).then((function(n){e.quickOptions=n.data.items[0],e.handlePollResult(n.data.items[0],t)})).catch((function(t){e.clearPolltime()}))}),3e3)},handlePollResult:function(t,e){var n=t.status,o=t.process,r=t.img_uris;this.process=o,n<3?this.pollingTask(e):3===n?(this.imgInfo.resultUrl=r[0].url,this.clearPolltime(3)):this.clearPolltime(0)},clearPolltime:function(t){clearTimeout(this.pollingTimer),this.pollingTimer=null,this.loading=t,this.process=0},getParams:function(){var t=this.template_id,e=this.imgInfo,n=e.width,o=e.height,r=e.img_url;return{template_id:t,width:n,height:o,beauty_gear:e.beauty_gear,img_url:r}},closePopup:function(){this.imgInfo={width:0,height:0,base64:"",img_url:"",resultUrl:"",file:null,beauty_gear:2},this.clearPolltime(),this.isShowPopup=!1}}},O=(n(2633),Object(v.a)(k,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"custom-dialog beauty-popup",attrs:{visible:t.isShowPopup,title:t.$t("AiMakeupBtn"),"before-close":t.closePopup,"close-on-click-modal":!1},on:{"update:visible":function(e){t.isShowPopup=e}}},[e("div",{staticClass:"dialog-body"},[e("upload-box",{attrs:{info:t.info,quickOptions:t.quickOptions},on:{change:t.changeImg}}),t._v(" "),e("div",{staticClass:"style-panel"},t._l(t.exampleList,(function(n){return e("div",{key:"style_"+n.id,staticClass:"style-item",class:{active:n.id===t.template_id},on:{click:function(e){return t.changeTemp(n)}}},[e("img",{attrs:{src:n.cover,alt:""}}),t._v(" "),e("p",[t._v(t._s(n.name))])])})),0)],1),t._v(" "),e("div",{staticClass:"btn-group",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{loading:Boolean(t.loading)},on:{click:t.generate}},[t._v("\n      "+t._s(t.$t("photography20"))+"\n      "),t.isCompanyAccount?t._e():e("span",{staticClass:"tips"},[t._v("("+t._s(t.$t("expend"))+": 5)")])])],1)])}),[],!1,null,"2be9f49e",null).exports),I=n(99),$={props:["item"]},j=(n(2634),Object(v.a)($,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"style-banner"},[e("el-carousel",{staticClass:"banner-list",attrs:{interval:4e3,"indicator-position":"outside"}},t._l(t.item.sample_covers,(function(n,i){return e("el-carousel-item",{key:t.item.id+i,staticClass:"banner-item",style:{backgroundImage:"url(".concat(n.before,")")}},[e("div",{staticClass:"show-img",style:{backgroundImage:"url(".concat(n.after,")")}})])})),1),t._v(" "),e("div",{staticClass:"style-name"},[t._v(t._s(t.item.name))])],1)}),[],!1,null,"d575044e",null).exports),T={components:{BeautyPopup:O,LineLoading:I.a,StyleBanner:j},data:function(){return{exampleList:[]}},mounted:function(){this.getBeautyTemp()},methods:{showBeautyPopup:function(t){this.$refs.beautyPopup.show(t)},getBeautyTemp:function(){var t=this;Object(_.b)().then((function(e){var n=(e.data||{}).items;t.$set(t,"exampleList",n||[])}))}}},L=(n(2635),Object(v.a)(T,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"beauty-page"},[e("div",{staticClass:"title"},[e("i",{staticClass:"iconfont icon-Union1"}),t._v(" "),e("h1",[t._v(t._s(t.$t("ai_makeup")))]),t._v(" "),e("i",{staticClass:"iconfont icon-icon_star"})]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("ai_makeup_desc")))]),t._v(" "),e("div",{staticClass:"example-list"},[t.exampleList.length?t._l(t.exampleList,(function(n){return e("style-banner",{key:n.id,attrs:{item:n},nativeOn:{click:function(e){return t.showBeautyPopup(n)}}})})):e("div",{staticClass:"loading"},[e("line-loading")],1)],2),t._v(" "),e("beauty-popup",{ref:"beautyPopup",attrs:{exampleList:t.exampleList}})],1)}),[],!1,null,"fff710b0",null));e.default=L.exports},3266:function(t,e,n){"use strict";n.r(e);n(14),n(9),n(7),n(11),n(12),n(8);var o=n(3),r=n(2),l=(n(665),n(44),n(422)),c=n.n(l),d=(n(666),n(423)),h=n.n(d),v=(n(20),n(43),n(4),n(6),n(29),n(209)),m=n(45),f=n(38),_=n(59),y=(n(3214),{data:function(){return{visible:!1,storys:[],storyDesc:"",num:4,character_desc:"",loading:!1}},watch:{visible:{handler:function(t){t||(this.storyDesc="")}}},methods:{show:function(t){var e=t.list,n=t.num,o=t.character_desc;this.storys=e,this.num=n,this.character_desc=o,this.visible=!0},sub:function(){var t=this;this.loading||(this.storyDesc?(this.loading=!0,Object(_.g)({num:this.num,story_desc:this.storyDesc,character_desc:this.character_desc}).then((function(e){1e4===e.status.code&&(t.$emit("change",e.data.storyboards),t.visible=!1)})).finally((function(){t.loading=!1}))):this.$message.warning(this.$t("comicPage18")))}}}),w=(n(2651),n(0)),C=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,"custom-class":"comicStoryboardAssistant","modal-append-to-body":!0,"append-to-body":!0,"close-on-click-modal":!1,"destroy-on-close":"",title:t.$t("comicPage20"),width:"960px"},on:{"update:visible":function(e){t.visible=e}}},[e("div",{staticClass:"cnt"},[e("div",{staticClass:"tit"},[t._v(t._s(t.$t("comicPage21")))]),t._v(" "),e("div",{staticClass:"storyList"},t._l(t.storys,(function(n,o){return e("div",{key:o,staticClass:"storyItme",on:{click:function(e){t.storyDesc=n.desc}}},[t._v(t._s(n.title))])})),0),t._v(" "),e("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":"",placeholder:t.$t("comicPage22")},model:{value:t.storyDesc,callback:function(e){t.storyDesc=e},expression:"storyDesc"}})],1),t._v(" "),e("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.visible=!1}}},[t._v(t._s(t.$t("Cancel")))]),t._v(" "),e("el-button",{attrs:{loading:t.loading},on:{click:t.sub}},[t._v(t._s(t.$t("Confirm")))])],1)])}),[],!1,null,"0c47c300",null).exports,x=n(22),k=n(5),O=(n(10),n(16),n(49),n(76),n(18),n(214)),I=n(33),$=n(21),j=n(140),T={props:{workInfo:{type:Object,default:function(){}}},mixins:[I.a],components:{CollectionCreate:O.a},data:function(){return{dialogVisible:!1,createShow:!1,folderlist:[],onloading:!1,keyword:"",isLoding:!1,replaceImageType:k.x}},computed:{filteredList:function(){var t=this;return this.folderlist.filter((function(e){return e.name.includes(t.keyword)&&"all"!=e.id}))}},watch:{dialogVisible:{handler:function(t){this.keyword="",t?(this.onloading=!0,this.getCollectionList()):this.folderlist=[]}}},methods:{onSave:function(t){var e=this;this.isLoding||(this.isLoding=!0,Object(j.h)({folder_no:t.id,id:this.workInfo.id,index:this.workInfo.index}).then((function(t){1e4==t.status.code&&(e.$message.success(e.$t("SaveSuccess")),e.dialogVisible=!1)})).finally((function(){e.isLoding=!1})))},getCollectionList:function(){var t=this;Object($.B)({type:1,category:2}).then((function(e){var n=JSON.parse(JSON.stringify(e.data.items));n.forEach((function(element){element.imgList=[];var e=element.artwork_items?element.artwork_items:null;if(e){var n={url:1==e.status&&(2==e.primary||e.account_no==t.userInfo.id)&&e.banner&&e.banner.url?e.banner.url:null,nsfw:e.nsfw,id:e.id};element.imgList.push(n)}})),t.folderlist=n})).finally((function(){t.onloading=!1}))}}},L=(n(2652),Object(w.a)(T,(function(){var t=this,e=t._self._c;return e("div",[e("el-popover",{attrs:Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({placement:"bottom-start",width:"309","popper-class":"folderList"},"popper-class","folderList ".concat(t.createShow?"display_none":"")),"visible-arrow",!1),"title",t.$t("Save")),"trigger","click"),model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[e("div",{staticClass:"cltpop-cent"},[e("div",{staticStyle:{padding:"0 10px"}},[e("div",{staticClass:"search"},[e("i",{staticClass:"iconfont icon-folder-search"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:t.$t("Search")},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.keyword.length,expression:"keyword.length == 0"}]},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("deffcollect")))]),t._v(" "),e("div",{staticClass:"itembox",on:{click:function(e){return t.onSave({id:"default"})}}},[e("div",{staticClass:"itemboxinfo"},[e("div",{staticClass:"itemboxinfoleft"},[e("i",{staticClass:"iconfont icon-deff-mycollect"})]),t._v(" "),e("span",[t._v(t._s(t.$t("UnorganizedIdeas")))])]),t._v(" "),e("el-button",{attrs:{loading:t.isLoding}},[t._v(t._s(t.$t("Save")))])],1)]),t._v(" "),e("div",{staticClass:"popTitle"},[t._v(t._s(t.$t("myfolder")))]),t._v(" "),t.onloading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.onloading,expression:"onloading"}],staticClass:"loadbox"}):t._e(),t._v(" "),e("div",{staticClass:"list"},t._l(t.filteredList,(function(n,o){return e("div",{key:o,staticClass:"itembox",on:{click:function(e){return t.onSave(n)}}},[e("div",{staticClass:"itemboxinfo"},[e("div",{staticClass:"itemboxinfoleft"},[n.imgList&&n.imgList[0]&&n.imgList[0].url?e("img",{attrs:{decoding:"async",loading:"lazy",src:t.replaceImageType(n.imgList[0].url,"high")}}):e("i",{staticClass:"iconfont icon-deff-collect"})]),t._v(" "),e("span",[t._v(t._s(n.name))])]),t._v(" "),e("el-button",{attrs:{loading:t.isLoding}},[t._v(t._s(t.$t("move")))])],1)})),0)]),t._v(" "),e("div",{staticClass:"create"},[e("div",{staticClass:"itembox",on:{click:function(e){t.createShow=!0}}},[e("div",{staticClass:"itemboxinfo"},[e("div",{staticClass:"itemboxinfoleft"},[e("i",{staticClass:"el-icon-plus"})]),t._v(" "),e("span",[t._v(t._s(t.$t("collectBox1")))])])])])]),t._v(" "),e("template",{slot:"reference"},[t._t("default")],2)],2),t._v(" "),e("collection-create",{attrs:{category:!0,width:"718px",type:"artwork"},on:{create:function(e){t.dialogVisible=!1}},model:{value:t.createShow,callback:function(e){t.createShow=e},expression:"createShow"}})],1)}),[],!1,null,"27a37b35",null).exports),S={data:function(){return{isGrid:!1,list:[],show:!1,loading:!1,after_id:"",isMore:!0,deleteLoading:!1}},watch:{show:{handler:function(t){t&&this.intList()}}},components:{saveWork:L},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),d=e.getSeconds().toString().padStart(2,"0");return Object(k.u)(e,new Date)?"".concat(l,":").concat(c,":").concat(d):"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(d)}},methods:{downLoad:function(t){Object(k.z)(t)},handleDeleteImge:function(t,e,n,o){var r=this;this.$confirm(this.$t("deleteConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var l={id:t,index:e};r.deleteLoading=!0,Object(j.d)(l).then((function(t){var e,l,c,d;["10000",1e4].includes(null==t||null===(e=t.status)||void 0===e?void 0:e.code)?(null===(l=r.list[n])||void 0===l||l.img_uris.splice(o,1),0==(null===(c=r.list[n])||void 0===c?void 0:c.img_uris.length)&&r.list.splice(n,1),0==r.list.length&&(r.isMore=!1),r.$message({message:r.$t("deleteSuccess"),type:"success"})):r.$message({message:(null==t||null===(d=t.status)||void 0===d?void 0:d.msg)||r.$t("ServerError"),type:"error"})})).finally((function(){r.deleteLoading=!1}))})).catch((function(t){}))},handleDeleteTask:function(t){var e=this;this.$confirm(this.$t("deleteTaskConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var n={ids:[e.list[t].id]};e.deleteLoading=!0,Object(x.f)(n).then((function(n){var o,r;["10000",1e4].includes(null==n||null===(o=n.status)||void 0===o?void 0:o.code)?(e.list.splice(t,1),0==e.list.length&&(e.isMore=!1),e.$message({message:e.$t("deleteSuccess"),type:"success"})):e.$message({message:(null==n||null===(r=n.status)||void 0===r?void 0:r.msg)||e.$t("ServerError"),type:"error"})})).finally((function(){e.deleteLoading=!1}))})).catch((function(t){}))},checkLoadMore:function(){var t=this.$refs.list,e=t.scrollTop,n=t.scrollHeight;e+t.clientHeight>=n-300&&this.getList()},intList:function(){this.list=[],this.isMore=!0,this.loading=!1,this.after_id="",this.getList()},getList:function(){var t=this;if(!this.loading&&this.isMore){this.loading=!0;var e={limit:10};this.after_id&&(e.after_id=this.after_id),Object(_.h)(e).then((function(e){1e4===e.status.code&&(t.list=t.list.concat(e.data.items||[]),t.list.length>0&&(t.after_id=t.list[t.list.length-1].id),t.list.forEach((function(t){t.srcList=[],t.img_uris&&t.img_uris.forEach((function(e){t.srcList.push(e.url)}))})),0==e.data.items.length&&(t.isMore=!1))})).finally((function(){t.loading=!1}))}}}},D=(n(2653),n(2654),Object(w.a)(S,(function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{placement:"bottom",trigger:"manual","visible-arrow":!1,"popper-class":"historyPopover"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{staticClass:"cnt"},[e("div",{staticClass:"head"},[e("div",{staticClass:"left"},[e("i",{staticClass:"iconfont icon-workflow_icon_list",style:{color:t.isGrid?null:"#ffffff"},on:{click:function(e){t.isGrid=!1}}}),t._v(" "),e("i",{staticClass:"iconfont icon-workflow_icon_grid",style:{color:t.isGrid?"#ffffff":null},on:{click:function(e){t.isGrid=!0}}})]),t._v(" "),e("span",{staticClass:"workflow-history-modal__header-icon el-icon-refresh",on:{click:function(e){return e.stopPropagation(),t.intList()}}})]),t._v(" "),e("div",{ref:"list",staticClass:"list",on:{scroll:t.checkLoadMore}},[t._l(t.list,(function(o,r){var l,c,d,h,v;return e("div",{key:r,staticClass:"row"},[e("div",{staticClass:"tit"},[e("div",{staticClass:"info"},[e("img",{attrs:{src:n(124),alt:""}}),t._v(" "),e("span",[t._v(t._s(t.$t("SeaArtBot")))]),t._v(" "),e("span",[t._v(t._s(t._f("formatDateTime")(o.create_at)))])]),t._v(" "),e("div",{staticClass:"btn"},[e("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e("div",[e("div",{staticClass:"task-info-tips"},[e("p",[e("span",[t._v(t._s(t.$t("TaskID")))]),e("span",[t._v(t._s(o.id))])]),t._v(" "),3===o.status?[[1,2,"1","2"].includes(null==o?void 0:o.pub_community)?e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("status")))]),t._v(" "),e("span",{staticClass:"task-pub-status"},[t._v(t._s([2,"2"].includes(null==o?void 0:o.pub_community)?t.$t("createSetting1"):t.$t("createSetting2")))])]):t._e(),t._v(" "),e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("expend")))]),t._v(" "),e("span",{staticClass:"task-info-tips-content"},[e("span",[t._v(t._s(t.$t("tempCoins"))+" : "+t._s(null==o||null===(l=o.deduction_detail)||void 0===l?void 0:l.temp_hashrate))]),t._v(" "),e("span",[t._v(t._s(t.$t("calculateCoins"))+" : "+t._s(null==o||null===(c=o.deduction_detail)||void 0===c?void 0:c.hashrate))])])]),t._v(" "),null!=o&&null!==(d=o.deduction_detail)&&void 0!==d&&d.history_hashrate?e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("currentBalance")))]),t._v(" "),e("span",{staticClass:"task-info-tips-content"},[e("span",[t._v(t._s(t.$t("tempCoins"))+" : "+t._s(null==o||null===(h=o.deduction_detail)||void 0===h?void 0:h.after_temp_hashrate))]),t._v(" "),e("span",[t._v(t._s(t.$t("calculateCoins"))+" : "+t._s(null==o||null===(v=o.deduction_detail)||void 0===v?void 0:v.after_hashrate))])])]):t._e()]:t._e()],2)]),t._v(" "),e("i",{staticClass:"iconfont icon-task_tips",attrs:{slot:"reference"},slot:"reference"})]),t._v(" "),e("span",{staticClass:"el-icon-delete task-info-icon",on:{click:function(e){return t.handleDeleteTask(r)}}})],1)]),t._v(" "),e("div",{staticClass:"imgs"},t._l(o.img_uris,(function(n,l){return e("div",{key:l,staticClass:"imgBox",class:{"bg-nsfw":1===o.nsfw,gridImg:!t.isGrid}},[1!==o.nsfw?e("el-image",{attrs:{src:n.url,"preview-src-list":o.srcList,fit:"cover"}}):t._e(),t._v(" "),e("div",{staticClass:"btnMask"},[e("div",{staticClass:"hoverBtnBox"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("DownloadImg"),placement:"top"}},[e("div",{staticClass:"hoverBtn",on:{click:function(e){return t.downLoad(n.url)}}},[e("i",{staticClass:"iconfont icon-modelDownload"})])]),t._v(" "),n.is_saved_personal?t._e():e("saveWork",{attrs:{workInfo:{id:o.id,index:n.index}}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Save"),placement:"top"}},[e("div",{staticClass:"hoverBtn"},[e("i",{staticClass:"iconfont icon-save"})])])],1),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Delete"),placement:"top"}},[e("div",{staticClass:"hoverBtn",on:{click:function(e){return t.handleDeleteImge(o.id,n.index,l,r)}}},[e("i",{staticClass:"iconfont icon-moveDeleteTask"})])])],1)])],1)})),0)])})),t._v(" "),t.isMore?t._e():e("div",{staticClass:"defBox"},[t._v(t._s(t.$t("done_tip")))]),t._v(" "),t.loading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"loadBox"}):t._e()],2)]),t._v(" "),e("div",{attrs:{slot:"reference"},slot:"reference"},[t._t("default")],2)])}),[],!1,null,"5598f498",null).exports),P=n(208),E=n(1);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var M={data:function(){return{isAdv:!1,formData:{},imgs:[],previewImgs:[],defaultData:{},isFaceRefer:!1,isUploading:!1,defComic_descs:[],activateSeed:1,loading:!1,sampleShow:!0,imgIndex:0,downLoading:!1,taskId:"",pageLoading:!0,promptLoading:!1,samplePopoverShow:!1,loadingProgress:0,use_render:!1}},components:{pickWorkModal:v.a,comicStoryboardAssistant:C,historyPageVue:D,saveWork:L,LoadingStatus:P.a,ElCollapse:h.a,ElCollapseItem:c.a},computed:R(R({},Object(E.c)("user",["isLoggedIn"])),{},{expend:function(){var t=4,e=this.formData.height;return this.formData.width>this.formData.height&&(e=this.formData.width),[{max:512,min:0,val:4},{max:768,min:512,val:6},{max:1024,min:768,val:8}].forEach((function(n){e>n.min&&e<=n.max&&(t=n.val||4)})),t*this.formData.num}}),watch:{isFaceRefer:{handler:function(t){t||(this.formData.ref_images=[])}},samplePopoverShow:{handler:function(t){this.$logEvent("log_actions",{operation:"click_example",behavior_info:"on_ai_comic_create_page"})}},"formData.num":{handler:function(t){var e,n,o,r,l=this;this.formData.comic_descs=[];for(var i=0;i<this.formData.num;i++)this.formData.comic_descs.push("");null!==(e=this.defaultData)&&void 0!==e&&e.default_comic_text_descs&&(null===(n=this.defaultData)||void 0===n||null===(n=n.default_comic_text_descs)||void 0===n?void 0:n.length)>0&&(null===(r=this.defaultData)||void 0===r||r.default_comic_text_descs.forEach((function(t,e){(l.formData.comic_descs[e]||""==l.formData.comic_descs[e])&&l.$set(l.formData.comic_descs,e,t)})));this.defComic_descs&&(null===(o=this.defComic_descs)||void 0===o?void 0:o.length)>0&&this.formData.comic_descs.forEach((function(t,e){(l.formData.comic_descs[e]||""==l.formData.comic_descs[e])&&l.$set(l.formData.comic_descs,e,l.defComic_descs[e])}))}},activateSeed:{handler:function(t){1==t&&(this.formData.seed=this.getRandomSeed()),2==t&&(this.formData.seed="")}}},created:function(){this.getComicConfig(),this.isLoggedIn&&this.getComicRunTask()},beforeDestroy:function(){clearTimeout(this.inTimes)},methods:{backTo:function(){window.history.length>2?this.$router.back():this.$router.push(this.localePath("/ai-tools"))},openHistory:function(){this.$refs.historyPageVue.show=!this.$refs.historyPageVue.show,this.$logEvent("log_actions",{operation:"click_history",behavior_info:"on_ai_comic_create_page"})},characterPrompt:function(){var t=this;this.promptLoading||(this.promptLoading=!0,Object(_.c)({character_desc:this.formData.character_desc}).then((function(e){1e4===e.status.code&&(t.formData.character_desc=e.data.rendered_character_desc)})).finally((function(){t.promptLoading=!1})))},downLoad:function(){Object(k.z)(this.imgs[this.imgIndex].url)},getTaskInfo:function(t){var e=this,n={};n.task_ids=t,n.scene=1,Object(x.a)(n).then((function(n){var o,r,l,c,d;1e4==n.status.code&&(e.loadingProgress=null===(o=n.data)||void 0===o?void 0:o.items[0].process,null!==(r=n.data)&&void 0!==r&&r.items[0]&&3==(null===(l=n.data)||void 0===l||null===(l=l.items[0])||void 0===l?void 0:l.status)?(clearTimeout(e.inTimes),e.imgs=n.data.items[0].img_uris,e.previewImgs=[],e.imgs.forEach((function(t){e.previewImgs.push(t.url)})),e.taskId=n.data.items[0].task_id,e.loading=!1):null!==(c=n.data)&&void 0!==c&&c.items[0]&&4==(null===(d=n.data)||void 0===d||null===(d=d.items[0])||void 0===d?void 0:d.status)?(clearTimeout(e.inTimes),e.$message.warning(e.$t("comicPage17")),e.loading=!1):(clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t)}),5e3)))})).catch((function(n){clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t)}),5e3)}))},onGenerate:function(){var t=this;if(this.isLoggedIn){if(!this.loading)if("simple"!=this.formData.generate_type||this.formData.story_desc){if("advance"==this.formData.generate_type){var e=!0;if(this.formData.comic_descs.forEach((function(t){t||(e=!1)})),!e)return void this.$message.warning(this.$t("comicPage19"));if(!this.formData.character_desc)return void this.$message.warning(this.$t("comicPage24"))}this.loading=!0;var n=this.formData,o=n.generate_type,l=n.story_desc,c=n.style_template,d=n.ref_images,h=n.num,v=n.type_setting_style,m=n.character_desc,f=n.comic_descs,y=n.model_type,w=n.negative_prompt,C=n.seed,x=n.steps,k=n.cfg_scale,O=n.width,I=n.height,$={generate_type:o,story_desc:l,style_template:c,ref_images:d,num:h,type_setting_style:v};"advance"==this.formData.generate_type&&($={generate_type:o,style_template:c,ref_images:d,type_setting_style:v,character_desc:m,comic_descs:f,model_type:y,negative_prompt:w,seed:C,steps:x,cfg_scale:k,width:O,height:I}),this.use_render&&($.use_render=!0),Object(_.e)($).then((function(e){1e4==e.status.code?(t.loadingProgress=0,t.getTaskInfo([e.data.task_id])):70040==e.status.code&&(t.$alert(t.$t("comicPage25"),t.$t("Tip"),Object(r.a)({confirmButtonText:t.$t("Confirm"),callback:function(t){}},"callback",(function(t){}))),t.loading=!1)})).catch((function(e){t.$message.warning(t.$t("comicPage17")),t.loading=!1}))}else this.$message.warning(this.$t("comicPage18"))}else this.$EventBus.$emit("openLoginDialog")},setdefComic_descs:function(){this.defComic_descs=this.formData.comic_descs},setStoryBoard:function(t){var e=this;this.defComic_descs=t,this.formData.comic_descs.forEach((function(t,n){e.$set(e.formData.comic_descs,n,e.defComic_descs[n])})),this.use_render=!0},setNum:function(t,e,n){this.formData[t]<e&&(this.formData[t]=e),this.formData[t]>n&&(this.formData[t]=n),this.formData[t]=parseInt(this.formData[t])},handleImgUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,l,c,i,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isUploading){n.next=2;break}return n.abrupt("return");case 2:if(l=t.target.files,!(3-(null===(r=e.formData.ref_images)||void 0===r?void 0:r.length)<l.length)){n.next=6;break}return e.$message(e.$t("newTrainIntrTip3")),n.abrupt("return");case 6:e.isUploading=!0,c=0,i=0;case 9:if(!(i<l.length)){n.next=29;break}if(!((d=l[i]).size/1024/1024>2)){n.next=24;break}return n.prev=12,n.next=15,Object(m.a)(d,2097152);case 15:d=n.sent,n.next=24;break;case 18:return n.prev=18,n.t0=n.catch(12),++c==l.length&&(e.isUploading=!1),console.error("Compression failed:",n.t0),n.abrupt("continue",26);case 24:new f.a({type:2}).startUpload(d,{name:"face_img".concat(Date.now(),".png"),type:"png",category:2,size:d.size}).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.formData.ref_images.push(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){})).finally((function(){++c==l.length&&(e.isUploading=!1)}));case 26:i++,n.next=9;break;case 29:case"end":return n.stop()}}),n,null,[[12,18]])})))()},uploadImg:function(){var t;this.isUploading||null!==(t=this.$refs)&&void 0!==t&&t.imgInput&&(this.$refs.imgInput.value=null,this.$refs.imgInput.click())},onFaceDelete:function(t){this.formData.ref_images.splice(t,1)},handlePickImage:function(t){var e=this;t.urls.forEach((function(t){e.formData.ref_images.push(t.url)}))},getRandomSeed:function(){return Math.floor(4294967294*Math.random())+1},getComicRunTask:function(){var t=this;Object(_.f)({scenes:"comicStoryDiffusion"}).then((function(e){1e4===e.status.code&&e.data.task_ids&&e.data.task_ids.length>0&&(t.loading=!0,t.getTaskInfo(e.data.task_ids))}))},getComicConfig:function(){var t=this;Object(_.d)().then((function(e){if(1e4===e.status.code){t.defaultData=e.data;var n=e.data,o=n.default_character_desc,r=n.default_story_desc,l=n.model_type,c=n.style_templates,d=n.type_setting_styles,h=(n.samples,n.default_advance_img_gen_setting);t.formData={generate_type:"simple",story_desc:r.desc,style_template:c[0].id,ref_images:[],num:4,type_setting_style:d[0].id,character_desc:o,comic_descs:[],model_type:l[0],negative_prompt:(null==h?void 0:h.negative_prompt)||"",seed:t.getRandomSeed(),steps:(null==h?void 0:h.steps)||3,cfg_scale:(null==h?void 0:h.cfg_scale)||3,width:(null==h?void 0:h.width)||512,height:(null==h?void 0:h.height)||512},t.pageLoading=!1}}))}}},N=M,U=(n(2655),n(2656),Object(w.a)(N,(function(){var t,e,n,o=this,r=o._self._c;return r("div",[o.pageLoading?r("LoadingStatus",{attrs:{bgColor:"#02050e"}}):r("div",{staticClass:"AiComic"},[r("div",{staticClass:"top"},[r("div",{staticClass:"back",on:{click:function(t){return o.$router.back()}}},[r("i",{staticClass:"el-icon-back"})]),o._v(" "),r("div",{staticClass:"rightBtn"},[o.imgs.length>0?r("div",{directives:[{name:"loading",rawName:"v-loading",value:o.downLoading,expression:"downLoading"}],staticClass:"btnBox",on:{click:o.downLoad}},[r("i",{staticClass:"header-btn-icon iconfont icon-icon_xiazai"}),o._v(" "),r("span",[o._v(o._s(o.$t("Download")))])]):o._e(),o._v(" "),o.imgs.length>0?r("saveWork",{attrs:{workInfo:{id:o.taskId,index:o.imgs[this.imgIndex].index}}},[r("div",{staticClass:"btnBox"},[r("i",{staticClass:"header-btn-icon iconfont icon-baocun"}),o._v(" "),r("span",[o._v(o._s(o.$t("Save")))])])]):o._e(),o._v(" "),r("historyPageVue",{ref:"historyPageVue"},[r("div",{staticClass:"btnBox",on:{click:o.openHistory}},[r("i",{staticClass:"iconfont icon-workflow_icon_lishi header-btn-icon"}),o._v(" "),r("span",[o._v(o._s(o.$t("workFlow11")))])])])],1)]),o._v(" "),r("div",{staticClass:"main"},[r("div",{staticClass:"funBox"},[r("div",{staticClass:"funCnt"},[r("div",{staticClass:"funBase"},[r("div",{staticClass:"funTab"},[r("div",{class:{activateTab:"simple"==o.formData.generate_type},on:{click:function(t){o.formData.generate_type="simple"}}},[o._v(o._s(o.$t("comicPage1")))]),o._v(" "),r("div",{class:{activateTab:"advance"==o.formData.generate_type},on:{click:function(t){o.formData.generate_type="advance"}}},[o._v(o._s(o.$t("tavern24")))])]),o._v(" "),"simple"==o.formData.generate_type?[r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("comicPage2")))]),o._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.$t("comicPage3"),placement:"right"}},[r("i",{staticClass:"el-icon-warning-outline"})])],1),o._v(" "),r("el-popover",{attrs:{placement:"right-start",trigger:"click","visible-arrow":!1,"popper-class":"samplePopover"},model:{value:o.samplePopoverShow,callback:function(t){o.samplePopoverShow=t},expression:"samplePopoverShow"}},[r("div",{staticClass:"storySample"},o._l(o.defaultData.story_descs,(function(t,e){return r("div",{key:e,staticClass:"storyItem",on:{click:function(e){o.formData.story_desc=t.desc}}},[o._v(o._s(t.title))])})),0),o._v(" "),r("div",{staticClass:"sample",attrs:{slot:"reference"},slot:"reference"},[r("span",[o._v(o._s(o.$t("comicPage4")))]),o._v(" "),r("i",{staticClass:"el-icon-arrow-right"})])])],1),o._v(" "),r("el-input",{attrs:{type:"textarea"},model:{value:o.formData.story_desc,callback:function(t){o.$set(o.formData,"story_desc",t)},expression:"formData.story_desc"}})]:o._e(),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("comicPage5")))]),o._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.$t("comicPage6"),placement:"right"}},[r("i",{staticClass:"el-icon-warning-outline"})])],1)]),o._v(" "),r("el-select",{attrs:{"popper-class":"custom-select"},model:{value:o.formData.style_template,callback:function(t){o.$set(o.formData,"style_template",t)},expression:"formData.style_template"}},o._l(o.defaultData.style_templates,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),o._v(" "),r("div",{staticClass:"faceBox"},[r("div",{staticClass:"faceTit"},[r("span",[o._v(o._s(o.$t("comicPage7")))]),o._v(" "),r("el-switch",{model:{value:o.isFaceRefer,callback:function(t){o.isFaceRefer=t},expression:"isFaceRefer"}})],1),o._v(" "),o.isFaceRefer?r("div",{staticClass:"faceList"},[(null===(t=o.formData.ref_images)||void 0===t?void 0:t.length)<3?r("div",{directives:[{name:"loading",rawName:"v-loading",value:this.isUploading,expression:"this.isUploading"}],staticClass:"faceBnt",on:{click:o.uploadImg}},[r("i",{staticClass:"el-icon-plus"}),o._v(" "),r("span",[o._v(o._s(o.$t("Upload")))]),o._v(" "),r("input",{ref:"imgInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png, image/jpeg, image/jpg', image/webp",multiple:""},on:{change:o.handleImgUpload}})]):o._e(),o._v(" "),(null===(e=o.formData.ref_images)||void 0===e?void 0:e.length)<3?r("div",{directives:[{name:"loading",rawName:"v-loading",value:this.isUploading,expression:"this.isUploading"}],staticClass:"faceBnt",on:{click:function(t){!o.isUploading&&o.$refs.pickWorkModal.openModal([])}}},[r("i",{staticClass:"el-icon-plus"}),o._v(" "),r("span",[o._v(o._s(o.$t("CreativeCenterPopup21")))])]):o._e(),o._v(" "),o._l(o.formData.ref_images,(function(t,e){return r("div",{key:e,staticClass:"faceImg"},[r("div",{staticClass:"faceDelete",on:{click:function(t){return o.onFaceDelete(e)}}},[r("i",{staticClass:"el-icon-delete-solid"})]),o._v(" "),r("img",{attrs:{src:t,alt:""}})])}))],2):o._e()]),o._v(" "),"advance"==o.formData.generate_type?[r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("tavern6")))]),o._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.$t("newComicPage9"),placement:"right"}},[r("i",{staticClass:"el-icon-warning-outline"})])],1)]),o._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:o.promptLoading,expression:"promptLoading"}],staticClass:"characterBox"},[r("el-input",{attrs:{type:"textarea"},model:{value:o.formData.character_desc,callback:function(t){o.$set(o.formData,"character_desc",t)},expression:"formData.character_desc"}}),o._v(" "),o.formData.character_desc&&o.formData.character_desc.length<200?r("i",{staticClass:"iconfont icon-mofabang1",on:{click:o.characterPrompt}}):o._e()],1),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("comicPage10"))+" ("+o._s(o.formData.num)+"/8)")]),o._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.$t("newComicPage23"),placement:"right"}},[r("i",{staticClass:"el-icon-warning-outline"})])],1),o._v(" "),r("div",{staticClass:"sample",attrs:{slot:"reference"},on:{click:function(t){return o.$refs.comicStoryboardAssistant.show({list:o.defaultData.comic_descs,num:o.formData.num,character_desc:o.formData.character_desc})}},slot:"reference"},[r("span",[o._v(o._s(o.$t("comicPage12")))]),o._v(" "),r("i",{staticClass:"el-icon-arrow-right"})])])]:o._e(),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("comicPage13")))]),o._v(" "),r("el-input",{attrs:{type:"number"},on:{change:function(t){return o.setNum("num",2,8)}},model:{value:o.formData.num,callback:function(t){o.$set(o.formData,"num",o._n(t))},expression:"formData.num"}})],1),o._v(" "),r("el-slider",{attrs:{max:8,min:2},on:{change:function(t){return o.setNum("num",2,8)}},model:{value:o.formData.num,callback:function(t){o.$set(o.formData,"num",t)},expression:"formData.num"}})],1),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("comicPage14")))])])]),o._v(" "),r("el-select",{attrs:{"popper-class":"custom-select"},model:{value:o.formData.type_setting_style,callback:function(t){o.$set(o.formData,"type_setting_style",t)},expression:"formData.type_setting_style"}},o._l(o.defaultData.type_setting_styles,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),o._v(" "),"advance"==o.formData.generate_type?[r("div",{staticClass:"storyboardBox"},o._l(o.formData.comic_descs,(function(t,e){return r("div",{key:e,staticClass:"storyboardItem"},[r("div",{staticClass:"prepend"},[o._v("P "+o._s(e+1))]),o._v(" "),r("el-input",{attrs:{placeholder:o.$t("comicPage16"),type:"textarea"},on:{blur:o.setdefComic_descs},model:{value:o.formData.comic_descs[e],callback:function(t){o.$set(o.formData.comic_descs,e,t)},expression:"formData.comic_descs[index]"}})],1)})),0)]:o._e()],2),o._v(" "),"advance"==o.formData.generate_type?r("div",{staticClass:"funMore"},[r("el-collapse",[r("el-collapse-item",{attrs:{title:o.$t("TaskUploadImageMoreSetting"),name:"1"}},[r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("AIModel")))])])]),o._v(" "),r("el-select",{attrs:{"popper-class":"custom-select"},model:{value:o.formData.model_type,callback:function(t){o.$set(o.formData,"model_type",t)},expression:"formData.model_type"}},o._l(o.defaultData.model_type,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("NegativePrompts")))])])]),o._v(" "),r("el-input",{attrs:{type:"textarea"},model:{value:o.formData.negative_prompt,callback:function(t){o.$set(o.formData,"negative_prompt",t)},expression:"formData.negative_prompt"}}),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("Seed")))])]),o._v(" "),r("div",{staticClass:"seedBox"},[r("div",{class:{activateSeed:1==o.activateSeed},on:{click:function(t){o.activateSeed=1}}},[o._v(o._s(o.$t("Random")))]),o._v(" "),r("div",{class:{activateSeed:2==o.activateSeed},on:{click:function(t){o.activateSeed=2}}},[o._v(o._s(o.$t("Customization")))])])]),o._v(" "),r("el-input",{attrs:{type:"number",disabled:1==o.activateSeed},model:{value:o.formData.seed,callback:function(t){o.$set(o.formData,"seed",o._n(t))},expression:"formData.seed"}}),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("SamplingSteps")))]),o._v(" "),r("el-input",{attrs:{type:"number"},on:{change:function(t){return o.setNum("steps",20,40)}},model:{value:o.formData.steps,callback:function(t){o.$set(o.formData,"steps",o._n(t))},expression:"formData.steps"}})],1),o._v(" "),r("el-slider",{attrs:{max:40,min:20},on:{change:function(t){return o.setNum("steps",20,40)}},model:{value:o.formData.steps,callback:function(t){o.$set(o.formData,"steps",t)},expression:"formData.steps"}})],1),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("CFGScale")))]),o._v(" "),r("el-input",{attrs:{type:"number"},on:{change:function(t){return o.setNum("cfg_scale",3,10)}},model:{value:o.formData.cfg_scale,callback:function(t){o.$set(o.formData,"cfg_scale",o._n(t))},expression:"formData.cfg_scale"}})],1),o._v(" "),r("el-slider",{attrs:{max:10,min:3},on:{change:function(t){return o.setNum("cfg_scale",3,10)}},model:{value:o.formData.cfg_scale,callback:function(t){o.$set(o.formData,"cfg_scale",t)},expression:"formData.cfg_scale"}})],1),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("width")))]),o._v(" "),r("el-input",{attrs:{disabled:"",type:"number"},on:{change:function(t){return o.setNum("width",512,1024)}},model:{value:o.formData.width,callback:function(t){o.$set(o.formData,"width",o._n(t))},expression:"formData.width"}})],1),o._v(" "),r("el-slider",{attrs:{max:1024,min:512,step:32},on:{change:function(t){return o.setNum("width",512,1024)}},model:{value:o.formData.width,callback:function(t){o.$set(o.formData,"width",t)},expression:"formData.width"}})],1),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("height")))]),o._v(" "),r("el-input",{attrs:{disabled:"",type:"number"},on:{change:function(t){return o.setNum("height",512,1024)}},model:{value:o.formData.height,callback:function(t){o.$set(o.formData,"height",o._n(t))},expression:"formData.height"}})],1),o._v(" "),r("el-slider",{attrs:{max:1024,min:512,step:32},on:{change:function(t){return o.setNum("height",512,1024)}},model:{value:o.formData.height,callback:function(t){o.$set(o.formData,"height",t)},expression:"formData.height"}})],1)],1)],1)],1):o._e()]),o._v(" "),r("el-button",{staticClass:"funBtn",attrs:{loading:o.loading},on:{click:o.onGenerate}},[r("div",[o._v(o._s(o.$t("Generate")))]),o._v(" "),r("div",[r("span",[o._v(o._s(o.$t("PhysicalExertion"))+":"+o._s(o.expend))])])])],1),o._v(" "),r("div",{staticClass:"imgLoadBox"},[o.loading?r("div",{staticClass:"progressBox"},[r("el-progress",{attrs:{type:"circle",percentage:o.loadingProgress,width:80,"stroke-width":5,color:"#3F8FFF","text-color":"#ffffff"}}),o._v(" "),r("div",{staticClass:"progressTip"},[o._v(" "+o._s(o.$t("photography37"))+" ... ")])],1):o._e(),o._v(" "),o.imgs.length>0?r("div",{staticClass:"imgBox"},[r("el-carousel",{attrs:{arrow:"always",autoplay:!1},on:{change:function(t){return o.imgIndex=t}}},o._l(o.imgs,(function(t){return r("el-carousel-item",{key:t.id},[r("div",{staticClass:"imgCnt",class:[1===t.nsfw?"bg-nsfw":""]},[r("el-image",{attrs:{src:t.url,"preview-src-list":o.previewImgs,fit:"contain"}})],1)])})),1)],1):o.sampleShow?r("div",{staticClass:"imgBox"},[r("div",{staticClass:"clear",on:{click:function(t){o.sampleShow=!1}}},[r("i",{staticClass:"el-icon-close"})]),o._v(" "),r("el-carousel",{attrs:{arrow:"always",autoplay:!1}},o._l(o.defaultData.samples,(function(t){return r("el-carousel-item",{key:t},[r("el-image",{attrs:{src:t,"preview-src-list":o.defaultData.samples,fit:"contain"}})],1)})),1)],1):o._e()])]),o._v(" "),r("pick-work-modal",{ref:"pickWorkModal",attrs:{maxNum:3-(null===(n=o.formData.ref_images)||void 0===n?void 0:n.length)},on:{confirm:o.handlePickImage}}),o._v(" "),r("comicStoryboardAssistant",{ref:"comicStoryboardAssistant",on:{change:o.setStoryBoard}})],1)],1)}),[],!1,null,"a7e7af2e",null));e.default=U.exports},3270:function(t,e,n){"use strict";n.r(e);n(14),n(16),n(10),n(18),n(9),n(7),n(11),n(12);var o=n(2),r=(n(8),n(4),n(23),n(118),n(37),n(6),n(131)),l=n(1),c=(n(21),n(496)),d=n.n(c),h=n(263),v=n(39),m=n(5);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={data:function(){return{taskList:[],isLoading:!1,bntLoad:!1,vipLoading:!1,vipData:{},shareUrl:"",defBoxShow:!1}},components:{InviteDialog:h.a},mounted:function(){localStorage.getItem("userInfo")?this.SET_USER_INFO(JSON.parse(localStorage.getItem("userInfo"))):this.SET_USER_INFO({}),this.getAwardTask(),this.handleGenerateUrl(),new d.a(".copyTextToClipboardBtn")},computed:_(_(_({},Object(l.e)("user",["userInfo","cdnHost"])),Object(l.c)("user",["isLoggedIn"])),{},{inviteCode:function(){return this.userInfo.invite_user_code},getNextTimeDate:function(){var t;return Object(v.h)(null===(t=this.vipData)||void 0===t?void 0:t.start_take_time,"yyyy/MM/dd")},showAdTime:function(){var time=Object(v.e)(Object(m.q)(),"{h}:{i}");return this.$t("brawnRefresh",{time:time})}}),methods:_(_(_({},Object(l.d)("user",["setOpenEdit","setWaitTakeNum","SET_USER_INFO"])),Object(l.b)("payment",["getPaymentInfo"])),{},{setText:function(){var t,e=this.$t("taskInviteNum",{number:"".concat((null===(t=this.userInfo)||void 0===t?void 0:t.invite_user_num)||0,"/5")}),n=e.match(/\d+\/\d+/);return e=e.replace(n,'<span style="color: red;">'+n+"</span>")},setCpVipTxt:function(t){var e="".concat(this.$t("vip_card_name",{number:t.product.day_num}));return e=e.replace("VIP",'<span style="font-size: 22px;color: #FFFCF9;font-weight: bold;" >vip</span>')},getVipDiamond:function(){var t=this;this.vipLoading=!0,Object(r.i)().then((function(e){if(1e4==e.status.code){var data=e.data;t.vipData=_(_({},data),{},{isLoad:!1})}})).finally((function(){t.vipLoading=!1}))},receiveVipDiamond:function(){var t=this;this.vipData.isLoad=!0,Object(r.l)().then((function(e){1e4==e.status.code&&t.$message.success(t.$t("ClaimSucceess"))})).finally((function(){t.vipData.isLoad=!1}))},setBntTxt:function(t){var text="";switch(t.go_type){case"api":text=this.$t("Claim");break;case"copy":text=this.$t("Invite");break;case"page":case"popup":case"link":case"show_ad":text=this.$t("Go");break;case"view":text=this.$t("goBrowsing")}return text},setListBg:function(t){var e="url(".concat(n(737),")");return t.award_product||"unlock_auto_pub_community"==t.id||(e=t.award_num<200?"url(".concat(n(738),")"):"url(".concat(n(736),")")),e},setListIcon:function(t){var e=n(576);return"unlock_auto_pub_community"==t.id?e=n(581):("day_tmp"==t.award_product&&(e=n(744)),t.award_product||(e=n(740)),4==t.award_type&&(e=n(640)),"invite_new_up_10"===t.id&&(e=n(576))),e},getAwardTask:function(){var t=this;this.isLoading||(this.isLoading=!0,Object(r.e)().then((function(e){1e4==e.status.code&&(0!=e.data.length?(t.taskList=e.data,t.taskList.forEach((function(e){t.$set(e,"isLoad",!1)}))):t.defBoxShow=!0)})).finally((function(){t.isLoading=!1})))},goSignIn:function(t){var e=this;this.isLoggedIn?(t.isLoad=!0,Object(r.m)().then((function(n){1e4==n.status.code&&(e.$message.success(e.$t(e.$t("SignInSuccess")+" +"+t.award_num+" "+e.$t("coin"))),e.getAwardTask())})).finally((function(){t.isLoad=!1}))):this.$EventBus.$emit("openLoginDialog")},onGoTask:function(t){var e=this;if(this.isLoggedIn)switch(this.$logEvent("log_actions",{operation:"click_task_begin",behavior_info:t.id,behavior_info_sub:t.detail}),t.go_type){case"copy":var n=Math.floor(8*Math.random())+1,o="https://".concat(this.cdnHost,"/Invite-images/invite_poster_").concat(n,".png"),l="".concat(window.location.origin)+this.localePath("/?u_code="+this.inviteCode);this.$logEvent("web_invite_click"),this.$refs.inviteDialog.show(this.shareUrl,o,l);break;case"page":"/personal"==t.go_url&&this.setOpenEdit(1),this.$router.push(this.localePath(t.go_url));break;case"view":this.$router.push(this.localePath("/?makeTask=1"));break;case"popup":this.$EventBus.$emit("openCreativeCenterModal");break;case"show_ad":this.$EventBus.$emit("showRewardsModel",{call:this.getAwardTask});break;case"link":window.open(t.go_url),t.isLoad=!0,Object(r.k)().then((function(t){1e4==t.status.code&&e.getAwardTask()})).finally((function(){t.isLoad=!1}))}else this.$EventBus.$emit("openLoginDialog")},handleGenerateUrl:function(){var t={};t.target_host=(this.$isChinaSite,"".concat(window.location.origin,"/")),t.url=t.target_host+"home?u_code="+this.userInfo.invite_user_code;var e=(this.userInfo.name?this.userInfo.name:this.userInfo.id)+" "+this.$t("shareText"),n="".concat(t.target_host,"u/").concat(this.userInfo.invite_user_code);this.shareUrl="".concat(e,"\r\n").concat(n)},getAwardTake:function(t){var e=this;t.isLoad=!0,this.$logEvent("log_actions",{operation:"click_task_award",behavior_info:t.id,behavior_info_sub:t.detail}),Object(r.c)({award_id:t.id}).then((function(n){var o;if(1e4!=n.status.code)return 40009===n.status.code?void e.$message.error(e.$t("error_code_40009")):void((null==n||null===(o=n.status)||void 0===o?void 0:o.msg)&&e.$message.error(n.status.msg));try{t.product?e.$message.success(e.$t("ClaimSucceess")+" "+e.$t("vip_card_name",{number:t.product.day_num})):"unlock_auto_pub_community"==t.id?(e.getPaymentInfo(),e.$message.success(e.$t("ClaimSucceess"))):e.$message.success(e.$t("ClaimSucceess")+" +"+t.award_num*t.finish_info.wait_take_num+" "+("view"==t.go_type?e.$t("tempCoins"):e.$t("coin")))}catch(t){}e.getAwardTask(),Object(r.n)().then((function(t){var n;1e4==(null==t||null===(n=t.status)||void 0===n?void 0:n.code)&&e.setWaitTakeNum(t.data.num)}))})).finally((function(){t.isLoad=!1}))}})},w=(n(2403),n(2404),n(0)),C=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"top"},[e("div",{staticClass:"inviteTips"},[e("img",{attrs:{src:n(750),alt:""}}),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.setText())}})]),t._v(" "),e("el-popover",{attrs:{placement:"bottom","visible-arrow":!1,trigger:"hover"}},[e("div",{staticClass:"ruleCnt"},[e("div",[t._v("1. "+t._s(t.$t("ruleTxt1")))]),t._v(" "),e("div",[t._v("2. "+t._s(t.$t("ruleTxt2")))]),t._v(" "),e("div",[t._v("3. "+t._s(t.$t("ruleTxt3")))])]),t._v(" "),e("div",{staticClass:"rule",attrs:{slot:"reference"},slot:"reference"},[e("span",[t._v(t._s(t.$t("TaskRules")))]),t._v(" "),e("i",{staticClass:"iconfont icon-ruleIcon"})])])],1),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading&&t.vipLoading,expression:"isLoading && vipLoading"}],staticClass:"list"},[t.defBoxShow?e("div",{staticClass:"defBox"},[e("img",{attrs:{src:n(586),alt:""}}),t._v(" "),e("span",[t._v(t._s(t.$t("taskDefTxt")))])]):t._e(),t._v(" "),t._l(t.taskList,(function(o,r){var l;return e("div",{key:r,staticClass:"listItem"},[e("div",{staticClass:"listCnt",style:{backgroundImage:t.setListBg(o)}},[e("div",[e("div",{staticClass:"awardIcon"},[e("img",{class:{"is-credit":"unlock_auto_pub_community"!=o.id&&!o.award_product},attrs:{src:t.setListIcon(o),alt:""}})]),t._v(" "),e("div",{staticClass:"awardNum"},[e("div",{style:{backgroundImage:"url(".concat(n(754),")")}},[o.product?e("div",{staticClass:"cpVip",domProps:{innerHTML:t._s(t.setCpVipTxt(o))}}):e("span",[t._v(t._s("unlock_auto_pub_community"==o.id?t.$t("permissions"):"X"+o.award_num))])])]),t._v(" "),e("div",{staticClass:"desc"},[t._v("\n            "+t._s(o.detail)+"\n          ")])]),t._v(" "),"api"==o.go_type&&o.finish_info&&1==o.finish_info.wait_take_num?e("el-button",{staticClass:"bnt",style:{backgroundImage:"url(".concat(n(579),")")},attrs:{loading:o.isLoad},on:{click:function(e){return t.goSignIn(o)}}},[t._v(t._s("".concat(t.$t("Claim"))))]):o.finish_info&&0==o.finish_info.wait_take_num&&o.finish_info.finish_num<o.max_plan?e("el-popover",{attrs:{"visible-arrow":!1,trigger:"hover",placement:"top-start","popper-class":"my-task-popover",disabled:!o.id.includes("invite_new_up")}},[e("div",{staticClass:"btn-hover"},[t._v("\n            "+t._s(t.$t("InviteHoverTips"))+"\n          ")]),t._v(" "),e("el-button",{staticClass:"bnt",style:{backgroundImage:"url(".concat(n(578),")")},attrs:{slot:"reference",loading:o.isLoad},on:{click:function(e){return t.onGoTask(o)}},slot:"reference"},[t._v(t._s("".concat(t.setBntTxt(o)," (").concat(o.finish_info.finish_num,"/").concat(o.max_plan,")")))])],1):o.finish_info&&o.finish_info.wait_take_num>0?e("el-button",{staticClass:"bnt",style:{backgroundImage:"url(".concat(n(579),")")},attrs:{loading:o.isLoad},on:{click:function(e){return t.getAwardTake(o)}}},[t._v(t._s("".concat(t.$t("Claim")," ").concat(2==o.type?"*"+(null==o||null===(l=o.finish_info)||void 0===l?void 0:l.wait_take_num):"")))]):[e("el-popover",{attrs:{"visible-arrow":!1,trigger:"hover",placement:"top-start","popper-class":"my-task-popover"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"show_ad"===o.go_type,expression:"item.go_type === 'show_ad'"}],staticClass:"btn-hover"},[t._v("\n              "+t._s(t.showAdTime)+"\n            ")]),t._v(" "),e("el-button",{staticClass:"bnt",style:{backgroundImage:"url(".concat(n(578),")")},attrs:{slot:"reference",disabled:""},slot:"reference"},[t._v(t._s("".concat(t.$t("Completed"))))])],1)]],2)])})),t._v(" "),e("invite-dialog",{ref:"inviteDialog",attrs:{type:"task"}})],2)])}),[],!1,null,"155efafa",null).exports,x=[function(){var t=this._self._c;return t("div",{staticClass:"coinBox",staticStyle:{"margin-top":"10px"}},[t("img",{staticClass:"coinImg",attrs:{src:n(587),alt:""}})])}],k=(n(1071),n(44),n(669)),O={components:{ElPagination:n.n(k).a},data:function(){return{getTimeDiff2:v.d,headList:[this.$t("Type"),this.$t("Quantity"),this.$t("Source"),this.$t("Details"),this.$t("Time")],list:[],isLoading:!1,numData:{},formData:{type:"award",page:1,page_size:5},replaceImageType:m.x}},mounted:function(){this.getAwardTakelog()},methods:{setCoinImg:function(t){var e=n(121);if(1==t.award_type)switch(t.coins_type){case 1:e=n(226);break;case 3:e=n(414);break;case 4:e=n(121)}else e=n(587);return e},formatTime:function(t){var e=Math.floor(t/1e3);if(e<60)return"".concat(e," ").concat(this.$t("seconds"));var n=Math.floor(e/60),o=e%60;return"".concat(n," ").concat(this.$t("minutes")," ").concat(o," ").concat(this.$t("seconds"))},setType:function(t){var e="";switch(t.source){case 10:case 9:e=this.$t("PaidImagePortfolio");break;case 7:case 8:case 15:case 25:case 26:case 27:case 30:case 31:case 35:case 37:case 38:case 39:case 40:case 42:case 43:e=this.$t("expend");break;case 13:case 36:case 5:case 12:case 14:case 28:case 29:case 3:case 6:case 41:e=this.$t("Addition")}return e},setSoure:function(t){var e,n,o="";switch(t.source){case 6:case 36:o=this.$t("IncentiveTesk");break;case 7:o="AI "+this.$t("OPS_painting");break;case 3:o=this.$t("activityRewards");break;case 9:o=1==(null===(e=t.portfolio_remark)||void 0===e?void 0:e.type)?this.$t("unlockImageortfolio"):this.$t("unlockCreativeParameters");break;case 10:o=1==(null===(n=t.portfolio_remark)||void 0===n?void 0:n.type)?this.$t("unlockImageortfolio"):this.$t("unlockCreativeParameters");break;case 8:case 14:o=this.$t("paidModel");break;case 12:o=this.$t("VIPEarnings");break;case 13:o=this.$t("RechargeEarningse");break;case 15:o=this.$t("trainModel");break;case 25:case 26:case 27:o=this.$t("ai_tools_10");break;case 28:o=this.$t("returnToCreator");break;case 29:o=this.$t("modelUsageRollback");break;case 30:o=this.$t("modelPerformanceReturns");break;case 31:case 42:case 43:o=this.$t("AIHumanChat");break;case 35:o=this.$t("AI_Chat");break;case 5:o=this.$t("welfare");break;case 37:o=this.$t("aiVideName");break;case 38:case 39:case 40:case 41:o=this.$t("AIAudio")}return o},handleCurrentChange:function(t){this.formData.page=t,this.getAwardTakelog()},tabChange:function(t){this.formData.page=1,this.formData.type=t,this.getAwardTakelog()},getAwardTakelog:function(){var t=this;this.isLoading||(this.isLoading=!0,Object(r.d)(this.formData).then((function(e){1e4==e.status.code&&(t.numData=e.data,t.list=e.data.list||[])})).finally((function(){t.isLoading=!1})))}}},I=(n(2405),{name:"IncentiveTesk",data:function(){return{tabList:[{name:this.$t("TaskList"),value:"task"},{name:this.$t("AllRecord"),value:"award"}],tabValue:"task"}},components:{awardTasklist:C,awardRecordlist:Object(w.a)(O,(function(){var t,e,o,r,l,c,d=this,h=d._self._c;return h("div",{staticClass:"awardRecordlist"},[h("div",{staticClass:"topBar"},[null!==(t=d.numData)&&void 0!==t&&null!==(t=t.count)&&void 0!==t&&t.count_gain_of_calculate||0==(null===(e=d.numData)||void 0===e||null===(e=e.count)||void 0===e?void 0:e.count_gain_of_calculate)?h("div",{staticClass:"topItem",style:{backgroundImage:"award"==d.formData.type?"url(".concat(n(585),")"):"url(".concat(n(584),")")},on:{click:function(t){return d.tabChange("award")}}},[h("div",{staticClass:"topCnt",style:{color:"award"==d.formData.type?"#7B542B":null}},[h("div",[d._v(d._s(null===(o=d.numData)||void 0===o||null===(o=o.count)||void 0===o?void 0:o.count_gain_of_calculate))]),d._v(" "),h("div",[d._v(d._s(d.$t("accumulatedAcquisition")))])])]):d._e(),d._v(" "),null!==(r=d.numData)&&void 0!==r&&null!==(r=r.count)&&void 0!==r&&r.count_expend_of_calculate||0==(null===(l=d.numData)||void 0===l||null===(l=l.count)||void 0===l?void 0:l.count_expend_of_calculate)?h("div",{staticClass:"topItem",style:{backgroundImage:"expend"==d.formData.type?"url(".concat(n(585),")"):"url(".concat(n(584),")"),marginLeft:"78px"},on:{click:function(t){return d.tabChange("expend")}}},[h("div",{staticClass:"topCnt",style:{color:"expend"==d.formData.type?"#7B542B":null}},[h("div",[d._v(d._s(null===(c=d.numData)||void 0===c||null===(c=c.count)||void 0===c?void 0:c.count_expend_of_calculate))]),d._v(" "),h("div",[d._v(d._s(d.$t("AccumulatedConsumption")))])])]):d._e()]),d._v(" "),h("div",{staticClass:"head"},d._l(d.headList,(function(t,e){return h("div",{key:e,staticClass:"headItem"},[d._v("\n      "+d._s(t)+"\n    ")])})),0),d._v(" "),h("div",{directives:[{name:"loading",rawName:"v-loading",value:d.isLoading,expression:"isLoading"}],staticClass:"list"},d._l(d.list,(function(t,e){var o,r,l,c,v,m,f;return h("div",{key:e,staticClass:"row"},[h("div",{staticClass:"cell"},[d._v(d._s(d.setType(t)))]),d._v(" "),h("div",{staticClass:"cell"},["unlock_auto_pub_community"==t.source_key?h("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:n(581),alt:""}}):15==t.coins_type?h("div",[h("el-tooltip",{attrs:{content:d.$t("stamina_desc"),placement:"top"}},[h("div",{staticClass:"coinBox",staticStyle:{"margin-bottom":"5px"}},[h("img",{staticClass:"coinImg",attrs:{src:n(226),alt:""}}),d._v(" "),h("span",{staticClass:"coinNum"},[d._v("X "+d._s(t.change_coins_info.free))])])]),d._v(" "),h("div",{staticClass:"coinBox"},[h("img",{staticClass:"coinImg",attrs:{src:n(121),alt:""}}),d._v(" "),h("span",{staticClass:"coinNum"},[d._v("X "+d._s(t.change_coins_info.calculate))])])],1):16==t.coins_type?h("div",[h("div",{staticClass:"coinBox"},[h("img",{staticClass:"coinImg",attrs:{src:n(121),alt:""}}),d._v(" "),h("span",{staticClass:"coinNum"},[d._v("X "+d._s(t.change_coins_info.calculate))])]),d._v(" "),d._m(0,!0)]):h("el-tooltip",{attrs:{disabled:![1,4].includes(t.coins_type),content:1==t.coins_type?"".concat(d.$t("tempCoins"),"：").concat(d.$t("new_stamina_desc")):"".concat(d.$t("calculateCoins"),"：").concat(d.$t("new_credit_desc")),placement:"top"}},[h("div",{staticClass:"coinBox"},[h("img",{staticClass:"coinImg",attrs:{src:d.setCoinImg(t),alt:""}}),d._v(" "),1==t.award_type?h("span",{staticClass:"coinNum"},[d._v("X "+d._s(t.number)+"\n              "+d._s(1==t.award_type?"":d.$t("days")))]):d._e()])])],1),d._v(" "),h("div",{staticClass:"cell"},[d._v(d._s(d.setSoure(t)))]),d._v(" "),h("div",{staticClass:"cell"},[4!=t.source&&7!=t.source&&8!=t.source||!t.source_artwork_info?14==t.source&&t.source_obj_info?h("div",{staticClass:"detailImg"},[h("el-image",{attrs:{fit:"contain",src:d.replaceImageType(null===(l=t.source_obj_info)||void 0===l?void 0:l.image,"low"),"preview-src-list":[null===(c=t.source_obj_info)||void 0===c?void 0:c.image]}})],1):15==t.source&&t.source_obj_info?h("div",{staticClass:"detailImg",on:{click:function(e){d.$router.push(d.localePath("/models/detail/"+t.source_obj_info.obj_id))}}},[null!==(v=t.source_obj_info)&&void 0!==v&&v.image?h("el-image",{attrs:{fit:"contain",src:d.replaceImageType(null===(m=t.source_obj_info)||void 0===m?void 0:m.image,"low")}}):d._e(),d._v(" "),h("div",{staticClass:"modelName"},[d._v(d._s(null===(f=t.source_obj_info)||void 0===f?void 0:f.obj_name))])],1):9!=t.source&&10!=t.source||!t.portfolio_artwork_info?h("span",[d._v(d._s(t.detail))]):h("div",{staticClass:"detailImg",on:{click:function(e){d.$router.push(d.localePath("/artWorkDetail/"+t.portfolio_artwork_info.id))}}},[h("img",{attrs:{src:d.replaceImageType(t.portfolio_artwork_info.image,"low"),alt:""}})]):h("div",{staticClass:"detailImg"},[h("el-image",{attrs:{fit:"contain",src:d.replaceImageType(null===(o=t.source_artwork_info)||void 0===o?void 0:o.image,"low"),"preview-src-list":[null===(r=t.source_artwork_info)||void 0===r?void 0:r.image]}})],1)]),d._v(" "),h("div",{staticClass:"cell"},[d._v(d._s(d.getTimeDiff2(t.update_at)))])])})),0),d._v(" "),h("div",{staticClass:"pagination"},[h("el-pagination",{attrs:{background:"","page-size":5,layout:"total, prev, pager, next, jumper","current-page":d.formData.page,total:d.numData.total},on:{"current-change":d.handleCurrentChange,"update:currentPage":function(t){return d.$set(d.formData,"page",t)},"update:current-page":function(t){return d.$set(d.formData,"page",t)}}})],1)])}),x,!1,null,"5286b8ac",null).exports},created:function(){this.$route.query.type&&(this.tabValue=this.$route.query.type)},methods:{}}),$=(n(2406),Object(w.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"IncentiveTesk"},[e("div",{staticClass:"tabs"},t._l(t.tabList,(function(o,r){return e("div",{key:r,staticClass:"tabItem",class:{"tabItem-activate":t.tabValue==o.value},style:{backgroundImage:t.tabValue==o.value?"url(".concat(n(739),")"):null},on:{click:function(e){t.tabValue=o.value}}},[t._v(t._s(o.name))])})),0),t._v(" "),"task"==t.tabValue?e("awardTasklist"):t._e(),t._v(" "),"award"==t.tabValue?e("awardRecordlist"):t._e()],1)}),[],!1,null,"34a323b7",null));e.default=$.exports},3273:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12),n(8);var o=n(3),r=n(2),l=(n(20),n(10),n(14),n(4),n(23),n(18),n(37),n(6),n(29),n(32),n(59)),c=(n(28),{name:"AiFilterStyleItem",props:{styleInfo:{type:Object,default:function(){return{}}},activeFilter:{type:[String,Number],default:function(){return""}}},computed:{isSelected:function(){return this.styleInfo.id===this.activeFilter?"is-selected":""},getImageUrl:function(){return this.styleInfo.banners&&this.styleInfo.banners.length&&this.styleInfo.banners[0].url||""}},data:function(){return{videoSrc:"",isPlay:!1,videoElm:null,playTimer:null,isLoadError:!1}},beforeDestroy:function(){this.playTimer&&clearTimeout(this.playTimer),this.playTimer=null},methods:{selectItem:function(){this.$emit("selectFilter",this.styleInfo)},pauseVideo:function(){var t=this.$refs.toolsVideo;if(t){if(this.isPlay=!1,this.playTimer)return clearTimeout(this.playTimer),void(this.playTimer=null);t.pause(),t.currentTime=0}},playVideo:function(){var t=this;this.pauseVideo(),this.videoSrc=this.styleInfo.banners&&2===this.styleInfo.banners.length&&this.styleInfo.banners[1].url||"";var e=this.$refs.toolsVideo;e&&(this.playTimer=setTimeout((function(){t.isPlay=!0,e.play(),e.playbackRate=1.25,clearTimeout(t.playTimer),t.playTimer=null}),50))}}}),d=(n(2599),n(0)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-ai-filter-style-item"},[e("div",{staticClass:"filter-style-card-img",class:[t.isSelected],on:{click:function(e){return e.stopPropagation(),t.selectItem.apply(null,arguments)},mouseenter:t.playVideo,mouseleave:t.pauseVideo}},[t.videoSrc?e("video",{ref:"toolsVideo",staticClass:"filter-style-card-video",attrs:{loop:"",playsinline:""}},[e("source",{attrs:{src:t.videoSrc,type:"video/mp4"}})]):t._e(),t._v(" "),t.videoSrc?t._e():e("img",{staticClass:"defImg",attrs:{src:t.getImageUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"filter-style-card-title"},[t._v(t._s(t.styleInfo.name))])])}),[],!1,null,"383cbc84",null),h={name:"AiFilterStyle",components:{AiFilterStyleItem:component.exports},props:{isLoading:{type:Boolean,default:!1}},data:function(){return{activeTab:"",list:[],loading:!1,activeTabInfo:null,activeFilter:""}},mounted:function(){this.getFilterList()},computed:{isSelected:function(){return function(t){return t.id===this.activeFilter?"is-selected":""}}},methods:{getFilterList:function(){var t=this;this.loading=!0,Object(l.r)({type:4}).then((function(e){var n,o=(e&&e.data?e.data:{}).ai_filter,r=void 0===o?[]:o;if([1e4,"10000"].includes(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var l,c=r&&Array.isArray(r)?r:[];t.$set(t,"activeTab",c[0].label||""),t.$set(t,"activeTabInfo",c[0]||null),t.selectFilter(null===(l=t.activeTabInfo)||void 0===l?void 0:l.templates[0]),t.list=c}})).finally((function(){t.loading=!1}))},handleClick:function(){var t=this;this.activeTabInfo=(this.list||[]).find((function(e){return e.label===t.activeTab}))||null},selectFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.activeFilter!==t.id&&!this.isLoading){this.activeFilter=t.id;var e=(null==t?void 0:t.name)||"";this.$emit("selectFilter",this.activeFilter,e,t)}}}},v=h,m=(n(2600),Object(d.a)(v,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"c-fast-tools-ai-filter-style"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[t._l(t.list,(function(t,n){return[e("el-tab-pane",{key:"filter_style_".concat(n),attrs:{label:t.label,name:t.label}})]}))],2),t._v(" "),t.activeTabInfo?e("div",{staticClass:"filter-style-list"},[t._l(t.activeTabInfo.templates,(function(n){return[e("ai-filter-style-item",{key:n.id,attrs:{"style-info":n,"active-filter":t.activeFilter},on:{selectFilter:t.selectFilter}})]}))],2):t._e()],1)}),[],!1,null,null,null).exports),f=n(532),_=n(5),y=n(22),w=n(673),C=n(38),x=n(98),k=n(53),O=n(1),I=n(45);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={name:"AiFilter",components:{AiFilterStyle:m,AiFilterCard:f.a,QuickQueue:x.a},mixins:[w.a],data:function(){return{iconUrl:n(448),style:{},pollingTimer:null,isLoading:!1,imgLoading:!1,uploading:!1,list:[],selectTemplate:"",resultList:[{id:1,url:"",prompt:""}],renderList:[],imgUrl:"",styleName:"",itemInfo:{},UPLOAD:new C.a({type:26}),isShowResult:!1,quickOptions:{}}},mounted:function(){},beforeDestroy:function(){this.stopTask()},computed:j(j(j(j({},Object(O.e)("payment",["paymentInfo","activeState","liteActiveState"])),Object(O.e)("user",["token"])),Object(O.c)("user",["isCompanyAccount"])),{},{isVip:function(){return this.activeState||this.liteActiveState},getResult:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(this.renderList.length?this.renderList[t]:{url:""})||{url:""}}},showCreatBtn:function(){return this.imgUrl&&!this.isLoading&&!this.renderList.some((function(t){return""!==t.url}))},getResultImgUrl:function(){var t;return(null===(t=this.renderList[0])||void 0===t?void 0:t.url)||""},computedPercentage:function(){var t=(this.renderList[0]||{}).process;return void 0===t?0:t},processLoading:function(){return this.isLoading},isShowHandleBtn:function(){return this.imgUrl&&!this.isLoading&&!this.showCreatBtn&&this.getResultImgUrl}}),methods:{preprocessingImages:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.addEventListener("load",(function(){var image=new Image;image.addEventListener("load",(function(){var canvas=document.createElement("canvas"),o=e.resizeToBaseDimension(image.width,image.height,536,584);canvas.width=o.width,canvas.height=o.height,canvas.getContext("2d").drawImage(image,0,0,canvas.width,canvas.height);var r=canvas.toDataURL(t.type,1),l=Object(k.a)(r),c=new File([l],t.name.replace(/\.\w+$/,".".concat(t.type.split("/")[1])),{type:t.type});n(c)})),image.src=r.result})),r.addEventListener("error",(function(){console.log("Failed to read the file."),o(new Error("Failed to read the file."))})),r.readAsDataURL(t)})).catch((function(t){return Promise.reject(new Error("Failed to convert the image to PNG format."))}))},resizeToBaseDimension:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>3?arguments[3]:void 0,o=t/e;return"width"===(t>e?"width":"height")?(t=arguments.length>2?arguments[2]:void 0,e=Math.round(t/o)):(e=n,t=Math.round(e*o)),{width:t,height:e}},handleImageLoad:function(){this.imgLoading=!1},handleBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.token){n.next=3;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 3:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.isLoading){n.next=7;break}return n.abrupt("return");case 7:if(r.includes(t.type)){n.next=10;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 10:return l=t,n.next=13,e.preprocessingImages(t);case 13:if(!(l=n.sent)||l.size){n.next=16;break}return n.abrupt("return",!1);case 16:if(!(l.size/1024/1024>5)){n.next=27;break}return n.prev=17,n.next=20,Object(I.a)(l,5242880);case 20:l=n.sent,n.next=27;break;case 23:return n.prev=23,n.t0=n.catch(17),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 27:return n.next=29,e.checkImageSize(t);case 29:if(n.sent,!e.uploading){n.next=32;break}return n.abrupt("return");case 32:return e.uploading=!0,o.startUpload(l).then((function(t){e.uploading=!1,e.imgLoading=!0,e.imgUrl=t,e.resultList=[{url:e.imgUrl,prompt:""}]})).catch((function(t){console.log(t),e.uploading=!1,e.isLoading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 35:case"end":return n.stop()}}),n,null,[[17,23]])})))()},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;console.log("图片宽度："+t+"px"),console.log("图片高度："+o+"px"),e.$set(e,"style",{width:t,height:o}),n()},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},handleStartTask:function(){if(!this.isLoading)if(this.imgUrl){if(!(this.paymentInfo.calculateCoins<=0&&this.paymentInfo.tempCoins<=0)||this.isCompanyAccount)return this.imgUrl&&!this.resultList[0].prompt?(this.isLoading=!0,void this.extraPrompt(this.imgUrl)):void(this.resultList[0].url&&this.startTask());this.$EventBus.$emit(this.isVip?"showVipComputingDialog":"showNotVipComputingDialog")}else this.$message.warning(this.$t("pleaseUoloadImage"))},handleBeforeUploadEmpty:function(){},handleSelectFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.isLoading){try{this.styleName=e,this.$logEvent("log_actions",{operation:"click_filter_style",behavior_info:e}),this.itemInfo=n}catch(t){console.log("error",t)}var o=this.renderList.some((function(t){return[1,2].includes(null==t?void 0:t.status)||[3].includes(null==t?void 0:t.status)&&(null==t?void 0:t.process)<100}));o?this.$message.warning(this.$t("fastToolsProcessTips")):(this.selectTemplate=t,this.resultList[0].url&&(this.imgUrl=this.resultList[0].url,this.renderList=[],this.isShowResult=!1))}},handleSelectImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";["",null,void 0].includes(t)||this.isLoading||this.imgUrl===t||(this.imgLoading=!0,this.imgUrl=t)},removeImage:function(){this.imgUrl="",this.resultList.forEach((function(t){t.url=""})),this.imgLoading=!1,this.isShowResult=!1,this.renderList=[]},downloadImage:function(){try{this.$logEvent("log_actions",{operation:"click_download_images_on_filter",behavior_info:this.styleName})}catch(t){console.log("error",t)}Object(_.z)(this.getResultImgUrl||"",this.$t("ai_tools_4"))},extraPrompt:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={action:11,meta:{img_2_text:{uri:e}}};return["",null,void 0].includes(e)?(this.$message.warning(this.$t("pleaseUoloadImage")),void(this.isLoading=!1)):Object(y.d)(n).then((function(e){var n,o=null==e||null===(n=e.data)||void 0===n?void 0:n.id;return!!o&&t.pollingPromptTask(o)})).catch((function(){t.isLoading=!1}))},pollingPromptTask:function(t){var e=this;return new Promise((function(n,o){e.isLoading=!0,e.pollingTimer=setTimeout((function(){Object(y.a)({task_ids:[t]}).then((function(r){var l=r.data.items;if(e.quickOptions=l[0],4===l[0].status)return e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.$message.error(e.$t("ServerError")),e.isLoading=!1,void o();if(3===l[0].status){var c=(l[0]||{}).reverse_prompts,d=void 0===c?[]:c;e.resultList.forEach((function(t){t.prompt=Array.isArray(d)&&d.length?d[0]:""})),e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.startTask(),n()}else[1,2].includes(l[0].status)&&e.pollingPromptTask(t)})).catch((function(n){var r;if(e.resultList.length&&(null===(r=e.resultList[0])||void 0===r||!r.prompt))return e.pollingPromptTask(t);e.$message.error(e.$t("ServerError")),e.isLoading=!1,o()}))}),1e3)}))},startTask:function(){var t=this,e={action:4};return e.ai_filter={num:1,scale:"1:1",template_id:this.selectTemplate,de_noising_strength_ratio:50,width:this.style.width,height:this.style.height,image:this.resultList[0].url,prompt:this.resultList[0].prompt},this.selectTemplate?["",null,void 0].includes(e.ai_filter.image)?(this.$message.warning(this.$t("pleaseUoloadImage")),void(this.isLoading=!1)):Object(l.i)(e).then((function(e){var n,o=null==e||null===(n=e.data)||void 0===n?void 0:n.task_id;return!!o&&(t.renderList=[{process:0,status:0},{process:0,status:0},{process:0,status:0}],t.pollingTask(o))})).catch((function(){t.isLoading=!1})):(this.$message.warning(this.$t("fastToolsSelectFilterTips")),void(this.isLoading=!1))},stopTask:function(){this.pollingTimer&&window.clearTimeout(this.pollingTimer),this.pollingTimer=null,this.isLoading=!1},pollingTask:function(t){var e=this;return new Promise((function(n,o){e.isLoading=!0,e.pollingTimer=setTimeout((function(){Object(l.a)({task_ids:[t]}).then((function(r){var l=r.data.items;if(4===l[0].status)return e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.$message.error(e.$t("ServerError")),e.isLoading=!1,void o();if(3===l[0].status){var c=l[0],d=c.result,h=void 0===d?{}:d,v=c.process,m=void 0===v?0:v,f=c.status,_=void 0===f?0:f,y=h.images||[];e.renderList=Array.isArray(y)&&y.length?y:[],(e.renderList||[]).forEach((function(t){e.$set(t,"process",m||0),e.$set(t,"status",_||0)})),e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.isLoading=!1,e.isShowResult=!0,n()}else{var w=l[0],C=w.process,x=void 0===C?0:C,k=w.status,O=void 0===k?0:k;(e.renderList||[]).forEach((function(t){e.$set(t,"process",x||0),e.$set(t,"status",O||0)})),[1,2].includes(l[0].status)&&e.pollingTask(t)}})).catch((function(n){if(!e.renderList.length||e.renderList.length&&!e.renderList[0].url)return e.pollingTask(t);e.$message.error(e.$t("ServerError")),e.isLoading=!1,o()}))}),1e3)}))},handleReMake:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.startSingleTask(t)},startSingleTask:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={action:4};if(n.ai_filter={num:1,scale:"1:1",template_id:this.selectTemplate,de_noising_strength_ratio:50,width:this.style.width,height:this.style.height,image:this.resultList[0].url,prompt:this.resultList[0].prompt},this.selectTemplate){if(!["",null,void 0].includes(n.ai_filter.image))return Object(l.i)(n).then((function(n){var o;if(!(null==n||null===(o=n.data)||void 0===o?void 0:o.task_id))return!1;(t.renderList||[]).forEach((function(o,r){var l,c;o.url===e.url&&(t.$set(o,"status",1),t.$set(o,"process",(null==n||null===(l=n.data)||void 0===l?void 0:l.process)||0),t.$set(o,"id",null==n||null===(c=n.data)||void 0===c?void 0:c.task_id))}))})).catch((function(){}));this.$message.warning(this.$t("pleaseUoloadImage"))}else this.$message.warning(this.$t("fastToolsSelectFilterTips"))}}},L=T,S=(n(2602),Object(d.a)(L,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"c-fast-tools-ai-filter"},[n("div",{staticClass:"top-bar"},[n("div",{staticClass:"top-bar-icon"},[n("img",{attrs:{src:e.iconUrl,alt:""}})]),e._v(" "),n("h1",{staticClass:"top-bar-main-title"},[e._v(e._s(e.$t("ai_filter_h1")))]),e._v(" "),n("div",{staticClass:"top-bar-sub-title"},[e._v(e._s(e.$t("ai_filter_h1_intro")))])]),e._v(" "),n("div",{staticClass:"result-area"},[n("div",{staticClass:"result-area-left"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.imgUrl,expression:"!imgUrl"}],staticClass:"upload-box"},[[n("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"}],staticClass:"image-upload",attrs:{action:"#",drag:"","before-upload":e.handleBeforeUpload,"http-request":e.handleBeforeUploadEmpty,"show-file-list":!1}},[n("i",{staticClass:"el-icon-upload image-upload-icon"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("\n                "+e._s(e.$t("TaskUploadImageDragTips"))),n("em",[e._v(e._s(e.$t("TaskUploadImageClickUploadTips")))])])])]],2),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgUrl,expression:"imgUrl"},{name:"loading",rawName:"v-loading",value:e.imgUrl&&e.imgLoading,expression:"imgUrl && imgLoading"}],staticClass:"show-content"},[e.imgUrl?n("img",{directives:[{name:"show",rawName:"v-show",value:!e.isShowResult,expression:"!isShowResult"}],attrs:{src:e.imgUrl,alt:""},on:{load:e.handleImageLoad,error:e.handleImageLoad}}):e._e(),e._v(" "),e.imgUrl&&e.getResultImgUrl?n("img",{directives:[{name:"show",rawName:"v-show",value:e.isShowResult,expression:"isShowResult"}],attrs:{src:e.getResultImgUrl,alt:""}}):e._e(),e._v(" "),[n("span",{directives:[{name:"show",rawName:"v-show",value:e.imgUrl&&e.imgUrl===(null==this||null===(t=this.resultList[0])||void 0===t?void 0:t.url)&&!e.isLoading,expression:"(imgUrl && imgUrl===this?.resultList[0]?.url) && !isLoading"}],staticClass:"el-image-viewer__close",on:{click:function(t){return t.stopPropagation(),e.removeImage.apply(null,arguments)}}},[n("i",{staticClass:"el-icon-close"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowHandleBtn,expression:"isShowHandleBtn"}],staticClass:"bottom-btn-box"},[n("span",{staticClass:"bottom-download-btn",on:{click:function(t){return t.stopPropagation(),e.downloadImage.apply(null,arguments)}}},[n("i",{staticClass:"iconfont icon-icon_xiazai"})]),e._v(" "),n("span",{staticClass:"bottom-download-btn",on:{mousedown:function(t){e.isShowResult=!1},mouseup:function(t){e.isShowResult=!0}}},[n("i",{staticClass:"iconfont icon-a-duibi1",staticStyle:{"font-size":"18px"}})])])],e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"loading-mask"},[e._v("\n            "+e._s(e.computedPercentage?e.computedPercentage+"%":e.$t("TaskStatusPreparing")+"...")+"\n            "),n("el-progress",{attrs:{percentage:e.computedPercentage,"show-text":!1}}),e._v(" "),n("QuickQueue",{attrs:{quickOptions:e.quickOptions,quickStyle:{height:"40px",fontSize:"14px"}}})],1)],2),e._v(" "),n("div",{staticClass:"bottom-generate-btn",class:[(e.isLoading||!e.imgUrl)&&"bottom-generate-btn-disable"],on:{click:function(t){return t.stopPropagation(),e.handleStartTask.apply(null,arguments)}}},[n("p",{staticClass:"bottom-download-btn-text"},[e._v(e._s(e.$t("startGenerate")))]),e._v(" "),n("p",{staticClass:"bottom-download-btn-text-1"},[e._v(e._s(e.$t("expend"))+" : 12")])])]),e._v(" "),n("div",{staticClass:"result-area-right"},[n("ai-filter-style",{attrs:{"is-loading":e.isLoading},on:{selectFilter:e.handleSelectFilter}})],1)])])}),[],!1,null,null,null));e.default=S.exports},3274:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12),n(8),n(6);var o=n(3),r=n(2),l=(n(20),n(4),n(38)),c=n(45),d=(n(14),n(16),n(221),n(10),n(19),n(43),n(50),n(48),n(29),n(53)),h=(n(28),{props:{item:{type:Object,default:function(){}},index:{type:Number,default:0},size:{type:Number,default:100}},data:function(){return{isDragging:!1,offset:{},draggable:null,container:null,parentW:0,intW:0,intH:0,intT:0,intL:0}},watch:{size:{handler:function(t){this.resizeChildElement()}}},mounted:function(){this.container=document.getElementById("draggable"),this.draggable=this.$refs["rectItem"+this.index],this.parentW=JSON.parse(JSON.stringify(this.container.offsetWidth)),this.intW=JSON.parse(JSON.stringify(parseInt(this.draggable.style.width))),this.intH=JSON.parse(JSON.stringify(parseInt(this.draggable.style.height))),this.intT=JSON.parse(JSON.stringify(parseInt(this.draggable.style.top))),this.intL=JSON.parse(JSON.stringify(parseInt(this.draggable.style.left)))},methods:{resizeChildElement:function(){var t=this.container.offsetWidth/this.parentW;this.draggable.style.top=this.intT*t+"px",this.draggable.style.left=this.intL*t+"px",this.draggable.style.width=this.intW*t+"px",this.draggable.style.height=this.intH*t+"px",this.$emit("change",{index:this.index,top:parseInt(this.draggable.style.top),left:parseInt(this.draggable.style.left),width:parseInt(this.draggable.style.width),height:parseInt(this.draggable.style.height)})},onMousedown:function(t){this.isDragging=!0;var e=this.draggable.getBoundingClientRect();this.offset.x=t.clientX-e.left,this.offset.y=t.clientY-e.top},onMousemove:function(t){if(this.isDragging){var e=t.clientX-this.offset.x-this.container.getBoundingClientRect().left,n=t.clientY-this.offset.y-this.container.getBoundingClientRect().top;e=Math.min(this.container.clientWidth-this.draggable.clientWidth,Math.max(0,e)),n=Math.min(this.container.clientHeight-this.draggable.clientHeight,Math.max(0,n)),this.draggable.style.left=e+"px",this.draggable.style.top=n+"px",this.draggable.style.zIndex=9999}},onMouseup:function(t){this.isDragging=!1,this.draggable.style.zIndex=2,this.intW=JSON.parse(JSON.stringify(parseInt(this.draggable.style.width))),this.intH=JSON.parse(JSON.stringify(parseInt(this.draggable.style.height))),this.intT=JSON.parse(JSON.stringify(parseInt(this.draggable.style.top))),this.intL=JSON.parse(JSON.stringify(parseInt(this.draggable.style.left))),this.$emit("change",{index:this.index,top:this.intT,left:this.intL,width:this.intW,height:this.intH})}}}),v=(n(2628),n(0)),component=Object(v.a)(h,(function(){var t=this,e=t._self._c;return e("div",{ref:"rectItem"+t.index,staticClass:"rectItem",style:{width:t.item.width+"px",height:t.item.height+"px",left:t.item.left+"px",top:t.item.top+"px"},on:{"&mousedown":function(e){return t.onMousedown.apply(null,arguments)},"&mousemove":function(e){return t.onMousemove.apply(null,arguments)},"&mouseup":function(e){return t.onMouseup.apply(null,arguments)},mouseleave:function(e){return e.preventDefault(),t.onMouseup.apply(null,arguments)}}},[e("div",{staticClass:"clear",on:{click:function(e){return t.$emit("delete",t.index)}}},[e("i",{staticClass:"el-icon-close"})])])}),[],!1,null,"48023ff6",null),m=component.exports,f=n(227),_=n(22),y=n(74),w=n(59),C=n(5),x=n(1);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={data:function(){return{dialogVisible:!1,intLoading:!0,intImg:{url:"",width:0,height:0,size:50},MasterDrawing:"",intHeight:0,intWidth:0,mouseX:0,mouseY:0,isMousedown:!1,sizeList:[{name:"400%",value:400},{name:"200%",value:200},{name:"125%",value:125},{name:"100%",value:100},{name:"75%",value:75},{name:"50%",value:50},{name:"25%",value:25},{name:"10%",value:10},{name:"fitToScreen",value:50},{name:"ai_erase3",value:100}],toolTyoe:"smear",toolList:[{name:this.$t("erasePage1"),icon:"iconfont icon-tumo",value:"smear"},{name:this.$t("erasePage2"),icon:"iconfont icon-juxing",value:"rectangle"},{name:this.$t("erasePage3"),icon:"iconfont icon-taosuo",value:"noose"}],brushSize:40,canvas:null,context:null,startX:0,startY:0,blankCanvas:"",currentStep:-1,historyList:[],isDrawing:!1,uploading:!1,UPLOAD:new l.a({type:30}),drewPoints:[],rectList:[],imgSegmentUrlList:[],hoverMaskUrl:"",hasHover:!0,debounceHandleMouseMove:null,imagesList:[],loading:!1,inTimes:!1,retryCount:0,jsonUrl:"",imgUrl:"",imgShow:!0,lengthOfLongSide:0,consumption:1,quickOptions:{}}},watch:{dialogVisible:{handler:function(t){t||(this.intImg={url:"",width:0,height:0,size:100},this.toolTyoe="smear",this.historyList=[],this.imagesList=[],this.debounceHandleMouseMove=null,this.currentStep=-1,this.imgUrl="",this.imgShow=!0,this.MasterDrawing="")}}},components:{rectItemVue:m,QuickQueue:n(98).a},computed:O(O({},Object(x.c)("user",["isLoggedIn","accountSettingsData","cdnHostFun"])),{},{setCanvasStyle:function(){var t="";if("smear"==this.toolTyoe){var e=this.brushSize;e<10&&(e=10);var n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'.concat(e,'" height="').concat(e,'" viewBox="0 0 32 32">\n        <path fill="none" stroke="#000" stroke-linejoin="miter" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="1.9048" d="M31.048 16c0 8.311-6.737 15.048-15.048 15.048s-15.048-6.737-15.048-15.048c0-8.311 6.737-15.048 15.048-15.048s15.048 6.737 15.048 15.048z"></path>\n        </svg>'),o=btoa(n),r="data:image/svg+xml;base64,".concat(o);t="url(".concat(r,") ").concat(e/2," ").concat(e/2,", auto")}return"rectangle"==this.toolTyoe&&(t="url(https://".concat(this.cdnHostFun(),"/20240312/cb26a6cd-7ca5-4e32-a633-df7094cb570d.cur) 8 8, auto")),"noose"==this.toolTyoe&&(t="url(https://".concat(this.cdnHostFun(),"/20240307/3b553f30-1a01-4287-85b9-b1840754b717.cur) 8 8, auto")),"drag"==this.toolTyoe&&(t="grab"),t}}),created:function(){this.debounceHandleMouseMove=Object(y.throttle)(this.handleMouseMove,300)},mounted:function(){document.addEventListener("keydown",this.shortcutKey)},beforeDestroy:function(){document.removeEventListener("keydown",this.shortcutKey)},methods:{reupload:function(){this.dialogVisible=!1,this.$logEvent("log_actions",{operation:"click_reupload_image",behavior_info:"on_ai_remove"})},shortcutKey:function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&"z"===t.key.toLowerCase()?this.handleNext():(t.ctrlKey||t.metaKey)&&"z"===t.key.toLowerCase()&&this.handlePre()},dwn:function(){this.$logEvent("log_actions",{operation:"click_download_image",behavior_info:"on_ai_remove"}),Object(C.z)(this.imgUrl)},changeTool:function(t){this.toolTyoe=t.value;var e="smudge";"rectangle"==this.toolTyoe&&(e="rectangular_marquee"),"noose"==this.toolTyoe&&(e="lasso_tool"),this.$logEvent("log_actions",{operation:"click_"+e,behavior_info:"on_ai_remove"}),"quick"!=this.toolTyoe||this.imgSegmentUrlList.length||this.getSegmentMaskData()},handleMouseMove:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.checkCoordinate(t.offsetX,t.offsetY,e.imagesList);case 2:(o=n.sent)&&-1!=o&&e.hasHover&&e.setHoverMask(o);case 4:case"end":return n.stop()}}),n)})))()},setHoverMask:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!["",null,void 0,-1].includes(t)){n.next=3;break}return e.hoverMaskUrl="",n.abrupt("return");case 3:(r=new Image).src=e.imgSegmentUrlList[t],r.onload=Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=document.createElement("canvas")).width=e.intImg.width,n.height=e.intImg.height,(o=n.getContext("2d")).clearRect(0,0,e.intImg.width,e.intImg.height),o.globalCompositeOperation="source-in",o.fillStyle="#21FEFF",o.fillRect(0,0,e.intImg.width,e.intImg.height),o.globalCompositeOperation="source-over",o.drawImage(r,0,0,e.intImg.width,e.intImg.height),e.hoverMaskUrl=n.toDataURL();case 11:case"end":return t.stop()}}),t)})));case 6:case"end":return n.stop()}}),n)})))()},selectRegion:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("quick"==e.toolTyoe){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.checkCoordinate(t.offsetX,t.offsetY,e.imagesList);case 4:(o=n.sent)&&-1!=o&&e.selectSegmentMask(o);case 6:case"end":return n.stop()}}),n)})))()},selectSegmentMask:function(t){var e=this,n=new Image,o=this.$refs.canvas.getContext("2d"),r=this.intImg,l=r.width,c=r.height;n.src=this.imgSegmentUrlList[t],n.onload=function(){for(var t=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],i=0;i<t.length;i+=2)o.drawImage(n,0+4*t[i],0+4*t[i+1],l,c);o.drawImage(n,0,0,l,c),e.saveToHistory()}},checkCoordinate:function(t,e,n){var r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",r.detectClickedImage(t,e,n));case 1:case"end":return o.stop()}}),o)})))()},detectClickedImage:function(t,e,n){for(var o=this.canvas.width/this.canvas.offsetWidth,i=n.length-1;i>=0;i--){var r=n[i],l=parseInt(t*o),c=parseInt(e*o);if(this.checkPixelTransparency(r,l,c))return i}},checkPixelTransparency:function(t,e,n){return 0!==t.data[4*(e+n*t.width)+3]},getSegmentMaskData:function(){var t=this;if(!(this.loading||this.imgSegmentUrlList.length||this.uploading)){this.loading=!0;var e={image_url:this.intImg.url,width:this.intImg.width,height:this.intImg.height};Object(f.b)(e).then((function(e){1e4==e.status.code&&t.getTaskInfo([e.data.id])})).catch((function(e){t.loading=!1}))}},getTaskInfo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o={};o.task_ids=t,o.scene=1,Object(_.a)(o).then((function(o){var r,l,c,d,h,v;if(1e4==o.status.code)if(e.quickOptions=null===(r=o.data)||void 0===r?void 0:r.items[0],null!==(l=o.data)&&void 0!==l&&l.items[0]&&3==(null===(c=o.data)||void 0===c||null===(c=c.items[0])||void 0===c?void 0:c.status))if(clearTimeout(e.inTimes),e.jsonUrl=null===(v=o.data)||void 0===v?void 0:v.items[0].segment,1==n)e.loadJsonFile(e.jsonUrl);else{var m,f;e.imgUrl=null===(m=o.data)||void 0===m||null===(m=m.items[0])||void 0===m||null===(m=m.img_uris[0])||void 0===m?void 0:m.url;var img=new Image;img.src=null===(f=o.data)||void 0===f||null===(f=f.items[0])||void 0===f||null===(f=f.img_uris[0])||void 0===f?void 0:f.url,img.onload=function(){e.intImg.url=img.src,e.uploading=!1,e.loading=!1,e.intLoading=!1,e.rectList=[],e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.saveToHistory()},img.onerror=function(){e.intImg.url=img.src,e.uploading=!1,e.loading=!1,e.intLoading=!1,e.rectList=[],e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.saveToHistory()}}else null!==(d=o.data)&&void 0!==d&&d.items[0]&&4==(null===(h=o.data)||void 0===h||null===(h=h.items[0])||void 0===h?void 0:h.status)?(clearTimeout(e.inTimes),e.$message.warning(e.$t(1==n?"获取切片失败":"消除失败")),e.loading=!1,e.intLoading=!1,e.uploading=!1):(clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t,n)}),1e3))})).catch((function(t){e.$message.warning(e.$t(1==n?"获取切片失败":"消除失败")),e.loading=!1,e.uploading=!1,e.intLoading=!1}))},loadJsonFile:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch(e).then((function(e){return e.ok||t.$message.error(t.$t("ServerError")),e.json()})).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initCanvas(null==data?void 0:data.result);case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(n){console.error("There has been a problem with your fetch operation:",n),0===t.retryCount?(t.loadJsonFile(e).finally((function(){t.loading=!1})),t.retryCount++):t.$message.error(t.$t("ServerError"))}))},initCanvas:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return data=t.length>0&&void 0!==t[0]?t[0]:[],e.imgSegmentUrlList=data.map((function(t){return"data:image/png;base64,".concat(t.mask_png)})),n.next=4,e.loadAllMask(e.imgSegmentUrlList);case 4:e.imagesList=n.sent;case 5:case"end":return n.stop()}}),n)})))()},loadAllMask:function(){var t=this,source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.intImg||{},n=e.width,o=e.height,r=(source||[]).map((function(t){return new Promise((function(e,n){var img=new Image;img.onload=function(){return e(img)},img.onerror=function(t){return n(t)},img.src=t}))}));return Promise.all(r).then((function(e){for(var r=[],i=0;i<e.length;i++){var img=e[i],l=document.createElement("canvas");l.width=n,l.height=o;var c=l.getContext("2d");c.drawImage(img,0,0,t.intImg.width,t.intImg.height);var d=c.getImageData(0,0,t.intImg.width,t.intImg.height);d.data;c.putImageData(d,0,0);var h=l.toDataURL();t.$set(t.imgSegmentUrlList,i,h);var v=c.getImageData(0,0,t.intImg.width,t.intImg.height);r.push(v),l=null,c=null}return r}))},show:function(t){var e=this;this.currentStep=-1,this.historyList=[],this.rectList=[],this.toolTyoe="smear",this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.intImg.url="",this.imgUrl="",this.MasterDrawing="",this.imagesList=[],this.debounceHandleMouseMove=null,this.intLoading=!0,this.$nextTick((function(){e.intImg.url=t,e.MasterDrawing=t,e.dialogVisible=!0,e.imgLoad()}))},intSize:function(){var t=window.innerHeight-240,e=this.intImg.height;this.intImg.width>2*this.intImg.height&&(t=window.innerWidth-100,e=window.innerWidth),this.intImg.size=parseInt(t/e*100)},changeSize:function(t){var e=this;if("fitToScreen"==t.name){var n=this.$refs.draggable;return n.style.left=null,n.style.top=null,void this.$nextTick((function(){e.intSize()}))}this.intImg.size=t.value},setConsumption:function(){this.consumption=1,this.lengthOfLongSide>=1024&&this.lengthOfLongSide<=2048?this.consumption=1.5:this.lengthOfLongSide>=2048&&this.lengthOfLongSide<=4096&&(this.consumption=4)},imgLoad:function(){this.intLoading=!0;var img=new Image;img.src=this.intImg.url;var t=this;img.onload=function(){t.lengthOfLongSide=Math.max(this.width,this.height),t.setConsumption(),t.intImg.width=this.width,t.intImg.height=this.height,t.intSize(),t.intLoading=!1,t.$nextTick((function(){t.canvas=t.$refs.canvas,t.context=t.canvas.getContext("2d"),t.context.fillStyle="rgba(255, 255, 255, 1)",t.context.lineJoin="round",t.context.lineCap="round",t.rectCanvas=t.$refs.rectCanvas,t.rectText=t.rectCanvas.getContext("2d"),t.rectText.strokeStyle="rgba(0,0,0,1)",t.rectText.fillStyle="rgba(255, 255, 255, 1)",t.rectText.lineJoin="round",t.rectText.lineCap="round",t.blankCanvas=t.canvas.toDataURL(),t.saveToHistory()}))},img.onerror=function(){t.$message.error(t.$t("ai_erase4")),t.intLoading=!1}},downElement:function(t){if("drag"==this.toolTyoe){this.isMousedown=!0;var e=this.$refs.draggable;this.mouseX=t.clientX-e.offsetLeft,this.mouseY=t.clientY-e.offsetTop}},moveElement:function(t){if(this.isMousedown&&"drag"==this.toolTyoe){var e=this.$refs.draggable;e.style.left=t.clientX-this.mouseX+"px",e.style.top=t.clientY-this.mouseY+"px"}},seupElement:function(){"drag"==this.toolTyoe&&(this.isMousedown=!1)},startDrawing:function(t){if(["smear","noose"].includes(this.toolTyoe))if(this.isDrawing=!0,this.startX=t.offsetX,this.startY=t.offsetY,"smear"==this.toolTyoe)this.context.strokeStyle="#F14E4E",this.context.lineWidth=this.brushSize<10?10:this.brushSize,this.context.setLineDash([]);else if("noose"==this.toolTyoe){var e=this.$refs.draggable;this.context.strokeStyle="rgba(0,0,0,1)";var n=e.getBoundingClientRect();this.drewPoints.push([{x:t.clientX-n.left,y:t.clientY-n.top}]),this.context.setLineDash([10,5]),this.context.lineWidth=2}},draw:function(t){if(this.isDrawing){var e,n,o=this.canvas.width/this.canvas.offsetWidth;if(this.context.scale(o,o),"smear"==this.toolTyoe){var r=t.offsetX,l=t.offsetY;this.context.beginPath(),this.context.moveTo(this.startX,this.startY),this.context.lineTo(r,l),this.context.stroke(),this.startX=r,this.startY=l}else if("noose"==this.toolTyoe){var c,d,h=this.$refs.draggable.getBoundingClientRect();c=t.clientX,d=t.clientY;var v=this.drewPoints[this.drewPoints.length-1];v.push({x:c-h.left,y:d-h.top});var m=v[0],f=v[1],_=v.length;this.context.beginPath(),this.context.moveTo(m.x,m.y);for(var i=1;i<_;i++){var y=(n=f,{x:(e=m).x+(n.x-e.x)/2,y:e.y+(n.y-e.y)/2});this.context.quadraticCurveTo(m.x,m.y,y.x,y.y),m=v[i],f=v[i+1]}this.context.lineTo(m.x,m.y),this.context.stroke()}this.context.scale(1/o,1/o)}},stopDrawing:function(){["smear","noose"].includes(this.toolTyoe)&&this.isDrawing&&(this.isDrawing=!1,"noose"==this.toolTyoe&&(this.context.closePath(),this.context.stroke(),this.context.fill()),this.saveToHistory())},startRectDrawing:function(t){"rectangle"==this.toolTyoe&&(this.isDrawing=!0,this.startX=t.offsetX,this.startY=t.offsetY)},rectDraw:function(t){var e=this;if(this.isDrawing){var n=t.offsetX,o=t.offsetY;this.rectText.clearRect(0,0,this.rectCanvas.width,this.rectCanvas.height),this.$nextTick((function(){var t=e.rectCanvas.width/e.rectCanvas.offsetWidth;e.rectText.scale(t,t),e.rectText.beginPath(),e.rectText.rect(e.startX,e.startY,n-e.startX,o-e.startY),e.rectText.fill(),e.rectText.stroke(),e.rectText.scale(1/t,1/t)})),this.rectCanvas.style.zIndex=9999}},stopRectDrawing:function(t){if("rectangle"==this.toolTyoe&&this.isDrawing){this.isDrawing=!1,this.rectText.clearRect(0,0,this.rectCanvas.width,this.rectCanvas.height);var e=t.offsetX,n=t.offsetY;this.rectList.push({left:e-this.startX>0?this.startX:e,top:n-this.startY>0?this.startY:n,width:Math.abs(e-this.startX),height:Math.abs(n-this.startY)}),this.saveToHistory(),this.rectCanvas.style.zIndex=2}},rectDelete:function(t){this.rectList.splice(t,1)},rectChange:function(t){this.rectList[t.index].top=t.top,this.rectList[t.index].left=t.left,this.rectList[t.index].width=t.width,this.rectList[t.index].height=t.height},saveToHistory:function(){var t=JSON.parse(JSON.stringify(this.rectList)),e=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),img=JSON.parse(JSON.stringify(this.intImg.url));this.currentStep++,1==this.currentStep&&this.historyList.splice(1,this.historyList.length-1),this.historyList.push({currentImageData:e,rects:t,img:img}),this.currentStep=this.historyList.length-1},handlePre:function(){this.historyList.length>0&&this.currentStep>0&&(this.currentStep--,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.historyList[this.currentStep].currentImageData,0,0),this.rectList=JSON.parse(JSON.stringify(this.historyList[this.currentStep].rects)),this.intImg.url=JSON.parse(JSON.stringify(this.historyList[this.currentStep].img)))},handleNext:function(){this.currentStep<this.historyList.length-1&&(this.currentStep++,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.historyList[this.currentStep].currentImageData,0,0),this.rectList=JSON.parse(JSON.stringify(this.historyList[this.currentStep].rects)),this.intImg.url=JSON.parse(JSON.stringify(this.historyList[this.currentStep].img)))},handleReset:function(){this.historyList.length>1&&(this.currentStep=-1,this.historyList=[],this.rectList=[],this.toolTyoe="smear",this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.intImg.url=this.MasterDrawing,this.imgUrl="",this.imgLoad())},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;e.$set(e,"style",{width:t,height:o});var r=[t,o].every((function(t){return t<=4096}));n(r)},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},uploadMaskImage:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,i,l,c,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoggedIn){e.next=3;break}return t.$EventBus.$emit("openLoginDialog"),e.abrupt("return");case 3:if(t.intImg.width){e.next=5;break}return e.abrupt("return");case 5:if(!t.uploading&&!t.loading){e.next=7;break}return e.abrupt("return");case 7:for(t.$logEvent("log_actions",{operation:"click_start_remove",behavior_info:"on_ai_remove"}),t.uploading=!0,t.loading=!0,(n=document.createElement("canvas")).width=t.intImg.width,n.height=t.intImg.height,(o=n.getContext("2d")).clearRect(0,0,n.width,n.height),r=t.context.getImageData(0,0,t.canvas.width,t.canvas.height),i=0;i<r.data.length;i+=4)255===r.data[i]&&255===r.data[i+1]&&255===r.data[i+2]||(r.data[i]=255,r.data[i+1]=255,r.data[i+2]=255);if(o.putImageData(r,0,0),l=t.canvas.width/t.canvas.offsetWidth,t.rectList.length>0&&t.rectList.forEach((function(t){o.fillStyle="rgba(255, 255, 255, 1)",o.beginPath(),o.rect(t.left*l,t.top*l,t.width*l,t.height*l),o.fill()})),(c=n.toDataURL())!==t.blankCanvas||0!=t.rectList.length){e.next=26;break}return t.uploading=!1,t.loading=!1,t.$message.warning(t.$t("erasePage4")),e.abrupt("return");case 26:return h=t.UPLOAD,v=Object(d.a)(c),e.next=30,t.checkImageSize(v);case 30:if(e.sent){e.next=36;break}return t.$message.warning(t.$t("ImageSizeExceedsError")),t.uploading=!1,t.loading=!1,e.abrupt("return");case 36:return e.abrupt("return",h.startUpload(v,{name:"draft-design-image".concat(Date.now(),".png"),type:"png",category:46}).then((function(e){var n={image_url:t.intImg.url,mask_url:e,width:t.intImg.width,height:t.intImg.height};return Object(w.b)(n).then((function(e){1e4==e.status.code&&t.getTaskInfo([e.data.task_id],2)}))})).catch((function(){t.uploading=!1,t.loading=!1})));case 37:case"end":return e.stop()}}),e)})))()}}},$=I,j=(n(2629),n(2630),Object(v.a)($,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"aiErase",fullscreen:!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.intLoading,expression:"intLoading"}],staticClass:"main"},[e("div",{staticClass:"top"},[e("div",{staticClass:"topItem"},[e("div",{staticClass:"back",on:{click:function(e){t.dialogVisible=!1}}},[e("i",{staticClass:"el-icon-back"})])]),t._v(" "),e("div",{staticClass:"topItem",class:{disabledStyle:t.intLoading}},[e("div",{staticClass:"bntBox"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsUndo"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:1==t.historyList.length||0==t.currentStep},on:{click:function(e){return t.handlePre()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon3"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsRedo"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:t.currentStep==t.historyList.length-1},on:{click:function(e){return t.handleNext()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon2"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("S_ResetPrompt"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:t.historyList.length<2},on:{click:function(e){return t.handleReset()}}},[e("i",{staticClass:"el-icon-refresh"})])])],1)]),t._v(" "),e("div",{staticClass:"topItem",class:{disabledStyle:t.intLoading||t.loading}},[e("div",{staticClass:"rightBnt",on:{click:function(e){!t.loading&&t.reupload()}}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" "),e("span",[t._v(t._s(t.$t("CreativeCenterPopup33")))])]),t._v(" "),e("div",{staticClass:"rightBnt",class:{disabledStyle:!t.imgUrl},on:{click:function(e){t.imgUrl&&t.dwn()}}},[e("i",{staticClass:"iconfont icon-icon_xiazai"}),t._v(" "),e("span",[t._v(t._s(t.$t("Download")))])])])]),t._v(" "),e("div",{staticClass:"right",class:{disabledStyle:t.intLoading}},[e("div",{staticClass:"dragIcon",on:{click:function(e){"drag"==t.toolTyoe?t.toolTyoe="smear":t.toolTyoe="drag"}}},[e("i",{staticClass:"iconfont icon-zhuashou-copy",style:{color:"drag"==t.toolTyoe?"#4784FF":null}})]),t._v(" "),e("div",{staticClass:"sizeBox"},[e("div",{staticClass:"sizeBnt",class:{disabledStyle:t.intImg.size<=10},on:{click:function(e){t.intImg.size>10&&(t.intImg.size-=10)}}},[e("i",{staticClass:"el-icon-minus"})]),t._v(" "),e("el-popover",{attrs:{placement:"top",trigger:"hover","visible-arrow":!1,"popper-class":"sizeListBox"}},[e("div",{staticClass:"sizeList"},t._l(t.sizeList,(function(n,o){return e("div",{key:o,staticClass:"sizeItem",on:{click:function(e){return t.changeSize(n)}}},[t._v(t._s(t.$t(n.name)))])})),0),t._v(" "),e("div",{staticClass:"sizeNum",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.intImg.size)+"%")])]),t._v(" "),e("div",{staticClass:"sizeBnt",class:{disabledStyle:t.intImg.size>=400},on:{click:function(e){t.intImg.size<400&&(t.intImg.size+=10)}}},[e("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),e("div",{staticClass:"compare",on:{mousedown:function(e){t.imgShow=!1},mouseup:function(e){t.imgShow=!0}}},[e("i",{staticClass:"iconfont icon-icon_duibi"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_erase2")))])])]),t._v(" "),e("div",{staticClass:"left",class:{disabledStyle:t.intLoading}},t._l(t.toolList,(function(n,o){return e("div",{key:o,staticClass:"toolItem",class:{activateToolItem:t.toolTyoe==n.value},on:{click:function(e){return t.changeTool(n)}}},[e("i",{class:n.icon}),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))]),t._v(" "),"smear"==n.value&&"smear"==t.toolTyoe?e("div",{staticClass:"lineSize"},[e("span",[t._v(t._s(t.$t("Size")))]),t._v(" "),e("el-slider",{attrs:{"show-input":"","show-input-controls":!1,min:10},model:{value:t.brushSize,callback:function(e){t.brushSize=e},expression:"brushSize"}})],1):t._e()])})),0),t._v(" "),t.intLoading?t._e():e("div",{ref:"draggable",staticClass:"draggable",style:{width:t.intImg.width*t.intImg.size/100+"px",height:t.intImg.height*t.intImg.size/100+"px",cursor:t.setCanvasStyle},attrs:{id:"draggable"},on:{mousedown:function(e){return e.preventDefault(),t.downElement.apply(null,arguments)},mousemove:function(e){return e.preventDefault(),t.moveElement.apply(null,arguments)},mouseup:function(e){return e.preventDefault(),t.seupElement.apply(null,arguments)}}},[t.loading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"laodMsk"}):t._e(),t._v(" "),t.loading?e("div",{staticClass:"quick-box"},[e("QuickQueue",{staticClass:"quick-con",attrs:{quickOptions:t.quickOptions}})],1):t._e(),t._v(" "),t.intImg.url?e("img",{directives:[{name:"show",rawName:"v-show",value:t.imgShow,expression:"imgShow"}],attrs:{src:t.intImg.url,alt:""}}):t._e(),t._v(" "),t.MasterDrawing?e("img",{directives:[{name:"show",rawName:"v-show",value:!t.imgShow,expression:"!imgShow"}],attrs:{src:t.MasterDrawing,alt:""}}):t._e(),t._v(" "),e("canvas",{ref:"canvas",attrs:{width:t.intImg.width,height:t.intImg.height},on:{"&mousedown":function(e){return t.startDrawing.apply(null,arguments)},"&mousemove":function(e){"quick"==t.toolTyoe?t.debounceHandleMouseMove(e):t.draw(e)},"&mouseup":function(e){return t.stopDrawing.apply(null,arguments)},mouseenter:function(e){t.hasHover=!0},mouseleave:function(e){t.hasHover=!1,t.hoverMaskUrl="",t.stopDrawing()},mousedown:t.selectRegion}}),t._v(" "),t.hoverMaskUrl?e("img",{staticClass:"segment-image-draw-img-hover-mask",style:{width:t.intImg.width*t.intImg.size/100+"px",height:t.intImg.height*t.intImg.size/100+"px"},attrs:{src:t.hoverMaskUrl,alt:""}}):t._e(),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:"rectangle"==t.toolTyoe,expression:"toolTyoe == 'rectangle'"}],ref:"rectCanvas",staticClass:"rectCanvas",attrs:{width:t.intImg.width,height:t.intImg.height},on:{"&mousedown":function(e){return t.startRectDrawing.apply(null,arguments)},"&mousemove":function(e){return t.rectDraw.apply(null,arguments)},"&mouseup":function(e){return t.stopRectDrawing.apply(null,arguments)}}}),t._v(" "),t._l(t.rectList,(function(n,o){return e("rectItemVue",{key:"rect"+o,attrs:{item:n,index:o,size:t.intImg.size},on:{delete:t.rectDelete,change:t.rectChange}})}))],2),t._v(" "),e("el-button",{staticClass:"start",class:{disabledStyle:t.intLoading},attrs:{loading:t.uploading},on:{click:t.uploadMaskImage}},[e("i",{staticClass:"iconfont icon-mofabang"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_erase1"))+"（ "+t._s(t.$t("PhysicalExertion")+"："+t.consumption)+" ）")])])],1)])}),[],!1,null,"49f31642",null)),T=j.exports;function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={data:function(){return{isUploading:!1}},computed:S(S({},Object(x.c)("user",["cdnHostFun"])),{},{exList:function(){return["https://".concat(this.cdnHostFun(),"/static/upload/20240305/6cde277a-f629-4056-ae19-d90f825d434e.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240305/a45133d6-909b-45d5-b529-bae08ab839e0.JPG"),"https://".concat(this.cdnHostFun(),"/static/upload/20240320/9fa4862a-1c6e-4354-82be-a2788d94821b.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240305/da534cbf-5591-4f5e-ba90-31fe26654d6f.jpg")]}}),components:{aiEraseVue:T},methods:{openWorkArea:function(t){this.$refs.aiEraseVue.show(t)},handleImgUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isUploading){n.next=2;break}return n.abrupt("return");case 2:if(r=t.raw,e.isUploading=!0,!(r.size/1024/1024>5)){n.next=16;break}return n.prev=5,n.next=8,Object(c.a)(r,5242880);case 8:r=n.sent,n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(5),console.error("Compression failed:",n.t0),e.isUploading=!1,n.abrupt("return");case 16:e.$refs.aiEraseVue.intLoading=!0,new l.a({type:30}).startUpload(r,{name:"train_img".concat(Date.now(),".png"),type:"png",size:r.size}).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.aiEraseVue.show(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){30005==t.code?e.$message.error(e.$t("uploadImageViolatesRules")):e.$message.error(e.$t("uploadError")),e.$refs.aiEraseVue.intLoading=!1})).finally((function(){e.isUploading=!1}));case 19:case"end":return n.stop()}}),n,null,[[5,11]])})))()}},head:function(){return{title:this.$t("seoEraser_tag_title"),meta:[{hid:"description",name:"description",content:this.$t("seoEraser_tag_desc")},{hid:"keywords",name:"keywords",content:this.$t("AIEraserKeyword")},{hid:"og:title",name:"og:title",content:this.$t("seoEraser_tag_title")},{hid:"og:description",name:"og:description",content:this.$t("seoEraser_tag_desc")}]}}},P=D,E=(n(2631),Object(v.a)(P,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai_erase"},[e("img",{staticClass:"topIcon",attrs:{src:n(746),alt:""}}),t._v(" "),e("h1",{staticClass:"title"},[t._v(t._s(t.$t("ai_erase")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("ai_erase_tip")))]),t._v(" "),e("div",{staticClass:"cnt"},[e("div",{staticClass:"left"},[e("video",{attrs:{src:"https://".concat(this.cdnHostFun(),"/20240228/5d70fb9c-1d3a-4a55-91ff-655ff07e9b27.mp4"),loop:"",autoplay:"",muted:""},domProps:{muted:!0}})]),t._v(" "),e("div",{staticClass:"right"},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.isUploading,expression:"isUploading"}],ref:"upload",staticClass:"uploadBox",attrs:{multiple:!1,"show-file-list":!1,"auto-upload":!1,accept:".jpg, .jpeg, .webp, .png",drag:"",action:"/","on-change":t.handleImgUpload}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("TaskUploadImageClickUploadTips")))])]),t._v(" "),e("div",{staticClass:"tip"},[e("i",{staticClass:"el-icon-bottom"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_tools_9")))])]),t._v(" "),e("div",{staticClass:"ex"},t._l(t.exList,(function(n,o){return e("img",{key:o,attrs:{src:n,alt:""},on:{click:function(e){return t.openWorkArea(n)}}})})),0)],1)]),t._v(" "),e("aiEraseVue",{ref:"aiEraseVue",on:{reupload:function(e){t.$refs.upload.$el.querySelector("input").click()}}})],1)}),[],!1,null,"4f3e28fb",null));e.default=E.exports},3278:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12);var o=n(3),r=n(2),l=(n(20),n(16),n(32),n(10),n(19),n(28),n(8),n(4),n(23),n(18),n(37),n(6),n(1)),c=n(334),d=n(30),h=n(33),v=n(5),m=n(260),f=n(73),_={name:"UnlockConfirmDialog",props:{},data:function(){return{isShowDialog:!1,isAutoUnlock:!0,price:0,no:0,from:""}},methods:{show:function(t,e,n){this.$logEvent("log_actions",{operation:"ai_vedio_pay_pop_show",behavior_info:"on_ai_vedio_page",behavior_info_sub:"pop_2"}),this.isShowDialog=!0,this.isAutoUnlock=!0,this.price=e,this.no=t,this.from=n,this.$emit("exitFullscreen")},close:function(){this.isShowDialog=!1,this.price=0,this.no=0,this.from=""},handleUnlock:function(){this.$logEvent("log_actions",{operation:"finish_unlock",behavior_info:"on_ai_vedio_page",behavior_info_sub:this.isAutoUnlock?1:0}),this.$emit("unlock",this.no,this.from),Object(f.b)({ai_video_auto_play:this.isAutoUnlock?1:2,mode:1}),this.close()}}},y=(n(2917),n(0)),w=Object(y.a)(_,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"unlock-confirm-dialog",attrs:{width:"416px",visible:t.isShowDialog,"show-close":!1,"destroy-on-close":!0},on:{"update:visible":function(e){t.isShowDialog=e}}},[e("i",{staticClass:"unlock-confirm-dialog-close el-icon-close",on:{click:t.close}}),t._v(" "),e("div",{staticClass:"unlock-confirm-dialog-title"},[t._v(t._s(t.$t("photography6")))]),t._v(" "),e("div",{staticClass:"unlock-confirm-dialog-content words-wrap"},[e("span",{staticClass:"txt-1"},[t._v(t._s(t.$t("UnlockTxt1",{number:t.price})))]),t._v(" "),e("img",{staticClass:"icon",attrs:{src:n(121),alt:"credit"}}),t._v(" "),e("span",{staticClass:"txt-2"},[t._v(t._s(t.$t("UnlockTxt2",{number:1})))])]),t._v(" "),e("div",{staticClass:"unlock-confirm-dialog-btns"},[e("el-button",{staticClass:"leave",on:{click:t.close}},[t._v(t._s(t.$t("BrutalExit")))]),t._v(" "),e("el-button",{staticClass:"unlock",on:{click:t.handleUnlock}},[t._v("\n\t\t\t"+t._s(t.$t("UnlockNow"))+"\n\t\t")])],1),t._v(" "),e("div",{staticClass:"unlock-confirm-dialog-auto-unlock"},[e("el-checkbox",{model:{value:t.isAutoUnlock,callback:function(e){t.isAutoUnlock=e},expression:"isAutoUnlock"}},[t._v(t._s(t.$t("AutoUnlock")))])],1)])}),[],!1,null,null,null).exports,C=(n(89),n(71),n(138)),x=n(137),k=n(66);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $={name:"UnlockBuyDialog",provide:function(){return{top:this}},props:{},components:{PaymentForm:C.a,RightPart:x.a},data:function(){return{isShowDialog:!1,isAutoUnlock:!0,isYearly:!1,language:"en",goodsData:[{cp_product_id:"calculate1",btnLoad:!1,bgUrl:"mall/mall_credit_1.webp"},{cp_product_id:"calculate4",btnLoad:!1,bgUrl:"mall/mall_credit_2.webp"},{cp_product_id:"calculate5",btnLoad:!1,bgUrl:"mall/mall_credit_3.webp"}],subYearly3:{},step:"inGoods",defaultThirdType:0,goodsId:"",isUpgrade:!1,btnLabel:"",loading:!1,dotFrom:"ai_video_detail_pop"}},mounted:function(){this.$EventBus.$on("showUnlockBuyDialog",this.show),this.language=this.$i18n.locale.includes("zh")||this.$i18n.locale.includes("ZH")?"zh":"en"},destroyed:function(){this.$EventBus.$off("showUnlockBuyDialog",this.show)},computed:I(I(I({},Object(l.e)("user",["cdnHost","userInfo"])),Object(l.e)("payment",["subThirdType","paymentInfo"])),{},{isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount},isFont2level:function(){var t,e=(this.paymentInfo||{}).vipType,n=["svip_1","svip_2","svip_1_trial","svip_2_trial"].includes(e);return!(!this.isVip||!n)&&(this.isYearly=3===(null===(t=this.paymentInfo)||void 0===t?void 0:t.payRange),!0)},getItemGoodsStyle:function(){return{backgroundImage:"url(https://".concat(this.cdnHost,"/static/upload/20241127/ec23c4e7-9957-4159-a99e-36aac1e2016a.webp)")}},getGif:function(){return"https://".concat(this.cdnHost,"/static/upload/20240428/45f27cdd-f248-4681-a3d0-e8d9e17b91d5.gif")},getSvipStyle:function(){return{backgroundImage:"url(https://".concat(this.cdnHost,"/static/upload/20240717/fd567045-75a5-47d5-a5ae-b4a43f472260.webp)")}},priceItem:function(){var t;return null===(t=this.subYearly3)||void 0===t?void 0:t.local_price_web},getPrice:function(){var t,e;return this.priceItem?this.isYearly?null===(t=this.priceItem)||void 0===t?void 0:t.price:null===(e=this.priceItem)||void 0===e?void 0:e.price_old:""},getNowPrice:function(){var t;return this.priceItem?(12*(null===(t=this.priceItem)||void 0===t?void 0:t.price)).toFixed(2):""},getOriginalPrice:function(){var t;return this.priceItem?(12*(null===(t=this.priceItem)||void 0===t?void 0:t.price_old)).toFixed(2):""},getUnit:function(){var t,e;return null!==(t=this.subYearly3)&&void 0!==t&&t.local_price_web&&(null===(e=this.subYearly3)||void 0===e||null===(e=e.local_price_web)||void 0===e?void 0:e.currency)||""}}),methods:I(I({},Object(l.b)("payment",["getSubUrlAndThirdType"])),{},{getGoodsList:function(){var t=this;this.loading=!0,Object(k.f)().then((function(e){var n=e.data,o=(n.day,n.calculate),r=(n.paid_coins,n.can_sign,(t.goodsData||[]).map((function(t){var e=(o||[]).find((function(e){return(null==e?void 0:e.cp_product_id)===(null==t?void 0:t.cp_product_id)}));return e?Object.assign(t,e||{}):""})).filter((function(t){return!!t})));t.goodsData=r,sessionStorage.setItem("computingDialogGoodsInfo",JSON.stringify(r)),t.loading=!1})).catch((function(e){t.loading=!1}))},updateGoodsData:function(){var t=this;Object(k.l)().then((function(e){var n=e.data,data=void 0===n?{}:n;localStorage.setItem("goodsInfo",JSON.stringify(data)),t.handleSubData(data)}))},handleSubData:function(t){this.subYearly3=null==t?void 0:t.year.find((function(t){return"sub_yearly3"===(null==t?void 0:t.id)}))},checkGoodsInfo:function(){this.getGoodsList()},checkVip3Info:function(){this.updateGoodsData()},show:function(){this.$logEvent("log_actions",{operation:"to_pay_pop_show",behavior_info:"ai_vedio_detail_pop",behavior_info_sub:"pop_1"}),this.checkGoodsInfo(),this.checkVip3Info(),this.isShowDialog=!0,this.isAutoUnlock=!0,this.$emit("exitFullscreen")},close:function(){this.isShowDialog=!1},goMall:function(){var t="".concat(location.origin,"/mall?openTab=Credit");window.open(t,"_blank")},getGoodsPrice:function(t){var e,n;return(null==t||null===(e=t.local_price_web)||void 0===e?void 0:e.currency)+(null==t||null===(n=t.local_price_web)||void 0===n?void 0:n.price)||""},buySvip:function(){if(this.dotFrom="ai_vedio_pop_calculate",this.isFont2level){var t;this.isUpgrade=!0;var e=3===(null===(t=this.paymentInfo)||void 0===t?void 0:t.payRange);this.goodsId=e?"sub_yearly3":"sub_monthly3",this.btnLabel=this.$t(e?"Upgrade20off":"SubscribeNow")}else this.isUpgrade=!1,this.goodsId=this.isYearly?"sub_yearly3":"sub_monthly3",this.btnLabel=this.$t(this.isYearly?"Upgrade20off":"SubscribeNow");this.switchPayment()},buyCredits:function(t){this.btnLabel=this.$t("businesSwiperBtn1"),this.goodsId=t,this.switchPayment()},switchPayment:function(){var t=this;if(this.$logEvent("log_actions",{operation:"to_pay_pop_show",behavior_info:"ai_vedio_detail_pop",behavior_info_sub:"pop_2"}),this.goodsId.startsWith("calculate"))return this.isUpgrade=!1,void(this.step="inPay");this.subThirdType?(this.defaultThirdType=this.subThirdType,this.step="inPay"):this.getSubUrlAndThirdType().then((function(e){var n;if(1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var data=e.data;t.defaultThirdType=null==data?void 0:data.third_type,t.step="inPay"}}))},quitPay:function(){this.step="inGoods"},handleUnlock:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.close(),e.next=3,Object(f.b)({ai_video_auto_play:t.isAutoUnlock?1:2,mode:1});case 3:location.reload();case 4:case"end":return e.stop()}}),e)})))()}})},j=(n(2918),Object(y.a)($,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"unlock-buy-dialog",class:"inGoods"==t.step?"goods-page":"payment-page",attrs:{visible:t.isShowDialog,"show-close":!1,"destroy-on-close":!0},on:{"update:visible":function(e){t.isShowDialog=e}}},["inGoods"===t.step?e("div",{staticClass:"unlock-buy-dialog-goods"},[e("i",{staticClass:"el-icon-close",on:{click:t.close}}),t._v(" "),t.isFont2level?t._e():e("div",{staticClass:"switch-tab"},[t.isYearly?e("div",{staticClass:"title monthly",on:{click:function(e){t.isYearly=!1}}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("PayMonthly"))+"\n\t\t\t\t\t"),e("i",{staticClass:"el-icon-right"})]):e("div",{staticClass:"title yearly",on:{click:function(e){t.isYearly=!0}}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("PayYearly"))+"\n\t\t\t\t\t"),e("img",{staticClass:"icon",attrs:{src:t.getGif,alt:"icon"}}),t._v(" "),e("span",{staticClass:"discount"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("save20"))+"\n\t\t\t\t\t")]),t._v(" "),e("i",{staticClass:"el-icon-right"})])]),t._v(" "),e("div",{staticClass:"svip-card",style:t.getSvipStyle,on:{click:t.buySvip}},[e("div",{staticClass:"left"},[e("div",{staticClass:"left-top words-wrap"},[e("span",[t._v(t._s(t.$t("ToB_professionalPlan")))]),t._v(" "),e("span",[t._v("SVIP")]),t._v(" "),e("span",[t._v("·")]),t._v(" "),e("span",[t._v(t._s(t.$t(t.isYearly?"AnnualCard":"MonthlyCard")))])]),t._v(" "),e("div",{staticClass:"left-bottom"},[e("span",[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$t(t.isYearly?"UnlockAllEpisodesYear":"UnlockAllEpisodesMonth"))+"\n\t\t\t\t\t\t")])])]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"right-top"},[e("span",{staticClass:"sign"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.getUnit)+"\n\t\t\t\t\t\t")]),t._v(" "),e("span",{staticClass:"price"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.getPrice)+"\n\t\t\t\t\t\t")]),t._v(" "),e("span",[t._v("/")]),t._v(" "),e("span",{staticClass:"type"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$t("months"))+"\n\t\t\t\t\t\t")])]),t._v(" "),t.isYearly?e("div",{staticClass:"right-bottom"},[e("div",{staticClass:"now-price words-wrap"},[e("span",{staticClass:"sign"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.getUnit)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e("span",{staticClass:"price"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.getNowPrice)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e("span",[t._v("/")]),t._v(" "),e("span",{staticClass:"type"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t("years"))+"\n\t\t\t\t\t\t\t")])]),t._v(" "),e("div",{staticClass:"original-price"},[e("span",{staticClass:"sign"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.getUnit)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e("span",{staticClass:"price"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.getOriginalPrice)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e("span",[t._v("/")]),t._v(" "),e("span",{staticClass:"type"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t("years"))+"\n\t\t\t\t\t\t\t")])])]):t._e()])]),t._v(" "),e("div",{staticClass:"goods-box"},[e("div",{staticClass:"header"},[e("div",{staticClass:"price"},[e("span",[t._v(t._s(t.$t("Price"))+": 14")]),t._v(" "),e("img",{staticClass:"icon",attrs:{src:n(121),alt:"credit"}}),t._v(" "),e("span",[t._v(t._s(t.$t("PermanentlyUnlocked")))])]),t._v(" "),e("div",{staticClass:"view-more",on:{click:t.goMall}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("viewMore"))+"\n\t\t\t\t\t\t"),e("i",{staticClass:"el-icon-right"})])]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"goods-all"},[t._l(t.goodsData,(function(o){return[e("div",{key:o.id,staticClass:"item-goods item-goods-gray",style:t.getItemGoodsStyle,on:{click:function(e){return t.buyCredits(o.cp_product_id)}}},[e("client-only",[[o.give_calculate_coins||null!=o&&o.web_give_ratio?e("div",{staticClass:"discount-spacial"},[t._v("\n                    +"+t._s(null==o?void 0:o.web_give_ratio)+"%\n                  ")]):t._e()]],2),t._v(" "),e("div",{staticClass:"goods-info"},[e("div",{staticClass:"goods-info-top flex-center"},[e("img",{staticClass:"icon",attrs:{src:n(258)("./".concat(o.bgUrl)),alt:"Credit"}}),t._v(" "),e("div",{staticClass:"num-detail flex-center"},[e("span",{staticClass:"num-1"},[t._v(t._s(o.calculate_coins-o.give_calculate_coins))]),t._v(" "),e("span",[t._v("+")]),t._v(" "),e("span",{staticClass:"num-2"},[t._v(t._s(o.give_calculate_coins))])])]),t._v(" "),e("div",{staticClass:"mall-Credit"},[e("span",{staticClass:"words"},[t._v("\n\t\t\t\t\t\t\t\t\t  "+t._s(o.calculate_coins)+"\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),e("img",{staticClass:"icon",attrs:{src:n(121),alt:"Credit"}})])]),t._v(" "),e("el-button",{staticClass:"purchase-btn",attrs:{loading:o.btnLoad}},[t._v("\n                "+t._s(t.getGoodsPrice(o))+"\n\t\t\t\t\t\t\t")])],1)]}))],2)]),t._v(" "),e("div",{staticClass:"auto-unlock"},[e("el-checkbox",{model:{value:t.isAutoUnlock,callback:function(e){t.isAutoUnlock=e},expression:"isAutoUnlock"}},[t._v(t._s(t.$t("AutoUnlock")))])],1)]):t._e(),t._v(" "),"inPay"===t.step?e("PaymentForm",{attrs:{defaultThirdType:t.defaultThirdType,initMount:!0,upgrade:t.isUpgrade,goodsId:t.goodsId,purchParams:{},btnLabel:t.btnLabel,isSubscription:!1},on:{"in-pay-back":t.quitPay,"pay-success":t.handleUnlock}},[e("right-part",{attrs:{showBg:!0,showText:!0,showStep:!1,showAvatar:!0}})],1):t._e()],1)}),[],!1,null,null,null).exports),T=n(672),L=n(527),S=n(528),D=n(529),P=n(530),E=n(1907);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var M={name:"AIVideo",mixins:[h.a],components:{MyPlayer:m.a,UnlockConfirmDialog:w,UnlockBuyDialog:j,VideoInfo:L.a,VideoComments:S.a,VideoAiPerson:D.a,VideoRelated:P.a,BookCard:E.a},data:function(){return{pageInfo:{page:1,page_size:30},videoData:{},tags:[],paginationArr:[],currentEpisode:1,currentEpisodeArr:[],player:null,videoConfig:{id:"ai-video-player",width:"100%",height:"100%",url:"",autoplay:!0,dynamicBg:{disable:!1,mode:"firstframe"}},expandField:{durationNum:8e3,videoProdType:15,relatedWh:{w:146,h:198}},videoLoading:!0,formatNumberForeign:v.i,dotReportInfo:{view_domain:"",batch_id:"",action:"",obj_no:"",obj_type:1,negative_ids:[],category:"default"},nextVideoId:"",currentPlayTime:0}},mounted:function(){this.getData("init")},beforeDestroy:function(){this.closePlayer(),this.$refs.MyPlayerRef.expandAttrs.destroyMyPlayer()},activated:function(){var t;this.currentEpisode==(null===(t=this.videoData)||void 0===t?void 0:t.max_episode)&&this.getData("init")},computed:R(R(R(R(R({},Object(l.e)("app",["topBanner"])),Object(l.e)("user",["cdnHost","token"])),Object(l.e)("payment",["paymentInfo"])),Object(l.c)("user",["accountSettingsData"])),{},{getVideoStyle:function(){var t=this.topBanner?118:74;return{maxHeight:"calc(100vh - 24px - 165px - ".concat(t,"px)")}},isSuperVip:function(){var t=this.paymentInfo.vipType;return["svip_3","svip_4"].includes(t)},getSvipStyle:function(){return{backgroundImage:"url(https://".concat(this.cdnHost,"/static/upload/20240713/c6818c06-32a6-4b28-9024-118c5c2f9e28.webp)")}},currentPlay:function(){var t;return(null===(t=this.videoData)||void 0===t?void 0:t.now_play)||{}},isAudioBook:function(){var t;return 1===(null===(t=this.videoData)||void 0===t?void 0:t.video_type)}}),watch:{currentEpisode:{handler:function(t){var e,n,o="".concat(null===(e=this.$route)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.id,":").concat(t);Object(d.g)({items:[{action:"view",obj_no:null===(n=this.$route)||void 0===n||null===(n=n.params)||void 0===n?void 0:n.id,obj_type:15},{action:"view",obj_no:o,obj_type:15}]})},immediate:!0}},methods:{backTo:function(){history.length>1&&"/"!=this.fromPath?this.$router.back():this.$router.push(this.localePath("/"))},handleLike:function(){var t,e={video_id:(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||"",episode_id:this.currentEpisode};this.$logEvent("log_actions",{operation:"click_like",behavior_info:"on_ai_video_detail_page",behavior_info_sub:JSON.stringify(e)}),this.setLike(this.videoData,"ai_video","ai_video_detail")},handleShare:function(){var t,e={video_id:(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||"",episode_id:this.currentEpisode};this.$logEvent("log_actions",{operation:"click_share",behavior_info:"on_ai_video_detail_page",behavior_info_sub:JSON.stringify(e)});var n=location.href;this.$message.success(this.$t("CopiedURLToClipboard")),Object(v.d)(n)},getData:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=R({video_id:(null===(o=e.$route)||void 0===o||null===(o=o.params)||void 0===o?void 0:o.id)||"",goto_play:"init"==t},e.pageInfo),n.next=3,Object(c.b)(r).then((function(n){var o,l,c,data=(null==n?void 0:n.data)||{},d=data.max_episode,h=void 0===d?1:d,v=data.episodes,m=void 0===v?[]:v,f=data.tags,_=void 0===f?[]:f;"init"==t&&(e.videoData=R(R({},data),{},{id:r.video_id}),1===data.video_type&&(e.expandField.relatedWh.w=221,e.expandField.relatedWh.h=128),e.changeVideoUrl(),e.tags=_,e.currentEpisode=(null===(l=e.currentPlay)||void 0===l?void 0:l.play_episode)||1,e.paginateEpisodes(h,e.pageInfo.page_size),e.$logEvent("log_watch_vedio",{vedio_source:"moreshort",vedio_id:(null===(c=e.$route)||void 0===c||null===(c=c.params)||void 0===c?void 0:c.id)||"",episode_id:e.currentEpisode,watch_type:"auto"}));e.currentEpisodeArr=m,null===(o=e.$refs)||void 0===o||null===(o=o.relatedVideo)||void 0===o||o.getVideoRelated()}));case 3:case"end":return n.stop()}}),n)})))()},paginateEpisodes:function(t,e){this.paginationArr=[];for(var n=1,o=1;o<=t;o+=e){var r=Math.min(o+e-1,t);this.paginationArr.push({page:n,val:"".concat(o,"-").concat(r)}),o<=this.currentEpisode&&r>=this.currentEpisode&&(this.pageInfo.page=n),n++}},handleEpisodeClick:function(t){var e,n=t.no,o=t.price,r=t.status,l=this.paymentInfo.calculateCoins;if(this.$refs.MyPlayerRef.expandAttrs.hideVideoPop(),this.token||1!=r){if(this.currentEpisode!=n){var c=0;if(this.currentEpisodeArr.forEach((function(t){var e;1==t.status&&!c&&(c=t.no),1==(null==t||null===(e=t.pre_episode)||void 0===e?void 0:e.status)&&(c=1)})),1!=r||n==c){var d=1==(null===(e=this.accountSettingsData)||void 0===e?void 0:e.ai_video_auto_play);2==r||d?this.playEpisode(n,"manual"):l>=o?this.$refs.unlockConfirm.show(n,o,"manual"):this.$refs.unlockBuy.show()}else this.$message.warning(this.$t("PleaseUnlockEpisodesInOrder"))}}else this.$EventBus.$emit("openLoginDialog",{callBack:function(){location.reload()}})},playEpisode:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$logEvent("log_watch_vedio",{vedio_source:"moreshort",vedio_id:(null===(e=this.$route)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.id)||"",episode_id:this.currentEpisode,watch_type:n}),this.currentEpisode=t,this.getEpisodeData()},getEpisodeData:function(){var t,e=this;Object(c.c)({episode:this.currentEpisode,video_id:(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||""}).then((function(t){if(1e4==t.status.code){var n,data=(null==t?void 0:t.data)||{};delete data.play_resolution,Object.assign((null==e||null===(n=e.videoData)||void 0===n?void 0:n.now_play)||{},data),e.changeVideoUrl(),e.currentEpisodeArr.forEach((function(t){e.currentEpisode==t.no&&(t.status=2)})),e.handleDataReport(0,"beginning")}}))},handlePaginationClick:function(t){this.pageInfo.page=t.page,this.getData("pagination")},handleDataReport:function(t){var e,n,o,r,l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$logEvent("log_vedio_time",{duration:t,resolution:null===(e=this.currentPlay)||void 0===e?void 0:e.play_resolution,vedio_id:(null===(n=this.$route)||void 0===n||null===(n=n.params)||void 0===n?void 0:n.id)||"",episode_id:this.currentEpisode,video_source:this.isAudioBook?"audio_novel":"moreshort",report_type:d,is_selected:!(null===(o=this.$route)||void 0===o||null===(o=o.query)||void 0===o||!o.isRecommend)}),this.token&&Object(c.a)({plays:[{duration:t,episode:this.currentEpisode,resolution:null===(r=this.currentPlay)||void 0===r?void 0:r.play_resolution,video_id:(null===(l=this.$route)||void 0===l||null===(l=l.params)||void 0===l?void 0:l.id)||""}]})},playerReady:function(t){var e=this,n=t.player,o=t.Events,r=t.expandAttrs;this.player=n,n.on(o.LOADED_DATA,(function(data){var t=e.currentPlay.play_duration;n.currentTime=t,e.videoLoading=!1})),n.on(o.DESTROY,(function(){e.handleDataReport(Math.floor(e.currentPlayTime),"exit")})),n.on(o.ENDED,(function(data){e.handleAutoPlay({player:n,expandAttrs:r})})),n.on(o.USER_ACTION,(function(data){var t=data.action,n=data.currentTime,o=data.to;switch(t){case"click":e.handleDataReport(Math.floor(n),"drag");break;case"change_definition":e.videoData.now_play.play_resolution=o.definition,e.videoData.now_play.play_duration=n,e.handleDataReport(Math.floor(n),"clarity");break;case"switch_play_pause":e.handleDataReport(Math.floor(n),"stop")}})),n.on(o.URL_CHANGE,(function(data){e.videoLoading=!0})),n.on(o.ERROR,(function(data){6!==data.mediaError.code&&(e.videoLoading=!1)}))},changeVideoUrl:function(){var t=Number(localStorage.getItem("definitionLevel")||"2"),e=this.currentPlay,n=e.episodes,o=void 0===n?[]:n,r=(e.play_resolution,e.dash_url),l=e.hls_url,c=o.find((function(e){return e.resolutions===t}))||o[0],d={dash:r,hls:l,other:(null==c?void 0:c.url)||""},h=Object(T.a)(d),path=h.path,v=h.isSupport;this.player.switchURL(path),this.player.playNext({url:path}),!v&&this.changeDefinition()},changeDefinition:function(){var t=this.currentPlay.episodes,e=void 0===t?[]:t,n=Number(localStorage.getItem("definitionLevel")||"2"),o={1:360,2:480,3:720,4:1080,5:1440,6:2160},r=e.map((function(t,e){var r=o[t.resolutions]||480;return{id:e,active:t.resolutions===n,level:t.resolutions,height:r,definition:r+"p",url:t.url}}));this.$refs.MyPlayerRef.updateDefinitionList({list:r,type:"other"})},handleAutoPlay:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,d,h,v,m,f,_,y,w,C,x,k,O,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.expandAttrs,l=e.videoData.max_episode,e.currentEpisode!=l){n.next=10;break}if(!e.nextVideoId){n.next=10;break}return Object(c.a)({plays:[{duration:0,episode:1,resolution:null===(d=e.currentPlay)||void 0===d?void 0:d.play_resolution,video_id:(null===(h=e.$route)||void 0===h||null===(h=h.params)||void 0===h?void 0:h.id)||""}]}),v=e.$refs.relatedVideo.videoList[0],m={id:v.id,cover:v.cover,duration:v.ai_video.duration,name:v.ai_video.title},f=function(){e.$router.replace({path:e.localePath("/ai-video/detail/".concat(e.nextVideoId))})},r.nextPlayVideo({params:m,call:f}),n.abrupt("return");case 10:if(_=e.paginationArr.find((function(t){return t.page==e.pageInfo.page})),y=_.val.split("-")[1],e.currentEpisode!=Number(y)){n.next=16;break}return e.pageInfo.page++,n.next=16,e.getData("pagination");case 16:if(w=1==(null===(o=e.accountSettingsData)||void 0===o?void 0:o.ai_video_auto_play),C=e.currentEpisode+1,x=e.currentEpisodeArr.find((function(t){return t.no==C})),k=x.price,O=x.status,I=e.paymentInfo.calculateCoins,e.token||1!=O){n.next=24;break}return e.$EventBus.$emit("openLoginDialog",{callBack:function(){location.reload()}}),n.abrupt("return");case 24:2==O||w?e.playEpisode(C,"auto"):I>=k?e.$refs.unlockConfirm.show(C,k,"auto"):e.$refs.unlockBuy.show();case 25:case"end":return n.stop()}}),n)})))()},handRelatedItem:function(data){var t=data.id;this.$router.replace({path:this.localePath("/ai-video/detail/".concat(t))})},timeUpdate:function(data){var t=data.currentTime;this.currentPlayTime=t,0!==Object.keys(this.currentPlay).length&&this.handleDataReport(Math.floor(t),"tens")},openGoodsDialog:function(){this.token?this.$refs.unlockBuy.show():this.$EventBus.$emit("openLoginDialog",{callBack:function(){location.reload()}})},exitFullscreen:function(){var t;null===(t=this.player)||void 0===t||t.exitFullscreen()},handleMark:function(){this.isLoggedIn?this.setCollectData(this.videoData).includes("collect_selected")?(this.$refs.collectPopover.visible=!1,this.setCollect(this.videoData,"ai_video")):this.$refs.collectPopover.visible=!0:this.$EventBus.$emit("openLoginDialog")},closePlayer:function(){var t;this.player&&(null===(t=this.player)||void 0===t||t.reset())},clickInfoDot:function(t){var e,n={video_id:(null===(e=this.$route)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.id)||"",episode_id:this.currentEpisode};this.$logEvent("log_actions",{operation:t,behavior_info:"on_ai_video_detail_page",behavior_info_sub:JSON.stringify(n)})}}},N=M,U=(n(2920),Object(y.a)(N,(function(){var t,e,n,o,r,l,c,d,h,v,m=this,f=m._self._c;return f("div",{staticClass:"ai-video-detail"},[f("div",{staticClass:"ai-video-detail-back",on:{click:m.backTo}},[f("i",{staticClass:"el-icon-back"})]),m._v(" "),f("div",{staticClass:"ai-video-detail-left"},[f("MyPlayer",{ref:"MyPlayerRef",style:m.getVideoStyle,attrs:{config:m.videoConfig,expandField:m.expandField,onReady:m.playerReady,loading:m.videoLoading},on:{onTimeUpdate:m.timeUpdate,onRelatedItem:m.handRelatedItem}},[f("div",{staticClass:"video-header",attrs:{slot:"title"},slot:"title"},[f("span",{staticClass:"video-header-name"},[m._v(m._s(null===(t=m.videoData)||void 0===t?void 0:t.title))]),m._v(" "),null!==(e=m.currentPlay)&&void 0!==e&&e.play_episode?f("span",{staticClass:"video-header-episode"},[m._v("\n\t\t\t\t\t\t"+m._s(m.$t("WhichEpisode",{number:m.currentPlay.play_episode}))+"\n\t\t\t\t\t")]):m._e()])]),m._v(" "),null!==(n=m.videoData)&&void 0!==n&&null!==(n=n.author)&&void 0!==n&&n.id?f("VideoInfo",{attrs:{authorInfo:null===(o=m.videoData)||void 0===o?void 0:o.author,videoType:9,tags:m.tags,info:m.videoData},on:{infoDot:m.clickInfoDot}}):m._e(),m._v(" "),f("VideoComments",{attrs:{videoType:9,videoInfo:m.videoData}})],1),m._v(" "),f("div",{staticClass:"ai-video-detail-right"},[null!==(r=m.videoData)&&void 0!==r&&null!==(r=r.related_characters)&&void 0!==r&&r.length?f("VideoAiPerson",{attrs:{personData:null===(l=m.videoData)||void 0===l?void 0:l.related_characters}}):m._e(),m._v(" "),m.isAudioBook&&null!==(c=m.videoData)&&void 0!==c&&null!==(c=c.related_ebooks)&&void 0!==c&&c.length?f("BookCard",{attrs:{videoBookData:m.videoData},on:{closePlayer:m.closePlayer}}):m._e(),m._v(" "),f("div",{staticClass:"pagination-box"},[f("div",{staticClass:"title"},[f("span",{staticClass:"episode-list"},[m._v(m._s(m.isAudioBook?m.$t("ChapterList"):m.$t("EpisodeList")))]),m._v(" "),(null===(d=m.videoData)||void 0===d?void 0:d.max_episode)>1?f("span",{staticClass:"episode-all"},[m._v("\n\t\t\t\t\t\t"+m._s(m.$t("EpisodeAll",{number:null===(h=m.videoData)||void 0===h?void 0:h.max_episode}))+"\n\t\t\t\t\t")]):m._e()]),m._v(" "),f("div",{directives:[{name:"show",rawName:"v-show",value:m.paginationArr.length>1,expression:"paginationArr.length > 1"}],staticClass:"pages-tabs"},m._l(m.paginationArr,(function(t){return f("div",{key:t.page,staticClass:"item-tab",class:{active:m.pageInfo.page==t.page},on:{click:function(e){return m.handlePaginationClick(t)}}},[m._v("\n\t\t\t\t\t\t"+m._s(t.val)+"\n\t\t\t\t\t")])})),0),m._v(" "),f("div",{staticClass:"episodes-box"},m._l(m.currentEpisodeArr,(function(t){return f("div",{key:t.no,staticClass:"item-episode flex-center",class:{active:m.currentEpisode==t.no},on:{click:function(e){return m.handleEpisodeClick(t)}}},[1==t.status?f("div",{staticClass:"lock-box flex-center"},[f("i",{staticClass:"el-icon-lock"})]):m._e(),m._v("\n\t\t\t\t\t\t"+m._s(t.no)+"\n\t\t\t\t\t")])})),0)]),m._v(" "),f("VideoRelated",{ref:"relatedVideo",attrs:{videoType:9,objType:15,objId:null===(v=m.videoData)||void 0===v?void 0:v.id,isAudioBook:m.isAudioBook},on:{nextVideo:function(t){m.nextVideoId=t}}})],1),m._v(" "),f("UnlockConfirmDialog",{ref:"unlockConfirm",on:{unlock:m.playEpisode,exitFullscreen:m.exitFullscreen}}),m._v(" "),f("UnlockBuyDialog",{ref:"unlockBuy",on:{exitFullscreen:m.exitFullscreen}})],1)}),[],!1,null,"5ca8aaac",null));e.default=U.exports},3280:function(t,e,n){"use strict";n.r(e);var o=n(2);n(10),n(9),n(7),n(14),n(11),n(12),n(8),n(4),n(6);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c=n(15),d=n(31),h=n(3),v=(n(20),n(16),n(19),n(23),n(49),n(37),n(29),n(1900)),m=n(187),f=n(127),_=n(56),y=n(133),w=n(236),C=n(193),x=n(5),k=n(1),O=n(424),I=n(33),$=n(399),j=n(24),T=n(42),L=n(1901),S=n(264),D=n(206),P=n(188),E=n(39),A=n(134),R=n(265),M=n(30),N=(n(36),n(165),n(13));function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var B={name:"aiTools",props:{},computed:F(F({},Object(k.c)("user",["cdnHostFun"])),{},{tools:function(){return this.selfCols<=this.aiToosFixed.length?this.aiToosFixed:this.aiToosFixed.concat(this.aiToolsRandom.sort((function(){return Math.random()-.5})).slice(0,this.selfCols-this.aiToosFixed.length-1))},aiToosFixed:function(){return[{cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("ai-face-swap")),title:"ai_face_changing",subTitle:"ai_face_changing_desc",type:"ai_face_changing",dataLoggingName:"ai_face_changing",path:"ai-face-swap"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("image-upscaler")),title:"upsacler_3_H1",subTitle:"upsacler_4_H1_value",type:"hd_restoration",dataLoggingName:"hd_restoration",path:"image-upscaler"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("remove-background")),title:"ai_tools_2",subTitle:"ai_tools_6",type:"remove_background",dataLoggingName:"remove_background",path:"remove-background"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("text2img")),title:"Text2imgTitle",subTitle:"Text2imgDesc",type:"easy_creation",dataLoggingName:"text_2_img",path:"text2img"}]},aiToolsRandom:function(){return[{cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("sora")),title:"toolsPage3",subTitle:"toolsPage4",type:"sora",path:"sora"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("ai-filter")),title:"ai_tools_4",subTitle:"ai_tools_8",type:"ai_filter",dataLoggingName:"ai_filters",path:"ai-filter"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("ai-portrait")),title:"ai_tools_10",subTitle:"ai_tools_11",type:"ai_photography",dataLoggingName:"ai_photography",path:"ai-portrait"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("ai-makeup")),title:"ai_makeup",subTitle:"ai_makeup_desc",type:"ai-makeup",dataLoggingName:"ai-makeup",path:"ai-makeup"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("scribble2img")),title:"ai_tools_3",subTitle:"ai_tools_7",type:"character_fixes",dataLoggingName:"from_sketch_to_artwork",path:"scribble2img"},{source1:"",cover:"https://".concat(this.cdnHostFun()).concat(Object(N.D)("ai_erase")),title:"ai_erase",subTitle:"ai_erase_tip",type:"ai_erase",dataLoggingName:"",path:"ai_erase"}]}}),data:function(){return{selfCols:7,width:233}},mounted:function(){this.calculateImageWidth(),window.addEventListener("resize",this.calculateImageWidth)},beforeDestroy:function(){window.removeEventListener("resize",this.calculateImageWidth)},methods:{calculateImageWidth:function(){var t,e=null===(t=this.$refs.aiTools)||void 0===t?void 0:t.offsetWidth;if(e)return e<1700&&(this.selfCols=6),e<1500&&(this.selfCols=5),e<1240&&(this.selfCols=4),e<980&&(this.selfCols=3),e<730&&(this.selfCols=2),e<500&&(this.selfCols=1),this.width=~~((e-16*this.selfCols-16+32)/this.selfCols),this.width>233?this.width:233},switchTools:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},source={operation:"click_quick_ai_tab",behavior_info:"on_work_detail_page",behavior_info_sub:"作品详情页-".concat(t.type)};this.$logEvent("log_actions",source),this.$router.push(this.localePath("/ai-tools/".concat(t.path)))}}},H=B,z=(n(2414),n(0)),V=Object(z.a)(H,(function(){var t=this,e=t._self._c;return e("div",{ref:"aiTools",staticClass:"ai-tools"},[t._l(t.tools,(function(n,o){return e("a",{key:o,staticClass:"ai-tools-item",style:{width:"".concat(t.width,"px")},attrs:{href:"/ai-tools/".concat(n.path)},on:{click:function(e){return e.preventDefault(),t.switchTools(n)}}},[e("img",{staticClass:"ai-tools-img",attrs:{src:n.cover,alt:n.title+"img",width:"250",height:"165"}}),t._v(" "),e("div",{staticClass:"ai-tools-title"},[t._v(t._s(t.$t(n.title)))]),t._v(" "),e("p",{staticClass:"ai-tools-subtitle"},[t._v(t._s(t.$t(n.subTitle)))])])})),t._v(" "),this.selfCols>this.aiToosFixed.length?e("a",{staticClass:"ai-tools-item",style:{width:"".concat(t.width,"px")},attrs:{href:"/ai-tools"},on:{click:function(e){return e.preventDefault(),t.switchTools({type:"ai_tools",path:"ai-tools"})}}},[e("div",{staticClass:"ai-tools-more"},[t._v(t._s(t.$t("sora_34_H2_3"))+" "),e("i",{staticClass:"iconfont icon-right"})])]):t._e()],2)}),[],!1,null,"04e4fb1c",null).exports,W=n(207);function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Q={name:"ExploreDetail",mixins:[O.a,I.a,$.a],components:{FrameDtl:R.a,MetaTooltipVue:m.a,WaterFallVue:f.a,CollectPopover:_.a,ElImageViewer:y.a,CommentList:L.a,AppealDialog:S.a,ShareDialog:D.a,Author:P.a,cmtComments:A.a,aiTools:V,ViewImage:W.a,AiChatByDetails:v.a},props:{escClose:{type:Boolean,default:!1}},data:function(){return{parseTime:E.e,copyTextToClipboard:x.d,saveImg:x.z,imgError:x.s,bigImgDialogVisible:!1,bigVideoShow:!1,scrollContainer:{},waterfallContainer:{},activeIndex:0,activeImg:{},parentInfo:{},imgList:[],noMoreRelated:!1,relatedImages:[],debounceImgPGScroll:function(){},followed:!1,showParent:!1,popovervisible:!1,infovisible:!1,imgLoading:!0,cols:7,page:1,relatedLoading:!0,copied:!1,isI18nToggled:!1,time_to:0,imgHeight:0,imgNaturalWidth:0,imgNaturalHeight:0,globalLoading:!1,paymentInfo:null,isShowNullRelatedImg:!1,alreadyNoMoreData:!1,fromPath:"Home",appeaData:{obj_no:"",obj_type:1,remark:""},appealShow:!1,singleImgQuickOperateButtons:[{name:"originality-upscale",icon:"work-originality-upscale",icon_name:"U",title:this.$t("WorkUpscale")},{name:"extra-upscale",icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"variation",icon:"task-variations-icon1",icon_name:"V",title:this.$t("WorkVariations")},{name:"picture-create-picture",icon:"work-picture-create-picture",title:this.$t("UsePicturesForNewCreations")},{name:"remove-background",icon:"icon_qubeijing1",title:this.$t("RemoveBackground")},{name:"animGen",icon:"AnimGenIcon",title:this.$t("AnimGen")},{name:"work-hide-show",icon:"work-show",title:this.$t("PublishOrHideWork")},{name:"work-post",icon:"post-icon2",title:this.$t("GraphicSubmission")},{name:"work-delete",icon:"work-delete",title:this.$t("Delete")}],fourImgsQuickOperateButtons:[{name:"V1",buttonType:"V",buttonNum:1,icon:"task-variations-icon1",title:this.$t("WorkVariations")},{name:"V2",buttonType:"V",buttonNum:2,icon:"task-variations-icon1",title:this.$t("WorkVariations")},{name:"V3",buttonType:"V",buttonNum:3,icon:"task-variations-icon1",title:this.$t("WorkVariations")},{name:"V4",buttonType:"V",buttonNum:4,icon:"task-variations-icon1",title:this.$t("WorkVariations")},{name:"U1",buttonType:"U",buttonNum:1,icon:"",title:this.$t("WorkUpscale")},{name:"U2",buttonType:"U",buttonNum:2,icon:"",title:this.$t("WorkUpscale")},{name:"U3",buttonType:"U",buttonNum:3,icon:"",title:this.$t("WorkUpscale")},{name:"U4",buttonType:"U",buttonNum:4,icon:"",title:this.$t("WorkUpscale")},{name:"extra-upscale1",buttonType:"extra-upscale",buttonNum:1,icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"extra-upscale2",buttonType:"extra-upscale",buttonNum:2,icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"extra-upscale3",buttonType:"extra-upscale",buttonNum:3,icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"extra-upscale4",buttonType:"extra-upscale",buttonNum:4,icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"remove-background",buttonType:"remove-background",icon:"work-remove-background",title:this.$t("RemoveBackground")},{name:"work-hide-show",icon:"work-show",title:this.$t("ShowOrHide")},{name:"work-delete",icon:"work-delete",title:this.$t("Delete")}],isLoadImage:!1,dotReportInfo:{category:"default",view_domain:"details_one",batch_id:""},isClient:!0,isLocale:!1}},activated:function(){var video=this.$refs.mainVideo;video&&video.paused&&video.play()},mounted:function(){this.paymentInfo=JSON.parse(localStorage.getItem("paymentInfo")),this.isI18nToggled=!this.accountSettingsData.is_off_localization,this.debounceImgPGScroll=Object(j.debounce)(this.getList,500),this.imgDetail(),this.initList(),this.isLoadImage=!0,document.addEventListener("keydown",this.handleEscKey)},beforeRouteEnter:function(t,e,n){n((function(t){t.fromPath=e.name,t.setImagePageFromPath(e.path)}))},beforeDestroy:function(){this.debounceImgPGScroll=null,document.body.style.overflow="",document.removeEventListener("keydown",this.handleEscKey)},computed:Y(Y(Y(Y(Y(Y({},Object(k.e)("app",["imagePageFromPath"])),Object(k.e)("creation",["generateViewShow"])),Object(k.c)(["isSupportWebp"])),Object(k.c)("user",["isLoggedIn","userInfo","accountSettingsData","isCompanyAccount"])),Object(k.e)("user",["accountData","adminOff"])),{},{comfyuitType:function(){var t=this.activeImg,e=t.channel,n=t.creativity,o=void 0===n?{}:n;return"comfyui"!=e||1===(null==o?void 0:o.type)?"":2===(null==o?void 0:o.type)?"workflow":"app"},imgWidth:function(){var t=window.innerHeight-200;if(this.activeImg){var e,n,img=this.activeImg;if(null!=img&&null!==(e=img.banner)&&void 0!==e&&e.width&&null!=img&&null!==(n=img.banner)&&void 0!==n&&n.height){var o,r,l=t*(null==img||null===(o=img.banner)||void 0===o?void 0:o.width)/(null==img||null===(r=img.banner)||void 0===r?void 0:r.height);return l>850?850:l<440?440:l}}return 440},convertMode:function(){var t,e={1:"createModeType1",2:"createModeType2",6:"createModeType6",4:"createModeType4",5:"createModeType5",7:"studio",8:"ModelFitting"},n={v5:1,v6:2,4:4,sdxl:5,hy21:6,studio:7,model_beautify:8}[null===(t=this.activeImg)||void 0===t?void 0:t.channel]||1;return e[n]?this.$t("".concat(e[n])):""},isSdModel:function(){var t,e;return[5,"5","sdxl"].includes(null==this||null===(t=this.activeImg)||void 0===t?void 0:t.channel)||[5,"5","sdxl"].includes(null==this||null===(e=this.activeImg)||void 0===e?void 0:e.category)},greenMode:function(){var t;return 2!==(null==this||null===(t=this.accountData)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.green_mode)},enableGreenMode:function(){return this.greenMode},viewByShared:function(){var t;return"share_link"===(null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.source)},imgCanUpscale:function(){var t,e;return[null===(t=this.activeImg)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.width,null===(e=this.activeImg)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.height].every((function(t){return 2*t<=4096}))},setI18nPrompt:function(){var t=this.activeImg.meta?this.activeImg.meta.prompt:"",e=this.activeImg.local_prompt;return this.isI18nToggled?e:t},computeLeftVal:function(){var t=this;return function(e){var n=t.fourImgsQuickOperateButtons.filter((function(t){return"U"!=t.buttonType&&"extra-upscale"!=t.buttonType&&t.show})).length;t.existUpscaleExtraUpscale&&!t.existVariationUpscaleExtraUpscale&&(n+=4);var o=(508-40*n)/(2*n),r=2*o+40;if("U"==e.buttonType||"extra-upscale"==e.buttonType)switch(e.name){case"U1":case"extra-upscale1":return{left:o+"px"};case"U2":case"extra-upscale2":return{left:o+r+"px"};case"U3":case"extra-upscale3":return{left:o+2*r+"px"};case"U4":case"extra-upscale4":return{left:o+3*r+"px"}}}},existVariationUpscale:function(){var t,e;return(null===(t=this.activeImg)||void 0===t||null===(t=t.task_operation)||void 0===t?void 0:t.is_img_2_img)&&(null===(e=this.activeImg)||void 0===e||null===(e=e.task_operation)||void 0===e?void 0:e.is_upscale)},existVariationExtraUpscale:function(){var t,e;return(null===(t=this.activeImg)||void 0===t||null===(t=t.task_operation)||void 0===t?void 0:t.is_img_2_img)&&(null===(e=this.activeImg)||void 0===e||null===(e=e.task_operation)||void 0===e?void 0:e.is_extra_upscale)},existUpscaleExtraUpscale:function(){var t,e;return(null===(t=this.activeImg)||void 0===t||null===(t=t.task_operation)||void 0===t?void 0:t.is_upscale)&&(null===(e=this.activeImg)||void 0===e||null===(e=e.task_operation)||void 0===e?void 0:e.is_extra_upscale)},existVariationUpscaleExtraUpscale:function(){var t,e,n;return(null===(t=this.activeImg)||void 0===t||null===(t=t.task_operation)||void 0===t?void 0:t.is_img_2_img)&&(null===(e=this.activeImg)||void 0===e||null===(e=e.task_operation)||void 0===e?void 0:e.is_upscale)&&(null===(n=this.activeImg)||void 0===n||null===(n=n.task_operation)||void 0===n?void 0:n.is_extra_upscale)},imgIsHide:function(){var t;return!(null==this||null===(t=this.activeImg)||void 0===t||!t.status||1==this.activeImg.status)||!this.determineSelfWork&&1==this.activeImg.primary},quickButtonsIsDisplay:function(){return!this.imgIsHide&&1!=this.activeImg.nsfw},isSinglePicture:function(){return 2!=this.activeImg.type},isVideo:function(){var t=this.activeImg||{},e=t.type,n=t.banner;return 6==e&&1!=(null==n?void 0:n.nsfw)},handleType:function(){var t=this.activeImg,e=t.type,n=t.channel,o=void 0===n?"":n,r=t.sub_channel,l=void 0===r?"":r;if("comfyui"===o){if(!l)return"Workflow";if("comf_sys_app"===l||"comf_user_app"===l)return"Quick Tools"}return"studio"===o&&4===e||2===e&&"sdxl"===o||4===e&&"sdxl"===o?"cell":6===e?"animate":"upscale"},imageSrc:function(){var t=this.activeImg,e=t.nsfw,o=t.banner;return 1===e?n(171):Object(x.x)(null==o?void 0:o.url,this.isLoadImage?this.$imgH:this.$imgL)}}),methods:Y(Y(Y({},Object(k.d)("app",["setImagePageFromPath"])),Object(k.b)("user",["setAdminOff"])),{},{handleEscKey:function(t){var e=document.querySelector(".view-image"),n=this.generateViewShow;e||n||"Escape"!==t.key&&27!==t.keyCode||this.$router.back()},viewImage:function(t,e){this.$refs.viewImage.show(t,e.target)},initList:function(){var t=this.relatedImages;null!=t&&t.length&&(this.relatedImages=t.map((function(t){var e=t.banner;return null==e||!e.url||null!=e&&e.replaceUrl||(t.banner.replaceUrl=Object(x.x)(e.url,"low")),t.waterWidth=250,t})))},changeAdminOff:function(){-1!==this.adminOff&&this.setAdminOff(1===this.adminOff?0:1)},openAppealShow:function(){this.appeaData.obj_no=this.activeImg.id,this.appealShow=!0,this.popovervisible=!1},operateButtonMouseEnter:function(t){void 0!==t.showToolTip&&!0!==t.showToolTip||this.$set(t,"showToolTip",!1)},operateButtonMouseLeave:function(t){t.showToolTip||this.$set(t,"showToolTip",!0)},imgLoaded:function(t){var img=t.target,e=img.naturalHeight,n=img.naturalWidth;this.imgNaturalWidth=img.naturalWidth,this.imgNaturalHeight=img.naturalHeight,this.imgHeight=508*e/n,this.imgLoading=!1,this.getList()},handleQuickOperateButtonPermissions:function(){var t=this;if(this.isSinglePicture){var e,n,o,r=["is_upscale","is_extra_upscale","is_make_variations","is_img_2_img","is_remove_background"];this.singleImgQuickOperateButtons.forEach((function(e,n){var o;if(5!==t.activeImg.task_category||["is_make_variations","is_remove_background"].includes(r[n])){if(null!==(o=t.activeImg)&&void 0!==o&&o.task_operation){var l;e.show=null===(l=t.activeImg)||void 0===l?void 0:l.task_operation[r[n]]}}else e.show=!0})),this.singleImgQuickOperateButtons[5].show=!this.isSdModel&&"实验室"!=this.convertMode&&6!=(null===(e=this.activeImg)||void 0===e?void 0:e.type),this.singleImgQuickOperateButtons[6].show=null===(n=this.activeImg)||void 0===n||null===(n=n.operation)||void 0===n?void 0:n.is_visibility,this.singleImgQuickOperateButtons[6].icon=1==this.activeImg.primary?"work-hide":"work-show",this.singleImgQuickOperateButtons[6].title=1==this.activeImg.primary?this.$t("primaryTipShow"):this.$t("primaryTipHide"),this.singleImgQuickOperateButtons[7].show=this.determineSelfWork&&1!==(null==this||null===(o=this.activeImg)||void 0===o?void 0:o.nsfw)&&!this.isCompanyAccount,this.singleImgQuickOperateButtons[8].show=this.determineSelfWork;var l=this.activeImg;l.type;"comfyui"===l.channel&&(this.singleImgQuickOperateButtons[5].show=!1,this.singleImgQuickOperateButtons[7].show=!1)}else{var c,d,h={V:"is_img_2_img",U:"is_upscale","extra-upscale":"is_extra_upscale","remove-background":"is_remove_background"};this.fourImgsQuickOperateButtons.forEach((function(e,n){var o,r;null!==(o=t.activeImg)&&void 0!==o&&o.task_operation&&e.buttonType&&(e.show=t.activeImg.task_operation[h[e.buttonType]]),null!==(r=t.activeImg)&&void 0!==r&&null!==(r=r.grip_refers)&&void 0!==r&&r.length&&n<=11&&(e.disabled=1===t.activeImg.grip_refers[n%4].nsfw||t.activeImg.grip_refers[n%4].disable)})),this.fourImgsQuickOperateButtons[13].show=this.determineSelfWork&&1==(null===(c=this.activeImg)||void 0===c?void 0:c.type)&&(null===(d=this.paymentInfo)||void 0===d?void 0:d.activeState),this.fourImgsQuickOperateButtons[13].icon=1==this.activeImg.primary?"work-hide":"work-show",this.fourImgsQuickOperateButtons[13].title=1==this.activeImg.primary?this.$t("primaryTipShow"):this.$t("primaryTipHide"),this.fourImgsQuickOperateButtons[14].show=this.determineSelfWork}},viewBigImage:function(){this.bigImgDialogVisible=!0},closeViewBigImage:function(){this.bigImgDialogVisible=!1},wordsCopy:function(){var t=this;this.copied=!0;var e=this.activeImg.meta?this.activeImg.meta.prompt:"",n=this.activeImg.local_prompt;this.copyTextToClipboard(this.isI18nToggled?n:e),setTimeout((function(){t.copied=!1}),1e3)},backTo:function(){this.$cookies.set("isCache","1"),this.$refs.frameDtl?this.$refs.frameDtl.backTo():this.$router.back()},handleQuickOperate:function(){var t,e,n,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isLoggedIn)if(r.disabled)this.$message.error(this.$t("ForbiddenButton"));else if(1!=this.fastOperateLoading){var l={};if(l.art_work_no=this.activeImg.art_work_no?this.activeImg.art_work_no:this.activeImg.id,"U"===r.buttonType)return l.operate_number=r.buttonNum,l.action=2,void this.fastOperateTask(l,this.activeImg.type);if("V"===r.buttonType)return l.operate_number=r.buttonNum,l.action=3,void this.fastOperateTask(l,this.activeImg.type);if("extra-upscale"!==r.buttonType)switch(r.name){case"extra-upscale":this.imgCanUpscale?(l.action=6,this.fastOperateTask(l)):this.$message.warning(this.$t("ImageSizeExceedsError"));break;case"work-post":var c={id:null==this||null===(t=this.activeImg)||void 0===t?void 0:t.id,url:null==this||null===(e=this.activeImg)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.url};this.$logEvent("log_actions",{operation:"click_post_picture_button",behavior_info:"on_self_work_hover",behavior_info_sub:null==this||null===(n=this.activeImg)||void 0===n?void 0:n.id}),this.$EventBus.$emit("openCreativeCenterModal",{list:[c],type:"text",source:"detail"});break;case"variation":l.type="variation",l.action=3,this.fastOperateTask(l);break;case"animGen":l.type="animGen",l.action=24,this.fastOperateTask(l);break;case"originality-upscale":l.action=2,this.fastOperateTask(l);break;case"picture-create-picture":l.action=3,this.fastOperateTask(l);break;case"remove-background":l.action=7,l.removeBgUrl=(null===(o=this.activeImg)||void 0===o||null===(o=o.banner)||void 0===o?void 0:o.url)||"",this.fastOperateTask(l);break;case"work-hide-show":this.handleWorkHideOrShow();break;case"work-delete":this.handleWorkDelete()}else this.imgCanUpscale?(l.operate_number=r.buttonNum,l.action=6,this.fastOperateTask(l,this.activeImg.type)):this.$message.warning(this.$t("ImageSizeExceedsError"))}else this.$message({message:this.$t("wait"),type:"error"});else this.$EventBus.$emit("openLoginDialog")},handleWorkHideOrShow:function(){var t,e,n=this;if(this.paymentInfo.show_auto_pub_switch){var o={id:(null===(t=this.activeImg)||void 0===t?void 0:t.id)||"",is_visible:1==(null===(e=this.activeImg)||void 0===e?void 0:e.primary)};this.hidePopover(),this.globalLoading=!0,Object(C.b)(o).then((function(t){var e,o,r;1e4==(null==t||null===(e=t.status)||void 0===e?void 0:e.code)?(n.$message({message:n.$t("".concat(1==(null===(o=n.activeImg)||void 0===o?void 0:o.primary)?"WorksPublished":"WorksHidden")),type:"success"}),n.$set(n.activeImg,"primary",1==n.activeImg.primary?2:1),n.$set(n.isSinglePicture?n.singleImgQuickOperateButtons[6]:n.fourImgsQuickOperateButtons[13],"icon",1==n.activeImg.primary?"work-hide":"work-show"),n.$set(n.isSinglePicture?n.singleImgQuickOperateButtons[6]:n.fourImgsQuickOperateButtons[13],"title",1==n.activeImg.primary?n.$t("primaryTipShow"):n.$t("primaryTipHide")),n.$logEvent("log_actions",{operation:1==n.activeImg.primary?"click_work_public":"click_work_hidden"})):n.$message({message:(null==t||null===(r=t.status)||void 0===r?void 0:r.msg)||n.$t("ServerError"),type:"error"})})).finally((function(){n.globalLoading=!1}))}else this.$EventBus.$emit("showBreakDialog","PrivateWorkTipWeb","basic")},handleWorkDelete:function(){var t=this;this.$confirm(this.$t("deleteConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var e={id:t.activeImg.id};t.globalLoading=!0,Object(C.a)(e).then((function(e){var n,o;1e4==(null==e||null===(n=e.status)||void 0===n?void 0:n.code)?(t.$message({message:t.$t("deleteSuccess"),type:"success"}),t.setWaterFallDeleteLits(t.activeImg.id),t.$router.back()):t.$message({message:(null==e||null===(o=e.status)||void 0===o?void 0:o.msg)||t.$t("ServerError"),type:"error"})})).finally((function(){t.globalLoading=!1}))})).catch((function(t){console.log("err",t)}))},reset:function(){this.$refs.mainImage&&(this.$refs.mainImage.src=""),this.activeImg={},this.page=1,this.bigImgDialogVisible=!1,this.imgLoading=!0,this.globalLoading=!1,this.relatedLoading=!0,this.showParent=!1,this.hidePopover(),this.parentInfo={},this.relatedImages=[],this.noMoreRelated=!1,this.copied=!1,this.isShowNullRelatedImg=!1,this.alreadyNoMoreData=!1,this.time_to=0,this.imgHeight=0,document.body.style.overflow=""},imgDetail:function(){var t=this.$route.params.id;t?(this.isLocale&&this.setLocale(t),this.handleImageData(this.activeImg)):this.$router.push(this.localePath("/"))},setLocale:function(t){var e=this;return Object(h.a)(regeneratorRuntime.mark((function n(){var o,title,r,l,c,h,v,m,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.activeImg||{},title=o.title,r=o.local_prompt,n.prev=1,n.next=4,Object(w.c)({id:t,titles:[title,r],enable_filter:1});case 4:l=n.sent,c=l.data.titles,h=c||[],v=Object(d.a)(h,2),m=v[0],f=v[1],e.activeImg.title=m,e.activeImg.local_prompt=f,n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),e.activeImg.title=title,e.activeImg.local_prompt=r;case 15:case"end":return n.stop()}}),n,null,[[1,11]])})))()},solveScrollbarStyle:function(){var t=document.getElementsByClassName("imgpage-inner")[0],e=(null==t?void 0:t.offsetHeight)<=window.innerHeight;document.body.style.overflow=this.isShowNullRelatedImg&&e?"hidden":"auto"},getList:function(){var t,e,n=this;if(null==this||null===(t=this.activeImg)||void 0===t||!t.id||this.noMoreRelated)return this.relatedLoading=!1,void(!this.noMoreRelated&&(this.isShowNullRelatedImg=!0));var o={page:this.page,page_size:20,id:null==this||null===(e=this.activeImg)||void 0===e?void 0:e.id,time_to:this.time_to};this.relatedLoading=!0,Object(w.b)(o).then((function(t){var e=(t.data||{}).items;if(null==e||!e.length)return 1===o.page&&(n.relatedImages=[]),n.noMoreRelated=!0,n.isShowNullRelatedImg=!0,void n.solveScrollbarStyle();!0===t.data.has_more?(n.noMoreRelated=!1,n.page+=1):(n.alreadyNoMoreData=!0,n.noMoreRelated=!0),n.time_to=t.data.time_ms,n.relatedImages=n.relatedImages.concat(e)})).finally((function(){n.relatedLoading=!1}))},goModelDtl:function(t){var e,n={action:"view",obj_no:t,obj_type:2,category:"default",batch_id:"",negative_ids:[],view_domain:"details_one"};(Object(M.g)({items:[n]}),t)&&(null===(e=window)||void 0===e||e.open(this.localePath("/models/detail/".concat(t)),"_blank"))},handlePlay:function(){var t,e,n,o,r,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"work";if(this.$logEvent("log_actions",{operation:"click_to_generate_same",behavior_info:l}),"comfyui"===(null===(t=this.activeImg)||void 0===t?void 0:t.channel)&&null!==(e=this.activeImg)&&void 0!==e&&null!==(e=e.creativity)&&void 0!==e&&e.id)return this.$router.push(this.localePath({path:"/workFlowAppDetail/".concat(null===(o=this.activeImg.creativity)||void 0===o?void 0:o.id,"?task=mix-").concat(null===(r=this.activeImg)||void 0===r?void 0:r.id)}));this.moreActions("play",null===(n=this.activeImg)||void 0===n?void 0:n.id,"exploreDetail")},goHome:function(){this.$router.replace(this.localePath("/"))}}),watch:{appealShow:{handler:function(t){t||(this.appeaData={obj_no:"",obj_type:1,remark:""})}},accountSettingsData:{handler:function(t){this.isI18nToggled=!t.is_off_localization},deep:!0},"$route.query":{handler:function(t){var e=t.u_code;e&&Object(T.w)(e)},immediate:!0},bigImgDialogVisible:function(t){document.body.style.overflow=t?"hidden":"auto"}},head:function(){var t=(null==this?void 0:this.activeImg)||{},e=t.author,n=void 0===e?{}:e,o=t.local_prompt,r=void 0===o?"":o,l=t.banner,c=void 0===l?{}:l,d=t.categories,title=t.title,h=t.id,v=null==d?void 0:d.toString(),m=r||v,f=title?title+" - SeaArt AI":"SeaArt AI",_="https://image.cdn2.seaart.ai/static/upload/20240105/74f78417-21a7-457b-ac87-eafcaf8abf61.webp",y=h?"https://www.seaart.ai/explore/detail/".concat(h,"?source=share_link"):"https://www.seaart.ai";return{title:f,meta:[{hid:"description",name:"description",content:m},{hid:"keywords",name:"keywords",content:v},{hid:"og:title",property:"og:title",content:title},{hid:"og:description",property:"og:description",content:"".concat(m," ").concat("#SeaArt #AIart #AIイラスト #stablediffusion")},{hid:"og:image",name:"og:image",content:(null==c?void 0:c.url)||_},{hid:"og:site_name",property:"og:site_name",content:"https://www.seaart.ai"},{hid:"og:url",property:"og:url",content:y},{name:"twitter:url",content:y},{hid:"twitter:image",name:"twitter:image",content:(null==c?void 0:c.url)||_},{property:"twitter:image",content:(null==c?void 0:c.url)||_},{name:"twitter:title",content:title},{name:"twitter:description",content:m},{name:"twitter:site",content:"@SeaArt_Ai"},{name:"twitter:creator",content:(null==n?void 0:n.name)||"@SeaArt_Ai"},{name:"twitter:card",content:"summary_large_image"}],link:[{rel:"canonical",href:y}],script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"ImageObject",acquireLicensePage:"https://image6.cdn.seaart.me/20230808/9598893d-2207-4b30-9036-bf5b026232bf.html",contentUrl:(null==c?void 0:c.url)||_,creator:{name:(null==n?void 0:n.name)||"SeaArt","@type":"Person"},creditText:(null==n?void 0:n.name)||"SeaArt",copyrightNotice:(null==n?void 0:n.name)||"SeaArt",license:"https://image6.cdn.seaart.me/20230808/9598893d-2207-4b30-9036-bf5b026232bf.html"}}],__dangerouslyDisableSanitizers:["script"]}},asyncData:function(t){return Object(h.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,d,h,param,v,data,m,f,_,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.$axios,t.app,r=t.params,l=t.error,d=t.route,h=r.id,param={id:h},(null==d||null===(n=d.query)||void 0===n?void 0:n.source)&&(param.source="share_link"),e.prev=5,e.next=9,o.post("/api/v1/artwork/detail",param);case 9:if(v=e.sent,data=v.data.data,m=v.headers,f=(data||{}).show_tags,data){e.next=15;break}throw new Error("");case 15:return _="normal"===m["x-account-type"],y=[{author:{},banner:{},id:"TAG_ITEM",type:"TAG",tagList:Array.isArray(f)?Object(c.a)(f):[],waterWidth:250,waterHeight:540}],e.abrupt("return",{activeImg:data||{},relatedImages:null!=f&&f.length?y:[],isLocale:_});case 20:e.prev=20,e.t0=e.catch(5),console.log("作品详情页-> asyncData错误啦：",e.t0),l({statusCode:404,message:e.t0});case 24:case"end":return e.stop()}}),e,null,[[5,20]])})))()}},X=Q,J=(n(2415),n(2416),Object(z.a)(X,(function(){var t,e,o,r,c,d,h,v,m,f,_,y,w=this,C=w._self._c;return C("div",{directives:[{name:"loading",rawName:"v-loading",value:w.globalLoading,expression:"globalLoading"}],ref:"image-gallery",staticClass:"image-gallery"},[C("el-backtop",{attrs:{bottom:30,right:30}},[C("i",{staticClass:"el-icon-top"})]),w._v(" "),C("div",{staticClass:"mobile-back-to",on:{click:function(t){return t.stopPropagation(),w.backTo.apply(null,arguments)}}},[C("i",{staticClass:"el-icon-back"})]),w._v(" "),null!==(t=w.activeImg)&&void 0!==t&&t.id?C("div",{staticClass:"imgpage-content flex",on:{click:w.hidePopover}},[C("div",{staticClass:"imgpage-inner"},[C("FrameDtl",{ref:"frameDtl",attrs:{imgIsHide:w.imgIsHide,type:"work"},scopedSlots:w._u([null!==(e=w.activeImg)&&void 0!==e&&e.title&&!w.imgIsHide?{key:"title",fn:function(){var t;return[C("h1",{staticClass:"seo-title text-no-wrap",style:{width:w.isClient?w.imgWidth+450+"px":"900px"}},[w._v(w._s(null===(t=w.activeImg)||void 0===t?void 0:t.title))])]},proxy:!0}:null],null,!0)},[w._v(" "),C("div",{directives:[{name:"loading",rawName:"v-loading",value:w.imgLoading,expression:"imgLoading"}],staticClass:"imgpage-image flex",style:{width:w.isClient?w.imgWidth+"px":""}},[C("div",{staticClass:"image-container flex"},[w.isVideo?C("video",{ref:"mainVideo",class:{"blur-img":[2,"2"].includes(w.activeImg.green)&&w.enableGreenMode},attrs:{src:null===(o=w.activeImg.banner)||void 0===o?void 0:o.url,autoplay:"",loop:"",controls:!1,muted:""},domProps:{muted:!0},on:{click:function(t){w.bigVideoShow=!0},play:function(t){return w.imgLoaded(t)}}}):C("img",{ref:"mainImage",class:{"blur-img":[2,"2"].includes(w.activeImg.green)&&w.enableGreenMode&&!w.viewByShared},attrs:{alt:w.activeImg.local_prompt,src:w.imageSrc,width:null===(r=w.activeImg)||void 0===r||null===(r=r.banner)||void 0===r?void 0:r.width,height:null===(c=w.activeImg)||void 0===c||null===(c=c.banner)||void 0===c?void 0:c.height},on:{load:function(t){return w.imgLoaded(t)},click:function(t){var e;return w.viewImage(null===(e=w.activeImg)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.url,t)},error:function(t){var e;return w.imgError(null===(e=w.activeImg)||void 0===e?void 0:e.banner,w.$refs.mainImage)}}}),w._v(" "),C("AiChatByDetails",{attrs:{chatObj:w.activeImg}})],1),w._v(" "),w.quickButtonsIsDisplay?C("div",{ref:"quickOperateButtons",staticClass:"quick-operate-buttons",on:{click:w.viewBigImage}},[C("div",{staticClass:"button-container"},[w.isSinglePicture?C("div",{staticClass:"single-picture-container"},[w._l(w.singleImgQuickOperateButtons,(function(t,e){return[t.show?C("el-tooltip",{key:e,attrs:{"popper-class":"quick-button-title",effect:"light",placement:"top",disabled:t.showToolTip,content:t.title}},[C("div",{staticClass:"operate-button",class:t.name,on:{click:function(e){return e.stopPropagation(),w.handleQuickOperate(t)},mouseenter:function(e){return w.operateButtonMouseEnter(t)},mouseleave:function(e){return w.operateButtonMouseLeave(t)}}},[t.icon?C("i",{staticClass:"iconfont icon-hover",class:"icon-".concat(t.icon)}):t.icon_name?C("span",[w._v(w._s(t.icon_name))]):C("span",[w._v(w._s(t.name))])])]):w._e()]}))],2):C("div",{staticClass:"four-picture-container",class:{"exist-variation-upscale":w.existVariationUpscale,"exist-variation-extraUpscale":w.existVariationExtraUpscale,"exist-upscale-extraUpscale":w.existUpscaleExtraUpscale,"exist-variation-upscale-extraUpscale":w.existVariationUpscaleExtraUpscale}},[w._l(w.fourImgsQuickOperateButtons,(function(t,e){return[t.show?C("el-tooltip",{key:e,attrs:{"popper-class":"quick-button-title",effect:"light",placement:"top",disabled:t.showToolTip,content:t.title}},[C("div",{staticClass:"operate-button",class:t.buttonType||t.name,style:w.computeLeftVal(t),attrs:{id:t.name},on:{click:function(e){return e.stopPropagation(),w.handleQuickOperate(t)},mouseenter:function(e){return w.operateButtonMouseEnter(t)},mouseleave:function(e){return w.operateButtonMouseLeave(t)}}},[t.icon?C("i",{staticClass:"iconfont icon-hover",class:"icon-".concat(t.icon)}):C("span",[w._v(w._s(t.name))])])]):w._e()]}))],2)])]):w._e()]),w._v(" "),C("h1",{staticClass:"prompt",staticStyle:{display:"none"}},[w._v(w._s(w.activeImg.local_prompt))]),w._v(" "),C("div",{staticClass:"imgpage-info",staticStyle:{width:"450px",padding:"0 24px"}},[C("Author",{attrs:{type:"work",activeImg:w.activeImg}},[("comfyui"===w.activeImg.channel?null===(d=w.activeImg)||void 0===d||null===(d=d.creativity)||void 0===d?void 0:d.id:3!=(null===(h=w.activeImg)||void 0===h?void 0:h.type))?C("button",{staticClass:"right-btn button-try",class:w.isLoggedIn?"":"disabled",on:{click:function(t){return w.handlePlay("work")}}},[w._v("\n                  "+w._s(w.$t("Remix"))+"\n                ")]):w._e()]),w._v(" "),null!==(v=w.activeImg)&&void 0!==v&&v.id?C("cmtComments",{attrs:{infos:w.activeImg,type:1,dotReportInfo:w.dotReportInfo},scopedSlots:w._u([{key:"cmtInner",fn:function(){var t,e,o,r,l,c,d,h,v,m,f,_,y,x,k,O,I,$,j,T;return[w.activeImg.prompt||null!==(t=w.activeImg)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.prompt?C("div",{staticClass:"description"},[C("div",{staticClass:"header"},[C("div",{staticClass:"header-left"},[C("div",{staticClass:"title"},[w._v(w._s(w.$t("Prompt")))]),w._v(" "),C("div",{staticClass:"header-copy"},[C("div",{staticClass:"prompt-copy",class:{copied:w.copied},on:{click:function(t){return w.wordsCopy()}}},[C("i",{directives:[{name:"show",rawName:"v-show",value:w.copied,expression:"copied"}],staticClass:"iconfont icon-success"}),w._v(" "),C("i",{directives:[{name:"show",rawName:"v-show",value:!w.copied,expression:"!copied"}],staticClass:"iconfont icon-copy"}),w._v("\n                            "+w._s(w.$t("CopyPrompts"))+"\n                          ")])]),w._v(" "),C("div",{staticClass:"header-trans",on:{click:function(t){w.isI18nToggled=!w.isI18nToggled}}},[C("i",{staticClass:"iconfont icon-i18n_prompt",staticStyle:{color:"#93A2B6"}})])])]),w._v(" "),C("div",{ref:"promptContainer",staticClass:"prompt-container"},[C("div",{staticClass:"prompt"},[w._v(w._s(w.setI18nPrompt))])])]):w._e(),w._v(" "),null!==(e=w.activeImg)&&void 0!==e&&e.meta&&Object.keys(w.activeImg.meta).length?C("div",{staticClass:"model-info"},[C("div",{staticClass:"header flex items-center"},[C("div",{staticClass:"title"},[w._v(w._s(w.$t("INFO")))]),w._v(" "),null!==(o=w.activeImg)&&void 0!==o&&o.meta&&Object.keys(w.activeImg.meta).length?C("span",{on:{click:function(t){t.stopPropagation(),w.infovisible=!w.infovisible}}},[C("el-popover",{staticStyle:{padding:"0"},attrs:{"popper-class":"metaPoper",placement:"right","visible-arrow":!1,trigger:"hover"},on:{click:function(t){t.stopPropagation(),t.preventDefault()}},model:{value:w.infovisible,callback:function(t){w.infovisible=t},expression:"infovisible"}},[C("MetaTooltipVue",{attrs:{sourceFrom:"imageDetail",category:null===(r=w.activeImg)||void 0===r?void 0:r.channel,meta:null===(l=w.activeImg)||void 0===l?void 0:l.meta,model:(null===(c=w.activeImg)||void 0===c?void 0:c.model_id)||(null===(d=w.activeImg)||void 0===d?void 0:d.artwork_no),"model-name":null===(h=w.activeImg)||void 0===h?void 0:h.model_name},on:{copyGenerationData:function(t){var e;return w.moreActions("play",null===(e=w.activeImg)||void 0===e?void 0:e.id,"exploreDetail")}}}),w._v(" "),C("span",{staticClass:"carousel-icon",attrs:{slot:"reference"},slot:"reference"},[C("i",{staticClass:"iconfont icon-work-tips work-tips"})])],1)],1):w._e()]),w._v(" "),C("el-row",{staticClass:"meta-content flex flex-col",attrs:{type:"flex"}},[C("div",{staticClass:"info flex"},[C("span",{staticClass:"item"},[C("div",{staticClass:"name"},[w._v(w._s(w.$t("Size")))]),w._v(" "),C("div",{staticClass:"value"},[w._v("\n                            "+w._s(w.activeImg.banner.width+"X"+w.activeImg.banner.height)+"\n                          ")])]),w._v(" "),C("span",{staticClass:"item"},[C("div",{staticClass:"name"},[w._v(w._s(w.$t("Date")))]),w._v(" "),C("div",{staticClass:"value"},[w._v(w._s(w.formatDate(w.activeImg.created_at)))])]),w._v(" "),C("span",{directives:[{name:"show",rawName:"v-show",value:w.convertMode,expression:"convertMode"}],staticClass:"item"},[C("div",{staticClass:"name"},[w._v(w._s(w.$t("createModeTitle")))]),w._v(" "),C("div",{staticClass:"value"},[w._v(w._s(w.convertMode))])]),w._v(" "),C("span",{staticClass:"item"},[C("div",{staticClass:"name"},[w._v(w._s(w.$t("Type")))]),w._v(" "),C("div",{staticClass:"value"},[w._v("\n                            "+w._s(w.handleType)+"\n                          ")])])])]),w._v(" "),null!==(v=w.activeImg)&&void 0!==v&&v.models&&(null===(m=w.activeImg)||void 0===m||null===(m=m.models)||void 0===m?void 0:m.length)>0?C("div",{directives:[{name:"show",rawName:"v-show",value:"comfyui"!==w.activeImg.channel,expression:"activeImg.channel !== 'comfyui'"}],staticClass:"model-seo-name"},[w._v(w._s(w.$t("Checkpoint")+" & "+w.$t("LoRA")))]):w._e(),w._v(" "),null!==(f=w.activeImg)&&void 0!==f&&f.models&&(null===(_=w.activeImg)||void 0===_||null===(_=_.models)||void 0===_?void 0:_.length)>0&&"comfyui"!=w.activeImg.channel?C("div",{staticClass:"models flex flex-wrap"},w._l(null===(y=w.activeImg)||void 0===y?void 0:y.models,(function(t,i){var e,o,r;return C("a",{key:"model_".concat(i),staticClass:"model-item flex items-center",attrs:{href:w.localePath("/models/detail/".concat(t.id))},on:{click:function(e){return e.preventDefault(),w.goModelDtl(t.id)}}},[null!=t&&null!==(e=t.cover)&&void 0!==e&&e.url&&1!==(null==t||null===(o=t.cover)||void 0===o?void 0:o.nsfw)?C("img",{ref:"modelCover".concat(i),refInFor:!0,staticClass:"model-cover",attrs:{src:"".concat(w.getImagUrl(null==t||null===(r=t.cover)||void 0===r?void 0:r.url,w.$imgL)||""),alt:t.name},on:{error:function(e){return w.imgError(null==t?void 0:t.cover,w.$refs["modelCover".concat(i)])}}}):C("img",{staticClass:"model-cover",attrs:{src:n(171),alt:""}}),w._v(" "),C("div",{staticClass:"model-cont flex flex-col"},[C("div",{staticClass:"model-type"},[C("span",{class:{isLora:"Checkpoint"!==(null==t?void 0:t.type)}},[w._v(w._s("TextualInversion"===(null==t?void 0:t.type)?w.$t("embedding1"):null==t?void 0:t.type))])]),w._v(" "),C("div",{staticClass:"model-name text-no-wrap-2"},[w._v(w._s(t.name))])])])})),0):w._e(),w._v(" "),"comfyui"===w.activeImg.channel&&null!==(x=w.activeImg)&&void 0!==x&&null!==(x=x.creativity)&&void 0!==x&&x.id?C("div",{staticClass:"models flex flex-wrap"},[C("div",{staticClass:"model-item flex items-center",on:{click:function(t){return w.handlePlay()}}},[C("img",{staticClass:"model-cover",attrs:{src:"".concat(w.getImagUrl(null===(k=w.activeImg)||void 0===k||null===(k=k.creativity)||void 0===k||null===(k=k.cover)||void 0===k?void 0:k.url,w.$imgL)||""),alt:null===(O=w.activeImg)||void 0===O||null===(O=O.creativity)||void 0===O?void 0:O.name}}),w._v(" "),C("div",{staticClass:"model-cont flex flex-col"},[C("div",{staticClass:"model-type"},[C("span",[w._v("\n                              "+w._s(w.comfyuitType)+"\n                            ")])]),w._v(" "),C("div",{staticClass:"model-name text-no-wrap-2"},[w._v(w._s(null===(I=w.activeImg)||void 0===I||null===(I=I.creativity)||void 0===I?void 0:I.name))])])])]):w._e(),w._v(" "),null!==($=w.activeImg)&&void 0!==$&&$.tags&&(null===(j=w.activeImg)||void 0===j||null===(j=j.tags)||void 0===j?void 0:j.length)>0?C("div",{staticClass:"tag-items flex flex-wrap"},w._l(null===(T=w.activeImg)||void 0===T?void 0:T.tags,(function(t,i){return C("div",{key:"tag_".concat(i),staticClass:"tag-item"},[t.id?[C("a",{attrs:{target:"_self",href:"/tagInfo/"+t.id},on:{click:function(e){return e.preventDefault(),w.goTagDtl(t,"work_detials")}}},[w._v("#"+w._s(null==t?void 0:t.title))])]:w._e()],2)})),0):w._e()],1):w._e()]},proxy:!0},{key:"cmtMore",fn:function(){var t,e,n,o,r,l;return[C("div",{staticClass:"commFunNum",on:{click:function(t){t.stopPropagation(),w.popovervisible=!w.popovervisible}}},[C("el-popover",{ref:"myPopover",attrs:{placement:"top-start","popper-class":"my-popover","visible-arrow":!1,width:"100",trigger:"manual"},model:{value:w.popovervisible,callback:function(t){w.popovervisible=t},expression:"popovervisible"}},[C("div",{staticClass:"pop-btns flex"},["Home"!=w.fromPath||null!==(t=w.activeImg)&&void 0!==t&&t.author&&(null===(e=w.activeImg)||void 0===e?void 0:e.author.id)==w.userInfo.id?w._e():C("button",{on:{click:function(t){return w.moreActions("not_interested")}}},[w._v("\n                          "+w._s(w.$t("dislike"))+"\n                        ")]),w._v(" "),C("button",{on:{click:function(t){return w.moreActions("flag")}}},[w._v("\n                          "+w._s(w.$t("Report"))+"\n                        ")]),w._v(" "),C("button",{directives:[{name:"show",rawName:"v-show",value:w.determineSelfWork&&1==(null===(n=w.activeImg)||void 0===n?void 0:n.type)&&!["midjourney"].includes(null===(o=w.activeImg)||void 0===o?void 0:o.channel),expression:"\n                            determineSelfWork &&\n                            activeImg?.type == 1 &&\n                            !['midjourney'].includes(activeImg?.channel)\n                          "}],on:{click:w.handleWorkHideOrShow}},[w._v("\n                          "+w._s(w.$t(1==(null===(r=w.activeImg)||void 0===r?void 0:r.primary)?"Showing":"hide"))+"\n                        ")]),w._v(" "),C("button",{directives:[{name:"show",rawName:"v-show",value:w.determineSelfWork&&1==(null===(l=w.activeImg)||void 0===l?void 0:l.nsfw),expression:"determineSelfWork && activeImg?.nsfw == 1"}],on:{click:function(t){return w.openAppealShow()}}},[w._v("\n                          "+w._s(w.$t("appeal"))+"\n                        ")]),w._v(" "),C("button",{directives:[{name:"show",rawName:"v-show",value:w.determineSelfWork,expression:"determineSelfWork"}],on:{click:function(t){return w.handleWorkDelete()}}},[w._v("\n                          "+w._s(w.$t("Delete"))+"\n                        ")])]),w._v(" "),C("button",{staticStyle:{color:"#ffffff"},attrs:{slot:"reference"},slot:"reference"},[C("i",{staticClass:"iconfont icon-more"})])])],1),w._v(" "),w.isCompanyAccount?w._e():C("button",{staticClass:"commFunNum",on:{click:function(t){return t.stopPropagation(),w.share1("work")}}},[C("i",{staticClass:"iconfont icon-share-icon"})]),w._v(" "),C("button",{staticClass:"commFunNum",on:{click:function(t){return t.stopPropagation(),w.moreActions("save")}}},[C("i",{staticClass:"iconfont icon-icon-Download"})])]},proxy:!0}],null,!1,1376651749)}):w._e()],1)]),w._v(" "),C("div",{staticClass:"imgpage-related"},[C("h2",{staticClass:"title-div"},[C("span",{staticClass:"title"},[w._v(w._s(w.$t("toolsPage1")))])]),w._v(" "),C("aiTools"),w._v(" "),C("h2",{staticClass:"title-div"},[C("span",{staticClass:"title"},[w._v(w._s(w.$t("ExploreRelated")))])]),w._v(" "),C("div",{ref:"relatewraper",staticClass:"related-images"},[C("WaterFallVue",{ref:"WaterFallVue",attrs:{dotReportInfo:l(l({},w.dotReportInfo),{},{view_domain:"details"}),type:"artwork",container:"relatewraper",list:w.relatedImages,lazy:!0,cols:w.cols,isFromRelated:!0,isShowNullRelatedImg:w.isShowNullRelatedImg,alreadyNoMoreData:w.alreadyNoMoreData,dislikeShow:"Home"==w.fromPath,needGridSource:!0},on:{load:w.debounceImgPGScroll,solveScrollbarStyle:w.solveScrollbarStyle}}),w._v(" "),C("div",{directives:[{name:"loading",rawName:"v-loading",value:w.relatedLoading,expression:"relatedLoading"}],staticClass:"loading-div"})],1)],1),w._v(" "),w.bigImgDialogVisible?C("el-image-viewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"9999"},attrs:{"on-close":w.closeViewBigImage,"url-list":[w.getImagUrl(null===(m=w.activeImg)||void 0===m||null===(m=m.banner)||void 0===m?void 0:m.url)]}}):w._e()],1)]):w._e(),w._v(" "),w.appealShow?C("AppealDialog",{attrs:{"appeal-data":w.appeaData,"is-appealing":w.isAppealLoading,"submit-callback":w.setResourceAppeal,"dialog-visible":w.appealShow},on:{"update:dialogVisible":function(t){w.appealShow=t},"update:dialog-visible":function(t){w.appealShow=t}}}):w._e(),w._v(" "),C("ShareDialog",{ref:"ShareDialog",attrs:{type:"artwork",workId:null===(f=w.activeImg)||void 0===f?void 0:f.id}}),w._v(" "),w.bigVideoShow?C("div",{staticClass:"bigVideo",on:{click:function(t){w.bigVideoShow=!1}}},[6==w.activeImg.type?C("video",{attrs:{src:null===(_=w.activeImg.banner)||void 0===_?void 0:_.url,autoplay:"",loop:"",controls:!1,muted:""},domProps:{muted:!0},on:{click:function(t){t.stopPropagation()}}}):C("img",{ref:"bigImg",attrs:{src:"".concat(w.getImagUrl(null===(y=w.activeImg)||void 0===y||null===(y=y.banner)||void 0===y?void 0:y.url,w.$imgH)||"")},on:{error:function(t){var e;return w.imgError(null===(e=w.activeImg)||void 0===e?void 0:e.banner,w.$refs.bigImg)}}}),w._v(" "),w._m(0)]):w._e(),w._v(" "),C("view-image",{ref:"viewImage"})],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"videoClear"},[t("i",{staticClass:"el-icon-close"})])}],!1,null,"246daf80",null));e.default=J.exports},3282:function(t,e,n){"use strict";n.r(e);n(14),n(9),n(7),n(11),n(12),n(8),n(6);var o=n(3),r=n(2),l=(n(20),n(75),n(10),n(19),n(36),n(4),n(49),n(18),n(50),n(1)),c=n(33),d=n(671),h=n(39),v=n(5),m=n(30),f=n(134),_=n(56),y=n(40);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var x={name:"RelatedArticles",mixins:[c.a],data:function(){return{list:[]}},mounted:function(){this.getList()},computed:C(C({},Object(l.e)("user",["userInfo"])),{},{formatAuthorName:function(){return function(t){var e=t.name,n=t.id,o=e||n;return o?o[0].toUpperCase():"-"}}}),methods:{getList:function(){var t=this;Object(y.getSquarePost)({page:1,page_size:10,run_available:0,sub_channel:"article",order_by:"hot"}).then((function(e){var n,data=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[],o=t.$route.params.id||"";t.list=data.filter((function(t){return t.id!==o}))}))},goArticle:function(t){var path="/articleDetail/"+t;this.$router.push(this.localePath(path))},jumpToOtherUser:function(t){var e,n=(null==t?void 0:t.id)||"",o=(null===(e=this.userInfo)||void 0===e?void 0:e.id)||"",path="/user/"+encodeURIComponent(n);o==n&&(path="/personal"),this.$router.push(this.localePath(path))}}},k=(n(2514),n(0)),O=Object(k.a)(x,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"related-articles"},[e("div",{staticClass:"related-articles-title"},[t._v("\n\t\t"+t._s(t.$t("RelatedArticles"))+"\n\t")]),t._v(" "),t.list.length?e("div",{staticClass:"related-articles-list"},t._l(t.list,(function(n){var o,r,l,c,d,h,v;return e("div",{key:n.id,staticClass:"item-article",on:{click:function(e){return t.goArticle(null==n?void 0:n.id)}}},[e("img",{staticClass:"item-article-cover",attrs:{src:null==n?void 0:n.cover,alt:"cover"}}),t._v(" "),e("div",{staticClass:"item-article-content"},[e("div",{staticClass:"info"},[e("div",{staticClass:"article-title",attrs:{title:null==n||null===(o=n.portfolio)||void 0===o?void 0:o.name}},[t._v("\n\t\t\t\t\t\t"+t._s(null==n||null===(r=n.portfolio)||void 0===r?void 0:r.name)+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"article-author",on:{click:function(e){return e.stopPropagation(),t.jumpToOtherUser(null==n?void 0:n.author)}}},[null!=n&&null!==(l=n.author)&&void 0!==l&&l.head?e("img",{directives:[{name:"webp",rawName:"v-webp",value:t.$imgL,expression:"$imgL"}],staticClass:"author-avatar",attrs:{src:n.author.head,alt:"avatar"}}):e("div",{staticClass:"author-avatar-letter flex-center"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.formatAuthorName(null==n?void 0:n.author))+"\n\t\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"author-name overflow-ellipsis",attrs:{title:null==n||null===(c=n.author)||void 0===c?void 0:c.name}},[t._v("\n\t\t\t\t\t\t\t"+t._s(null==n||null===(d=n.author)||void 0===d?void 0:d.name)+"\n\t\t\t\t\t\t")])])]),t._v(" "),e("div",{staticClass:"article-data"},[e("div",{staticClass:"article-data-like",on:{click:function(e){return e.stopPropagation(),t.setLike(n,"gallery")}}},[e("i",{staticClass:"iconfont",class:t.setlikeData(n)}),t._v(" "),e("span",[t._v(t._s(null==n||null===(h=n.stat)||void 0===h?void 0:h.num_of_like))])]),t._v(" "),e("div",{staticClass:"article-data-view"},[e("i",{staticClass:"iconfont icon-eye"}),t._v(" "),e("span",[t._v(t._s(null==n||null===(v=n.stat)||void 0===v?void 0:v.num_of_view))])])])])])})),0):t._e()])}),[],!1,null,"112f7162",null).exports;function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j={name:"ArticleDetail",components:{cmtComments:f.a,CollectPopover:_.a,RelatedArticles:O},mixins:[c.a],data:function(){return{formatNumberForeign:v.i,dataLoading:!0,authorInfo:{},articleInfo:{},dotReportInfo:{view_domain:"",batch_id:"",action:"",obj_no:"",obj_type:4,negative_ids:[],category:"default"},commonsObj:{},pointArr:[],isOpen:!0}},mounted:function(){this.getData()},computed:$($($({},Object(l.e)("user",["userInfo"])),Object(l.c)("user",["isLoggedIn"])),{},{inviteCode:function(){var t;return(null===(t=this.userInfo)||void 0===t?void 0:t.invite_user_code)||""},authorName:function(){var t,e;return(null===(t=this.authorInfo)||void 0===t?void 0:t.name)||(null===(e=this.authorInfo)||void 0===e?void 0:e.id)||""},formatAuthorName:function(){var t,e,n=(null===(t=this.authorInfo)||void 0===t?void 0:t.name)||(null===(e=this.authorInfo)||void 0===e?void 0:e.id);return n?n[0].toUpperCase():"-"},publishTime:function(){var t;return this.$t("blog_updated")+" "+Object(h.g)(null===(t=this.articleInfo)||void 0===t?void 0:t.create_at)}}),methods:{backTo:function(){history.length>1&&"/"!=this.fromPath?this.$router.back():this.$router.push("/")},getData:function(){var t=this,e=this.$route.params.id||"";Object(d.a)({id:e}).then((function(e){var n=e.data,o=n.portfolio,r=n.author;n.list;t.authorInfo=r,t.articleInfo=o,t.commonsObj=$($({},o),{},{author:$({},r)}),t.$nextTick((function(){t.generatePoints()}))})).finally((function(){t.dataLoading=!1}))},jumpToOtherUser:function(){var t,e,n=(null===(t=this.authorInfo)||void 0===t?void 0:t.id)||"",o=(null===(e=this.userInfo)||void 0===e?void 0:e.id)||"",path="/user/"+encodeURIComponent(n);o==n&&(path="/personal"),this.$router.push(this.localePath(path))},handleShare:function(){var t=location.href+(this.inviteCode?"?u_code=".concat(this.inviteCode):"");this.$message.success(this.$t("CopiedURLToClipboard")),Object(v.d)(t)},handleReport:function(){var t,e=this,n=null===(t=this.articleInfo)||void 0===t?void 0:t.id;Object(m.q)({id:n,obj_type:4}).then((function(){e.$message({message:e.$t("ReportSuccess"),type:"success",duration:5e3})}))},generatePoints:function(){var t,e=null===(t=this.$refs)||void 0===t?void 0:t.richText;if(e){var n=e.querySelectorAll("h1, h2, h3");this.pointArr=Array.from(n).map((function(t,e){return t.id||(t.id="heading-".concat(e)),{text:t.innerText,id:t.id}}))}},scrollTo:function(t){var element=document.getElementById(t);element&&element.scrollIntoView({behavior:"smooth"})},handleMark:function(t){this.isLoggedIn?this.setCollectData(this.articleInfo).includes("collect_selected")?(this.$refs["collectPopover".concat(t)].visible=!1,this.setCollect(this.articleInfo,"gallery")):this.$refs["collectPopover".concat(t)].visible=!0:this.$EventBus.$emit("openLoginDialog")}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,param,c,data,d,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,o=t.params,r=t.error,l=o.id,param={id:l},e.prev=3,e.next=6,n.post("/api/v1/post/article/detail",param);case 6:if(c=e.sent,data=c.data.data,h=(d=data||{}).portfolio,v=d.author,d.list,data){e.next=11;break}throw new Error("");case 11:return e.abrupt("return",{articleInfo:h,authorInfo:v,commonsObj:$($({},h),{},{author:$({},v)})});case 14:e.prev=14,e.t0=e.catch(3),console.log("文章投稿详情页-> asyncData错误啦：",e.t0),r({statusCode:404,message:e.t0});case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))()},head:function(){var t=this.articleInfo||{},e=t.intro,n=t.name,o=t.tag,r=t.cover,l=null!=o&&o.length?o.map((function(t){return t.title})).toString():"",title=this.$t("PostDetailsTitle",{name:n||l}),c=(null==r?void 0:r.url)||"";return{title:title,meta:[{hid:"description",name:"description",content:(e||n||l).slice(0,160)},{hid:"og:title",name:"og:title",content:title},{hid:"og:description",name:"og:description",content:(e||n||l).slice(0,160)},{hid:"og:image",name:"og:image",content:c||"https://image.cdn2.seaart.ai/static/upload/20240105/74f78417-21a7-457b-ac87-eafcaf8abf61.webp"}]}}},T=(n(2515),Object(k.a)(j,(function(){var t,e,n,o,r,l,c,d,h,v,m,f,_=this,y=_._self._c;return y("div",{directives:[{name:"loading",rawName:"v-loading",value:_.dataLoading,expression:"dataLoading"}],staticClass:"article-detail"},[y("div",{staticClass:"article-detail-back",on:{click:_.backTo}},[y("i",{staticClass:"el-icon-back"})]),_._v(" "),y("div",{directives:[{name:"show",rawName:"v-show",value:!_.dataLoading,expression:"!dataLoading"}],staticClass:"article-detail-container"},[y("div",{staticClass:"article-detail-container-left"},[y("img",{staticClass:"article-cover",attrs:{src:null===(t=_.articleInfo)||void 0===t||null===(t=t.cover)||void 0===t?void 0:t.url,alt:"article cover"}}),_._v(" "),y("h1",{staticClass:"article-title"},[_._v(_._s(null===(e=_.articleInfo)||void 0===e?void 0:e.name))]),_._v(" "),y("div",{staticClass:"article-infos"},[y("div",{staticClass:"left"},[y("div",{staticClass:"article-author"},[y("div",{staticClass:"article-author-avatar",on:{click:_.jumpToOtherUser}},[null!==(n=_.authorInfo)&&void 0!==n&&n.head?y("img",{directives:[{name:"webp",rawName:"v-webp",value:_.$imgL,expression:"$imgL"}],staticClass:"avatar",attrs:{src:_.authorInfo.head,alt:"avatar"}}):y("div",{staticClass:"letter flex-center"},[_._v("\n\t\t\t\t\t\t\t\t"+_._s(_.formatAuthorName)+"\n\t\t\t\t\t\t\t")])]),_._v(" "),y("div",{staticClass:"article-author-name overflow-ellipsis",attrs:{title:_.authorName},on:{click:_.jumpToOtherUser}},[_._v("\n\t\t\t\t\t\t\t"+_._s(_.authorName)+"\n\t\t\t\t\t\t")]),_._v(" "),y("div",{staticClass:"article-publish"},[_._v("\n\t\t\t\t\t\t\t"+_._s(_.publishTime)+"\n\t\t\t\t\t\t")])])]),_._v(" "),y("div",{staticClass:"right flex-center"},[y("div",{staticClass:"right-like",on:{click:function(t){return _.setLike(_.articleInfo,"gallery")}}},[y("i",{staticClass:"iconfont",class:_.setlikeData(_.articleInfo)}),_._v(" "),y("span",[_._v(_._s(null===(o=_.articleInfo)||void 0===o||null===(o=o.stat)||void 0===o?void 0:o.num_of_like))])]),_._v(" "),y("client-only",[y("div",{on:{click:function(t){return t.preventDefault(),_.handleMark(1)}}},[y("CollectPopover",{ref:"collectPopover1",attrs:{triggerMode:"click",type:"gallery",hideBtn:!0,folder:_.articleInfo,dotReportInfo:_.dotReportInfo}},[y("div",{staticClass:"right-collection"},[y("i",{staticClass:"iconfont",class:_.setCollectData(_.articleInfo)}),_._v(" "),y("span",[_._v("\n\t\t\t\t\t\t\t\t\t\t"+_._s(_.formatNumberForeign(null===(r=_.articleInfo.stat)||void 0===r?void 0:r.num_of_collection))+"\n\t\t\t\t\t\t\t\t\t")])])])],1)]),_._v(" "),y("div",{staticClass:"right-share",on:{click:_.handleShare}},[y("i",{staticClass:"iconfont icon-share-icon"})]),_._v(" "),y("el-popover",{ref:"myPopover",attrs:{placement:"top-start","popper-class":"my-popover","visible-arrow":!1,width:"100",trigger:"hover"}},[y("div",{staticClass:"pop-btns flex"},[y("button",{on:{click:_.handleReport}},[_._v("\n\t\t\t\t\t\t\t\t"+_._s(_.$t("Report"))+"\n\t\t\t\t\t\t\t")])]),_._v(" "),y("div",{staticClass:"right-more",attrs:{slot:"reference"},slot:"reference"},[y("i",{staticClass:"iconfont icon-more"})])])],1)]),_._v(" "),(null===(l=_.articleInfo)||void 0===l||null===(l=l.tag)||void 0===l?void 0:l.length)>0?y("div",{staticClass:"article-tags"},_._l(null===(c=_.articleInfo)||void 0===c?void 0:c.tag,(function(t){return y("div",{key:t.id,staticClass:"item-tag flex-center"},[t.id?y("a",{attrs:{target:"_self",href:_.localePath("/tagInfo/post/"+t.id)}},[_._v("\n\t\t\t\t\t\t#"+_._s(null==t?void 0:t.title)+"\n\t\t\t\t\t")]):_._e()])})),0):_._e(),_._v(" "),y("div",{directives:[{name:"show",rawName:"v-show",value:null===(d=_.articleInfo)||void 0===d?void 0:d.content,expression:"articleInfo?.content"}],ref:"richText",staticClass:"article-content",domProps:{innerHTML:_._s(_.articleInfo.content)}}),_._v(" "),y("div",{staticClass:"article-operate"},[y("div",{staticClass:"left"},[y("div",{staticClass:"item-operate view"},[y("i",{staticClass:"iconfont icon-eye"}),_._v(" "),y("span",[_._v(_._s(null===(h=_.articleInfo)||void 0===h||null===(h=h.stat)||void 0===h?void 0:h.num_of_view))])]),_._v(" "),y("div",{staticClass:"item-operate like",on:{click:function(t){return _.setLike(_.articleInfo,"gallery")}}},[y("i",{staticClass:"iconfont",class:_.setlikeData(_.articleInfo)}),_._v(" "),y("span",[_._v(_._s(null===(v=_.articleInfo)||void 0===v||null===(v=v.stat)||void 0===v?void 0:v.num_of_like))])]),_._v(" "),y("client-only",[y("div",{on:{click:function(t){return t.preventDefault(),_.handleMark(2)}}},[y("CollectPopover",{ref:"collectPopover2",attrs:{triggerMode:"click",type:"gallery",hideBtn:!0,folder:_.articleInfo,dotReportInfo:_.dotReportInfo}},[y("div",{staticClass:"item-operate collection"},[y("i",{staticClass:"iconfont",class:_.setCollectData(_.articleInfo)}),_._v(" "),y("span",[_._v("\n\t\t\t\t\t\t\t\t\t\t"+_._s(_.formatNumberForeign(null===(m=_.articleInfo.stat)||void 0===m?void 0:m.num_of_collection))+"\n\t\t\t\t\t\t\t\t\t")])])])],1)])],1),_._v(" "),y("div",{staticClass:"right"},[y("div",{staticClass:"item-operate share",on:{click:_.handleShare}},[y("i",{staticClass:"iconfont icon-share-icon"})]),_._v(" "),y("el-popover",{ref:"myPopover",attrs:{placement:"top-start","popper-class":"my-popover","visible-arrow":!1,width:"100",trigger:"hover"}},[y("div",{staticClass:"pop-btns flex"},[y("button",{on:{click:_.handleReport}},[_._v("\n\t\t\t\t\t\t\t\t"+_._s(_.$t("Report"))+"\n\t\t\t\t\t\t\t")])]),_._v(" "),y("div",{staticClass:"item-operate more",staticStyle:{color:"#f1f1f1"},attrs:{slot:"reference"},slot:"reference"},[y("i",{staticClass:"iconfont icon-more"})])])],1)]),_._v(" "),null!==(f=_.commonsObj)&&void 0!==f&&f.id?y("cmtComments",{attrs:{infos:_.commonsObj,type:4}}):_._e()],1),_._v(" "),y("div",{staticClass:"article-detail-container-right"},[_.pointArr.length?y("div",{staticClass:"table-of-contents"},[y("div",{staticClass:"table-of-contents-title",on:{click:function(t){_.isOpen=!_.isOpen}}},[y("span",[_._v(_._s(_.$t("catalogue")))]),_._v(" "),y("i",{staticClass:"el-icon-caret-top",class:{"is-open":this.isOpen}})]),_._v(" "),y("div",{staticClass:"table-of-contents-box",class:{"is-open":this.isOpen}},_._l(_.pointArr,(function(t,e){return y("div",{key:e,staticClass:"item-point overflow-ellipsis",attrs:{title:t.text},on:{click:function(e){return _.scrollTo(t.id)}}},[_._v("\n\t\t\t\t\t\t"+_._s(t.text)+"\n\t\t\t\t\t")])})),0)]):_._e(),_._v(" "),y("RelatedArticles")],1)])])}),[],!1,null,"6b10f317",null));e.default=T.exports},3285:function(t,e,n){"use strict";n.r(e);n(36),n(14),n(9),n(7),n(11),n(12),n(8);var o=n(3),r=n(2),l=(n(20),n(32),n(10),n(19),n(4),n(23),n(18),n(37),n(6),n(29),n(532)),c=n(1),d=n(59),h=n(5),v=(n(16),n(28),{name:"DrawBoard",props:{autoStyle:{type:Object,default:function(){return{}}},brushSize:{type:Number,default:function(){return 1}},eraserSize:{type:Number,default:function(){return 5}},maskUrl:{type:String,default:function(){return""}}},watch:{toolsType:{handler:function(){this.setDrawType(),this.setCanvasStyle()}}},data:function(){return{brushColor:"black",isDrawing:!1,lastX:0,lastY:0,canvasStyle:{},blankCanvas:"",canvas:null,context:null,toolsType:"PEN",undoStack:[],redoStack:[],currentStep:-1,historyList:[]}},computed:{activeTools:function(){return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})===this.toolsType?"active-tools":""}},activePre:function(){return this.historyList.length&&(this.currentStep>=0||-1!==this.currentStep)&&this.currentStep<=this.historyList.length?"active-btn":""},activeNext:function(){return this.historyList.length&&(this.currentStep>=0||-1===this.currentStep)&&this.currentStep+1<this.historyList.length?"active-btn":""}},mounted:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.setCanvasStyle(),this.setDrawType(),this.ctx.strokeStyle=this.brushColor,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.blankCanvas=this.canvas.toDataURL()},beforeDestroy:function(){this.canvas.removeEventListener("mousedown",this.startDrawing),this.canvas.removeEventListener("mousemove",this.draw),this.canvas.removeEventListener("mouseup",this.stopDrawing),window.removeEventListener("mouseup",this.stopDrawing)},methods:{changeToolsType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.toolsType=t,this.setCanvasStyle(),this.setDrawType()},displayMaskToCanvas:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",img=new Image;img.onload=function(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.drawImage(img,0,0,t.canvas.width,t.canvas.height),t.saveDrawingToBase64(!0)},img.onerror=function(t){},img.src=e},setCanvasStyle:function(){var t="ERASER"===this.toolsType?4*this.eraserSize:4*this.brushSize;if("PEN"!==this.toolsType){if("ERASER"===this.toolsType){var e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 32 32">\n  <path fill="none" stroke="#000" stroke-linejoin="miter" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="1.9048" d="M31.048 16c0 8.311-6.737 15.048-15.048 15.048s-15.048-6.737-15.048-15.048c0-8.311 6.737-15.048 15.048-15.048s15.048 6.737 15.048 15.048z"></path>\n  </svg>'),n=btoa(e),o="data:image/svg+xml;base64,".concat(n);this.canvasStyle={cursor:"url(".concat(o,") ").concat(t/2," ").concat(t/2,", auto")}}}else{var r=btoa('<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n  <circle cx="5" cy="5" r="2.5" fill="black" />\n</svg>'),l="data:image/svg+xml;base64,".concat(r);this.canvasStyle={cursor:"url(".concat(l,") 5 5, auto")}}},setDrawType:function(){this.ctx&&(this.ctx.strokeStyle=this.brushColor,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.lineWidth="ERASER"===this.toolsType?4*this.eraserSize:4*this.brushSize,this.ctx.globalCompositeOperation="ERASER"===this.toolsType?"destination-out":"source-over")},clearCanvas:function(){this.undoStack=[],this.redoStack=[],this.historyList=[],this.currentStep=-1,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},saveDrawing:function(){var img=new Image;img.src=this.canvas.toDataURL("image/png",.05);var link=document.createElement("a");link.download="drawing.png",link.href=img.src,link.click()},saveDrawingToBase64:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=1,t.bgCtx.clearRect(0,0,t.canvas2.width,t.canvas2.height),t.bgCtx.fillStyle="black",t.bgCtx.fillRect(0,0,t.canvas2.width,t.canvas2.height),t.bgCtx.drawImage(t.canvas,0,0,t.canvas2.width,t.canvas2.height),n=t.canvas2.toDataURL("image/png",.05),t.canvas.toDataURL()!==t.blankCanvas){e.next=10;break}return t.$emit("updateMask",""),e.abrupt("return");case 10:if(n!==t.blankBgCanvas){e.next=13;break}return t.$emit("updateMask",""),e.abrupt("return");case 13:return e.next=15,t.checkIsSameImage(n);case 15:if(!e.sent){e.next=18;break}return e.abrupt("return");case 18:t.$emit("updateMask",n.slice(n.indexOf(",")+1)),e.next=23;break;case 21:e.prev=21,e.t0=e.catch(1);case 23:case"end":return e.stop()}}),e,null,[[1,21]])})))()},checkIsSameImage:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!1,(o=t.length>0&&void 0!==t[0]?t[0]:"").slice(o.indexOf(",")+1)!==e.maskUrl){n.next=5;break}return n.abrupt("return",!0);case 5:return n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()},startDrawing:function(t){this.isDrawing=!0,this.lastX=t.offsetX,this.lastY=t.offsetY},draw:function(t){if(this.isDrawing){var e=t.offsetX,n=t.offsetY;this.context.beginPath(),this.context.moveTo(this.lastX,this.lastY),this.context.lineTo(e,n),this.context.stroke(),this.lastX=e,this.lastY=n}},stopDrawing:function(){this.isDrawing=!1,this.undoStack.push(this.canvas.toDataURL()),this.redoStack=[],this.saveToHistory()},saveToHistory:function(){this.historyList=this.historyList.slice(0,this.currentStep+1),this.historyList.push(this.canvas.toDataURL()),this.currentStep++},loadFromHistory:function(){var t=this;this.toolsType="PEN";var image=new Image;image.src=this.historyList[this.currentStep],image.onload=function(){t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.fillStyle="white",t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height),t.context.drawImage(image,0,0)}},handlePre:function(){this.activePre&&(this.currentStep>0?(this.currentStep--,this.loadFromHistory()):(this.currentStep=-1,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)))},handleNext:function(){this.activeNext&&this.currentStep<=this.historyList.length-1&&(this.currentStep++,this.loadFromHistory())},saveImage:function(){var t,e;return(null==this||null===(t=this.canvas)||void 0===t?void 0:t.toDataURL())===this.blankCanvas?"":null==this||null===(e=this.canvas)||void 0===e?void 0:e.toDataURL()}}}),m=v,f=(n(2611),n(0)),_=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-draw-board"},[e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:"512",height:"512"},on:{mousedown:t.startDrawing,mousemove:t.draw,mouseup:t.stopDrawing}}),t._v(" "),e("div",{staticClass:"toolbar"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsPen"),placement:"right"}},[e("span",{class:[t.activeTools("PEN")],on:{click:function(e){return t.changeToolsType("PEN")}}},[e("i",{staticClass:"iconfont icon-draw-board-icon1"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsEraser"),placement:"right"}},[e("span",{class:[t.activeTools("ERASER")],on:{click:function(e){return t.changeToolsType("ERASER")}}},[e("i",{staticClass:"iconfont icon-draw-board-icon5"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsClearCanvas"),placement:"right"}},[e("span",{on:{click:t.clearCanvas}},[e("i",{staticClass:"iconfont icon-draw-board-icon4"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsUndo"),placement:"right"}},[e("span",{staticClass:"gray-btn",class:[t.activePre],on:{click:function(e){return t.handlePre()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon3"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsRedo"),placement:"right"}},[e("span",{staticClass:"gray-btn",class:[t.activeNext],on:{click:function(e){return t.handleNext()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon2"})])])],1)])}),[],!1,null,"48ce66c6",null).exports,y=n(673),w=n(53),C=n(38),x=n(98),k=n(45);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $={name:"DraftDesign",components:{AiFilterCard:l.a,DrawBoard:_,QuickQueue:x.a},mixins:[y.a],data:function(){return{uploading:!1,pollingTimer:null,isLoading:!1,imgLoading:!1,iconUrl:n(447),uploadMode:"board",resultList:[{id:1,url:"",prompt:""}],promptInput:"",style:{},promptStyle:"",exampleList:[],exampleImageList:[],imgUrl:"",renderList:[],UPLOAD:new C.a({type:28}),quickOptions:{}}},computed:I(I(I({},Object(c.c)("creation",["promptStyles"])),Object(c.e)("user",["token"])),{},{renderSelectList:function(){var t=this;return(this.promptStyles||[]).map((function(e){var n="sdxl_".concat(e.replace(/\s/g,""));return{label:t.$t(n)||e,id:e}}))},isActive:function(){return function(t){return this.uploadMode===t?"upload-model-btn-active":""}},getResult:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(this.renderList.length?this.renderList[t]:{url:""})||{url:""}}}}),mounted:function(){this.getExampleData()},beforeDestroy:function(){},methods:{promptStyleChange:function(t){try{var e=this.exampleList.find((function(e){return e.id===t}));null!=e&&e.name&&this.$logEvent("log_actions",{operation:"click_draft_style",behavior_info:e.name})}catch(t){console.log("error",t)}},getExampleData:function(){var t=this;return Object(d.r)({type:3}).then((function(e){var n=e||{},o=n.status.code,code=void 0===o?"":o,r=n.data,data=void 0===r?{}:r,l=data.draft_to_img,c=void 0===l?[]:l,d=data.draft_to_img_sample,h=void 0===d?[]:d;[1e4,"10000"].includes(code)&&(t.exampleList=c||[],t.exampleImageList=h||[],t.promptStyle=t.exampleList.length&&t.exampleList[0].id||"")})).finally((function(){}))},handleBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.token){n.next=3;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 3:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.isLoading){n.next=7;break}return n.abrupt("return");case 7:if(r.includes(t.type)){n.next=10;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 10:if(!(l=t)||l.size){n.next=13;break}return n.abrupt("return",!1);case 13:if(!(l.size/1024/1024>5)){n.next=24;break}return n.prev=14,n.next=17,Object(k.a)(l,5242880);case 17:l=n.sent,n.next=24;break;case 20:return n.prev=20,n.t0=n.catch(14),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 24:return n.next=26,e.checkImageSize(t);case 26:if(n.sent){n.next=30;break}return e.$message.warning(e.$t("ImageSizeExceedsError")),n.abrupt("return",!1);case 30:if(!e.uploading){n.next=32;break}return n.abrupt("return");case 32:return e.uploading=!0,o.startUpload(l).then((function(t){e.uploading=!1,e.imgUrl=t,e.resultImgUrl="",e.resultList=[{url:e.imgUrl,prompt:""}]})).catch((function(t){console.log(t),e.uploading=!1,e.isLoading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 35:case"end":return n.stop()}}),n,null,[[14,20]])})))()},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;e.$set(e,"style",{width:t,height:o});var r=[2*t,2*o].every((function(t){return t<=4096}));n(r)},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},handleStart:function(){this.token?"upload"!==this.uploadMode?"board"===this.uploadMode&&this.saveImage():this.startTask("upload"):this.$EventBus.$emit("openLoginDialog")},handleBeforeUploadEmpty:function(){},changeUploadType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t!==this.uploadMode&&(this.uploadMode=t)},handleSelectExample:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.token){if(!this.isLoading){var n=e.url,o=void 0===n?"":n,r=e.template_id,l=void 0===r?"":r,c=e.prompt,d=void 0===c?"":c;this.imgLoading=!0,this.uploadMode="upload",this.resultList.forEach((function(e){t.$set(e,"url",o)})),this.renderList=[],this.imgUrl=o,this.promptStyle=l||"",this.promptInput=d||"",this.startTask(),this.scrollBottom()}}else this.$EventBus.$emit("openLoginDialog")},handleSetImageSize:function(t){var e=t.target.naturalWidth,n=t.target.naturalHeight;this.$set(this,"style",{width:e,height:n})},handleSelectImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.imgUrl&&this.imgUrl===t?this.imgLoading=!1:["",null,void 0].includes(t)||this.isLoading||(this.imgLoading=!0,this.imgUrl=t)},handleImageLoad:function(){this.imgLoading=!1},handleReMake:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.startSingleTask(t)},startSingleTask:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={action:3};return n.draft_to_img={num:1,scale:"1:1",template_id:this.promptStyle,width:this.style.width,height:this.style.height,image:this.resultList[0].url,prompt:this.promptInput},["",null,void 0].includes(n.draft_to_img.prompt)?(this.isLoading=!1,void this.$message.warning(this.$t("PromptNotEmpty"))):n.draft_to_img.template_id?["",null,void 0].includes(n.draft_to_img.image)?(this.$message.warning(this.$t("pleaseUoloadImage")),void(this.isLoading=!1)):Object(d.i)(n).then((function(n){var o;if(!(null==n||null===(o=n.data)||void 0===o?void 0:o.task_id))return!1;(t.renderList||[]).forEach((function(o,r){var l;o.url===e.url&&(t.$set(o,"status",1),t.$set(o,"id",null==n||null===(l=n.data)||void 0===l?void 0:l.task_id))}))})).catch((function(){})):(this.$message.warning(this.$t("fastToolsWarningTips")),void(this.isLoading=!1))},startTask:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!this.isLoading){var n={action:3};if(n.draft_to_img={num:3,scale:"1:1",template_id:this.promptStyle,width:this.style.width,height:this.style.height,image:this.resultList[0].url,prompt:this.promptInput},e&&(n.draft_to_img.type=1),!["",null,void 0].includes(n.draft_to_img.prompt))return this.promptStyle?["",null,void 0].includes(n.draft_to_img.image)?(this.$message.warning(this.$t("pleaseUoloadImage")),void(this.isLoading=!1)):(this.isLoading=!0,Object(d.i)(n).then((function(e){var n,o=null==e||null===(n=e.data)||void 0===n?void 0:n.task_id;return!!o&&(t.scrollBottom(),t.renderList=[{process:0,status:0},{process:0,status:0},{process:0,status:0}],t.pollingTask(o))})).catch((function(){t.isLoading=!1}))):(this.$message.warning(this.$t("fastToolsWarningTips")),void(this.isLoading=!1));this.$message.warning(this.$t("PromptNotEmpty"))}},stopTask:function(){this.pollingTimer&&window.clearTimeout(this.pollingTimer),this.pollingTimer=null,this.isLoading=!1},pollingTask:function(t){var e=this;return new Promise((function(n,o){e.isLoading=!0,e.pollingTimer=setTimeout((function(){Object(d.a)({task_ids:[t]}).then((function(r){var l=r.data.items;if(e.quickOptions=l[0],console.log(e.quickOptions,"quick==========="),4===l[0].status)return e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.$message.error(e.$t("ServerError")),e.isLoading=!1,void o();if(3===l[0].status){var c=l[0],d=c.result,h=void 0===d?{}:d,v=c.process,m=void 0===v?0:v,f=c.status,_=void 0===f?0:f,y=h.images||[];e.renderList=Array.isArray(y)&&y.length?y:[],(e.renderList||[]).forEach((function(t){e.$set(t,"process",m||0),e.$set(t,"status",_||0)})),e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.isLoading=!1,n()}else{var w=l[0],C=w.process,x=void 0===C?0:C,k=w.status,O=void 0===k?0:k;(e.renderList||[]).forEach((function(t){e.$set(t,"process",x||0),e.$set(t,"status",O||0)})),[1,2].includes(l[0].status)&&e.pollingTask(t)}})).catch((function(n){if(!e.renderList.length||e.renderList.length&&!e.renderList[0].url)return e.pollingTask(t);e.$message.error(e.$t("ServerError")),e.isLoading=!1,o()}))}),1e3)}))},scrollBottom:function(){try{this.$nextTick((function(){window.scrollTo({top:1e4,behavior:"smooth"})}))}catch(t){}},removeImage:function(){this.isLoading||(this.imgUrl="",this.resultList.forEach((function(t){t.url=""})),this.imgLoading=!1,this.renderList=[],this.promptInput="",this.promptStyle=this.exampleList.length&&this.exampleList[0].id||"")},downloadImage:function(){var t=this;try{var e=this.exampleList.find((function(e){return e.id===t.promptStyle}));null!=e&&e.name&&this.$logEvent("log_actions",{operation:"click_download_images_on_draft",behavior_info:e.name})}catch(t){console.log("error",t)}Object(h.z)(this.imgUrl,this.$t("ai_tools_3"))},saveImage:function(){try{var t,e=this.$refs.drawBoard.saveImage();if(!e)return null!=this&&null!==(t=this.resultList[0])&&void 0!==t&&t.url?void this.startTask():void this.$message.warning(this.$t("pleaseUoloadImage"));this.uploadMaskImage(e)}catch(t){}},uploadMaskImage:function(mask){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.UPLOAD,o=Object(w.a)(mask),e.next=4,t.checkImageSize(o);case 4:if(e.sent){e.next=8;break}return t.$message.warning(t.$t("ImageSizeExceedsError")),e.abrupt("return",!1);case 8:if(!t.uploading){e.next=10;break}return e.abrupt("return");case 10:return t.uploading=!0,e.abrupt("return",n.startUpload(o,{name:"draft-design-image".concat(Date.now(),".png"),type:"png"}).then((function(e){t.uploading=!1,t.imgUrl=e,t.resultImgUrl="",t.resultList=[{url:t.imgUrl,prompt:""}],t.renderList=[],t.startTask("board")})).catch((function(e){console.log(e),t.uploading=!1,t.isLoading=!1,t.$message.error(t.$t("uploadError"))})));case 12:case"end":return e.stop()}}),e)})))()}}},j=$,T=(n(2612),n(2613),Object(f.a)(j,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-fast-tools-draft-design"},[e("div",{staticClass:"top-bar"},[e("div",{staticClass:"top-bar-icon"},[e("img",{attrs:{src:t.iconUrl,alt:""}})]),t._v(" "),e("h1",{staticClass:"top-bar-main-title"},[t._v(t._s(t.$t("sketchToImg_h1")))]),t._v(" "),e("div",{staticClass:"top-bar-sub-title"},[t._v(t._s(t.$t("sketchToImg_h1_intro")))])]),t._v(" "),e("div",{staticClass:"tools-content"},[e("span",{staticClass:"upload-model-box"},[e("span",{staticClass:"upload-model-btn",class:[t.isActive("board")],on:{click:function(e){return t.changeUploadType("board")}}},[t._v(t._s(t.$t("Board")))]),t._v(" "),e("span",{staticClass:"upload-model-btn",class:[t.isActive("upload")],on:{click:function(e){return t.changeUploadType("upload")}}},[t._v(t._s(t.$t("UPLOAD")))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.resultList[0].url&&"upload"===t.uploadMode,expression:"!resultList[0].url && uploadMode === 'upload'"}],staticClass:"upload-box"},[[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],staticClass:"image-upload",attrs:{action:"#",drag:"","before-upload":t.handleBeforeUpload,disabled:t.uploading,"http-request":t.handleBeforeUploadEmpty,"show-file-list":!1}},[e("i",{staticClass:"el-icon-upload image-upload-icon"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n              "+t._s(t.$t("TaskUploadImageDragTips"))),e("em",[t._v(t._s(t.$t("TaskUploadImageClickUploadTips")))])])])]],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"board"===t.uploadMode,expression:"uploadMode === 'board'"}],staticClass:"draw-board-box-wrap"},[e("div",{staticClass:"draw-board-box"},[e("draw-board",{ref:"drawBoard"})],1)])]),t._v(" "),t.resultList[0].url&&"upload"===t.uploadMode?e("div",{staticClass:"show-content-wrap"},[e("div",{staticClass:"show-content"},[t.resultList[0].url?e("img",{attrs:{src:t.resultList[0].url,alt:""},on:{load:t.handleSetImageSize}}):t._e(),t._v(" "),[e("span",{directives:[{name:"show",rawName:"v-show",value:t.resultList[0].url&&!t.isLoading,expression:"resultList[0].url && !isLoading"}],staticClass:"el-image-viewer__close",on:{click:function(e){return e.stopPropagation(),t.removeImage.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-close"})])]],2)]):t._e(),t._v(" "),e("div",{staticClass:"prompt-input-area-wrap"},[e("div",{staticClass:"prompt-input-area"},[e("div",{staticClass:"input-box"},[e("el-input",{staticClass:"input-box-input",attrs:{disabled:t.isLoading,placeholder:t.$t("PromptNotEmpty"),clearable:""},model:{value:t.promptInput,callback:function(e){t.promptInput=e},expression:"promptInput"}})],1),t._v(" "),e("div",{staticClass:"operate-btn-box"},[e("div",{staticClass:"select-item"},[e("el-select",{attrs:{"popper-append-to-body":!1,"popper-class":"custom-select",disabled:t.isLoading},on:{change:t.promptStyleChange},model:{value:t.promptStyle,callback:function(e){t.promptStyle=e},expression:"promptStyle"}},t._l(t.exampleList,(function(t,i){return e("el-option",{key:"method_"+i,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),e("div",{staticClass:"submit-btn",on:{click:function(e){return e.stopPropagation(),t.handleStart.apply(null,arguments)}}},[t._v(t._s(t.$t("Generate")))])])])]),t._v(" "),e("div",{staticClass:"example-display"},[e("div",{staticClass:"example-title"},[e("span",{staticClass:"el-icon-bottom example-title-icon"}),t._v(t._s(t.$t("ai_tools_9")))]),t._v(" "),e("div",{staticClass:"example-list"},[t._l(t.exampleImageList.slice(0,4),(function(n,o){return[n&&n.url?e("div",{key:o,staticClass:"example-list-item",on:{click:function(e){return e.stopPropagation(),t.handleSelectExample(n)}}},[e("img",{attrs:{src:n.url}})]):t._e()]}))],2)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl&&t.isLoading||t.renderList.length,expression:"(imgUrl && isLoading) || renderList.length"}],staticClass:"result-show-area"},[e("div",{staticClass:"result-show-content"},[t.isLoading||t.imgUrl&&t.imgLoading?e("div",{staticClass:"quick-box"},[e("i",{staticClass:"el-icon-loading image-loading loading-icon-draf"}),t._v(" "),e("QuickQueue",{attrs:{quickOptions:t.quickOptions}})],1):t._e(),t._v(" "),t.imgUrl?e("img",{attrs:{src:t.imgUrl,alt:""},on:{load:t.handleImageLoad,error:t.handleImageLoad}}):t._e(),t._v(" "),[e("span",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl&&!t.isLoading&&!t.imgLoading,expression:"imgUrl && !isLoading && !imgLoading"}],staticClass:"el-image-viewer__close",on:{click:function(e){return e.stopPropagation(),t.removeImage.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl&&!t.isLoading&&!t.imgLoading,expression:"imgUrl && !isLoading && !imgLoading"}],staticClass:"bottom-download-btn",on:{click:function(e){return e.stopPropagation(),t.downloadImage.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-icon-Download bottom-download-btn-icon"}),t._v(" "),e("span",{staticClass:"bottom-download-btn-text"},[t._v(t._s(t.$t("DownloadImg")))])])]],2),t._v(" "),e("div",{staticClass:"show-result-bottom-list"},[t._l(t.resultList,(function(n,o){return e("ai-filter-card",{key:"result_card_".concat(o),attrs:{source:n,"is-loading":t.isLoading,order:o+1},on:{selectImage:t.handleSelectImage,removeImage:t.removeImage}})})),t._v(" "),t._l(3,(function(n,o){return e("ai-filter-card",{key:"result_card_".concat(o+2),attrs:{source:t.getResult(o),"is-loading":t.isLoading,order:o+2},on:{reMake:t.handleReMake,selectImage:t.handleSelectImage}})}))],2)])])}),[],!1,null,"5ed5ef06",null));e.default=T.exports},3286:function(t,e,n){"use strict";n.r(e);n(16),n(9),n(7),n(11),n(12),n(8),n(6);var o=n(3),r=n(2),l=(n(20),n(10),n(4),n(18),n(29),n(22)),c=n(5),d=n(59),h=n(53),v=n(38),m=n(1),f={name:"RemoveBgDialog",props:{isLoading:{type:Boolean,default:!1},imgUrl:{type:String,default:""},resultImgUrl:{type:String,default:""}},components:{},computed:{},data:function(){return{dialogVisible:!1}},mounted:function(){},methods:{show:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogVisible=t},dwn:function(){Object(c.z)(this.resultImgUrl,"hd_restoration_result")},reupload:function(){this.$emit("reupload")}}},_=f,y=(n(2614),n(0)),w=Object(y.a)(_,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"remove-bg-dialog",fullscreen:!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"main"},[e("div",{staticClass:"top"},[e("div",{staticClass:"topItem"},[e("div",{staticClass:"back",on:{click:function(e){t.dialogVisible=!1}}},[e("i",{staticClass:"el-icon-back"})])]),t._v(" "),e("div",{staticClass:"topItem",class:{disabledStyle:t.isLoading}},[e("div",{staticClass:"rightBnt",on:{click:function(e){!t.isLoading&&t.reupload()}}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" "),e("span",[t._v(t._s(t.$t("CreativeCenterPopup33")))])]),t._v(" "),e("div",{staticClass:"rightBnt",class:{disabledStyle:!t.resultImgUrl},on:{click:function(e){t.resultImgUrl&&t.dwn()}}},[e("i",{staticClass:"iconfont icon-icon_xiazai"}),t._v(" "),e("span",[t._v(t._s(t.$t("Download")))])])])]),t._v(" "),e("div",{staticClass:"content"},[t._t("default")],2)])])}),[],!1,null,"b2d79e48",null).exports,C=(n(98),n(45));function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={name:"RemoveBackground",components:{RemoveBgDialog:w},computed:k(k(k({},Object(m.e)("user",["token","cdnHost"])),Object(m.c)("user",["cdnHostFun"])),{},{resultStyle:function(){var t=this,style={};return style=(this.exampleList||[]).some((function(e){return e.before===t.imgUrl}))||this.isLoading?{width:"512px",height:"512px",backgroundColor:"#293045"}:this.style,this.isLoading||this.imgLoading?style:{}}}),mounted:function(){this.getExampleData()},data:function(){return{imgUrl:"",resultImgUrl:"",uploading:!1,sliderWidth:10,pollingTimer:null,isLoading:!1,imgLoading:!0,style:{},iconUrl:n(446),exampleList:[],UPLOAD:new v.a({type:29}),quickOptions:{}}},beforeDestroy:function(){this.stopTask()},methods:{getExampleData:function(){var t=this;return Object(d.r)({type:2}).then((function(e){var n=e||{},o=n.status.code,code=void 0===o?"":o,r=n.data,l=(void 0===r?{}:r).remove_background,c=void 0===l?[]:l;[1e4,"10000"].includes(code)&&(t.exampleList=c||[])})).finally((function(){}))},handleRangeChange:function(){this.$logEvent("log_actions",{operation:"click_compare_images_on_tools",behavior_info:"remove_background"})},handleImageLoad:function(){this.imgLoading=!1,this.sliderWidth=10,this.openWorkArea()},handleBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("handleBeforeUpload"),e.token){n.next=4;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 4:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.isLoading){n.next=8;break}return n.abrupt("return");case 8:if(r.includes(t.type)){n.next=11;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 11:if(!(l=t)||l.size){n.next=14;break}return n.abrupt("return",!1);case 14:if(!(l.size/1024/1024>10)){n.next=25;break}return n.prev=15,n.next=18,Object(C.a)(l,10485760);case 18:l=n.sent,n.next=25;break;case 21:return n.prev=21,n.t0=n.catch(15),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 25:return n.next=27,e.checkImageSize(t);case 27:if(n.sent,!e.uploading){n.next=30;break}return n.abrupt("return");case 30:return e.uploading=!0,o.startUpload(l).then((function(t){return e.uploading=!1,e.isLoading=!0,e.imgUrl=t,e.resultImgUrl="",e.sliderWidth=10,e.openWorkArea(),e.startTask()})).catch((function(t){console.log(t),e.uploading=!1,e.isLoading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 33:case"end":return n.stop()}}),n,null,[[15,21]])})))()},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;if(t>512){var r=Object(h.f)(t,o,512);t=r.width,o=r.height}e.$set(e,"style",{width:"".concat(t,"px"),height:"".concat(o,"px")}),n()},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},handleBeforeUploadEmpty:function(){},startTask:function(){var t=this,e={action:19,source:8,meta:{remove_background:{uri:this.imgUrl}}};return Object(l.d)(e).then((function(e){var n,o=null==e||null===(n=e.data)||void 0===n?void 0:n.id;return t.pollingTask(o)}))},stopTask:function(){this.pollingTimer&&window.clearTimeout(this.pollingTimer),this.pollingTimer=null,this.isLoading=!1},pollingTask:function(t){var e=this;return new Promise((function(n,o){e.isLoading=!0,e.pollingTimer=setTimeout((function(){Object(l.a)({task_ids:[t]}).then((function(r){var l=r.data.items;if(e.quickOptions=l[0],4===l[0].status)return e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.$message.error(e.$t("ServerError")),e.isLoading=!1,void o();if(3===l[0].status){var c=l[0].img_url,d=void 0===c?"":c;e.resultImgUrl=d,e.imgLoading=!0,e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.isLoading=!1,n()}else[1,2].includes(l[0].status)&&e.pollingTask(t)})).catch((function(t){e.$message.error(e.$t("ServerError")),e.isLoading=!1,o()}))}),1e3)}))},removeImage:function(){this.imgUrl="",this.resultImgUrl="",this.sliderWidth=10,this.openWorkArea(!1)},downloadImage:function(){this.$logEvent("log_actions",{operation:"click_download_images_on_tools",behavior_info:"remove_background"}),Object(c.z)(this.resultImgUrl,"hd_restoration_result")},handleSelectExample:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:{},!e.isLoading){n.next=3;break}return n.abrupt("return");case 3:r=o.before,l=void 0===r?"":r,c=o.after,d=void 0===c?"":c,e.imgUrl="",e.resultImgUrl="",e.imgLoading=!0,e.imgUrl=l,e.resultImgUrl=d,e.sliderWidth=10,e.openWorkArea();case 11:case"end":return n.stop()}}),n)})))()},scrollBottom:function(){try{window.scrollTo({top:500,behavior:"smooth"})}catch(t){}},openWorkArea:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.RemoveBgDialog.show(t)},scrollTop:function(){window.scrollTo({top:0,behavior:"smooth"})}},head:function(){return{title:this.$t("seoRemoveBg_tag_title"),meta:[{hid:"description",name:"description",content:this.$t("seoRemoveBg_tag_desc")},{hid:"keywords",name:"keywords",content:this.$t("AIRemoveBgKeyword")},{hid:"og:title",name:"og:title",content:this.$t("seoRemoveBg_tag_title")},{hid:"og:description",name:"og:description",content:this.$t("seoRemoveBg_tag_desc")}]}}},I=O,$=(n(2615),Object(y.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-fast-tools-remove-background"},[e("div",{staticClass:"top-bar"},[e("div",{staticClass:"top-bar-icon"},[e("img",{attrs:{src:t.iconUrl,alt:""}})]),t._v(" "),e("h1",{staticClass:"top-bar-main-title"},[t._v(t._s(t.$t("AIRemoveBg_top_title")))]),t._v(" "),e("div",{staticClass:"top-bar-sub-title"},[t._v(t._s(t.$t("AIRemoveBg_top_sub")))])]),t._v(" "),e("div",{staticClass:"cnt"},[e("div",{staticClass:"left"},[e("video",{attrs:{src:"https://".concat(this.cdnHostFun(),"/static/video/AITool/removeBackgroundv2.mp4"),loop:"",autoplay:"",muted:""},domProps:{muted:!0}})]),t._v(" "),e("div",{staticClass:"right"},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],staticClass:"uploadBox",attrs:{accept:".jpg, .jpeg, .webp, .png",action:"#",drag:"","before-upload":t.handleBeforeUpload,"http-request":t.handleBeforeUploadEmpty,"show-file-list":!1}},[e("i",{staticClass:"el-icon-upload image-upload-icon"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("TaskUploadImageClickUploadTips")))])]),t._v(" "),e("div",{staticClass:"tip"},[e("i",{staticClass:"el-icon-bottom"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_tools_9")))])]),t._v(" "),e("div",{staticClass:"ex"},[t._l(t.exampleList,(function(n,o){return[null!=n&&n.before?e("img",{key:(null==n?void 0:n.before)+o,attrs:{src:null==n?void 0:n.before,alt:""},on:{click:function(e){return e.stopPropagation(),t.handleSelectExample(n)}}}):t._e()]}))],2)],1)]),t._v(" "),e("remove-bg-dialog",{ref:"RemoveBgDialog",attrs:{isLoading:t.isLoading,imgUrl:t.imgUrl,resultImgUrl:t.resultImgUrl},on:{reupload:t.removeImage}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading||t.resultImgUrl&&t.imgLoading,expression:"isLoading || (resultImgUrl && imgLoading)"}],staticClass:"result-show-area",style:t.resultStyle},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.resultImgUrl&&!t.imgLoading,expression:"resultImgUrl && !imgLoading"}],staticClass:"background-board"}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"imgUrl"}],staticClass:"result-content-box"},[e("div",{style:"clip-path: polygon(0px 0px, ".concat(t.sliderWidth,"% 0px, ").concat(t.sliderWidth,"% 100%, 0px 100%);")},[e("img",{staticClass:"result-raw-img",staticStyle:{"clip-path":"polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%)"},attrs:{src:t.imgUrl,id:"rm-bg-original",alt:"Original image"},on:{mousedown:function(t){t.preventDefault()},contextmenu:function(t){t.preventDefault()}}})]),t._v(" "),t.resultImgUrl?e("div",{staticClass:"process-img-box"},[e("img",{staticClass:"processed-img",attrs:{src:t.resultImgUrl,alt:"Processed image"},on:{load:t.handleImageLoad,error:t.handleImageLoad,mousedown:function(t){t.preventDefault()},contextmenu:function(t){t.preventDefault()}}})]):t._e(),t._v(" "),t.resultImgUrl?e("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderWidth,expression:"sliderWidth"}],staticClass:"image-view-slider",attrs:{type:"range",step:.01,min:0,max:100},domProps:{value:t.sliderWidth},on:{change:t.handleRangeChange,__r:function(e){t.sliderWidth=e.target.value}}}):t._e()]),t._v(" "),t.imgUrl&&t.resultImgUrl&&!t.isLoading&&!t.imgLoading?[e("span",{staticClass:"bottom-download-btn",on:{click:function(e){return e.stopPropagation(),t.downloadImage.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-icon-Download bottom-download-btn-icon"}),t._v(" "),e("span",{staticClass:"bottom-download-btn-text"},[t._v(t._s(t.$t("DownloadImg")))])])]:t._e()],2),t._v(" "),t.isLoading||t.resultImgUrl&&t.imgLoading?e("div",{staticClass:"quick-box"},[e("QuickQueue",{staticClass:"quick-con",attrs:{quickOptions:t.quickOptions}})],1):t._e()])],1)}),[],!1,null,null,null));e.default=$.exports},3287:function(t,e,n){"use strict";n.r(e);n(9),n(11),n(12),n(6);var o=n(3),r=n(2),l=(n(20),n(16),n(7),n(10),n(19),n(8),n(4),n(23),n(49),n(18),n(76),n(37),n(29),n(1)),c=n(1905),d=n(344);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var v={name:"ExampleDialog",data:function(){return{isShowDialog:!1,correctImgs:[],incorrectImgs:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)("user",["cdnHostFun"])),mounted:function(){var t=["https://".concat(this.cdnHostFun(),"/static/upload/20240507/88f6ab82-fbe3-4572-88bc-7809c58e4d95.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/004bec84-a27c-425c-91ec-d2344b68fe12.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/2d639328-99aa-46fc-a7cb-0ed3d93dcd11.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/d1c777ec-f87e-4ca5-bfac-2091dcb507ac.jpg")],e=["https://".concat(this.cdnHostFun(),"/static/upload/20240507/54d39caf-5852-4278-80bd-bb6733f81b27.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/e0d08b8e-88e0-4366-82f6-458d189521d2.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/9969d1e8-6e0a-4ac1-b559-d09b34b02b71.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/5c784578-2070-4965-a38d-129d34aa3d1c.jpg")];this.correctImgs=t,this.incorrectImgs=e},methods:{showDialog:function(){this.isShowDialog=!0},closeDialog:function(){this.isShowDialog=!1}}},m=v,f=(n(2658),n(0)),_=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"face-changing-example",attrs:{visible:t.isShowDialog,"destroy-on-close":!0},on:{"update:visible":function(e){t.isShowDialog=e}}},[e("i",{staticClass:"el-icon-close close-icon",on:{click:t.closeDialog}}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v("\n\t\t\t"+t._s(t.$t("MakeHightQuality"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"explain"},[e("div",[t._v("1. "+t._s(t.$t("danceChangingExample1")))]),t._v(" "),e("div",[t._v("2. "+t._s(t.$t("danceChangingExample2")))]),t._v(" "),e("div",[t._v("3. "+t._s(t.$t("danceChangingExample3")))])]),t._v(" "),e("div",{staticClass:"correct-example"},[e("div",{staticClass:"header"},[e("svg-icon",{attrs:{"icon-class":"correct-icon"}}),t._v(" "),e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography23")))])],1),t._v(" "),e("div",{staticClass:"img-container"},t._l(t.correctImgs,(function(t,n){return e("img",{key:n,staticClass:"item-img",attrs:{src:t,alt:"correct images"}})})),0)]),t._v(" "),e("div",{staticClass:"incorrect-example"},[e("div",{staticClass:"header"},[e("svg-icon",{attrs:{"icon-class":"error-icon"}}),t._v(" "),e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography24")))])],1),t._v(" "),e("div",{staticClass:"img-container"},t._l(t.incorrectImgs,(function(t,n){return e("img",{key:n,staticClass:"item-img",attrs:{src:t,alt:"correct images"}})})),0)])]),t._v(" "),e("div",{staticClass:"footer"},[e("el-button",{staticClass:"btn",on:{click:t.closeDialog}},[t._v("\n\t\t\t"+t._s(t.$t("ok_got_it"))+"\n\t\t")])],1)])}),[],!1,null,"7b15c9b3",null).exports,y=n(261),w=n(533),C=n(38),x=n(5),k=n(45),O=n(22),I=n(566),$=n(282),j=(n(24),n(1882));function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S={name:"AiFaceChanging",mixins:[$.a],components:{CTabs:c.a,HelpTip:d.a,ExampleDialog:_,CardList:y.a,CommonProblem:w.a},data:function(){return{decsData:j.a,guides:j.b,materialSource:[],tabs:[{label:"ai_dance_tabs",value:"video"}],uploading:!1,faceUploading:!1,currentTab:"video",tabStyle:{"justify-content":"start"},source:{url:"",cover:"",compute_coin:""},targetDance:"",danceArr:[],generateStatus:"before",percentComplete:0,result:{type:"",url:"",width:"",height:"",duration:0},postParams:{type:"",cover:"",video:"",cover_height:0,cover_width:0,duration:0,url:""},loopInterval:null,page:1,pageSize:20,total:20,isShare:!0,templateId:"",requesting:!1,faceIndex:""}},mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("danceArr"));this.danceArr=e||[],this.isLoggedIn&&Object(I.c)({scenes:"anyoneDance"}).then((function(e){var n,o=null===(n=e.data)||void 0===n?void 0:n.task_ids[0];o&&(t.generateStatus="generating",t.loopGetResult(o))})),this.getDanceList()},beforeDestroy:function(){clearInterval(this.loopInterval),this.loopInterval=null},computed:L(L(L(L({},Object(l.e)("user",["token"])),Object(l.e)("payment",["paymentInfo"])),Object(l.c)("user",["cdnHostFun","isCompanyAccount","isLoggedIn"])),{},{replaceLowWebp:function(){var t=this;return function(e){return Object(x.x)(e,t.$imgL)}},isBeforeGenerate:function(){return"before"==this.generateStatus},isGenerating:function(){return"generating"==this.generateStatus},isAfterGenerate:function(){return"after"==this.generateStatus},isForbidden:function(){return this.isGenerating||this.isAfterGenerate},getPercentComplete:function(){return Math.max(0,Math.min(100,this.percentComplete))},getEstimatedCost:function(){return this.source.compute_coin},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount}}),methods:{scrollTop:function(){window.scrollTo({top:0,behavior:"smooth"})},getDanceList:function(){var t=this,e=Math.ceil(this.total/this.pageSize);this.page>e||this.requesting||(this.requesting=!0,Object(I.d)({page:this.page,page_size:this.pageSize}).then((function(e){var n=e.data,o=n.items,r=n.total;t.total=r;var l=o.map((function(e){var time=e.duration,n=t.formatSecondsToTime(time);return L(L({},e),{},{duration:n})}));t.materialSource=t.materialSource.concat(l)})).finally((function(){t.requesting=!1})))},formatSecondsToTime:function(t){var e=Math.floor(t/60),n=t%60;return"".concat(e,": ").concat(n.toString().padStart(2,"0"))},changeTab:function(t){},clearPageData:function(){this.page=1,this.total=20,this.materialSource=[]},openExampleDialog:function(){this.$refs.exampleDialog.showDialog()},toMall:function(){this.isVip?this.$EventBus.$emit("showVipComputingDialog","GetMoreCredits"):this.$EventBus.$emit("openDailyDialog")},changeSource:function(t){if(this.isForbidden)return this.$message.warning(this.$t("ai_dance_loading_toast"));var e=t.id,n=t.cover,o=t.video,video=void 0===o?"":o,r=t.compute_coin;this.templateId=e,this.source={url:video,cover:n,compute_coin:r||""},!this.targetDance&&this.danceArr.length>0&&(this.faceIndex=0,this.targetDance=this.danceArr[0])},clearTargetFace:function(){if(this.isForbidden)return this.$message.warning(this.$t("ai_dance_loading_toast"));this.targetDance="",this.faceIndex=""},clearData:function(t){var e=this;"clear"!=t?this.$confirm(this.$t("DeleteResourceConfim"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"ai-face-swap-confirm"}).then((function(){Object(I.b)({scenes:"anyoneDance"}),e.clear()})).catch((function(t){console.log("err",t)})):this.clear()},clear:function(){this.source={url:"",cover:"",compute_coin:""},this.result={type:"",url:"",width:"",height:"",duration:0},this.generateStatus="before",this.percentComplete=0,this.targetDance="",this.postParams={type:"",cover:"",video:"",cover_height:0,cover_width:0,duration:0,url:""}},generateThumbnail:function(t){return this.getBestPoster(t,30)},handleFaceBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.token){n.next=3;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 3:if(e.faceUploading=!0,o=t.size,["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)){n.next=10;break}return e.$message.error(e.$t("AllowImageFiles")),e.faceUploading=!1,n.abrupt("return");case 10:if(!(o>10485760)){n.next=22;break}return n.prev=11,n.next=14,Object(k.a)(t,10485760);case 14:t=n.sent,n.next=22;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),e.faceUploading=!1,n.abrupt("return");case 22:e.handleUploadFace(t);case 23:case"end":return n.stop()}}),n,null,[[11,17]])})))()},handleUploadFace:function(t){var e=this;new C.a({type:25}).startUpload(t).then((function(t){var n=localStorage.getItem("danceArr");if(n){var o=JSON.parse(n);if(o.length>=10)return e.$message.warning(e.$t("ai_dance_limit")),void(e.faceUploading=!1);e.danceArr.unshift(t),o.unshift(t);var r=JSON.stringify(o);localStorage.setItem("danceArr",r)}else{e.danceArr=[t];var l=JSON.stringify([t]);localStorage.setItem("danceArr",l)}(e.source.url||!e.targetDance.url&&""===e.faceIndex)&&(e.targetDance=t,e.faceIndex=0),e.source.url||""===e.faceIndex||e.faceIndex++,e.faceUploading=!1})).catch((function(t){console.log(e.$t("uploadError"),t),e.faceUploading=!1}))},handleSelectedFace:function(t,e){return this.isForbidden?this.$message.warning(this.$t("ai_dance_loading_toast")):this.source.url?void(this.isForbidden||(this.targetDance=t,this.faceIndex=e)):this.$message.warning(this.$t("ai_dance_tem_toast"))},handleDeleteFace:function(t){var e=this;if(this.isForbidden)return this.$message.warning(this.$t("ai_dance_loading_toast"));this.isForbidden||this.$confirm(this.$t("ai_dance_delete"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"ai-face-swap-confirm"}).then((function(){var n=JSON.parse(localStorage.getItem("danceArr"));n=n.filter((function(e){return e!=t})),e.danceArr=n;var o=JSON.stringify(n);localStorage.setItem("danceArr",o),e.danceArr.length<=0&&(e.faceIndex="")})).catch((function(t){console.log("err",t)}))},handleGenerate:function(){var t=this;if(this.isLoggedIn){if(this.percentComplete=0,this.isAfterGenerate)return this.targetDance="",this.generateStatus="before",void(this.faceIndex="");if(this.source.url)if(this.targetDance){this.generateStatus="generating";var e={id:this.templateId,image_url:this.targetDance};Object(I.a)(e).then((function(e){var n=e.data.task_id;n&&t.loopGetResult(n)})).catch((function(e){t.generateStatus="before",t.clear(),console.log("err",e)}))}else this.$message.warning(this.$t("ai_pls_add_dance"));else this.$message.warning(this.$t("ai_dance_tem_toast"))}else this.$EventBus.$emit("openLoginDialog")},loopGetResult:function(t){var e=this;this.loopInterval=setInterval(Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,h,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(O.a)({task_ids:[t],scene:2});case 3:if(o=n.sent,null!=(r=o.data.items)&&r[0]){n.next=7;break}return n.abrupt("return");case 7:l=r[0],c=l.process,d=l.status_desc,h=l.img_uris,l.type,v=null==h?void 0:h[0],e.percentComplete=c,n.t0=d,n.next="finish"===n.t0?13:"sysCancelDesc"===n.t0?21:"sysTimeoutDesc"===n.t0?25:29;break;case 13:return clearInterval(e.loopInterval),e.result.url=null==v?void 0:v.url,e.result.width=null==v?void 0:v.width,e.result.height=null==v?void 0:v.height,e.result.type="video",e.generateStatus="after",e.$message.success(e.$t("ai_dance_success")),n.abrupt("break",30);case 21:return clearInterval(e.loopInterval),e.$message.warning(e.$t("systemCancel")),e.clear(),n.abrupt("break",30);case 25:return clearInterval(e.loopInterval),e.$message.warning(e.$t("systemTimeoutCancel")),e.clear(),n.abrupt("break",30);case 29:return n.abrupt("break",30);case 30:n.next=35;break;case 32:n.prev=32,n.t1=n.catch(0),console.log("error",n.t1);case 35:case"end":return n.stop()}}),n,null,[[0,32]])}))),3e3)},handlePost:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,video;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.result,o=n.url,r=n.width,l=n.height,c=n.duration,t.postParams={type:"video",cover:o.replace(".mp4","_low.webp"),video:"",cover_height:l,cover_width:r,duration:c,url:o,originalUrl:t.source.url,templateId:t.templateId},(video=document.createElement("video")).src=o,video.addEventListener("loadedmetadata",(function(){var e=video.duration;t.postParams.duration=Math.floor(e),video=null,t.openPostDialog()}));case 5:case"end":return e.stop()}}),e)})))()},openPostDialog:function(){this.$EventBus.$emit("openCreativeCenterModal",{list:[this.postParams],type:this.postParams.type,source:"ai_dance",video_type:0})},handleDownload:function(){Object(x.A)({url:this.result.url})}}},D=(n(2659),Object(f.a)(S,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai-face-changing"},[e("div",{staticClass:"face-swap"},[e("div",{staticClass:"left-area",class:{generating:t.isGenerating,"after-generate":t.isAfterGenerate}},[e("CTabs",{style:t.tabStyle,attrs:{tabs:t.tabs,currentTab:t.currentTab},on:{changeTab:t.changeTab}}),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.requesting,expression:"requesting"}],ref:"scrollWrapper",staticClass:"content-container"},t._l(t.materialSource,(function(n,o){return e("div",{key:o,staticClass:"item-box",on:{click:function(e){return t.changeSource(n)}}},[e("div",{staticClass:"duration"},[t._v(t._s(n.duration))]),t._v(" "),e("div",{staticClass:"author"},[t._v(t._s(t.$t("by"))+" "+t._s(n.author_name))]),t._v(" "),e("img",{staticClass:"material",attrs:{src:t.replaceLowWebp(n.cover),alt:"image"}})])})),0)],1),t._v(" "),e("div",{staticClass:"middle-area"},[e("i",{staticClass:"iconfont icon-icon_quanminwuwang icon"}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("ai_dance_fitting_title")))]),t._v(" "),e("div",{staticClass:"explain"},[e("span",{staticClass:"words"},[t._v(t._s(t.$t("ai_dance_fitting_desc")))])]),t._v(" "),e("div",{staticClass:"preview-box"},[t.isBeforeGenerate?e("div",{staticClass:"before-generate"},[t.source.url?[e("div",{staticClass:"close-btn",on:{click:function(e){return t.clearData("clear")}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("video",{staticClass:"video-preview",attrs:{src:t.source.url,autoplay:"",loop:"",controls:""}})]:e("span",{staticClass:"empty",domProps:{innerHTML:t._s(t.$t("PlsSelectTemplate3"))}})],2):t.isGenerating?e("div",{staticClass:"generating"},[e("i",{staticClass:"el-icon-loading dance-loading"}),t._v(" "),e("div",{staticClass:"tips"},[t._v(t._s(t.$t("ai_dance_generatingAndWait")))]),t._v(" "),e("div",{staticClass:"get-more-credits",on:{click:t.toMall}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$t("GetMoreCredits"))+"\n\t\t\t\t\t\t\t"),e("i",{staticClass:"el-icon-right"})])]):e("div",{staticClass:"after-generate"},[t.result.url?[e("div",{staticClass:"post-btn",on:{click:t.handlePost}},[e("i",{staticClass:"iconfont icon-myPostIcon"})]),t._v(" "),e("div",{staticClass:"download-btn",on:{click:t.handleDownload}},[e("i",{staticClass:"iconfont icon-icon-Download download-svg"})]),t._v(" "),e("div",{staticClass:"delete-btn",on:{click:function(e){return t.clearData("delete")}}},[e("i",{staticClass:"iconfont icon-shanchu"})]),t._v(" "),e("video",{staticClass:"video-preview",attrs:{id:"danceVideo",src:t.result.url,autoplay:"",loop:"",controls:""}})]:t._e()],2)]),t._v(" "),t.isGenerating?t._e():e("div",{staticClass:"generate-box"},[e("div",{staticClass:"generate",on:{click:t.handleGenerate}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t(t.isAfterGenerate?"TryAgain":"Generate"))+"\n\t\t\t\t\t\t"),this.source.url&&t.isBeforeGenerate&&!t.isCompanyAccount?e("span",{staticClass:"compute_coin-cost"},[t._v("\n\t\t\t\t\t\t\t("+t._s(t.$t("expend"))+": "+t._s(t.getEstimatedCost)+" "+t._s(this.$t("coin"))+")\n\t\t\t\t\t\t")]):t._e()])])]),t._v(" "),e("div",{staticClass:"right-area",class:{generating:t.isGenerating,"after-generate":t.isAfterGenerate}},[e("div",{staticClass:"process"},[e("div",{staticClass:"sub-title"},[e("span",[t._v(t._s(t.$t("Process")))]),t._v(" "),e("i",{staticClass:"iconfont icon-help-icon",on:{click:t.openExampleDialog}})]),t._v(" "),e("div",{staticClass:"avatar-container"},[e("div",{staticClass:"left-box"},[t.source.cover?e("img",{staticClass:"source-image",attrs:{src:t.source.cover,alt:"target face"}}):t._e()]),t._v(" "),e("div",{staticClass:"right-box",class:{active:t.targetDance,generating:t.isGenerating,"after-generate":t.isAfterGenerate}},[t.targetDance?e("div",{staticClass:"delete-face",on:{click:t.clearTargetFace}},[e("i",{staticClass:"el-icon-close"})]):t._e(),t._v(" "),t.targetDance?e("img",{staticClass:"target-face",attrs:{src:t.targetDance,alt:"target face"}}):t._e()])])]),t._v(" "),e("div",{staticClass:"select-face"},[e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("selectImage"))+" ")]),t._v(" "),e("div",{staticClass:"sub-title-tip"},[t._v(t._s(t.$t("ai_dance_pic_tips"))+" ")]),t._v(" "),e("div",{staticClass:"face-box"},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.faceUploading,expression:"faceUploading"}],staticClass:"face-uploader item-face",attrs:{disabled:t.isForbidden,action:"/",accept:"image/*","show-file-list":!1,"before-upload":t.handleFaceBeforeUpload}},[e("div",{staticClass:"uploader"},[e("i",{staticClass:"el-icon-plus"})])]),t._v(" "),t._l(t.danceArr,(function(n,o){return e("div",{key:n,staticClass:"item-face",class:{"item-face-active":t.faceIndex===o},on:{click:function(e){return t.handleSelectedFace(n,o)}}},[e("div",{staticClass:"delete-face",class:{generating:t.isGenerating,"after-generate":t.isAfterGenerate},on:{click:function(e){return e.stopPropagation(),t.handleDeleteFace(n)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("img",{staticClass:"face-image",attrs:{src:n,alt:"face image"}})])}))],2)])])]),t._v(" "),e("ExampleDialog",{ref:"exampleDialog"})],1)}),[],!1,null,"6b1f3f00",null));e.default=D.exports},3291:function(t,e,n){"use strict";n.r(e);n(14);var o=n(2),r=n(3),l=n(31),c=(n(20),n(9),n(16),n(7),n(32),n(10),n(19),n(43),n(28),n(89),n(287),n(1957),n(11),n(12),n(8),n(4),n(23),n(49),n(18),n(76),n(6),n(29),n(150)),d=n(45),h=n(13),v=n(38),m=n(81),f=n(51),_=n(26),y=n(2923),w=n(15),C=n(5),x={data:function(){return{notFinishArr:[4,6,8],setDate:C.B,dialogVisible:!1,formData:{page:1,page_size:10},list:[],noMoreData:!1,loading:!1}},watch:{dialogVisible:{handler:function(t){t?0==this.list.length&&this.getList():(this.formData.page_size=10,this.noMoreData=!1,this.list=[])},immediate:!0}},methods:{show:function(){this.dialogVisible=!0},goTrainDet:function(t){if(console.log(789456,t),!this.notFinishArr.includes(t.status)){var e=this.localePath("/ai-audio/detail/".concat(t.timbre_id));this.$router.push(e)}},getList:function(){var t=this;this.loading||this.noMoreData||(this.loading=!0,Object(_.S)(this.formData).then((function(e){var n;1e4==e.status.code&&((n=t.list).push.apply(n,Object(w.a)(e.data.items)),e.data.has_more?t.formData.page++:t.noMoreData=!0)})).finally((function(){t.loading=!1})))},checkLoadMore:function(){var t=this.$refs.list,e=t.scrollTop,n=t.scrollHeight;e+t.clientHeight>=n-300&&this.getList()},setStatus:function(t){var e="expired";switch(t){case 1:e=this.$t("trainingCompleted");break;case 4:case 6:e=this.$t("TRAINING")+"...";break;case 8:e=this.$t("newTrainDet2")}return e},setSateClass:function(t){var e="";switch(t){case 1:e="success";break;case 8:e="fail";break;case 4:case 6:e="ing"}return e},getExpireTime:function(t){var e=(new Date).getTime();if(t&&t>e){var n=t-e,o=Math.floor(n/864e5);return o?this.$t("TaskExpireTime",{param:o}):this.$t("ExpiresSoon")}return this.$t("ExpiresSoon")}}},k=(n(2924),n(0)),O=Object(k.a)(x,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("trainiRecords"),visible:t.dialogVisible,width:"800px",top:"10vh","custom-class":"trainDialog"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"LoraTrainingHistory",on:{scroll:t.checkLoadMore}},[e("div",{staticClass:"title row"},[e("span",[t._v(t._s("ID"))]),t._v(" "),e("span",[t._v(t._s(t.$t("trainingTime")))]),t._v(" "),e("span",[t._v(t._s(t.$t("status")))]),t._v(" "),e("span",[t._v(t._s(t.$t("operation")))])]),t._v(" "),t._l(t.list,(function(n,o){return e("div",{key:n.create_at+","+o,ref:"list",refInFor:!0,staticClass:"list row"},[e("span",[t._v(t._s(n.id))]),t._v(" "),e("span",[t._v(t._s(t.setDate(n.create_at)))]),t._v(" "),e("div",{staticClass:"statusBox"},[e("div",{class:t.setSateClass(n.status)},[t._v(t._s(t.setStatus(n.status)))])]),t._v(" "),e("span",{class:{"not-cursor":t.notFinishArr.includes(n.status)},style:{color:t.notFinishArr.includes(n.status)?"#909399":"#4784FF"},on:{click:function(e){return t.goTrainDet(n)}}},[t._v(t._s(8!==n.status?t.$t("audioTrainSee"):t.$t("cannotView")))])])}))],2)])}),[],!1,null,"9121852a",null).exports,I=n(346);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={name:"AIAudioTrain",mixins:[y.a],components:{HistoryDialog:O,AudioListItem:I.a,AudioPlayer:c.a},data:function(){return{detailsData:{},textLoading:!1,tagValue:"",customStyle:{height:"44px",background:"#282933",borderRadius:"10px",padding:"10px"},isEditText:!1,title:this.$t("trainSound"),trinLoading:!1,lastFormData:{},cover:{width:0,height:0},loading:!1,tagOptions:[],totalDuration:0,recommend:{minDuration:20,recDuration:45,maxDuration:300},accept:".jpg,.jpeg,.png,.webp",UPLOAD:new v.a({type:48}),showImage:!1,isCoverLoading:!1,coverAudioLoading:!1,soundsTypeInfo:h.T,trail_voices_copy:{},trail_voices:{},createFormCopy:{id:"",cover:"",gender:"",age:"",langs:[],tones:"",name:"",text:"",tags:[],publish_status:1,audios:[],hasAudio:!1},createForm:{id:"",cover:"",gender:"",age:"",langs:[],tones:"",name:"",text:"",tags:[],publish_status:1,audios:[],hasAudio:!1},rules:Object(h.R)(this),timer:null,progress:0,gressStartTime:null,gressTotalDuration:null,gressRemainingTime:0,isCoverLoading2:!1,fileList:[],acceptTypes:".mp3,.wav,.aac,audio/mpeg,audio/wav,audio/aac",fileSizes:{},uploadedFiles:[],totalSize:0}},computed:{expend:function(){return this.getScoreByDuration(this.totalDuration)},computedDownTime:function(){return this.formatTime(this.gressRemainingTime||0)},fillWidth:function(){var t=this.totalDuration/this.recommend.maxDuration*85;return"".concat(Math.floor(t)>=85?100:Math.floor(t),"%")},minMillLeft:function(){return"".concat(Math.floor(this.recommend.minDuration/this.recommend.maxDuration*85),"%")},reMillLeft:function(){return"".concat(Math.floor(this.recommend.recDuration/this.recommend.maxDuration*85),"%")},maxMillLeft:function(){return"85%"},timeUnqualified:function(){return this.totalDuration<this.recommend.minDuration?this.$t("audioTrainTimeMin"):this.totalDuration>this.recommend.maxDuration?this.$t("audioTrainTimeMax"):""}},watch:{fileList:{handler:function(t){console.log("fileList",t)},immediate:!0,deep:!0},"createForm.audios":{handler:function(t){this.createForm.hasAudio=!(!t||!t.length)},immediate:!0,deep:!0}},methods:{onSelectFocus:function(){this.handleGetRemmodTag("")},getScoreByDuration:function(t){var e={"<20":28,"20-50":28,"51-110":33,"111-170":38,"171-230":44,"231-300":48,">300":48},n=Object.keys(e).find((function(e){if("<20"===e)return t<20;if(">300"===e)return t>300;var n=e.split("-").map(Number),o=Object(l.a)(n,2),r=o[0],c=o[1];return t>=r&&t<=c}));if(n)return e[n];throw new Error("Invalid duration")},textToVoice:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.textLoading){e.next=3;break}return t.$message.warning(t.$t("code_10405")),e.abrupt("return");case 3:t.$refs.ruleForm.validate(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var o,r,l,c,d,data,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=21;break}return e.prev=1,t.textLoading=!0,e.next=5,Object(_.K)({text:t.createForm.text,timbre_id:null===(o=t.createForm)||void 0===o?void 0:o.id});case 5:if(r=e.sent,l=r.status,c=void 0===l?{}:l,d=r.data,data=void 0===d?{}:d,80008!==c.code){e.next=14;break}return t.$EventBus.$emit(t.isVip?"showVipComputingDialog":"showNotVipComputingDialog"),t.textLoading=!1,e.abrupt("return");case 14:1e4===c.code&&data.url?(t.textLoading=!1,t.isEditText=!1,t.createForm.voiceUrl=data.url,t.trail_voices.id=null===(h=t.detailsData)||void 0===h?void 0:h.id,t.trail_voices.text=t.createForm.text):(t.textLoading=!1,t.isEditText=!1,t.$message.error(t.$t("audioCreateFail")),t.inputError=10608===c.code?"audioTxtError2":"audioTxtError1"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),t.textLoading=!1,t.isEditText=!1;case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()},triggerUsernameValidation:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;this.$refs[t].validateMessage=2===o?this.$t("audioTxtError2"):this.$t("audioTxtError1"),this.$refs[t].validateState="error",this.$nextTick((function(){e.$refs[t].$el.querySelector(".el-form-item__error").style.display=n?"none":"block"}))},handleValidator:function(t,e){var n=this,o=t.target.value||"";o&&Object(_.M)({text:o,type:e,domain:"timbre_train",langs:["zh","en","ja"]}).then((function(t){var r=t.status,l=void 0===r?{}:r,c=t.data,data=void 0===c?{}:c;1e4===l.code&&(0===data.err_code?n.$refs.ruleForm.clearValidate(2===e?"name":"text"):(2===e&&(n.triggerUsernameValidation("nameField",!1,data.err_code),n.createForm.name=Object(h.Q)(o,data.sensitive)),1===e&&(n.triggerUsernameValidation("textField",!1,data.err_code),n.createForm.text=Object(h.Q)(o,data.sensitive))))})).catch((function(t){console.log(t)}))},filterMethod:function(){var t=this;this.$nextTick((function(){try{t.$refs.tagSelect.$el.querySelector(".el-select__input").setAttribute("maxlength",20)}catch(t){}}))},taskIsIng:function(){return Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,data,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(_.S)({page:1,page_size:100});case 2:if(e=t.sent,n=e.status,o=void 0===n?{}:n,r=e.data,data=void 0===r?{}:r,console.log(o,data),1e4!==o.code){t.next=14;break}return c=!(null===(l=data.items)||void 0===l||!l.length)&&data.items.some((function(t){return[4,6].includes(t.status)})),console.log("taskIsIng",c),t.abrupt("return",c);case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})))()},handleCancel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";this.$confirm(this.$t("audioEditCancel"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){if("all"===e)return t.createForm=t.createFormCopy,t.$refs.ruleForm1.clearValidate(),t.$refs.ruleForm.clearValidate(),void t.backPage();"text"===e&&(t.$refs.ruleForm.clearValidate("text"),t.createForm.text=t.createFormCopy.text,t.isEditText=!1)}))},handleHistory:function(){this.$refs.history.show()},formatTime:function(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),o=t%60,r=e.toString().padStart(2,"0"),l=n.toString().padStart(2,"0"),c=o.toString().padStart(2,"0");return"".concat(r,":").concat(l,":").concat(c)},updateProgressForTrain:function(t){this.progress=t,100===t&&(this.gressRemainingTime=0,this.$message.success(this.$t("audioTrainSuccess")))},getTrainProgressFn:function(){var t=arguments,e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,data,h,v,m,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:null){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,Object(_.b)({task_ids:[o]});case 6:if(r=n.sent,l=r.status,c=void 0===l?{}:l,d=r.data,data=void 0===d?{}:d,1e4!==(null==c?void 0:c.code)){n.next=20;break}if(8!==(null==data||null===(h=data.items[0])||void 0===h?void 0:h.status)){n.next=14;break}return e.$message.error(e.$t("audioCreateFail")),e.updateProgressForTrain(0),e.timer&&clearInterval(e.timer),n.abrupt("return");case 14:if(100!==(null==data||null===(v=data.items[0])||void 0===v?void 0:v.progress)||1!==(null==data||null===(m=data.items[0])||void 0===m?void 0:m.status)){n.next=18;break}return e.updateProgressForTrain(100),e.timer&&clearInterval(e.timer),n.abrupt("return");case 18:e.gressRemainingTime=data.estimated_time_sec||0,e.updateProgressForTrain((null==data||null===(f=data.items[0])||void 0===f?void 0:f.progress)||0);case 20:n.next=28;break;case 22:n.prev=22,n.t0=n.catch(3),console.log("error",n.t0),e.$message.error(e.$t("uploadError")),e.updateProgressForTrain(0),e.timer&&clearInterval(e.timer);case 28:case"end":return n.stop()}}),n,null,[[3,22]])})))()},handleBeforeUpload:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("handleBeforeUpload---",t),t){n.next=3;break}return n.abrupt("return");case 3:if(/\.(mp3|wav|aac)$/i.test(t.name)){n.next=7;break}return e.$message.error(e.$message.warning(e.$t("audioUploadFileError2"))),n.abrupt("return");case 7:if(!e.uploadedFiles.includes(t.name)){n.next=10;break}return e.$message.error(e.$t("audioUploadFileError3",{fileName:t.name})),n.abrupt("return");case 10:if(o=e.fileList.reduce((function(t,e){return t+e.size}),0),e.totalSize=o,!(o>157286400)){n.next=15;break}return e.$message.error(e.$t("audioUploadMaxError")),n.abrupt("return");case 15:return e.beforeUpload(t),n.abrupt("return",!1);case 17:case"end":return n.stop()}}),n)})))()},handleBeforeUploadEmpty:function(){},handleRemove:function(t,e){var n=this;if(this.isCoverLoading2)this.$message.warning(this.$t("newTrainIntr12"));else{this.totalSize-=e.size;var o=this.uploadedFiles.indexOf(e.name);-1!==o&&this.uploadedFiles.splice(o,1),this.fileList.splice(t,1),this.createForm.audios.splice(t,1),this.totalDuration=0,this.fileList.length&&this.fileList.forEach(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.getTotalDuration(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}},updateFileSizes:function(t,e){var n=this;if(t.raw){var o=t.size,r=o<1048576?"".concat((o/1024).toFixed(2)," KB"):"".concat((o/1048576).toFixed(2)," MB");this.$set(this.fileSizes,t.uid,r)}else e.forEach((function(t){var e=t.size,o=e<1048576?"".concat((e/1024).toFixed(2)," KB"):"".concat((e/1048576).toFixed(2)," MB");n.$set(n.fileSizes,t.uid,o)}))},getTotalDuration:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(){(new AudioContext).decodeAudioData(r.result).then((function(t){var o=Math.floor(t.duration);e.totalDuration+=o,n(o)})).catch((function(t){console.error("无法解码音频文件:",t),e.$message.warning(e.$t("uploadError")),o(t)}))},r.readAsArrayBuffer(t)}))},handleGetRemmodTag:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,data,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.loading=!0,o=t?{except_num:10,prefix:t,source_type:3}:{show_area:"timbre"},!t){n.next=8;break}return n.next=5,Object(f.g)(o);case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,Object(m.a)(o);case 10:n.t0=n.sent;case 11:r=n.t0,l=r.status,c=r.data,data=void 0===c?{}:c,1e4===l.code&&(d=t?data.items:data,t?(console.log(),e.tagOptions=d.map((function(t){return{value:"".concat(t.source_id,"?").concat(t.title),title:t.title}}))):(e.tagOptions=[],d.forEach((function(t){t.title=t[h.l[e.$i18n.locale]],t.title&&e.tagOptions.push({value:"".concat(t.id,"?").concat(t.title),title:t.title})}))),e.setTagOptionsByDetails(),e.loading=!1);case 14:case"end":return n.stop()}}),n)})))()},setTagOptionsByDetails:function(){var t,e=this;null!==(t=this.detailsData)&&void 0!==t&&null!==(t=t.tags)&&void 0!==t&&t.length&&this.detailsData.tags.map((function(t){e.tagOptions.unshift({value:"".concat(t.id,"?").concat(t.title),title:t.title})}))},formatDuration:function(t){var e=Math.floor(t/60),n=t%60;return"".concat(e,":").concat(n<10?"0":"").concat(n)},handleDelAudio:function(t){this.createForm.cover="",this.coverAudioLoading=!1},removeImage:function(){this.createForm.cover="",this.coverAudioLoading=!1},handleRoleCoverBeforeUpload:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("上传封面图",t),o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/gif","image/webp"],!e.isCoverLoading){n.next=5;break}return n.abrupt("return");case 5:if(r.includes(t.type)){n.next=8;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 8:if(!(l=t)||l.size){n.next=11;break}return n.abrupt("return",!1);case 11:if(!(t.size/1024/1024>30)){n.next=14;break}return e.$message.warning(e.$t("audioUploadMax30")),n.abrupt("return");case 14:if(!(t.size/1024/1024>5)){n.next=25;break}return n.prev=15,n.next=18,Object(d.a)(t,5242880);case 18:l=n.sent,n.next=25;break;case 21:return n.prev=21,n.t0=n.catch(15),console.error("Compression failed:",n.t0),n.abrupt("return");case 25:return n.next=27,e.checkImageSize(l);case 27:if(c=n.sent,e.createForm.cover=c.url||"",e.cover.width=c.realWidth||0,e.cover.height=c.realHeight||0,!e.isCoverLoading){n.next=33;break}return n.abrupt("return");case 33:return e.isCoverLoading=!0,o.startUpload(l).then((function(t){e.isCoverLoading=!1,e.coverAudioLoading=!0,e.createForm.cover=t||""})).catch((function(t){e.isCoverLoading=!1,e.coverAudioLoading=!1,e.createForm.cover="",e.cover.width=0,e.cover.height=0})),n.abrupt("return",!1);case 36:case"end":return n.stop()}}),n,null,[[15,21]])})))()},checkImageSize:function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){var img=new Image;img.onload=function(){var t={width:img.width,height:img.height,realWidth:img.naturalWidth,realHeight:img.naturalHeight};t.url=img.src,e(t)},img.onerror=function(){n(!1)},img.src=t.target.result},o.readAsDataURL(t)}))},submitForm:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.ruleForm1.validate((function(e){e&&t.$refs.ruleForm.validate(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var o,l,c,d,h,v,m,f,data,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=25;break}if(!t.timeUnqualified||null!==(o=t.$route.params)&&void 0!==o&&o.id){e.next=4;break}return t.$message.warning(t.$t("audioTrainTimeError")),e.abrupt("return");case 4:if(!t.isCoverLoading2){e.next=7;break}return t.$message.warning(t.$t("newTrainIntr12")),e.abrupt("return");case 7:return(c=Object.assign({},t.createForm,{cover:{url:t.createForm.cover,width:t.cover.width,height:t.cover.height},tones:[t.createForm.tones]})).tags=t.createForm.tags.length?t.createForm.tags.map((function(t){var e=t.split("?");return{id:e.length>1?e[0]:"",title:e.length>1?e[1]:e[0]}})):[],delete c.hasAudio,t.trinLoading=!0,console.log("obj",c),d=null!==(l=t.$route.params)&&void 0!==l&&l.id?_.Q:_.R,e.prev=13,e.next=16,d(c);case 16:h=e.sent,v=h.status,m=void 0===v?{}:v,f=h.data,data=void 0===f?{}:f,1e4===m.code&&(null!==(y=t.$route.params)&&void 0!==y&&y.id?(t.$message.success(t.$t("SaveSuccess")),t.backPage()):(t.$message.success(t.$t("audioTrainSuccessWait")),t.timer=setInterval(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTrainProgressFn(null==data?void 0:data.task_id);case 2:case"end":return e.stop()}}),e)}))),5e3))),t.trinLoading=!1,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(13),t.trinLoading=!1;case 25:case"end":return e.stop()}}),e,null,[[13,22]])})));return function(t){return e.apply(this,arguments)}}())}));case 1:case"end":return e.stop()}}),e)})))()},resetForm:function(t){this.$refs[t].resetFields()},backPage:function(){this.$router.back()},getDetails:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,c,d,data,h,v,m,f,y,w;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(_.v)({id:t});case 2:o=n.sent,r=o.status,c=void 0===r?{}:r,d=o.data,data=void 0===d?{}:d,1e4===c.code&&data?(e.detailsData=data,w=j(j({},e.createForm),Object.fromEntries(Object.entries(e.detailsData).filter((function(t){return Object(l.a)(t,1)[0]in e.createForm})))),e.createForm=w,e.createForm.tones=e.createForm.tones[0],e.createForm.hasAudio=!0,e.createForm.langs=e.createForm.langs||[],null!==(h=e.detailsData.tags)&&void 0!==h&&h.length?(e.setTagOptionsByDetails(),e.createForm.tags=e.createForm.tags.map((function(t){return"".concat(t.id,"?").concat(t.title)}))):e.createForm.tags=[],e.createForm.cover=(null===(v=e.createForm.cover)||void 0===v?void 0:v.url)||"",e.cover=(null===(m=e.detailsData)||void 0===m?void 0:m.cover)||{width:0,height:0},e.trail_voices={txt:null===(f=e.detailsData)||void 0===f?void 0:f.text,id:null===(y=e.detailsData)||void 0===y?void 0:y.id},e.trail_voices_copy=JSON.parse(JSON.stringify(e.trail_voices)),e.trail_voices_copy.txt=e.createForm.text,e.createFormCopy=JSON.parse(JSON.stringify(e.createForm)),console.log("编辑赋值的表单",e.createForm)):e.$message.warning(e.$t("BindAccountWarn1"));case 5:case"end":return n.stop()}}),n)})))()}},mounted:function(){var t;if(null!==(t=this.$route.params)&&void 0!==t&&t.id){var e;this.title=this.$t("audioEdit"),this.getDetails(null===(e=this.$route.params)||void 0===e?void 0:e.id)}else{this.title=this.$t("trainSound");var n=Math.floor(5*Math.random());this.createForm.text=["en","zhCN","ja"].includes(this.$i18n.locale)?h.A[this.$i18n.locale][n]:h.A.en[n]}}},L=T,S=(n(2925),Object(k.a)(L,(function(){var t,e,n,o,r,l,c=this,d=c._self._c;return d("div",{staticClass:"ai-audio-train"},[d("div",{staticClass:"ai-audio-train-top"},[d("div",{staticClass:"ai-audio-train-top-left"},[d("div",{staticClass:"title"},[d("span",[c._v(c._s(c.title))]),c._v(" "),c.gressRemainingTime?[d("span",[c._v(c._s(c.$t("newTrainDet1")))]),c._v(" "),d("span",[c._v(c._s(c.computedDownTime))])]:c._e()],2),c._v(" "),0!==c.progress&&100!==c.progress?d("div",{staticClass:"progress"},[d("div",{staticClass:"progress-inner",style:{width:c.progress+"%"}}),c._v(" "),d("span",{staticClass:"txt"},[c._v("\n                    "+c._s(c.$t("trainingTaskProgress"))+"\n                    "),d("span",{staticClass:"num"},[c._v(c._s(c.progress+"%"))])])]):c._e()]),c._v(" "),d("div",{staticClass:"ai-audio-train-top-right"},[null!==(t=c.$route.params)&&void 0!==t&&t.id?d("div",{staticClass:"edit-box"},[d("div",{staticClass:"btn-item cancel-btn",on:{click:function(t){return c.handleCancel("all")}}},[c._v("\n                    "+c._s(c.$t("Cancel"))+"\n                ")]),c._v(" "),d("div",{staticClass:"btn-item query-btn",on:{click:c.submitForm}},[c._v("\n                    "+c._s(c.$t("Save"))+"\n                ")])]):d("div",{staticClass:"btn",on:{click:c.handleHistory}},[c._v("\n                "+c._s(c.$t("trainiRecords"))+"\n            ")])])]),c._v(" "),d("div",{staticClass:"container"},[d("div",{staticClass:"container-left"},[d("el-form",{ref:"ruleForm1",staticClass:"rule-form",attrs:{"label-position":"top",model:c.createForm,rules:c.rules}},[d("el-form-item",{attrs:{label:c.$t("CreativeCenterPopup32"),prop:"cover"}},[d("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:c.createForm.cover,callback:function(t){c.$set(c.createForm,"cover",t)},expression:"createForm.cover"}}),c._v(" "),d("div",{directives:[{name:"loading",rawName:"v-loading",value:c.isCoverLoading||c.coverAudioLoading,expression:"isCoverLoading || coverAudioLoading"}],staticClass:"add-role-avatar"},[c.createForm.cover?[d("img",{attrs:{src:c.createForm.cover,alt:""},on:{load:function(t){c.coverAudioLoading=!1},error:function(t){c.coverAudioLoading=!1}}}),c._v(" "),d("span",{directives:[{name:"show",rawName:"v-show",value:c.createForm.cover&&!c.isCoverLoading,expression:"createForm.cover && !isCoverLoading"}],staticClass:"el-image-viewer__close",on:{click:function(t){return t.stopPropagation(),c.removeImage("cover")}}},[d("i",{staticClass:"iconfont icon-icon-delete"})])]:d("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:c.isCoverLoading,expression:"isCoverLoading"}],key:"add-role-avatar",ref:"addRoleAvatar",staticClass:"image-upload",attrs:{action:"#","before-upload":c.handleRoleCoverBeforeUpload,disabled:c.isCoverLoading,accept:c.accept,"http-request":function(){},"show-file-list":!1}},[d("div",{staticClass:"image-upload-trigger",attrs:{slot:"trigger"},slot:"trigger"},[d("i",{staticClass:"iconfont icon-add-icon"}),c._v(" "),d("span",[c._v(c._s(c.$t("audioUpload")))])])])],2)],1),c._v(" "),d("div",{staticClass:"attr-box"},[d("el-form-item",{attrs:{label:c.$t("gender"),prop:"gender"}},[d("el-select",{attrs:{placeholder:c.$t("Pls_select"),"popper-class":"custom-select"},model:{value:c.createForm.gender,callback:function(t){c.$set(c.createForm,"gender",t)},expression:"createForm.gender"}},c._l(c.soundsTypeInfo[0].value,(function(t,e){return d("el-option",{key:e,attrs:{label:c.$t(t.i18Key),value:t.value}})})),1)],1),c._v(" "),d("el-form-item",{attrs:{label:c.$t("AI_person_age"),prop:"age"}},[d("el-select",{attrs:{placeholder:c.$t("Pls_select"),"popper-class":"custom-select"},model:{value:c.createForm.age,callback:function(t){c.$set(c.createForm,"age",t)},expression:"createForm.age"}},c._l(c.soundsTypeInfo[1].value,(function(t,e){return d("el-option",{key:e,attrs:{label:c.$t(t.i18Key),value:t.value}})})),1)],1),c._v(" "),d("el-form-item",{attrs:{label:"",prop:"langs"}},[d("template",{slot:"label"},[d("el-badge",{staticClass:"item",attrs:{value:null===(e=c.createForm.langs)||void 0===e?void 0:e.length,hidden:0==(null===(n=c.createForm.langs)||void 0===n?void 0:n.length)}},[d("span",[c._v(c._s(c.$t("audioLang")))])])],1),c._v(" "),d("el-select",{attrs:{multiple:"",placeholder:c.$t("Pls_select"),"popper-class":"custom-select"},model:{value:c.createForm.langs,callback:function(t){c.$set(c.createForm,"langs",t)},expression:"createForm.langs"}},c._l(c.soundsTypeInfo[2].value,(function(t,e){return d("el-option",{key:e,attrs:{label:c.$t(t.i18Key),value:t.value}})})),1)],2),c._v(" "),d("el-form-item",{attrs:{label:c.$t("intonation"),prop:"tones"}},[d("el-select",{attrs:{placeholder:c.$t("Pls_select"),"popper-class":"custom-select"},model:{value:c.createForm.tones,callback:function(t){c.$set(c.createForm,"tones",t)},expression:"createForm.tones"}},c._l(c.soundsTypeInfo[3].value,(function(t,e){return d("el-option",{key:e,attrs:{label:c.$t(t.i18Key),value:t.value}})})),1)],1)],1),c._v(" "),d("el-form-item",{ref:"nameField",attrs:{label:c.$t("audioSoundName"),prop:"name"}},[d("el-input",{attrs:{placeholder:c.$t("audioInputSound"),maxlength:"20","show-word-limit":"",clearable:""},on:{blur:function(t){return c.handleValidator(t,2)}},model:{value:c.createForm.name,callback:function(t){c.$set(c.createForm,"name",t)},expression:"createForm.name"}})],1),c._v(" "),null!==(o=c.$route.params)&&void 0!==o&&o.id?c._e():d("el-form-item",{ref:"textField",attrs:{label:"",prop:"text"}},[d("template",{slot:"label"},[d("span",[c._v(c._s(c.$t("audioExample")))]),c._v(" "),d("span",{staticClass:"tip tip2"},[c._v(c._s(c.$t("audioCreateTips")))])]),c._v(" "),d("el-input",{attrs:{placeholder:c.$t("pleaseEnte"),maxlength:"50","show-word-limit":"",clearable:""},on:{blur:function(t){return c.handleValidator(t,1)}},model:{value:c.createForm.text,callback:function(t){c.$set(c.createForm,"text",t)},expression:"createForm.text"}})],2),c._v(" "),d("el-form-item",{staticClass:"el-form-item-tag",attrs:{label:c.$t("Tags"),prop:"tag"}},[d("el-select",{ref:"tagSelect",staticClass:"tag-select",attrs:{"automatic-dropdown":"","allow-create":"","show-word-limit":"","popper-class":"show-tag-select",multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:c.$t("pleaseEnte"),"multiple-limit":5,"remote-method":c.handleGetRemmodTag,loading:c.loading},on:{focus:c.onSelectFocus},nativeOn:{input:function(t){return c.filterMethod.apply(null,arguments)}},model:{value:c.createForm.tags,callback:function(t){c.$set(c.createForm,"tags",t)},expression:"createForm.tags"}},c._l(c.tagOptions,(function(t){return d("el-option",{key:t.value,attrs:{label:t.title,value:t.value}})})),1),c._v(" "),d("div",{staticClass:"limt"},[c._v("\n                        "+c._s((null===(r=c.createForm.tags)||void 0===r?void 0:r.length)||"0")+"/5\n                    ")])],1),c._v(" "),d("el-form-item",{attrs:{label:c.$t("hasPublic"),prop:"publish_status"}},[d("div",{staticClass:"is-public"},[d("div",{staticClass:"is-public-item",class:{"is-public-item-active":1===c.createForm.publish_status},on:{click:function(t){c.createForm.publish_status=1}}},[c._v("\n                            "+c._s(c.$t("Publish"))+"\n                        ")]),c._v(" "),d("div",{staticClass:"is-public-item",class:{"is-public-item-active":2===c.createForm.publish_status},on:{click:function(t){c.createForm.publish_status=2}}},[c._v("\n                            "+c._s(c.$t("createSetting2"))+"\n                        ")])])])],1)],1),c._v(" "),d("div",{staticClass:"container-right"},[d("el-form",{ref:"ruleForm",staticClass:"rule-form rule-form-right",attrs:{"label-position":"top",model:c.createForm,rules:c.rules}},[null!==(l=c.$route.params)&&void 0!==l&&l.id?[d("el-form-item",{attrs:{label:"",prop:"text"}},[d("template",{slot:"label"},[d("span",[c._v(c._s(c.$t("audioExample")))]),c._v(" "),d("span",{staticClass:"tip tip2"},[c._v(c._s(c.$t("audioCreateTips")))])]),c._v(" "),c.isEditText?d("el-input",{directives:[{name:"loading",rawName:"v-loading",value:c.textLoading,expression:"textLoading"}],attrs:{disabled:c.textLoading,type:"textarea",placeholder:c.$t("pleaseEnte"),maxlength:"50","show-word-limit":"",clearable:""},model:{value:c.createForm.text,callback:function(t){c.$set(c.createForm,"text",t)},expression:"createForm.text"}}):d("AudioListItem",{attrs:{showPlayer:!1,"custom-style":c.customStyle,obj:c.createForm,modelPlay:"",item:c.trail_voices,showMore:!1},scopedSlots:c._u([{key:"custom_header",fn:function(t){var e;return[d("div",{staticClass:"header-info"},[d("AudioPlayer",{attrs:{modelPlay:"",authorId:null===(e=c.detailsData.author)||void 0===e?void 0:e.id,item:t.data,customClass:"try-class",playIconCustomStyle:{position:"unset"}}}),c._v(" "),d("el-tooltip",{attrs:{"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[d("div",{staticClass:"tooltip-txt",attrs:{slot:"content"},slot:"content"},[c._v("\n                                            "+c._s(c.createForm.text||c.$t("no_data"))+"\n                                        ")]),c._v(" "),d("div",{staticClass:"header"},[c._v("\n                                            "+c._s(c.createForm.text||c.$t("no_data"))+"\n                                        ")])])],1)]}}],null,!1,1909190682)})],2),c._v(" "),d("div",{staticClass:"btn-box"},[c.isEditText?[d("div",{directives:[{name:"show",rawName:"v-show",value:!c.textLoading,expression:"!textLoading"}],staticClass:"btn-item",on:{click:function(t){return c.handleCancel("text")}}},[c._v(c._s(c.$t("Cancel")))]),c._v(" "),d("div",{staticClass:"btn-item btn-item-create",on:{click:c.textToVoice}},[d("i",{directives:[{name:"show",rawName:"v-show",value:c.textLoading,expression:"textLoading"}],staticClass:"el-icon-loading"}),c._v(" "),d("span",[c._v(c._s(c.$t("audioTrainEdit")))]),c._v(" "),d("el-tooltip",{attrs:{content:c.$t("audioCreateTip"),"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[d("span",{staticClass:"iconfont icon-ruleIcon"})])],1)]:d("div",{staticClass:"btn-item",on:{click:function(t){c.isEditText=!0}}},[d("i",{staticClass:"icon-icon-edit2 iconfont"}),c._v("\n                            "+c._s(c.$t("audioEditRset"))+"\n                        ")])],2)]:[d("el-form-item",{attrs:{label:"",prop:"hasAudio"}},[d("template",{slot:"label"},[d("span",[c._v(c._s(c.$t("audioUploadAudio")))]),c._v(" "),d("span",{staticClass:"tip tip2"},[c._v(c._s(c.$t("audioUploadAudioTitleTip")))])]),c._v(" "),d("el-switch",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:c.createForm.hasAudio,callback:function(t){c.$set(c.createForm,"hasAudio",t)},expression:"createForm.hasAudio"}}),c._v(" "),d("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:c.isCoverLoading2,expression:"isCoverLoading2"}],staticClass:"audio-upload",attrs:{multiple:"",action:"#",drag:"","before-upload":c.handleBeforeUpload,disabled:c.isCoverLoading2,accept:c.acceptTypes,"file-list":c.fileList,"http-request":c.handleBeforeUploadEmpty,"show-file-list":!1}},[d("div",{staticClass:"image-upload-trigger",attrs:{slot:"trigger"},slot:"trigger"},[d("i",{staticClass:"el-icon-upload"}),c._v(" "),d("span",{staticClass:"tip1"},[c._v(c._s(c.$t("audioUploadAudioTip")))]),c._v(" "),d("span",{staticClass:"tip2"},[c._v(c._s(c.$t("audioUploadAudioMax")))])])])],2),c._v(" "),d("div",{staticClass:"add-audio-box"},[c.fileList.length?d("div",{staticClass:"audio-box"},c._l(c.fileList,(function(t,e){return d("div",{key:e,staticClass:"upload-box-item"},[d("div",{staticClass:"del-icon",on:{click:function(n){return c.handleRemove(e,t)}}},[d("i",{staticClass:"el-icon-close"})]),c._v(" "),d("div",{staticClass:"icon-box"},[d("i",{staticClass:"iconfont icon-a-icon-AudioTraining"})]),c._v(" "),d("div",{staticClass:"info-box"},[d("div",{staticClass:"info-1"},[c._v("\n                                        "+c._s(t.name)+"\n                                    ")]),c._v(" "),d("div",{staticClass:"info-2"},[c._v("\n                                        "+c._s(c.fileSizes[t.uid])+"\n                                    ")])])])})),0):c._e(),c._v(" "),d("div",{staticClass:"recommend-box"},[d("div",{staticClass:"recommend-box-top"},[d("div",{staticClass:"re-time"},[c._v(c._s(c.$t("audioUploaded"))+": "),d("span",{staticClass:"time"},[c._v(c._s(c.totalDuration)+"s")])]),c._v(" "),d("span",{staticClass:"re-time"},[c.createForm.audios.length&&c.timeUnqualified?d("span",{staticClass:"time-error"},[c._v("\n                                        "+c._s(c.timeUnqualified)+"\n                                    ")]):d("i18n",{attrs:{path:"audioReMill",tag:!1}},[d("template",{slot:"mill"},[d("span",{staticClass:"time"},[c._v(c._s(c.recommend.recDuration))])])],2)],1)]),c._v(" "),d("div",{staticClass:"progress-bar"},[d("div",{staticClass:"bar"},[d("div",{staticClass:"fill",class:{"fill-min-max":c.timeUnqualified},style:{width:c.fillWidth}}),c._v(" "),d("div",{staticClass:"handle min",style:{left:c.minMillLeft}},[d("div",{staticClass:"icon"}),c._v(" "),d("div",{staticClass:"txt"},[c._v("\n                                            "+c._s(c.$t("audioUploaMin"))+"\n                                        ")])]),c._v(" "),d("div",{staticClass:"handle max",style:{left:c.maxMillLeft}},[d("div",{staticClass:"icon"}),c._v(" "),d("div",{staticClass:"txt"},[c._v("\n                                            "+c._s(c.$t("audioUploadMax"))+"\n                                        ")])])])]),c._v(" "),d("div",{staticClass:"tips-box"},[c._v("\n                                "+c._s(c.$t("Tip"))+":\n                                "+c._s(c.$t("audioMin"))+"\n                                "),d("span",{staticClass:"values"},[c._v(c._s(c.recommend.minDuration)+"S")]),c._v("\n                                "+c._s(c.$t("audioMax"))+"\n                                "),d("span",{staticClass:"values"},[c._v(c._s(c.recommend.maxDuration)+"S,")]),c._v("\n                                "+c._s(c.$t("news_recommend_article"))+"\n                                "),d("span",{staticClass:"values"},[c._v(c._s(c.recommend.recDuration)+"S")])])]),c._v(" "),d("div",{directives:[{name:"loading",rawName:"v-loading",value:c.trinLoading,expression:"trinLoading"}],staticClass:"handle-btn",on:{click:c.submitForm}},[d("div",{staticClass:"btn-1"},[c._v(c._s(c.$t("trainNow")))]),c._v(" "),d("div",{staticClass:"btn-1 btn-2"},[d("span",[c._v(c._s(c.$t("expend"))+":"+c._s(c.expend))])])])])]],2)],1)]),c._v(" "),d("HistoryDialog",{ref:"history"})],1)}),[],!1,null,"51265805",null));e.default=S.exports},3292:function(t,e,n){"use strict";n.r(e);n(9),n(11),n(12),n(8),n(6);var o=n(2),r=(n(16),n(7),n(10),n(4),n(29),n(1)),l=n(347),c=n(348),d=(n(36),n(3)),h=(n(20),n(19),n(22)),v=n(91),m=n(544),f=n(21),_=n(39),y={name:"AlbumCard",props:{info:{type:Object,default:function(){return{}}}},components:{MorePopover:m.a,commonConfirmModal:v.a},computed:{imgList:function(){return this.imagesByTaskId.length?this.imagesByTaskId:(null===(t=this.info)||void 0===t?void 0:t.components)||[];var t},imgCount:function(){var t,e;return(null===(t=this.imgList)||void 0===t?void 0:t.length)||(null===(e=this.imgList)||void 0===e?void 0:e.length)},isWaiting:function(){var t,e;return 1===(null===(t=this.info)||void 0===t?void 0:t.status)&&"waiting"===(null===(e=this.info)||void 0===e?void 0:e.status_desc)||1===this.status},isRestart:function(){var t;return"finishResetWaiting"===(null===(t=this.info)||void 0===t?void 0:t.status_desc)},isProcessing:function(){var t;return 2===(null===(t=this.info)||void 0===t?void 0:t.status)||2===this.status},isFinished:function(){var t;return 3===(null===(t=this.info)||void 0===t?void 0:t.status)&&!this.isRestart||this.imagesByTaskId.length},isCanceled:function(){var t;return 4===(null===(t=this.info)||void 0===t?void 0:t.status)||4===this.status},waitTime:function(){return this.process?Math.ceil((100-this.process)/20):5}},data:function(){return{imagesByTaskId:[],status:null,process:0,inTimes:null}},created:function(){},mounted:function(){if(this.isProcessing||this.isWaiting){var t,e=null===(t=this.info)||void 0===t?void 0:t.task_id;e&&this.getTaskInfo(e)}},beforeDestroy:function(){this.inTimes&&clearTimeout(this.inTimes)},methods:{getTaskInfo:function(t){var e=this,n={};n.task_ids=[t],Object(h.a)(n).then((function(n){var o,r,l,c,d,h,v;if(1e4===(null==n||null===(o=n.status)||void 0===o?void 0:o.code))if(e.status=(null==n||null===(r=n.data)||void 0===r||null===(r=r.items[0])||void 0===r?void 0:r.status)||null,null!=n&&null!==(l=n.data)&&void 0!==l&&l.items[0]&&3===(null==n||null===(c=n.data)||void 0===c||null===(c=c.items[0])||void 0===c?void 0:c.status))clearTimeout(e.inTimes),e.imagesByTaskId=(null==n||null===(v=n.data)||void 0===v||null===(v=v.items[0])||void 0===v?void 0:v.img_uris)||[];else if(null!=n&&null!==(d=n.data)&&void 0!==d&&d.items[0]&&4===(null==n||null===(h=n.data)||void 0===h||null===(h=h.items[0])||void 0===h?void 0:h.status))clearTimeout(e.inTimes),e.$message.warning(e.$t("comicPage17"));else{var m;e.process=(null==n||null===(m=n.data)||void 0===m||null===(m=m.items[0])||void 0===m?void 0:m.process)||0,clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t)}),5e3)}})).catch((function(n){clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t)}),5e3)}))},toDetail:function(){if(this.isFinished){var path=this.localePath("/ai-headshot-creations/".concat(this.info.task_id));this.$logEvent("log_actions",{operation:"click_detail",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"ai_profile_album"}),this.$router.push(path)}else if(this.isRestart||this.isCanceled){var t=this.localePath("/ai-headshot-generator?task=".concat(this.info.task_id));this.$logEvent("log_actions",{operation:"click_retry",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"go_to_create"}),window.open(t,"_blank")}else(this.isWaiting||this.isProcessing)&&this.$message.warning(this.$t("waitingGenerate"))},deleteAlbum:function(){var t=this;this.$refs.commonConfirmModal.show({subTitle:"deleteConfirm",btnStyle:{background:"linear-gradient(81deg, #387cda 0%, #1dd5d6 100%)"}}).then((function(){t.$emit("deleteAlbum",t.info.task_id)})),this.$logEvent("log_actions",{operation:"click_delete",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"ai_profile_album"})},saveAlbum:function(){var t,e=this;if(null!==(t=this.info)&&void 0!==t&&null!==(t=t.components)&&void 0!==t&&t.length){this.$logEvent("log_actions",{operation:"click_download",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"ai_profile_album"});var n=this.info.components.map((function(t){return t.url}));Object(f.c)({scene:"task_v2_flow",urls:n}).then((function(t){var n=t.data.task_id;e.loopCallDownload(n)}))}},loopCallDownload:function(t){var e=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=setInterval(Object(d.a)(regeneratorRuntime.mark((function n(){var r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(f.c)({task_id:t,scene:"task_v2_flow"});case 3:r=n.sent,l=r.data.url,e.batchLoading=!1,l&&(clearInterval(o),e.downloadFile(l)),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(0),clearInterval(o),e.batchLoading=!1,console.log("error",n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,9]])}))),3e3);case 2:case"end":return n.stop()}}),n)})))()},downloadFile:function(t){var link=document.createElement("a");link.href=t,link.download="ai-headshot-".concat(Object(_.h)((new Date).getTime(),"yyyyMMddhhmmss")),link.click()}}},w=(n(2942),n(2943),n(0)),C=Object(w.a)(y,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"AlbumCard"},[n("div",{staticClass:"inner flex flex-col",on:{click:e.toDetail}},[n("div",{staticClass:"img-container flex_line_c_m"},[e.isFinished&&null!==(t=e.imgList)&&void 0!==t&&t.length?[e._l(e.imgList.slice(0,4),(function(img,t){var o;return n("div",{directives:[{name:"show",rawName:"v-show",value:(null===(o=e.imgList)||void 0===o?void 0:o.length)&&t<4,expression:"imgList?.length && index < 4"}],key:"img_"+t,staticClass:"img-box w-full h-full flex items-center justify-center"},[null!=img&&img.url?n("img",{attrs:{src:null==img?void 0:img.url,width:"120",height:"150",alt:"avatar",loading:"lazy"}}):e._e()])})),e._v(" "),n("MorePopover",{attrs:{showDelete:!0,showSave:!0},on:{delete:e.deleteAlbum,save:e.saveAlbum}})]:e.isProcessing||e.isWaiting?[n("div",{staticClass:"loading-part flex flex-col justify-center items-center"},[n("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.isProcessing,expression:"isProcessing"}],attrs:{type:"circle",percentage:e.process,"stroke-width":6,color:"#4784ff","text-color":"#FFFFFF","define-back-color":"#4A4852"}}),e._v(" "),n("div",{staticClass:"waiting"},[e._v(e._s(e.isProcessing?e.$t("waittingTime",{num:e.waitTime}):e.$t("Queuing")))])],1)]:e.isRestart||e.isCanceled?[n("div",{staticClass:"loading-part flex flex-col justify-center items-center"},[n("div",{staticClass:"waiting"},[e._v(e._s(e.isRestart?e.$t("taskNotStarted"):e.$t("systemCancel")))]),e._v(" "),n("div",{staticClass:"btn-content"},[n("i",{staticClass:"iconfont icon-icon-Download"}),e._v(" "),n("span",[e._v(e._s(e.isRestart?e.$t("CreativeCenterPopup33"):e.$t("Regenerate")))])])])]:e._e()],2),e._v(" "),n("div",{staticClass:"numbers flex flex-col"},[n("span",{staticClass:"name"},[e._v(e._s(e.$t("AIAvatarAlbum")))]),e._v(" "),e.imgCount&&!e.isRestart?n("span",{staticClass:"count"},[e._v(e._s(e.$t("ImgsNumber",{num:e.imgCount})))]):e._e()])]),e._v(" "),n("common-confirm-modal",{ref:"commonConfirmModal"})],1)}),[],!1,null,"311c20c0",null).exports,x=n(163);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={name:"AIAvatarCreations",props:{},components:{AvatarFrame:c.a,HeadTop:l.a,AlbumCard:C},computed:{paiedAndExist:function(){var t=this;return this.cardList.some((function(e){return e.task_id===t.rollTaskId}))}},data:function(){return{loading:!1,noMore:!1,params:{after_id:"",limit:24},cardList:[],rollTaskId:""}},mounted:function(){this.getHistory(),this.rollTaskId=localStorage.getItem("photoPaySuccessId"),this.rollTaskId&&this.checkTaskExist(this.rollTaskId)},methods:O(O({},Object(r.b)("AIAvatar",["saveAllAlbum"])),{},{toCreate:function(){var path=this.localePath("/ai-headshot-generator");window.open(path,"_blank"),this.$logEvent("log_actions",{operation:"click_create_button",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"go_to_create"})},handleScroll:function(){var t=this.$refs.scrollContent;t.scrollTop+t.clientHeight>=t.scrollHeight&&this.getHistory(!0)},getHistory:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.loading&&!this.noMore){var e=t?"add":"init";this.requestHistory(e)}},requestHistory:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"init";"init"===e&&(this.params.after_id=""),this.loading=!0,Object(x.e)(this.params).then((function(n){var o;if(1e4===(null==n||null===(o=n.status)||void 0===o?void 0:o.code)){var r,l,c,d;if(t.params.after_id=null==n||null===(r=n.data)||void 0===r?void 0:r.after_id,t.noMore=!(null!=n&&null!==(l=n.data)&&void 0!==l&&l.has_more),"init"===e)t.cardList=(null==n||null===(c=n.data)||void 0===c?void 0:c.items)||[];else t.cardList=t.cardList.concat((null==n||null===(d=n.data)||void 0===d?void 0:d.items)||[]);t.saveAllAlbum(t.cardList)}})).finally((function(){return t.loading=!1}))},deleteAlbum:function(t){var e=this,n={ids:[t]};Object(h.f)(n).then((function(n){var o,r;["10000",1e4].includes(null==n||null===(o=n.status)||void 0===o?void 0:o.code)?(e.noMore=!1,e.$message({message:e.$t("deleteSuccess"),type:"success"}),e.cardList=e.cardList.filter((function(e){return e.task_id!==t}))):e.$message({message:(null==n||null===(r=n.status)||void 0===r?void 0:r.msg)||e.$t("ServerError"),type:"error"})}))},handleBack:function(){this.$router.push(this.localePath("/ai-headshot-generator"))},checkTaskExist:function(t){var e=this;if(console.log("checkTaskExist",t,this.paiedAndExist),t&&!this.paiedAndExist)var n=setInterval((function(){e.requestHistory(),e.paiedAndExist&&(localStorage.removeItem("photoPaySuccessId"),clearInterval(n))}),5e3)}})},$=I,j=(n(2944),Object(w.a)($,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"AIAvatarCreations flex flex-col"},[e("HeadTop"),t._v(" "),e("AvatarFrame",[e("div",{staticClass:"content"},[e("div",{staticClass:"album-main w-full"},[e("div",{staticClass:"top flex items-center"},[e("div",{staticClass:"arrow",on:{click:t.handleBack}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" "+t._s(t.$t("Back")))]),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("AIAvatarAlbum")))])]),t._v(" "),e("div",{ref:"scrollContent",staticClass:"custom-scroll w-full",on:{scroll:t.handleScroll}},[e("div",{staticClass:"album-list flex"},[e("div",{staticClass:"to-create flex",on:{click:t.toCreate}},[e("div",{staticClass:"inner flex flex-col"},[e("div",{staticClass:"box-container flex justify-center items-center"},[e("i",{staticClass:"iconfont icon-search-magic"})]),t._v(" "),e("div",{staticClass:"info flex justify-between"},[t._v(t._s(t.$t("toCreate"))+" "),e("i",{staticClass:"iconfont icon-right"})])])]),t._v(" "),t._l(t.cardList,(function(n){return[e("AlbumCard",{attrs:{info:n},on:{deleteAlbum:t.deleteAlbum}})]}))],2)])])])])],1)}),[],!1,null,"7b93acee",null));e.default=j.exports},3293:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12),n(4),n(6);var o=n(2),r=(n(1583),n(44),n(680)),l=n.n(r),c=(n(1584),n(681)),d=n.n(c),h=(n(10),n(19),n(43),n(8),n(18),n(1)),v=n(347),m=n(348),f=n(207),_=(n(110),n(23),n(37),n(163)),y={name:"SatisfactionDialog",computed:{dilogClass:function(){return this.addAnimation?"scale-down-animation custom-dialog":"custom-dialog"},stepConfig:function(){return{title:"feedbackTitle".concat(this.step),subtitle:"feedbackSubtitle".concat(this.step)}}},data:function(){return{loading:!1,dialogVisible:!1,addAnimation:!1,rateOptions:[{label:"unsatisfactory",value:3,emoji:"😭",key:"click_not_satisfied"},{label:"generally",value:2,emoji:"😊",key:"click_ordinary"},{label:"satisfaction",value:1,emoji:"😄",key:"click_satisfied"}],suggestion:"",submitLoading:!1,step:1}},methods:{show:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1},handleClose:function(){this.$logEvent("log_actions",{operation:"click_close",behavior_info:"on_ai_profile_album_detail_page",behavior_info_sub:"satisfaction_popup"}),this.close()},handleSelect:function(t){3===t.value?this.step=2:this.handleRate(t.value),this.$logEvent("log_actions",{operation:t.key,behavior_info:"on_ai_profile_album_detail_page",behavior_info_sub:"satisfaction_popup"})},handleRate:function(t){var e=this;console.log("rateValue",t,this.suggestion);var n={assessment:t,task_id:this.$route.params.id};3===t&&(n.suggestion=this.suggestion,this.$logEvent("log_actions",{operation:"click_not_satisfied_submit",behavior_info:"on_ai_profile_album_detail_page",behavior_info_sub:"satisfaction_popup"})),this.submitLoading=!0,Object(_.b)(n).then((function(n){var o;1e4===(null==n||null===(o=n.status)||void 0===o?void 0:o.code)&&(3!==t&&(e.$emit("finish"),e.close()),e.suggestion="",e.$message.success(e.$t("ThksFeedback")))})).finally((function(){e.submitLoading=!1}))},resetAlbum:function(){var t=this;this.$logEvent("log_actions",{operation:"click_confirm_regenerate",behavior_info:"on_ai_profile_album_detail_page",behavior_info_sub:"satisfaction_popup"}),this.loading=!0,Object(_.h)({task_id:this.$route.params.id}).then((function(e){var n;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&(t.close(),t.$router.replace(t.localePath("/ai-headshot-creations")))})).finally((function(){t.loading=!1}))},closeDialog:function(){this.addAnimation=!0},closeFinish:function(){this.step=1,this.addAnimation=!1},showHaiyiServices:function(){var t;SUHelpSupport&&(null===(t=SUHelpSupport)||void 0===t||t.show())}}},w=(n(2945),n(0)),C=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"SatisfactionDialog"},[e("el-dialog",{attrs:{top:"0",visible:t.dialogVisible,"custom-class":t.dilogClass,modal:!1,"destroy-on-close":!0,"lock-scroll":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closeDialog,closed:t.closeFinish}},[e("span",{attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"dialog-title flex items-center justify-between"},[e("span",{staticClass:"dialog-title"},[t._v(t._s(t.$t("Tip")))]),t._v(" "),e("i",{staticClass:"el-icon-close",on:{click:t.handleClose}})])]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content flex flex-col"},[e("div",{staticClass:"upper flex flex-col"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t(t.stepConfig.title)))]),t._v(" "),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$t(t.stepConfig.subtitle)))]),t._v(" "),1===t.step?e("div",{staticClass:"btns flex"},t._l(t.rateOptions,(function(n){return e("div",{key:n.value,staticClass:"btn flex items-center justify-center",on:{click:function(e){return t.handleSelect(n)}}},[e("div",{staticClass:"emoji"},[t._v(t._s(n.emoji))]),t._v(" "),e("div",{staticClass:"label"},[t._v(t._s(t.$t(n.label)))])])})),0):2===t.step?e("el-input",{attrs:{max:500,placeholder:t.$t("feedBackHolder")},scopedSlots:t._u([{key:"append",fn:function(){var n;return[e("el-button",{attrs:{type:"primary",disabled:!(null!==(n=t.suggestion)&&void 0!==n&&n.length)||t.submitLoading},on:{click:function(e){return t.handleRate(3)}}},[t._v("\n              "+t._s(t.$t("Submit"))+"\n            ")])]},proxy:!0}]),model:{value:t.suggestion,callback:function(e){t.suggestion="string"==typeof e?e.trim():e},expression:"suggestion"}}):t._e()],1),t._v(" "),e("div",{staticClass:"bottom flex justify-center"},[e("span",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],staticClass:"help",on:{click:t.showHaiyiServices}},[t._v(t._s(t.$t("needHelp")))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}],staticClass:"generate-btn ai-avatar-btn flex items-center",on:{click:function(e){t.step=3}}},[e("i",{staticClass:"iconfont icon-search-magic"}),t._v(" "+t._s(t.$t("Regenerate"))+"\n        ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:3===t.step,expression:"step === 3"}],staticClass:"btn-container flex w-full"},[e("div",{staticClass:"btn",on:{click:t.close}},[t._v(t._s(t.$t("later")))]),t._v(" "),e("div",{staticClass:"btn generate-btn ai-avatar-btn",on:{click:t.resetAlbum}},[e("i",{staticClass:"iconfont icon-search-magic"}),t._v(" "+t._s(t.$t("Regenerate"))+"\n          ")])])])])])],1)}),[],!1,null,"52f3fd84",null).exports,x=n(91),k=n(109),O=n(5),I=n(39),$=n(544),j=n(22);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S={name:"AIAvatarListDetail",components:{MorePopover:$.a,ViewImage:f.a,AvatarFrame:m.a,SatisfactionDialog:C,HeadTop:v.a,ElSkeleton:d.a,ElSkeletonItem:l.a,commonConfirmModal:x.a},computed:L(L({},Object(h.c)("AIAvatar",["allAlbums"])),{},{isShowed:function(){var t;return this.isShowedList.includes(null===(t=this.info)||void 0===t?void 0:t.task_id)},imgList:function(){var t;return null===(t=this.info)||void 0===t||null===(t=t.components)||void 0===t?void 0:t.map((function(t){return t.url}))}}),data:function(){return{info:{},showSatisfaction:!1,isShowedList:[],fileName:""}},mounted:function(){this.getAlbumInfo(),this.getIsShowed()},methods:L(L({},Object(h.b)("AIAvatar",["saveAllAlbum"])),{},{getAlbumInfo:function(){var t=this,e=this.$route.params.id;if(e){var n=this.allAlbums[e];if(n)return this.info=n,void this.checkIsShowComment();Object(_.g)({task_id:e}).then((function(e){var n;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&(t.info=e.data,t.checkIsShowComment(),t.saveAllAlbum(t.info))}))}else this.$router.push(this.localePath("/ai-headshot-creations"))},viewBigImage:function(t,e){this.fileName="ai-headshot-".concat(Object(I.h)((new Date).getTime(),"yyyyMMddhhmmss")),this.$refs.viewImage.show(t,e.target)},showDialog:function(){this.$refs.satisfactionDialog.show(),this.$logEvent("log_actions",{operation:"satisfaction_popup",behavior_info:"on_ai_profile_album_detail_page"})},checkIsShowComment:function(){var t,e=this,n=null===(t=this.info)||void 0===t?void 0:t.task_id;Object(_.a)({task_id:n}).then((function(t){var n,o;1e4===(null==t||null===(n=t.status)||void 0===n?void 0:n.code)&&(e.showSatisfaction=1===(null==t||null===(o=t.data)||void 0===o||null===(o=o.collect)||void 0===o?void 0:o.status));e.initShowDialog()}))},initShowDialog:function(){this.showSatisfaction&&!this.isShowed&&(this.showDialog(),this.saveIsShowed())},saveIsShowed:function(){var t;this.isShowedList.push(null===(t=this.info)||void 0===t?void 0:t.task_id),localStorage.setItem("isFirstShow",JSON.stringify(this.isShowedList))},getIsShowed:function(){try{var t=localStorage.getItem("isFirstShow");t&&(this.isShowedList=JSON.parse(t))}catch(t){return!1}},saveImage:function(t){this.fileName="ai-headshot-".concat(Object(I.h)((new Date).getTime(),"yyyyMMddhhmmss")),Object(O.z)(t.url,this.fileName),this.$logEvent("log_actions",{operation:"click_download",behavior_info:"on_ai_profile_album_detail_page"})},deleteFile:function(t,e){var n=this;this.$refs.commonConfirmModal.show({subTitle:"deleteConfirm",btnStyle:{background:"linear-gradient(81deg, #387cda 0%, #1dd5d6 100%)"}}).then((function(){var o;if(1!==n.info.components.length){var r={items:[{id:null===(o=n.info)||void 0===o?void 0:o.task_id,index:t}]};Object(k.b)(r).then((function(t){var o;1e4===(null==t||null===(o=t.status)||void 0===o?void 0:o.code)&&(n.info.components.splice(e,1),n.$logEvent("log_actions",{operation:"click_delete",behavior_info:"on_ai_profile_album_detail_page"}))}))}else n.deleteAlbum()}))},deleteAlbum:function(){var t,e=this,n={ids:[null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id]};Object(j.f)(n).then((function(t){var n,o;["10000",1e4].includes(null==t||null===(n=t.status)||void 0===n?void 0:n.code)?e.$router.push(e.localePath("/ai-headshot-creations")):e.$message({message:(null==t||null===(o=t.status)||void 0===o?void 0:o.msg)||e.$t("ServerError"),type:"error"})}))}})},D=(n(2946),n(2947),Object(w.a)(S,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"avatar-detail flex flex-col"},[n("HeadTop"),e._v(" "),n("AvatarFrame",[n("div",{staticClass:"content"},[n("div",{staticClass:"album-main w-full"},[n("div",{staticClass:"top flex items-center"},[n("div",{staticClass:"arrow",on:{click:function(t){return e.$router.go(-1)}}},[n("i",{staticClass:"el-icon-arrow-left"}),e._v(" "+e._s(e.$t("Back")))]),e._v(" "),n("div",{staticClass:"title"},[e._v(e._s(e.$t("AIAvatarAlbum")))])]),e._v(" "),n("div",{staticClass:"custom-scroll w-full"},[null!==(t=e.info)&&void 0!==t&&null!==(t=t.components)&&void 0!==t&&t.length?n("div",{staticClass:"album-list flex"},e._l(e.info.components,(function(t,o){return n("div",{key:t+o,staticClass:"img-container"},[null!=t&&t.url?n("div",{staticClass:"inner"},[n("el-image",{attrs:{fit:"cover",lazy:!0,alt:"avatar",src:null==t?void 0:t.url,"preview-src-list":e.imgList}}),e._v(" "),n("MorePopover",{attrs:{showSave:!0,showDelete:!0},on:{save:function(n){return e.saveImage(t)},delete:function(n){return e.deleteFile(t.index,o)}}})],1):e._e()])})),0):n("el-skeleton",{attrs:{loading:!0,animated:"",count:4}},[n("template",{slot:"template"},[n("el-skeleton-item",{staticStyle:{width:"160px",height:"210px"},attrs:{variant:"rect"}})],1)],2)],1)])])]),e._v(" "),n("view-image",{ref:"viewImage",attrs:{fileName:e.fileName}}),e._v(" "),e.showSatisfaction?n("div",{directives:[{name:"mytip",rawName:"v-mytip.left",value:e.$t("comfyui_evaluate"),expression:"$t('comfyui_evaluate')",modifiers:{left:!0}}],staticClass:"satisfaction",on:{click:e.showDialog}},[n("i",{staticClass:"iconfont icon-icon-smile-ellipse"})]):e._e(),e._v(" "),n("SatisfactionDialog",{ref:"satisfactionDialog",on:{finish:function(t){e.showSatisfaction=!1}}}),e._v(" "),n("common-confirm-modal",{ref:"commonConfirmModal"})],1)}),[],!1,null,"203aa7b3",null));e.default=D.exports},3298:function(t,e,n){"use strict";n.r(e);n(36),n(14),n(16),n(4),n(6);var o=n(129),r=n(55),l=n(5),c=n(518),d={name:"ComfyUIList",data:function(){return{queryParam:{page:1,page_size:60,order_by:"hot",tag:"",nodes_type:[],run_available:0,offset:0,comfy_ui_type:1},loading:!1,noMore:!1,filterShow:!1,fliterLoading:!1,list:[],appList:[],tagList:[],nodeList:[],intNodeList:[],tagIndex:"hot",typeOption:[{name:"Hot",id:"hot",icon:"hot"},{name:"New",id:"new",icon:"new1"}],timeName:"All",timeTypeOption:[{name:"All",startTime:null,endTime:null},{name:"days",startTime:Object(l.p)().startTimestamp,endTime:Object(l.p)().endTimestamp},{name:"week",startTime:Object(l.r)().startTimestamp,endTime:Object(l.r)().endTimestamp},{name:"months",startTime:Object(l.o)().startTimestamp,endTime:Object(l.o)().endTimestamp}]}},components:{homeList:r.a,comfyTagList:c.a},computed:{checkRun:{get:function(){return 1===this.queryParam.run_available},set:function(t){this.queryParam.run_available=t?1:0}}},watch:{checkRun:{handler:function(t){t&&this.$logEvent("log_actions",{operation:"click_checkbox",behavior_info:"on_comfyui_landing_page"})}}},created:function(){this.getAppList(),this.getList(),this.getConfit()},methods:{goMore:function(){this.$router.push(this.localePath("/comfyUIappList")),this.$logEvent("log_actions",{operation:"click_more",behavior_info:"on_comfyui_waterfall_flow_app"})},nodeListChange:function(t){this.$logEvent("log_actions",{operation:"click_node_on",behavior_info:"on_comfyui_landing_page",behavior_info_sub:t}),this.intList()},openWork:function(){this.$logEvent("log_actions",{operation:"create_comfyui",behavior_info:"on_comfyui_landing_page"}),this.$router.push(this.localePath("/workflow"))},tagChange:function(t){this.queryParam.tag==t.value?this.queryParam.tag="":(this.queryParam.tag=t.value,this.$logEvent("log_actions",{operation:"click_workflow_tag",behavior_info:"on_comfyui_landing_page",behavior_info_sub:t})),this.intList()},remoteMethod:function(t){var e=this;t?(this.fliterLoading=!0,Object(o.e)({keyword:t}).then((function(t){1e4!==!t.status.code&&(e.nodeList=t.data.nodes)})).finally((function(){e.fliterLoading=!1}))):this.nodeList=this.intNodeList},handleCommand:function(t){this.tagIndex=t,this.queryParam.order_by=this.tagIndex,this.$logEvent("log_actions",{operation:"click_"+this.tagIndex,behavior_info:"on_comfyui_landing_page"}),this.intList()},handleTimeCommand:function(t){this.timeName=t.name,this.queryParam.time_from=t.startTime,this.queryParam.time_to=t.endTime,this.intList()},setIcon:function(){var t=this,e="homeIcon1";return this.typeOption.forEach((function(n){t.tagIndex==n.id&&(e=n.icon)})),e},intList:function(){this.queryParam.page=1,this.queryParam.offset=0,this.loading=!1,this.noMore=!1,this.list=[],this.getList()},getList:function(){var t=this;this.loading||this.noMore||(this.loading=!0,Object(o.d)(this.queryParam).then((function(e){var n,o,r;if(1e4!==!e.status.code){var l;if(t.noMore=!(null!==(n=e.data)&&void 0!==n&&n.has_more),t.list=t.list.concat((null===(o=e.data)||void 0===o?void 0:o.items)||[]),1===t.queryParam.page&&null!==(r=e.data)&&void 0!==r&&r.offset)t.queryParam.offset=null===(l=e.data)||void 0===l?void 0:l.offset;t.queryParam.page++}})).finally((function(){t.loading=!1})))},getAppList:function(){var t=this;Object(o.d)({comfy_ui_type:2,page_size:5}).then((function(e){var n;1e4!==!e.status.code&&(t.appList=(null===(n=e.data)||void 0===n?void 0:n.items)||[],t.queryParam.page++)}))},getConfit:function(){var t=this;this.fliterLoading||(this.fliterLoading=!0,Object(o.b)().then((function(e){1e4!==!e.status.code&&(t.tagList=e.data.categories,t.nodeList=e.data.nodes,t.intNodeList=e.data.nodes)})).finally((function(){t.fliterLoading=!1})))},onFilterReset:function(){this.queryParam.tag="",this.queryParam.nodes_type=[],this.queryParam.run_available=0,this.intList()}}},h=(n(2331),n(2332),n(0)),component=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ComfyUI_list"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("WorkFlow")))])]),t._v(" "),e("div",{staticClass:"funBox"},[e("div",{staticClass:"funItem"},[e("div",{staticClass:"bnt graBorder",on:{click:t.openWork}},[e("i",{staticClass:"el-icon-circle-plus-outline"}),t._v(" "),e("span",[t._v(t._s(t.$t("comfyUIList1")))])]),t._v(" "),e("div",{staticClass:"tip",domProps:{innerHTML:t._s(t.$t("comfyUIList2"))}})]),t._v(" "),e("div",{staticClass:"funItem"},[e("el-popover",{attrs:{placement:"bottom","popper-class":"comfyFilter",trigger:"click"},model:{value:t.filterShow,callback:function(e){t.filterShow=e},expression:"filterShow"}},[e("div",{staticClass:"filterCnt"},[e("el-checkbox",{on:{change:t.intList},model:{value:t.checkRun,callback:function(e){t.checkRun=e},expression:"checkRun"}},[t._v(t._s(t.$t("comfyFilter1")))]),t._v(" "),e("div",{staticClass:"filterTit"},[t._v(t._s(t.$t("comfyFilter3")))]),t._v(" "),e("el-select",{staticClass:"filterSelect",attrs:{"popper-class":"custom-select comfyFilter",filterable:"",remote:"",multiple:"",placeholder:t.$t("Pls_select"),"popper-append-to-body":!1,"remote-method":t.remoteMethod,loading:t.fliterLoading},on:{change:t.nodeListChange},model:{value:t.queryParam.nodes_type,callback:function(e){t.$set(t.queryParam,"nodes_type",e)},expression:"queryParam.nodes_type"}},t._l(t.nodeList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1),t._v(" "),e("div",{staticClass:"filterReset graBorder",on:{click:t.onFilterReset}},[t._v("\n            "+t._s(t.$t("resetSelection"))+"\n          ")])],1),t._v(" "),e("div",{staticClass:"filterBox",attrs:{slot:"reference"},slot:"reference"},[e("div",[e("i",{staticClass:"iconfont icon-a-filterIcon"}),t._v(" "),e("span",[t._v(t._s(t.$t("Filter")))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})])]),t._v(" "),e("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleTimeCommand}},[e("div",{staticClass:"el-dropdown-link selectTime"},[e("div",[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",[t._v(t._s(t.$t(t.timeName)))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.timeTypeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n}},[e("div",{staticClass:"el-dropdown-item el-dropdown-item-time"},[e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1),t._v(" "),e("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[e("div",{staticClass:"el-dropdown-link"},[e("div",[e("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(t.setIcon())}),t._v(" "),e("span",[t._v(t._s(t.$t(t.tagIndex.charAt(0).toUpperCase()+t.tagIndex.slice(1))))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.typeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n.id}},[e("div",{staticClass:"el-dropdown-item"},[e("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(n.icon)}),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1)],1)]),t._v(" "),e("comfyTagList",{attrs:{renderList:t.tagList},on:{changeTags:t.tagChange}}),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"wraper",staticClass:"workList"},[e("homeList",{attrs:{list:t.list,container:"wraper",cols:5},on:{load:t.getList}})],1)],1)}),[],!1,null,"00f1f2ed",null);e.default=component.exports},3299:function(t,e,n){"use strict";n.r(e);n(36),n(14),n(16),n(4),n(6);var o=n(129),r=n(55),l=n(518),c=n(5),d={data:function(){return{queryParam:{page:1,page_size:60,order_by:"hot",tag:"",nodes_type:[],run_available:0,comfy_ui_type:2,offset:0},loading:!1,noMore:!1,list:[],tagIndex:"hot",typeOption:[{name:"Hot",id:"hot",icon:"hot"},{name:"New",id:"new",icon:"new1"}],tagList:[],timeName:"All",timeTypeOption:[{name:"All",startTime:null,endTime:null},{name:"days",startTime:Object(c.p)().startTimestamp,endTime:Object(c.p)().endTimestamp},{name:"week",startTime:Object(c.r)().startTimestamp,endTime:Object(c.r)().endTimestamp},{name:"months",startTime:Object(c.o)().startTimestamp,endTime:Object(c.o)().endTimestamp}]}},components:{homeList:r.a,comfyTagList:l.a},mounted:function(){this.getList(),this.getConfit()},methods:{handleTimeCommand:function(t){this.timeName=t.name,this.queryParam.time_from=t.startTime,this.queryParam.time_to=t.endTime,this.intList()},getConfit:function(){var t=this;Object(o.b)().then((function(e){1e4!==!e.status.code&&(t.tagList=e.data.categories,console.log(t.tagList))}))},setIcon:function(){var t=this,e="homeIcon1";return this.typeOption.forEach((function(n){t.tagIndex==n.id&&(e=n.icon)})),e},handleCommand:function(t){this.tagIndex=t,this.queryParam.order_by=this.tagIndex,this.intList()},changeTag:function(t){this.queryParam.tag=t.value,this.intList()},intList:function(){this.queryParam.page=1,this.queryParam.offset=0,this.loading=!1,this.noMore=!1,this.list=[],this.getList()},getList:function(){var t=this;this.loading||this.noMore||(this.loading=!0,Object(o.d)(this.queryParam).then((function(e){var n,o,r;if(1e4!==!e.status.code){var l;if(t.noMore=!(null!==(n=e.data)&&void 0!==n&&n.has_more),t.list=t.list.concat((null===(o=e.data)||void 0===o?void 0:o.items)||[]),1===t.queryParam.page&&null!==(r=e.data)&&void 0!==r&&r.offset)t.queryParam.offset=null===(l=e.data)||void 0===l?void 0:l.offset;t.queryParam.page++}})).finally((function(){t.loading=!1})))},backTo:function(){history.length>2?this.$router.back():this.$router.push(this.localePath("/comfyUIList"))}}},h=(n(2333),n(0)),component=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"applist"},[e("el-backtop",{attrs:{bottom:30,right:30}},[e("i",{staticClass:"el-icon-top"})]),t._v(" "),e("div",{staticClass:"mobile-back-to",on:{click:function(e){return e.stopPropagation(),t.backTo.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-back"})]),t._v(" "),e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("featuredApps")))]),t._v(" "),e("div",{staticClass:"filterBox"},[e("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleTimeCommand}},[e("div",{staticClass:"el-dropdown-link selectTime"},[e("div",[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",[t._v(t._s(t.$t(t.timeName)))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.timeTypeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n}},[e("div",{staticClass:"el-dropdown-item el-dropdown-item-time"},[e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1),t._v(" "),e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("div",{staticClass:"el-dropdown-link"},[e("div",[e("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(t.setIcon())}),t._v(" "),e("span",[t._v(t._s(t.$t(t.tagIndex.charAt(0).toUpperCase()+t.tagIndex.slice(1))))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.typeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n.id}},[e("div",{staticClass:"el-dropdown-item"},[e("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(n.icon)}),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1)],1)]),t._v(" "),e("comfyTagList",{attrs:{renderList:t.tagList},on:{changeTags:t.changeTag}}),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"wraper",staticClass:"workList"},[e("homeList",{attrs:{list:t.list,container:"wraper",cols:5},on:{load:t.getList}})],1)],1)}),[],!1,null,"7f3429c3",null);e.default=component.exports},3303:function(t,e,n){"use strict";n.r(e);var o={name:"Personal",components:{UserInfo:n(499).a}},r=n(0),component=Object(r.a)(o,(function(){return(0,this._self._c)("UserInfo")}),[],!1,null,null,null);e.default=component.exports},3305:function(t,e,n){"use strict";n.r(e);var o={name:"JoinGroup",props:{visible:{type:Boolean,default:!1}},data:function(){return{dialogVisible:!1,wechatShow:!0,qqShow:!0}},mounted:function(){this.initJoinGroupView()},computed:{},watch:{visible:function(t){this.dialogVisible=t}},methods:{initJoinGroupView:function(){var t=this;this.$EventBus.$on("openJoinGroupModal",(function(e){console.log("eventBus openJoinGroupModal"),t.showDialog(e)}))},showDialog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"Wechat"==t?(this.wechatShow=!0,this.qqShow=!1):"QQ"==t?(this.wechatShow=!1,this.qqShow=!0):(this.wechatShow=!0,this.qqShow=!0),this.dialogVisible=!0},handleClose:function(){this.$emit("close-waitting")}}},r=o,l=(n(2505),n(2506),n(0)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{"max-width":"512px",visible:t.dialogVisible,"custom-class":"join-group-dialog","close-on-click-modal":!0,"close-on-press-escape":!0,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("加入讨论群")]),t._v(" "),e("div",{staticClass:"main-part"},[e("div",{staticClass:"title"}),t._v(" "),e("div",{staticClass:"info flex w-full items-center justify-center"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.qqShow,expression:"qqShow"}],staticClass:"qq-part"},[e("img",{attrs:{src:n(3210),alt:"qq"}}),t._v(" "),e("p",[t._v("QQ交流群")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.wechatShow,expression:"wechatShow"}],staticClass:"wechat-part"},[e("img",{attrs:{src:n(3211),alt:"wechat"}}),t._v(" "),e("p",[t._v("微信交流群")])])]),t._v(" "),e("div",{staticClass:"note"})])])],1)}),[],!1,null,"fb91ecf6",null);e.default=component.exports},3306:function(t,e,n){"use strict";n.r(e);n(16),n(14),n(8);var o=n(3),r=n(2),l=(n(20),n(47),n(10),n(9),n(7),n(11),n(12),n(4),n(125),n(113),n(6),n(29),n(187)),c=n(133),d=n(5),h=n(1),v=n(424),m=n(33),f=n(42),_=n(188),y=n(263),w=n(39),C=n(134),x=n(265),k=n(2516),O=n(1902),I=n(25),$=n(30),j=n(55);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S={name:"ArtWorkDetail",mixins:[v.a,m.a],components:{FrameDtl:x.a,MetaTooltipVue:l.a,ElImageViewer:c.a,Author:_.a,cmtComments:C.a,InviteDialog:y.a,PostReview:O.a,homeList:j.a},filters:{formatNumber:function(t){return Object(d.i)(t)}},props:{escClose:{type:Boolean,default:!1}},data:function(){return{parseTime:w.e,copyTextToClipboard:d.d,saveImg:d.z,artWorkNumber:"",bigImgDialogVisible:!1,activeIndex:0,detailInfo:{},activeImg:{},commonsObj:{},author:{},metaInfo:{},imgList:[],followed:!1,popovervisible:!1,infovisible:!1,imgLoading:!0,copied:!1,isI18nToggled:!1,imgHeight:0,imgNaturalWidth:0,imgNaturalHeight:0,globalLoading:!1,paymentInfo:null,isNewPage:!1,dotReportInfo:{category:"default",view_domain:"details",batch_id:""},initialIndex:0,relatedLoading:!1,noMoreRelated:!1,relatedImages:[],time_to:0,page:1,isShowNullRelatedImg:!1}},beforeRouteEnter:function(t,e,n){n((function(t){t.fromPath=e.name,t.setImagePageFromPath(e.path)}))},mounted:function(){this.paymentInfo=JSON.parse(localStorage.getItem("paymentInfo")),this.isI18nToggled=!this.accountSettingsData.is_off_localization,this.imgDetail()},computed:L(L(L(L(L({},Object(h.e)("app",["imagePageFromPath"])),Object(h.c)(["isSupportWebp"])),Object(h.c)("user",["isLoggedIn","userInfo","accountSettingsData","isCompanyAccount"])),Object(h.e)("user",["userInfo","accountData","adminOff"])),{},{filterXss:function(){return function(t){var e,n=null===(e=this.detailInfo)||void 0===e||null===(e=e.portfolio)||void 0===e?void 0:e.link;if(n){var content="";return n.forEach((function(t){content+='<a href="'.concat(t,'" class="text-no-wrap" target="_blank">').concat(t,"</a><br>")})),content+t}return I.default.prototype.xss(t)}},imgWidth:function(){var t=window.innerHeight-162;if(this.imgList[0]){var e,n,o=null==this?void 0:this.imgList[0];if(null!=o&&null!==(e=o.banner)&&void 0!==e&&e.width&&null!=o&&null!==(n=o.banner)&&void 0!==n&&n.height){var r,l,c=t*(null==o||null===(r=o.banner)||void 0===r?void 0:r.width)/(null==o||null===(l=o.banner)||void 0===l?void 0:l.height);return c>792?792:c<440?440:c}}return 440},convertMode:function(){var t,e={1:"createModeType1",2:"createModeType2",6:"createModeType6",4:"createModeType4",5:"createModeType5",7:"studio"},n={v5:1,v6:2,4:4,sdxl:5,hy21:6,studio:7}[null===(t=this.activeImg)||void 0===t?void 0:t.channel]||1;return e[n]?this.$t("".concat(e[n])):""},isSdModel:function(){var t,e;return[5,"5","sdxl"].includes(null==this||null===(t=this.activeImg)||void 0===t?void 0:t.channel)||[5,"5","sdxl"].includes(null==this||null===(e=this.activeImg)||void 0===e?void 0:e.category)},greenMode:function(){var t;return 2!==(null==this||null===(t=this.accountData)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.green_mode)},enableGreenMode:function(){return this.greenMode&&!["/personal"].includes(this.$route.path)},setI18nPrompt:function(){var t=this.activeImg.meta?this.activeImg.meta.prompt:"",e=this.activeImg.local_prompt;return e&&this.isI18nToggled?e:t}}),methods:L(L(L({},Object(h.d)("app",["setImagePageFromPath"])),Object(h.b)("user",["setAdminOff"])),{},{reset:function(){this.$refs.mainImage&&(this.$refs.mainImage.src=""),this.activeImg={},this.page=1,this.bigImgDialogVisible=!1,this.imgLoading=!0,this.globalLoading=!1,this.relatedLoading=!0,this.relatedImages=[],this.noMoreRelated=!1,this.copied=!1,this.isShowNullRelatedImg=!1,this.alreadyNoMoreData=!1,this.time_to=0,this.imgHeight=0,document.body.style.overflow=""},getList:function(){var t=this;if(this.$route.params.id&&1!=this.activeImg.nsfw&&!this.noMoreRelated&&!this.relatedLoading){var e={page:this.page,page_size:20,obj_id:this.$route.params.id,obj_type:4,time_to:this.time_to};this.relatedLoading=!0,Object($.n)(e).then((function(e){var n;if(null===(n=e.data)||void 0===n||!n.items)return t.noMoreRelated=!0,void t.solveScrollbarStyle();!0===e.data.has_more?(t.noMoreRelated=!1,t.page+=1):(t.alreadyNoMoreData=!0,t.noMoreRelated=!0);var o=e.data.items||[];t.time_to=e.data.time_ms,t.relatedImages=t.relatedImages.concat(o),0==t.relatedImages.length&&(t.isShowNullRelatedImg=!0)})).finally((function(){t.relatedLoading=!1}))}},isMP4Link:function(link){return!link||!link.toLowerCase().endsWith(".mp4")},imgLoaded:function(t){var img=t.target,e=img.naturalHeight,n=img.naturalWidth;this.imgNaturalWidth=img.naturalWidth,this.imgNaturalHeight=img.naturalHeight,this.imgHeight=508*e/n,this.imgLoading=!1,console.log("in load 关闭loading",this.imgLoading)},viewBigImage:function(){this.bigImgDialogVisible=!0},closeViewBigImage:function(){this.bigImgDialogVisible=!1},wordsCopy:function(){var t=this;this.copied=!0;var e=this.activeImg.meta?this.activeImg.meta.prompt:"",n=this.activeImg.local_prompt;this.copyTextToClipboard(this.isI18nToggled?n:e),setTimeout((function(){t.copied=!1}),1e3)},backTo:function(){this.$refs.frameDtl?this.$refs.frameDtl.backTo():this.$router.back()},switchImg:function(t){this.initialIndex=t,this.activeImg=this.imgList[t]},imgDetail:function(){var t=this;if(this.artWorkNumber=this.$route.params.id,this.artWorkNumber){var e={id:this.artWorkNumber};return this.loading=!0,Object(k.a)(e).then((function(e){var n=e||{},o=n.status,r=void 0===o?{}:o,l=n.data,data=void 0===l?{}:l;1e4===r.code&&(t.detailInfo=data,t.imgList=(null==data?void 0:data.list)||[],t.imgList.forEach((function(t,e){t.author=(null==data?void 0:data.author)||{}})),t.activeImg=t.imgList[0]||{},t.getList(),t.commonsObj=L(L({},data.portfolio),{},{author:L({},data.author)}))})).finally((function(){t.loading=!1}))}this.$router.push(this.localePath("/"))},goModelDtl:function(t){var e;t&&(null===(e=window)||void 0===e||e.open("/models/detail/".concat(t),"_blank"))},handlePlay:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"work";this.$logEvent("log_actions",{operation:"click_to_generate_same",behavior_info:e}),this.moreActions("play",null===(t=this.activeImg)||void 0===t?void 0:t.id,"artworkDetail")},report:function(){var t=this,e=this.detailInfo.portfolio?this.detailInfo.portfolio.id:this.detailInfo.id;Object($.q)({id:e,obj_type:4}).then((function(e){t.popovervisible=!1,t.$message({message:t.$t("ReportSuccess"),type:"success",duration:5e3})}))}}),watch:{accountSettingsData:{handler:function(t){this.isI18nToggled=!t.is_off_localization},deep:!0},"$route.query":{handler:function(t){var e=t.u_code;e&&Object(f.w)(e)},immediate:!0},$route:function(t,e){this.reset(),t.path.indexOf("artWorkDetail/")>-1&&t.params.id!==e.params.id&&this.imgDetail()},activeImg:{handler:function(t){var e=this;t&&(this.activeIndex=this.imgList.findIndex((function(t){return t.id===e.activeImg.id})),t.id&&(this.metaInfo=t.meta))},deep:!0,immediate:!0},bigImgDialogVisible:function(t){document.body.style.overflow=t?"hidden":"auto"}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,t.app,o=t.params,r=t.error,l=o.id,e.prev=2,e.next=5,n.$post("/api/v1/portfolio/detail",{id:l});case 5:return c=e.sent,data=c.data,e.abrupt("return",{detailInfo:data,imgList:(null==data?void 0:data.list)||[],activeImg:null==data?void 0:data.list[0],commonsObj:L(L({},null==data?void 0:data.portfolio),{},{author:L({},null==data?void 0:data.author)})});case 10:e.prev=10,e.t0=e.catch(2),console.log("图集asyncData错误啦：",e.t0),r({statusCode:404,message:e.t0});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))()}},D=S,P=(n(2518),n(0)),component=Object(P.a)(D,(function(){var t,e,o,r,l,c,d,h,v,m,f,_,y,w=this,C=w._self._c;return C("div",{directives:[{name:"loading",rawName:"v-loading",value:w.globalLoading,expression:"globalLoading"}],ref:"image-gallery",staticClass:"image-gallery"},[C("el-backtop",{attrs:{bottom:30,right:30}},[C("i",{staticClass:"el-icon-top"})]),w._v(" "),C("div",{staticClass:"mobile-back-to",on:{"~click":function(t){return t.stopPropagation(),w.backTo.apply(null,arguments)}}},[C("i",{staticClass:"el-icon-back"})]),w._v(" "),null!==(t=w.detailInfo)&&void 0!==t&&null!==(t=t.portfolio)&&void 0!==t&&t.id?C("div",{staticClass:"imgpage-content flex"},[C("div",{ref:"imagepageInner",staticClass:"imgpage-inner"},[C("FrameDtl",{ref:"frameDtl",attrs:{type:"imgGather"}},[C("div",{directives:[{name:"loading",rawName:"v-loading",value:w.imgLoading,expression:"imgLoading"}],staticClass:"imgpage-image flex",style:{width:w.imgWidth+"px"}},[C("div",{staticClass:"image-container"},[(null===(e=w.imgList)||void 0===e?void 0:e.length)>1?C("div",{staticClass:"indicator"},[C("span",{staticClass:"page-number"},[w._v(w._s("".concat(this.activeIndex+1,"/").concat(w.imgList.length)))])]):w._e(),w._v(" "),w.imgList&&(null===(o=w.imgList)||void 0===o?void 0:o.length)>0?C("el-carousel",{staticClass:"rotation-cont",attrs:{autoplay:!1,arrow:(null===(r=w.imgList)||void 0===r?void 0:r.length)>1?"hover":"never","indicator-position":(null===(l=w.imgList)||void 0===l?void 0:l.length)>1?"":"none"},on:{change:function(t){return w.switchImg(t)}}},w._l(w.imgList,(function(img,t){var e,o,r,l,c,d;return C("el-carousel-item",{key:"big-img_".concat(t),staticClass:"rotation-img"},[1==(null===(e=w.activeImg)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.nsfw)?C("img",{attrs:{src:n(171),alt:w.setI18nPrompt||(null===(o=w.detailInfo)||void 0===o||null===(o=o.portfolio)||void 0===o?void 0:o.name)},on:{load:function(t){return w.imgLoaded(t)}}}):w.isMP4Link(null==img||null===(r=img.banner)||void 0===r?void 0:r.url)?C("img",{directives:[{name:"webp",rawName:"v-webp",value:w.$imgH,expression:"$imgH"}],ref:"mainImage"+t,refInFor:!0,attrs:{alt:w.setI18nPrompt||(null===(l=w.detailInfo)||void 0===l||null===(l=l.portfolio)||void 0===l?void 0:l.name),src:null==img||null===(c=img.banner)||void 0===c?void 0:c.url},on:{load:function(t){return w.imgLoaded(t)},click:w.viewBigImage}}):C("video",{attrs:{src:null==img||null===(d=img.banner)||void 0===d?void 0:d.url,autoplay:"",loop:"",muted:"",controls:!1},domProps:{muted:!0},on:{play:function(t){return w.imgLoaded(t)},click:function(e){return w.viewBigImage(t)}}})])})),1):w._e()],1)]),w._v(" "),C("div",{staticClass:"imgpage-info"},[C("Author",{attrs:{type:"imgGather",activeImg:w.activeImg}},[3!=(null===(c=w.activeImg)||void 0===c?void 0:c.type)&&null!==(d=w.activeImg)&&void 0!==d&&d.meta?C("button",{staticClass:"right-btn button-try",class:w.isLoggedIn?"":"disabled",on:{click:function(t){return w.handlePlay("imgGather")}}},[w._v("\n                "+w._s(w.$t("Remix"))+"\n              ")]):w._e()]),w._v(" "),null!==(h=w.commonsObj)&&void 0!==h&&h.id?C("cmtComments",{attrs:{infos:w.commonsObj,type:4},scopedSlots:w._u([{key:"cmtInner",fn:function(){var t,e,o,r,l,c,d,h,v,m,f,_,y;return[null!==(t=w.activeImg)&&void 0!==t&&t.meta&&(w.activeImg.prompt||w.activeImg.meta)?C("div",{staticClass:"description"},[C("div",{staticClass:"header"},[C("div",{staticClass:"header-left"},[C("div",{staticClass:"title"},[w._v(w._s(w.$t("Prompt")))]),w._v(" "),C("div",{staticClass:"header-copy"},[C("div",{staticClass:"prompt-copy",class:{copied:w.copied},on:{click:function(t){return w.wordsCopy()}}},[C("i",{directives:[{name:"show",rawName:"v-show",value:w.copied,expression:"copied"}],staticClass:"iconfont icon-success"}),w._v(" "),C("i",{directives:[{name:"show",rawName:"v-show",value:!w.copied,expression:"!copied"}],staticClass:"iconfont icon-copy"}),w._v("\n                        "+w._s(w.$t("CopyPrompts"))+"\n                      ")])]),w._v(" "),C("div",{directives:[{name:"show",rawName:"v-show",value:null===(e=w.activeImg)||void 0===e?void 0:e.local_prompt,expression:"activeImg?.local_prompt"}],staticClass:"header-trans",on:{click:function(t){w.isI18nToggled=!w.isI18nToggled}}},[C("i",{staticClass:"iconfont icon-i18n_prompt"})])])]),w._v(" "),C("div",{ref:"promptContainer",staticClass:"prompt-container"},[C("h2",{staticClass:"prompt"},[w._v(w._s(w.setI18nPrompt))])])]):w._e(),w._v(" "),null!==(o=w.activeImg)&&void 0!==o&&o.meta&&Object.keys(w.metaInfo).length?C("div",{staticClass:"model-info"},[C("div",{staticClass:"header flex items-center"},[C("div",{staticClass:"title"},[w._v(w._s(w.$t("INFO")))]),w._v(" "),Object.keys(w.metaInfo).length?C("span",{on:{click:function(t){t.stopPropagation(),w.infovisible=!w.infovisible}}},[C("el-popover",{staticStyle:{padding:"0"},attrs:{"popper-class":"metaPoper",placement:"right","visible-arrow":!1,trigger:"hover"},on:{click:function(t){t.stopPropagation(),t.preventDefault()}},model:{value:w.infovisible,callback:function(t){w.infovisible=t},expression:"infovisible"}},[C("MetaTooltipVue",{attrs:{sourceFrom:"imageDetail",category:null===(r=w.activeImg)||void 0===r?void 0:r.channel,meta:w.metaInfo,model:w.activeImg.model_id||w.activeImg.artwork_no,"model-name":w.activeImg.model_name},on:{copyGenerationData:function(t){return w.moreActions("play")}}}),w._v(" "),C("span",{staticClass:"carousel-icon",attrs:{slot:"reference"},slot:"reference"},[C("i",{staticClass:"work-tips iconfont icon-work-tips"})])],1)],1):w._e()]),w._v(" "),C("el-row",{staticClass:"meta-content flex flex-col",attrs:{type:"flex"}},[C("div",{staticClass:"info flex"},[C("span",{staticClass:"item"},[C("div",{staticClass:"name"},[w._v(w._s(w.$t("Size")))]),w._v(" "),C("div",{staticClass:"value"},[w._v("\n                        "+w._s(w.activeImg.banner.width+"X"+w.activeImg.banner.height)+"\n                      ")])]),w._v(" "),C("span",{staticClass:"item"},[C("div",{staticClass:"name"},[w._v(w._s(w.$t("Date")))]),w._v(" "),C("div",{staticClass:"value"},[w._v(w._s(w.formatDate(w.activeImg.created_at)))])]),w._v(" "),C("span",{directives:[{name:"show",rawName:"v-show",value:w.convertMode,expression:"convertMode"}],staticClass:"item"},[C("div",{staticClass:"name"},[w._v(w._s(w.$t("createModeTitle")))]),w._v(" "),C("div",{staticClass:"value"},[w._v(w._s(w.convertMode))])]),w._v(" "),C("span",{staticClass:"item"},[C("div",{staticClass:"name"},[w._v(w._s(w.$t("Type")))]),w._v(" "),C("div",{staticClass:"value"},[w._v("\n                        "+w._s(w.activeImg.type&&1!=w.activeImg.type&&3!=w.activeImg.type?"grid":"upscale")+"\n                      ")])])])]),w._v(" "),null!==(l=w.activeImg)&&void 0!==l&&l.models&&(null===(c=w.activeImg)||void 0===c||null===(c=c.models)||void 0===c?void 0:c.length)>0?C("div",{staticClass:"models flex flex-wrap"},w._l(null===(d=w.activeImg)||void 0===d?void 0:d.models,(function(t,i){var e,o,r;return C("div",{key:"model_".concat(i),staticClass:"model-item flex items-center",on:{click:function(e){return w.goModelDtl(t.id)}}},[null!=t&&null!==(e=t.cover)&&void 0!==e&&e.url&&1!==(null==t||null===(o=t.cover)||void 0===o?void 0:o.nsfw)?C("img",{directives:[{name:"webp",rawName:"v-webp",value:w.$imgL,expression:"$imgL"}],staticClass:"model-cover",attrs:{src:null==t||null===(r=t.cover)||void 0===r?void 0:r.url,alt:""}}):C("img",{staticClass:"model-cover",attrs:{src:n(171),alt:""}}),w._v(" "),C("div",{staticClass:"model-cont flex flex-col"},[C("div",{staticClass:"model-type"},[C("span",{class:{isLora:"Checkpoint"!==(null==t?void 0:t.type)}},[w._v(w._s(null==t?void 0:t.type))])]),w._v(" "),C("div",{staticClass:"model-name text-no-wrap-2"},[w._v(w._s(t.name))])])])})),0):w._e()],1):w._e(),w._v(" "),C("div",{staticClass:"gallery-info flex flex-col"},[C("h1",{staticClass:"gallery-title"},[w._v(w._s(null===(h=w.detailInfo)||void 0===h||null===(h=h.portfolio)||void 0===h?void 0:h.name))]),w._v(" "),C("div",{staticClass:"gallery-intro",domProps:{innerHTML:w._s(w.filterXss(null===(v=w.detailInfo)||void 0===v||null===(v=v.portfolio)||void 0===v?void 0:v.intro))}}),w._v(" "),null!==(m=w.detailInfo)&&void 0!==m&&null!==(m=m.portfolio)&&void 0!==m&&m.tag&&(null===(f=w.detailInfo)||void 0===f||null===(f=f.portfolio)||void 0===f||null===(f=f.tag)||void 0===f?void 0:f.length)>0?C("div",{staticClass:"tag-items flex flex-wrap"},w._l(null===(_=w.detailInfo)||void 0===_||null===(_=_.portfolio)||void 0===_?void 0:_.tag,(function(t,i){return C("div",{key:"tag_".concat(i),staticClass:"tag-item"},[t.id?[C("a",{attrs:{target:"_self",href:w.localePath("/tagInfo/post/"+t.id)},on:{click:function(e){return e.preventDefault(),w.goTagDtl(t,"imgGather_detials")}}},[w._v("#"+w._s(null==t?void 0:t.title))])]:w._e()],2)})),0):w._e(),w._v(" "),C("div",{staticClass:"time"},[w._v("\n                  "+w._s(w.parseTime(null===(y=w.detailInfo)||void 0===y||null===(y=y.portfolio)||void 0===y?void 0:y.create_at))+"\n                ")])])]},proxy:!0},{key:"cmtMore",fn:function(){return[C("div",{staticClass:"commFunNum",on:{click:function(t){t.stopPropagation(),w.popovervisible=!w.popovervisible}}},[C("el-popover",{ref:"myPopover",attrs:{placement:"top-start","popper-class":"my-popover","visible-arrow":!1,width:"100",trigger:"manual"},model:{value:w.popovervisible,callback:function(t){w.popovervisible=t},expression:"popovervisible"}},[C("div",{staticClass:"pop-btns flex"},[C("button",{on:{click:w.report}},[w._v("\n                        "+w._s(w.$t("Report"))+"\n                      ")])]),w._v(" "),C("button",{staticStyle:{color:"#ffffff"},attrs:{slot:"reference"},slot:"reference"},[C("i",{staticClass:"iconfont icon-more"})])])],1),w._v(" "),w.isCompanyAccount?w._e():C("button",{staticClass:"commFunNum",on:{click:function(t){return t.stopPropagation(),w.share("imgGather")}}},[C("i",{staticClass:"iconfont icon-share-icon"})])]},proxy:!0}],null,!1,3299257631)}):w._e()],1)]),w._v(" "),C("div",{staticClass:"imgpage-related"},[C("div",{staticClass:"title-div"},[C("span",{staticClass:"title"},[w._v(w._s(w.$t("ExploreRelated")))])]),w._v(" "),C("div",{ref:"relatewraper",staticClass:"related-images"},[C("homeList",{attrs:{list:w.relatedImages,isShowNullRelatedImg:w.isShowNullRelatedImg,container:"relatewraper"},on:{load:w.getList}}),w._v(" "),C("div",{directives:[{name:"loading",rawName:"v-loading",value:w.relatedLoading,expression:"relatedLoading"}],staticClass:"loading-div"})],1)]),w._v(" "),w.bigImgDialogVisible?C("div",{staticClass:"bigImg",on:{click:function(t){w.bigImgDialogVisible=!1}}},[C("div",{staticClass:"bigImgCnt"},[(null===(v=w.imgList)||void 0===v?void 0:v.length)>1?C("div",{staticClass:"indicator"},[C("span",{staticClass:"page-number"},[w._v(w._s("".concat(this.activeIndex+1,"/").concat(w.imgList.length)))])]):w._e(),w._v(" "),w.imgList&&(null===(m=w.imgList)||void 0===m?void 0:m.length)>0?C("el-carousel",{staticClass:"rotation-cont",attrs:{autoplay:!1,arrow:(null===(f=w.imgList)||void 0===f?void 0:f.length)>1?"hover":"never","indicator-position":(null===(_=w.imgList)||void 0===_?void 0:_.length)>1?"":"none","initial-index":w.initialIndex},on:{change:function(t){return w.switchImg(t)}}},w._l(w.imgList,(function(img,t){var e,n,o;return C("el-carousel-item",{key:"big-img_".concat(t),staticClass:"rotation-img"},[w.isMP4Link(null==img||null===(e=img.banner)||void 0===e?void 0:e.url)?C("img",{directives:[{name:"webp",rawName:"v-webp",value:w.$imgH,expression:"$imgH"}],attrs:{alt:w.setI18nPrompt,src:null==img||null===(n=img.banner)||void 0===n?void 0:n.url}}):C("video",{attrs:{src:null==img||null===(o=img.banner)||void 0===o?void 0:o.url,autoplay:"",loop:"",muted:"",controls:!1},domProps:{muted:!0}})])})),1):w._e()],1)]):w._e()],1)]):w._e(),w._v(" "),C("invite-dialog",{ref:"inviteDialog",attrs:{type:"artwork",workId:null===(y=w.activeImg)||void 0===y?void 0:y.id}}),w._v(" "),C("PostReview")],1)}),[],!1,null,"84e41632",null);e.default=component.exports},3309:function(t,e,n){"use strict";n.r(e);var o={name:"User",components:{UserInfo:n(499).a}},r=n(0),component=Object(r.a)(o,(function(){return(0,this._self._c)("UserInfo")}),[],!1,null,null,null);e.default=component.exports},3310:function(t,e,n){"use strict";n.r(e);n(10);var o=n(15),r=n(2),l=(n(16),n(14),n(18),n(40)),c=n(41),d=n(21),h=n(127),v=n(521),m=n(33),f=n(524),_=n(55),y={mixins:[m.a],name:"CollectionDetail",components:{WaterFallVue:h.a,SearchInput:v.a,EditTitle:f.a,homeList:_.a},data:function(){return{queryParam:Object(r.a)(Object(r.a)({page:1,page_size:60,type:"bookmarks",folder_no:"default",keyword:"",after:0,start_at:0,end_at:0},"after",0),"artwork_types",[]),list:[],isLoading:!0,isReq:!1,isLock:!1,type:"artwork",checkList:{},isCheck:!1,isTiemRow:!1,filterImgType:[],isFilterNSFW:!1,checkMaxNum:-1,dotReportInfo:{category:"default",view_domain:"personal_center",batch_id:""}}},computed:{getAccountNo:function(){var t;return(null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.account_no)||""}},mounted:function(){this.type=this.$route.query.type;var t=this.$route.query?"all"==this.$route.query.id?"":this.$route.query.id:"default";this.queryParam.folder_no=t,this.getList()},methods:{setName:function(){return this.$route.query.name?"all"==this.$route.query.name?2==this.$route.query.category?this.$t("AllWorks"):this.$t("Allcollect"):this.$route.query.name:this.$t("boardBoardDetail")},checkAll:function(){this.$refs.WaterFallVue.checkAll()},getChecList:function(t){this.checkList=t},onChangeTitleBar:function(t){this.editSuccess(),this.$refs.WaterFallVue.isCheckAll=!1;var e=t.workType,n=t.searchKeyword,o=t.start_at,r=t.end_at,l=t.order_by,c=t.publish_status;e&&(this.queryParam.artwork_types=e),![void 0,void 0,null].includes(n)&&(this.queryParam.keyword=n),!["",void 0,void 0,null].includes(o)&&(this.queryParam.start_at=o),!["",void 0,void 0,null].includes(r)&&(this.queryParam.end_at=r),l&&(this.queryParam.order_by=l),!["",void 0,void 0,null].includes(c)&&(this.queryParam.publish_status=c),delete this.queryParam.time_to,this.list=[],this.isLock=!1,this.isReq=!1,this.queryParam.after=0,this.queryParam.page=1,this.getList()},editSuccess:function(){if(this.checkList.ids){var t=Object(o.a)(this.checkList.ids);this.$refs.WaterFallVue.clearCheck(t),this.queryParam.page=1}},getList:function(){var t=this;if(!this.isReq&&!this.isLock){this.isReq=!0,this.queryParam.type="bookmarks",delete this.queryParam.source_type,this.$route.query.account_no?this.queryParam.account_no=this.$route.query.account_no:delete this.queryParam.account_no,2==this.$route.query.category?this.queryParam.category=2:this.queryParam.category=1;var e="";"artwork"==this.type?e=this.$route.query.account_no?l.artworkListOther:l.artworkList:"model"==this.type?e=this.$route.query.account_no?c.s:c.r:"post"==this.type?(delete this.queryParam.type,this.$route.query.account_no&&(delete this.queryParam.account_no,this.queryParam.act_id=this.$route.query.account_no),e=d.Y):"palette"==this.type?(this.$route.query.account_no&&(delete this.queryParam.account_no,this.queryParam.act_id=this.$route.query.account_no),e=d.Q):"swtft_app"==this.type||"workflow"==this.type?(this.$route.query.account_no&&(delete this.queryParam.account_no,this.queryParam.act_id=this.$route.query.account_no),this.queryParam.source_type=7,"swtft_app"==this.type&&(this.queryParam.source_type=8),e=d.q):"character"==this.type?(this.queryParam.type=0,e=d.e):"ai_audio"==this.type&&(this.queryParam.type=0,e=d.b),e(this.queryParam).then((function(e){if(e.data.has_more?t.isLock=!1:t.isLock=!0,t.list=t.list.concat(e.data.items||[]),t.isReq=!1,1===t.queryParam.page&&(t.queryParam.time_to=e.data.time_ms),e.data.items.length>0){var n,o,r=e.data.items[e.data.items.length-1];t.queryParam.after=(null==r||null===(n=r.folder_no)||void 0===n?void 0:n.collect_at)||(null==r||null===(o=r.collect)||void 0===o?void 0:o.collect_at)}t.queryParam.page++,t.isLoading=!1})).catch((function(e){t.isReq=!1,t.isLoading=!1}))}}}},w=(n(2533),n(0)),component=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"CollectionDetail"},[e("el-backtop",{attrs:{bottom:30,right:30}},[e("i",{staticClass:"el-icon-top"})]),t._v(" "),e("EditTitle",{attrs:{title:t.setName(),titleSize:36,checkList:t.checkList,backShow:!0,editShow:!t.$route.query.account_no,listLenth:t.$route.query.account_no?t.list.length:2==t.$route.query.category?t.setPortfolioList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id).length:t.setCollectList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id).length,threshold:72,account_no:t.getAccountNo,isScreen:2==t.$route.query.category,category:2==t.$route.query.category,showSearch:!0,showFilter:2==t.$route.query.category,type:t.type,collectionDetail:!0},on:{changeCheck:function(e){t.isCheck=e},checkAll:t.checkAll,editSuccess:function(e){return t.editSuccess()},changeTitleBar:t.onChangeTitleBar,changeTiemRow:function(e){return t.isTiemRow=e},ImgTypeChange:function(e){t.filterImgType=e,e.length>0?t.isFilterNSFW=!0:t.isFilterNSFW=!1,e.length>0?t.checkMaxNum=20:t.checkMaxNum=-1}}}),t._v(" "),e("div",{ref:"wraper",staticClass:"wraper"},[["post","palette","swtft_app","workflow","character","ai_audio"].includes(t.type)?e("homeList",{ref:"WaterFallVue",attrs:{list:t.$route.query.account_no?t.list:t.setCollectList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id),container:"wraper",fromPage:"userPage",dotReportInfo:t.dotReportInfo,isTiemRow:t.isTiemRow,isCheck:t.isCheck},on:{load:function(e){return t.getList(!0)},getChecList:t.getChecList}}):e("WaterFallVue",{ref:"WaterFallVue",attrs:{type:t.type,cols:7,fromPage:"userPage",category:2==t.$route.query.category,container:"wraper",list:t.$route.query.account_no?t.list:2==t.$route.query.category?t.setPortfolioList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id):t.setCollectList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id),lazy:!0,isCheck:t.isCheck,isTiemRow:t.isTiemRow,filterImgType:t.filterImgType,isFilterNSFW:t.isFilterNSFW,checkMax:t.checkMaxNum,needGridSource:!0,dotReportInfo:t.dotReportInfo},on:{load:t.getList,getChecList:t.getChecList}})],1)],1)}),[],!1,null,"025b447a",null);e.default=component.exports},3311:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12),n(8),n(6);var o=n(3),r=n(2),l=(n(20),n(16),n(4),n(1)),c=n(1881),d=n(531);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"bookReading",mixins:[n(33).a],components:{SpinLoading:d.a},watch:{"$route.query":{handler:function(){var t=this.$route.query.cid,e=void 0===t?"":t;this.getText(e)}}},computed:v(v({},Object(l.c)("user",["isLoggedIn"])),{},{showLoading:function(){return!!this.isLoggedIn&&this.mainLoading},currentChapter:function(){var t,e,n,o,r,l,c,d;if(null===(t=this.chapters)||void 0===t||null===(t=t.items)||void 0===t||!t.length||null===(e=this.chapterInfo)||void 0===e||!e.chapter_id)return{};var h,m,f,_,y,w=!1,C=!1,x="",k="";null!==(n=this.chapters)&&void 0!==n&&null!==(n=n.items)&&void 0!==n&&n.length&&null!==(o=this.chapterInfo)&&void 0!==o&&o.chapter_id&&(w=(null===(h=this.chapterInfo)||void 0===h?void 0:h.chapter_id)===(null===(m=this.chapters)||void 0===m||null===(m=m.items[0])||void 0===m?void 0:m.chapter_id),C=(null===(f=this.chapterInfo)||void 0===f?void 0:f.chapter_id)===(null===(_=this.chapters)||void 0===_||null===(_=_.items[(null===(y=this.chapters)||void 0===y||null===(y=y.list)||void 0===y?void 0:y.length)-1])||void 0===_?void 0:_.chapter_id));return!w&&(x=null===(r=this.chapters)||void 0===r||null===(r=r.items[(null===(l=this.chapterInfo)||void 0===l?void 0:l.chapter_index)-1])||void 0===r?void 0:r.chapter_id),!C&&(k=null===(c=this.chapters)||void 0===c||null===(c=c.items[(null===(d=this.chapterInfo)||void 0===d?void 0:d.chapter_index)+1])||void 0===c?void 0:c.chapter_id),v(v({},this.chapterInfo),{},{isFirst:w,isLast:C,prevChapterId:x,nextChapterId:k})}}),data:function(){return{fixedMargin:16,fontSize:16,mainLoading:!1,menuLoading:!1,chapterInfo:{},menuVisible:!1,chapters:{},activeSortTab:0,bookData:{}}},mounted:function(){this.isLoggedIn&&(this.getText(),this.getMenus()),this.fontSize=+localStorage.getItem("readBookFontSize")||16,this.getMargin(),window.addEventListener("resize",this.getMargin)},beforeDestroy:function(){document.body.style.overflow="auto"},methods:{getText:function(){var t,e,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!this.mainLoading){var l=r||(null===(t=this.$route.query)||void 0===t?void 0:t.cid)||"0",d=(null===(e=this.$route)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.id)||"",h=this.bookData[l];if(h)this.chapterInfo=h;else{this.mainLoading=!0;var v={chapter_index:+l,id:d};Object(c.a)(v).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(e){var o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.chapterInfo=(null==e?void 0:e.data)||{},!(r=null==e||null===(o=e.data)||void 0===o?void 0:o.url)){t.next=5;break}return t.next=5,fetch(r).then((function(t){return t.text()})).then((function(text){var t;n.chapterInfo.paragraph=text,n.saveBook(null===(t=n.chapterInfo)||void 0===t?void 0:t.chapter_id)})).catch((function(t){console.log("error",t)}));case 5:n.mainLoading=!1;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},getMenus:function(){var t,e,n=this,o=(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||"";!o||null!==(e=this.chapters)&&void 0!==e&&null!==(e=e.items)&&void 0!==e&&e.length||(this.menuLoading=!0,Object(c.b)({id:o}).then((function(t){n.chapters=(null==t?void 0:t.data)||{},n.menuLoading=!1})))},backTo:function(){history.length>1?this.$router.back():this.$router.push(this.localePath("/"))},toVideoPage:function(){this.$router.push(this.localePath("/ai-video"))},videoLogin:function(){var t=this;this.$EventBus.$emit("openLoginDialog",{callBack:function(){t.getText()}})},getMargin:function(){var t,e=null===(t=window)||void 0===t?void 0:t.innerWidth,n=document.querySelector(".reading-main").offsetWidth;e<1100||e&&n&&(this.fixedMargin=(e-n)/2-76)},toggleMenu:function(){var t=this;this.isLoggedIn?(this.getMenus(),this.menuVisible=!this.menuVisible):this.$EventBus.$emit("openLoginDialog",{callBack:function(){t.getMenus()}})},fontSizeChange:function(t){t&&localStorage.setItem("readBookFontSize",t)},sortMenu:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.activeSortTab!==t&&(this.activeSortTab=t,this.chapters.items=this.chapters.items.reverse())},toChapter:function(){var t,e,n,o,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(this.menuVisible=!1,l)?e=l:e=r?null===(n=this.currentChapter)||void 0===n?void 0:n.nextChapterId:null===(o=this.currentChapter)||void 0===o?void 0:o.prevChapterId;var c=(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||"";e&&c&&this.$router.push(this.localePath("/book/reading/".concat(c,"?cid=").concat(e)))},saveBook:function(t){t&&(this.bookData.hasOwnProperty(t)||(this.bookData[t]=this.chapterInfo))},setBodyScroll:function(t){document.body.style.overflow=t?"auto":"hidden"}}},f=m,_=(n(2547),n(0)),component=Object(_.a)(f,(function(){var t,e,o,r,l,c,d,h,v,m,f,_,y,w=this,C=w._self._c;return C("div",{staticClass:"book-reading"},[C("a",{staticClass:"logo flex-center",attrs:{href:"/ai-video"},on:{click:function(t){return t.preventDefault(),w.toVideoPage.apply(null,arguments)}}},[C("img",{attrs:{src:n(124),alt:""}}),w._v(" "),C("p",[w._v(w._s(w.$t("SeaArt")))])]),w._v(" "),C("div",{staticClass:"reading-back",on:{click:w.backTo}},[C("i",{staticClass:"el-icon-back"})]),w._v(" "),C("div",{staticClass:"reading-main"},[C("div",{staticClass:"content w-full flex justify-center items-center",class:{"items-start":(null===(t=w.chapterInfo)||void 0===t?void 0:t.paragraph)&&!w.showLoading}},[C("div",{directives:[{name:"show",rawName:"v-show",value:!w.isLoggedIn,expression:"!isLoggedIn"}],staticClass:"not-login flex flex-col justify-center items-center"},[C("span",{staticClass:"text"},[w._v(w._s(w.$t("loginToView")))]),w._v(" "),C("span",{staticClass:"btn flex items-center",on:{click:w.videoLogin}},[w._v(w._s(w.$t("loginNow")))])]),w._v(" "),C("div",{directives:[{name:"show",rawName:"v-show",value:w.showLoading,expression:"showLoading"}],staticClass:"loading-part flex flex-col items-center"},[C("SpinLoading"),w._v(" "),C("div",{staticClass:"waiting"},[w._v(w._s(w.$t("ChapterLoading")))])],1),w._v(" "),null!==(e=w.chapterInfo)&&void 0!==e&&e.paragraph&&!w.showLoading?C("div",{staticClass:"chapter-info"},[C("article",{staticClass:"article-content",style:{fontSize:w.fontSize+"px"}},[C("div",{staticClass:"title"},[C("h1",[w._v("\n              "+w._s((null===(o=w.chapterInfo)||void 0===o?void 0:o.title)||"")+"\n            ")])]),w._v(" "),C("p",[w._v(w._s(w.chapterInfo.paragraph||""))])])]):w._e(),w._v(" "),C("div",{staticClass:"fixed-paragraph-settings flex flex-col",style:{marginRight:w.fixedMargin+"px"}},[C("el-popover",{directives:[{name:"click-outside",rawName:"v-click-outside",value:w.menuVisible?w.toggleMenu:null,expression:"menuVisible ? toggleMenu : null"}],attrs:{placement:"left-start","popper-class":"menu-popover reading-popover","append-to-body":!1,"visible-arrow":!1,trigger:"manual"},on:{show:function(t){return w.setBodyScroll(!1)},hide:function(t){return w.setBodyScroll(!0)}},model:{value:w.menuVisible,callback:function(t){w.menuVisible=t},expression:"menuVisible"}},[C("div",{staticClass:"menu-content flex flex-col"},[C("div",{staticClass:"top-image flex"},[null!==(r=w.chapters)&&void 0!==r&&null!==(r=r.cover)&&void 0!==r&&r.url?C("img",{directives:[{name:"webp",rawName:"v-webp",value:w.$imgL,expression:"$imgL"}],attrs:{src:null===(l=w.chapters)||void 0===l||null===(l=l.cover)||void 0===l?void 0:l.url,alt:"book-cover",width:"96",height:"72"}}):w._e(),w._v(" "),C("div",{staticClass:"info flex flex-col justify-center"},[C("h4",[w._v(w._s((null===(c=w.chapters)||void 0===c?void 0:c.title)||""))]),w._v(" "),C("p",[w._v(w._s((null===(d=w.chapters)||void 0===d?void 0:d.author_name)||""))])])]),w._v(" "),C("div",{staticClass:"chapter-sort flex w-full justify-between items-center"},[C("div",{staticClass:"menu-text"},[w._v("\n                "+w._s(w.$t("catalogue"))+" ("+w._s(w.$t("ChapterTotal",{num:null===(h=w.chapters)||void 0===h||null===(h=h.items)||void 0===h?void 0:h.length}))+")\n              ")]),w._v(" "),C("div",{staticClass:"btn-content flex justify-between items-center"},[C("button",{staticClass:"switch-btn",class:{active:0===w.activeSortTab},on:{click:function(t){return w.sortMenu(0)}}},[w._v("\n                  "+w._s(w.$t("sortAB"))+"\n                ")]),w._v(" "),C("button",{staticClass:"switch-btn",class:{active:1===w.activeSortTab},on:{click:function(t){return w.sortMenu(1)}}},[w._v("\n                  "+w._s(w.$t("sortBA"))+"\n                ")])])]),w._v(" "),null!==(v=w.chapters)&&void 0!==v&&null!==(v=v.items)&&void 0!==v&&v.length?C("div",{staticClass:"menu-list flex flex-col"},w._l(w.chapters.items,(function(menu,t){var e;return C("div",{key:menu.chapter_id+t,staticClass:"menu-item",class:{activeMenu:(null==menu?void 0:menu.chapter_id)===(null===(e=w.currentChapter)||void 0===e?void 0:e.chapter_id)},on:{click:function(t){return w.toChapter(!1,menu.chapter_id)}}},[C("span",{staticClass:"name"},[w._v(w._s(menu.title))])])})),0):w._e()]),w._v(" "),C("div",{staticClass:"menu right-btn",attrs:{slot:"reference"},on:{click:w.toggleMenu},slot:"reference"},[C("i",{staticClass:"iconfont icon-a-Button-liebiao"}),w._v(" "),C("span",{staticClass:"name"},[w._v(w._s(w.$t("catalogue")))])])]),w._v(" "),C("el-popover",{attrs:{placement:"left","popper-class":"fontsize-popover reading-popover flex items-center","append-to-body":!1,"visible-arrow":!1,trigger:"click"}},[C("div",{staticClass:"font-size-adjust w-full flex"},[C("el-slider",{staticClass:"w-full flex items-center",attrs:{min:16,max:32,"show-stops":!1,step:2},on:{change:w.fontSizeChange},model:{value:w.fontSize,callback:function(t){w.fontSize=t},expression:"fontSize"}})],1),w._v(" "),C("div",{staticClass:"font-size right-btn",attrs:{slot:"reference"},slot:"reference"},[C("i",{staticClass:"iconfont icon-a-Button-daxie"}),w._v(" "),C("span",{staticClass:"name"},[w._v(w._s(w.$t("fontSize")))])])])],1)]),w._v(" "),C("div",{directives:[{name:"show",rawName:"v-show",value:w.isLoggedIn,expression:"isLoggedIn"}],staticClass:"btns"},[null!==(m=w.currentChapter)&&void 0!==m&&m.prevChapterId?C("div",{staticClass:"preview-chapter-btn btn",on:{click:function(t){return w.toChapter(!1)}}},[w._v("\n        "+w._s(w.$t("prevChapter"))+"\n      ")]):w._e(),w._v(" "),null!==(f=w.currentChapter)&&void 0!==f&&f.prevChapterId&&null!==(_=w.currentChapter)&&void 0!==_&&_.nextChapterId?C("span",{staticClass:"divider"}):w._e(),w._v(" "),null!==(y=w.currentChapter)&&void 0!==y&&y.nextChapterId?C("div",{staticClass:"next-chapter-btn btn",on:{click:function(t){return w.toChapter(!0)}}},[w._v("\n        "+w._s(w.$t("nextChapter"))+"\n      ")]):w._e()])])])}),[],!1,null,"1802bc28",null);e.default=component.exports},3314:function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(2),l=n(97),c=(n(20),n(9),n(7),n(10),n(19),n(14),n(11),n(12),n(8),n(4),n(18),n(6),n(211)),d=n(167),h=n(59),v=["content"],m=["content"];function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={components:{BackIcon:c.a,PageSeo:d.a},name:"fastTools",data:function(){return{activeTool:"",fromPath:"",pageSEO:{tempList:[],title:"",meta_description:"",key_words:""},scrollTop:0}},computed:{showBackTo:function(){var t=this;return!["fastTools","videoGeneration","aiFaceSwap","aiPortrait","aiDance","aiComic"].some((function(e){return t.$route.name.includes(e)}))},isToolsList:function(){var t=this.pageSEO.tempList;return this.$route.name.includes("fastToolsList")||!t.length}},watch:{$route:function(t,e){this.getTempList()}},activated:function(){var t=this;this.$nextTick((function(){window.scrollTo(0,t.scrollTop)}))},deactivated:function(){this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset},methods:{backTo:function(){this.$router.back()},back:function(){this.fromPath?this.$router.back():this.$router.push(this.localePath("/ai-tools"))},getTempList:function(){var t=this,e=this.$route.path.split("/").pop();e&&Object(h.p)({name:e}).then((function(e){var n=e.data||{},o=n.module,title=n.title,r=n.meta_description,c=n.key_words,d={tempList:(null!=o&&o.length?o.map((function(t){var content=t.content;return _(_({},Object(l.a)(t,v)),{},{content:JSON.parse(content)})})):[])||[],title:title,meta_description:r,key_words:c};Object.assign(t.pageSEO,_({},d))}))}},head:function(){var t=this.pageSEO,title=t.title,e=t.meta_description,n=t.key_words;if(!title)return{};title=this.$t(title);var desc=this.$t(e);return{title:title,meta:[{hid:"description",name:"description",content:desc},{hid:"keywords",name:"keywords",content:n=this.$t(n)},{hid:"og:title",name:"og:title",content:title},{hid:"og:description",name:"og:description",content:desc}]}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,c,d,data,h,v,title,f,y,w,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.$axios,t.app,t.params,o=t.error,r=t.route,c=r.path.split("/").pop()){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,n.$post("/api/v1/fast_ai/detail",{name:c});case 7:return d=e.sent,data=d.data,v=(h=data||{}).module,title=h.title,f=h.meta_description,y=h.key_words,w=null!=v&&v.length?v.map((function(t){var content=t.content;return _(_({},Object(l.a)(t,m)),{},{content:JSON.parse(content)})})):[],C={tempList:w||[],title:title,meta_description:f,key_words:y},e.abrupt("return",{pageSEO:C});case 15:e.prev=15,e.t0=e.catch(4),console.log("快捷AI详情页-> asyncData错误啦：",e.t0),o({statusCode:404,message:e.t0});case 19:case"end":return e.stop()}}),e,null,[[4,15]])})))()}},w=y,C=(n(2569),n(0)),component=Object(C.a)(w,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"p-fast-tools"},[n("router-view"),e._v(" "),e.isToolsList?e._e():n("page-seo",{attrs:{tempList:null===(t=e.pageSEO)||void 0===t?void 0:t.tempList}}),e._v(" "),e.showBackTo?n("back-icon",{attrs:{back:e.back}}):e._e()],1)}),[],!1,null,"5a8d8137",null);e.default=component.exports},3315:function(t,e,n){"use strict";n.r(e);var o=n(3),r=(n(20),{name:"fastToolsList",components:{cardList:n(261).a},data:function(){return{appList:[],hasOver:!1}},head:function(){return{title:this.$t("FreeToolsTitle"),meta:[{hid:"description",name:"description",content:this.$t("FreeToolsDesc")},{hid:"keywords",name:"keywords",content:this.$t("FreeToolsKeyword")},{hid:"og:title",name:"og:title",content:this.$t("FreeToolsTitle")},{hid:"og:description",name:"og:description",content:this.$t("FreeToolsDesc")}]}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.app,e.next=3,n.$axios.$post("/api/v1/square/comfy-ui/app/select",{page:1,page_size:50,order_by:"top"});case 3:return o=e.sent,data=o.data,e.abrupt("return",{appList:(null==data?void 0:data.items)||[],hasOver:null==data?void 0:data.has_more});case 6:case"end":return e.stop()}}),e)})))()}}),l=(n(2572),n(0)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"toolsBox"},[e("card-list",{attrs:{list:t.appList,hasOver:t.hasOver}})],1)}),[],!1,null,"1396244f",null);e.default=component.exports},3316:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12),n(8),n(4),n(6);var o=n(3),r=n(2),l=(n(20),n(500)),c=n(1),d=n(40);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={components:{SimpleGenerate:l.a},provide:function(){return{top:this}},data:function(){return{isShowSubBanner:!1,randomPrompt:""}},computed:v(v(v(v({},Object(c.c)("user",["isCompanyAccount"])),Object(c.e)("payment",["paymentInfo"])),Object(c.e)("user",["token","userInfo","cdnHost"])),{},{isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount}}),methods:{getRandomPrompt:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.getRandomPrompts)();case 3:n=e.sent,o=n.data.local,t.randomPrompt=o,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t.randomPrompt="",console.log("error1",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},scrollTop:function(){window.scrollTo({top:0,behavior:"smooth"})}},head:function(){return{title:this.$t("AIGenerate_tag_title"),meta:[{hid:"description",name:"description",content:this.$t("AIGenerate_tag_desc")},{hid:"keywords",name:"keywords",content:this.$t("AIGenerate_tag_keyword")},{hid:"og:title",name:"og:title",content:this.$t("AIGenerate_tag_title")},{hid:"og:description",name:"og:description",content:this.$t("AIGenerate_tag_desc")}]}}},f=n(0),component=Object(f.a)(m,(function(){var t=this._self._c;return t("div",{staticClass:"easy-creation"},[t("SimpleGenerate",{attrs:{source:"page"}})],1)}),[],!1,null,"1dff8794",null);e.default=component.exports},3317:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12),n(8),n(4),n(6);var o=n(2),r=(n(19),n(36),n(23),n(37),n(565)),l=n(261),c=n(1);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=Math.floor(Math.random()*r.b.length-8),m={data:function(){return{content:"Prompt: A stylish woman walks down a Tokyo street filled with warm glowing neon and animated city signage. She wears a black leather jacket, a long red dress, and black boots, and carries a black purse. She wears sunglasses and red lipstick. She walks confidently and casually. The street is damp and reflective, creating a mirror effect of the colorful lights. Many pedestrians walk about.",decsData:r.a,currentIndex:"",linkData:{},sourceVideoData:[]}},components:{cardList:l.a},head:function(){return{title:this.$t("sora_1_SwiftAI"),meta:[{hid:"description",name:"description",content:this.$t("sora_2_SwiftAI_value")},{hid:"keywords",name:"keywords",content:this.$t("sora_2_SwiftAI_value")},{hid:"og:title",name:"og:title",content:this.$t("sora_1_SwiftAI")},{hid:"og:description",name:"og:description",content:this.$t("sora_2_SwiftAI_value")}]}},mounted:function(){var t;this.initSource(),this.linkData=(null===(t=this.sourceVideoData)||void 0===t?void 0:t[0])||{}},computed:h(h(h({},Object(c.e)("user",["cdnHost"])),Object(c.c)("user",["cdnHostFun"])),{},{list:function(){return[{url:"https://".concat(this.cdnHost,"/static/upload/20240227/ccf80dd3-58e2-4d28-b97d-03547ff8fab7.png"),title:"sora_5_table1",desc:"sora_6_table1_value"},{url:"https://".concat(this.cdnHost,"/static/upload/20240227/ccf80dd3-58e2-4d28-b97d-03547ff8fab7.png"),title:"sora_7_table2",desc:"sora_8_table2_value"},{url:"https://".concat(this.cdnHost,"/static/upload/20240227/35211736-5cff-4b3e-ba8d-daad5b0e5694.png"),title:"sora_9_table3",desc:"sora_10_table3_value"}]},randomList:function(){return this.sourceVideoData.slice(v,v+7)}}),methods:{initSource:function(){var t=this.cdnHost||"image.cdn2.seaart.ai",e=r.b.map((function(e){var n;return e.value=null===(n=e.value)||void 0===n?void 0:n.replace("cdnHost",t),e}));this.$set(this,"sourceVideoData",e)},handleCollapse:function(t){this.currentIndex!==t?this.currentIndex=t:this.currentIndex=""},submit:function(){var t=Math.floor(Math.random()*r.b.length);this.linkData=this.sourceVideoData[t],this.$logEvent("log_actions",{operation:"click_try_random_generation",behavior_info:"on_sora"})},handleChange:function(){return this.$refs.allinput.blur(),this.$message.warning(this.$t("sora_Error_message"))}}},f=(n(2636),n(0)),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("header",{staticClass:"header"},[e("h1",{staticClass:"title"},[t._v(t._s(t.$t("sora_3_H1")))]),t._v(" "),e("p",{staticClass:"line-1"},[t._v("\n      "+t._s(t.$t("sora_4_H1_value"))+"\n      "),e("img",{attrs:{src:"https://".concat(t.cdnHostFun(),"/static/upload/20240227/5a6d066e-0d13-44c8-ab0e-1c37bb7f3d8b.png"),alt:""}})])]),t._v(" "),e("main",[e("div",{staticClass:"sora"},[e("div",{staticClass:"left"},[e("div",{staticClass:"prompt"},[e("div",{staticClass:"line"},[t._v(t._s(t.$t("Prompt")))]),t._v(" "),e("el-input",{ref:"allinput",staticClass:"inp",attrs:{type:"textarea"},on:{focus:t.handleChange},model:{value:t.linkData.label,callback:function(e){t.$set(t.linkData,"label",e)},expression:"linkData.label"}})],1),t._v(" "),e("div",{staticClass:"btn",on:{click:t.submit}},[t._v(t._s(t.$t("Create")))])]),t._v(" "),e("div",{staticClass:"video-box"},[e("div",{staticClass:"border-box"},[e("video",{staticClass:"video",attrs:{src:t.linkData.value,controls:!0}})]),t._v(" "),e("div",{staticClass:"icon-1"}),t._v(" "),e("div",{staticClass:"icon-2"})])]),t._v(" "),e("div",{staticClass:"list-box"},t._l(t.list,(function(n){return e("div",{key:n.label,staticClass:"list"},[e("img",{attrs:{src:n.url}}),t._v(" "),e("b",[t._v(t._s(t.$t(n.title)))]),t._v(" "),e("p",[t._v(t._s(t.$t(n.desc)))])])})),0),t._v(" "),e("h2",{staticClass:"line-2"},[t._v(t._s(t.$t("sora_11_H2_1")))]),t._v(" "),e("p",{staticClass:"line-3"},[t._v(t._s(t.$t("sora_12_H2_1_value")))]),t._v(" "),e("div",{staticClass:"swiper-box"},[e("el-carousel",{attrs:{interval:4e3,type:"card",height:"558px"}},t._l(t.randomList,(function(t){return e("el-carousel-item",{key:t.label,staticClass:"swiper-item"},[e("video",{staticClass:"swiper-video",attrs:{src:t.value,controls:!0}})])})),1),t._v(" "),t._m(0)],1)]),t._v(" "),e("footer",{staticClass:"footer"},[e("h2",{staticClass:"line-4"},[t._v(t._s(t.$t("sora_13_H2_2")))]),t._v(" "),t._l(t.decsData,(function(n,o){return e("div",{key:o,staticClass:"collapse",on:{click:function(e){return t.handleCollapse(o)}}},[e("span",{staticClass:"tag"},[t._v(t._s(o===t.currentIndex?"-":"+"))]),t._v(" "),e("div",{staticClass:"label",class:{active:o===t.currentIndex}},[t._v("\n        "+t._s(t.$t(n.label))+"\n        "),t._l(n.value,(function(n){return e("div",{key:n,staticClass:"coll-value"},[e("span",[t._v(t._s(t.$t(n)))])])}))],2)])})),t._v(" "),e("div",{staticClass:"ai-tools"},[e("h2",[t._v(t._s(t.$t("sora_36_title_1")))]),t._v(" "),e("h2",[t._v(t._s(t.$t("sora_36_title_2")))])]),t._v(" "),e("p",{staticClass:"line-5"},[t._v(t._s(t.$t("sora_35_H2_3_value",{name:"Sora AI"})))]),t._v(" "),e("card-list",{attrs:{isShowApplication:!1}})],2)])}),[function(){var t=this._self._c;return t("div",{staticClass:"indicator-box"},[t("div",{staticClass:"indicator-left"}),this._v(" "),t("div",{staticClass:"indicator-right"})])}],!1,null,"0f284893",null);e.default=component.exports},3318:function(t,e,n){"use strict";n.r(e);n(14);var o=[function(){var t=this._self._c;return t("div",{staticClass:"decorations"},[t("img",{attrs:{src:n(582),alt:"decorations"}})])},function(){var t=this._self._c;return t("div",{staticClass:"decorations"},[t("img",{attrs:{src:n(582),alt:"decorations"}})])}],r=(n(9),n(7),n(11),n(12),n(8),n(4),n(6),n(2)),l=(n(16),n(42)),c=n(133),d=n(1),h=n(30);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={name:"Publicize",components:{ElImageViewer:c.a},data:function(){return{descArrs:[{icon:"publicize-desc-icon-1",bgColor:"#AC6AFF",title:"PublicizeDescItemTitleOne",content:"PublicizeDescItemContentOne"},{icon:"publicize-desc-icon-2",bgColor:"#FEBE4F",title:"PublicizeDescItemTitleTwo",content:"PublicizeDescItemContentTwo"},{icon:"publicize-desc-icon-3",bgColor:"#7ADB78",title:"PublicizeDescItemTitleThree",content:"PublicizeDescItemContentThree"}],createTabs:["Txt2Img","TaskUploadImage","conditionToImage"],createCurrentTab:"Txt2Img",toolsCurrentTab:"HDRepair",bigImgDialogVisible:!1,currentUrl:""}},mounted:function(){localStorage.getItem("from_url")||this.$logEvent("log_actions",{operation:"publicize_page_show",source:"bilibili"}),localStorage.setItem("from_url","/publicize"),Object(h.g)({items:[{action:"visit_page"}]})},computed:m(m(m({},Object(d.c)("user",["cdnHostFun"])),Object(d.e)("user",["cdnHost"])),{},{toolsTabs:function(){return[{name:"HDRepair",tabTitle:"taskTabUpscale",tabDesc:"ai_tools_5",video:"https://".concat(this.cdnHost,"/static/video/AITool/HDrepair.mp4"),img:n(445),title:"taskTabUpscale",desc:"PublicizeToolsDescOne"},{name:"RemoveBackground",tabTitle:"RemoveBackground",tabDesc:"ai_tools_6",video:"https://".concat(this.cdnHost,"/static/video/AITool/removeBackgroundv2.mp4"),img:n(446),title:"RemoveBackground",desc:"PublicizeToolsDescTwo"},{name:"DraftIntoDrawing",tabTitle:"ai_tools_3",tabDesc:"ai_tools_7",video:"https://".concat(this.cdnHost,"/static/video/AITool/draftToImgv2.mp4"),img:n(447),title:"ai_tools_3",desc:"PublicizeToolsDescThree"},{name:"AIFilter",tabTitle:"ai_tools_4",tabDesc:"ai_tools_8",video:"https://".concat(this.cdnHost,"/static/video/AITool/AIFilterv2.mp4"),img:n(448),title:"ai_tools_4",desc:"PublicizeToolsDescFour"}]},notEN:function(){return"en"!=this.$i18n.locale},getSlogan:function(){return"SeaArt"},getTopStyle:function(){var t=this.$route.meta.background,e=void 0===t?1:t;return{backgroundImage:"url(".concat(n(3215)("./publicize-bg-".concat(e,".webp")),")")}},getCreateImgUrl:function(){var t="zhCN"===this.$i18n.locale?"zhcn":"en";return{Txt2Img:n(3216)("./publicize-text2img-".concat(t,".webp")),TaskUploadImage:n(3217)("./publicize-img2img-".concat(t,".webp")),conditionToImage:n(3218)("./publicize-condition2img-".concat(t,".webp"))}[this.createCurrentTab]},getAimation:function(){var t=this;return function(e,o){t.$nextTick((function(){var n=t.$refs[e][0],r={duration:1e3*(Math.floor(5*Math.random())+4),iterations:1/0},l=10*(Math.floor(7*Math.random())+2),c=10*(Math.floor(7*Math.random())+2);switch(o){case 1:default:break;case 2:c=-c;break;case 3:l=-l,c=-c;break;case 4:l=-l}n.animate({transform:["none","rotate(180deg) translate3d(".concat(l,"px, ").concat(c,"px, 0) rotate(90deg)")],opacity:[0,1,0]},r)}));var r=Math.floor(5*Math.random())+4,l=Math.floor(31*Math.random())-15,c=Math.floor(3*Math.random())+1;return{width:"".concat(r,"px"),height:"".concat(r,"px"),top:"calc(50% - ".concat(r,"px)"),left:"calc(50% - ".concat(l,"px)"),backgroundImage:"url(".concat(n(3219)("./publicize-animation-".concat(c,".png")),")")}}}}),methods:{login:function(t){"current"!==t||Object(l.l)()?window.open("/home?openLoginDialog=1"):this.$EventBus.$emit("openLoginDialog",{redirect:"/home"})},closeViewBigImage:function(){this.bigImgDialogVisible=!1},viewBigImage:function(t){this.bigImgDialogVisible=!0,this.currentUrl=t.currentTarget.currentSrc}}},_=(n(2660),n(0)),component=Object(_.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"publicize-container"},[e("div",{staticClass:"header"},[e("div",{staticClass:"left-container"},[e("img",{staticClass:"logo",attrs:{src:n(124),alt:"Avatar"}}),t._v(" "),e("span",{staticClass:"slogan"},[t._v(t._s(t.getSlogan)+".")]),t._v(" "),e("span",{staticClass:"ai"},[t._v("AI")])]),t._v(" "),e("div",{staticClass:"right-container"},[e("el-button",{staticClass:"get-started",on:{click:function(e){return t.login("new_window")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("GetStarted"))+"\n\t\t\t")])],1)]),t._v(" "),e("div",{staticClass:"top",style:t.getTopStyle},[e("div",{staticClass:"content"},[e("div",{staticClass:"line-one"},[e("span",{staticClass:"words"},[t._v("\n\t\t\t\t\t"+t._s(t.$t("PublicizeRowOne"))+"\n\t\t\t\t\t"),t._m(0)])]),t._v(" "),e("div",{staticClass:"line-two"},[t._v("\n\t\t\t\t"+t._s(t.$t("PublicizeRowTwo"))+"\n\t\t\t")]),t._v(" "),e("div",{staticClass:"line-three"},[t._v("\n\t\t\t\t"+t._s(t.$t("PublicizeRowThree"))+"\n\t\t\t")]),t._v(" "),e("el-button",{staticClass:"get-started",on:{click:function(e){return t.login("current")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("sign_up"))+"\n\t\t\t\t"),e("i",{staticClass:"el-icon-right"}),t._v(" "),e("div",{staticClass:"animation-div"},t._l(10,(function(n){return e("div",{key:n,ref:"particle_1_".concat(n),refInFor:!0,staticClass:"particle",style:t.getAimation("particle_1_".concat(n),1)})})),0),t._v(" "),e("div",{staticClass:"animation-div"},t._l(10,(function(n){return e("div",{key:n,ref:"particle_2_".concat(n),refInFor:!0,staticClass:"particle",style:t.getAimation("particle_2_".concat(n),2)})})),0),t._v(" "),e("div",{staticClass:"animation-div"},t._l(10,(function(n){return e("div",{key:n,ref:"particle_3_".concat(n),refInFor:!0,staticClass:"particle",style:t.getAimation("particle_3_".concat(n),3)})})),0),t._v(" "),e("div",{staticClass:"animation-div"},t._l(10,(function(n){return e("div",{key:n,ref:"particle_4_".concat(n),refInFor:!0,staticClass:"particle",style:t.getAimation("particle_4_".concat(n),4)})})),0)])],1)]),t._v(" "),e("div",{staticClass:"desc"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("\n\t\t\t[ AI PAINTING FOR CREATORS ]\n\t\t")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[t._v("\n\t\t\t"+t._s(t.$t("PublicizeDescTitle"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"contianer"},t._l(t.descArrs,(function(n,o){return e("div",{key:o,staticClass:"desc-item"},[e("div",{staticClass:"icon-contianer",style:{background:n.bgColor}},[e("i",{staticClass:"iconfont",class:"icon-".concat(n.icon)})]),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t(n.title)))]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.$t(n.content)))])])})),0)]),t._v(" "),e("div",{staticClass:"create"},[e("div",{staticClass:"bg-container"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("\n\t\t\t\t[ MULTIPLE MODES TO CHOOSE FROM ]\n\t\t\t")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[e("span",{staticClass:"words"},[t._v("\n\t\t\t\t\t"+t._s(t.$t("PublicizeCreateTitle"))+"\n\t\t\t\t\t"),t._m(1)])]),t._v(" "),e("div",{staticClass:"tabs"},t._l(t.createTabs,(function(n,o){return e("div",{key:o,staticClass:"item-tab",class:{active:t.createCurrentTab===n},on:{click:function(e){t.createCurrentTab=n}}},[e("span",{staticClass:"words"},[t._v(t._s(t.$t(n)))])])})),0),t._v(" "),e("div",{staticClass:"create-img"},[t._l(t.createTabs,(function(n,o){return[e("img",{directives:[{name:"show",rawName:"v-show",value:t.createCurrentTab===n,expression:"createCurrentTab === tab"}],key:o,staticClass:"img",class:{animate:t.createCurrentTab===n},attrs:{src:t.getCreateImgUrl,alt:"create img"}})]}))],2)])]),t._v(" "),e("div",{staticClass:"tools"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("\n\t\t\t[ A VARIETY OF PORTABLE AI TOOLS ]\n\t\t")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[t._v("\n\t\t\t"+t._s(t.$t("PublicizeToolsTitle"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"tabs"},t._l(t.toolsTabs,(function(n){return e("div",{key:n.name,staticClass:"item-tab",class:{active:t.toolsCurrentTab===n.name},on:{click:function(e){t.toolsCurrentTab=n.name}}},[e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t(n.tabTitle)))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t(n.tabDesc)))])])])})),0),t._v(" "),t._l(t.toolsTabs,(function(n){return[e("div",{directives:[{name:"show",rawName:"v-show",value:t.toolsCurrentTab===n.name,expression:"toolsCurrentTab === item.name"}],key:n.name,staticClass:"content",class:{animate:t.toolsCurrentTab===n.name}},[e("div",{staticClass:"left"},[e("img",{staticClass:"img",attrs:{src:n.img,alt:"tools img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t(n.title)))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t(n.desc)))])]),t._v(" "),e("div",{staticClass:"right"},[e("video",{staticClass:"video",attrs:{autoplay:"",muted:"",loop:"",controls:"",src:n.video},domProps:{muted:!0}})])])]}))],2),t._v(" "),e("div",{staticClass:"style"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("\n\t\t\t[ RECOMMENDED STYLE ]\n\t\t")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[t._v("\n\t\t\t"+t._s(t.$t("StudioStyle"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"column column-one"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254523524802565/3e8cf20dfa7a6b8ca2df0369d8c4383b4c8c31b1_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_classic")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("labStyleTypeText_classic")))])]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",staticStyle:{height:"450px",objectFit:"cover"},attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254366764779525/3c4972410287df84923fef1ffc5e2cf7d670fcb2_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_foodphotography")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("labStyleTypeText_foodphotography")))])])]),t._v(" "),e("div",{staticClass:"column column-two"},[e("div",{staticClass:"item",staticStyle:{marginTop:"80px"}},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254704555180037/9c75aaa1c6963118e0c12eb740d0591c4af92c90_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_cinematic_portrait")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("labStyleTypeText_cinematic_portrait"))+"\n\t\t\t\t\t")])]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16255282629863429/5e5b1d20029c1445a995f6b6d1a5935eee767f3b_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_illustration_anime")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("labStyleTypeText_illustration_anime"))+"\n\t\t\t\t\t")])])]),t._v(" "),e("div",{staticClass:"column column-three"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254815632904197/ac7fcd0cc69a0ac9079050a5d2a56eef220e5b54_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_artdeco")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("labStyleTypeText_artdeco"))+"\n\t\t\t\t\t")])]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",staticStyle:{height:"520px",objectFit:"cover"},attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254847052441605/f1a8749f2e248b65694ab6a292eb404b9f54a609_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_watercolorart")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("labStyleTypeText_watercolorart"))+"\n\t\t\t\t\t")])])])])]),t._v(" "),e("div",{staticClass:"square"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("\n\t\t\t[ SQUARE WORK DISPLAY ]\n\t\t")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[t._v("\n\t\t\t"+t._s(t.$t("PublicizeSquareTitle"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"column column-one"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image2.jpeg"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image5.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image9.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})])]),t._v(" "),e("div",{staticClass:"column column-two"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image4.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image3.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})])]),t._v(" "),e("div",{staticClass:"column column-three"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image7.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",staticStyle:{height:"242px"},attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image6.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image11.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})])]),t._v(" "),e("div",{staticClass:"column column-four"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image1.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image10.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",staticStyle:{height:"340px"},attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image8.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})])])]),t._v(" "),e("div",{staticClass:"btn"},[e("el-button",{staticClass:"get-started",on:{click:function(e){return t.login("new_window")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("GetStarted"))+"\n\t\t\t")])],1)]),t._v(" "),t.bigImgDialogVisible?e("el-image-viewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"99"},attrs:{"on-close":t.closeViewBigImage,"url-list":[t.currentUrl]}}):t._e()],1)}),o,!1,null,"2a4b8e1e",null);e.default=component.exports},3327:function(t,e,n){"use strict";n.r(e);var o={name:"searchView",components:{PageView:n(498).a},data:function(){return{}}},r=n(0),component=Object(r.a)(o,(function(){var t=this._self._c;return t("div",[t("PageView")],1)}),[],!1,null,"00a2932f",null);e.default=component.exports},3328:function(t,e,n){"use strict";n.r(e);var o={name:"searchResult",components:{PageView:n(498).a},data:function(){return{}}},r=n(0),component=Object(r.a)(o,(function(){var t=this._self._c;return t("div",[t("PageView")],1)}),[],!1,null,"57903968",null);e.default=component.exports},3333:function(t,e,n){"use strict";n.r(e);n(14),n(9),n(11),n(12),n(6);var o=n(3),r=n(15),l=n(2),c=(n(20),n(16),n(7),n(32),n(10),n(19),n(8),n(4),n(23),n(18),n(37),n(30)),d=n(13),h=n(150),v=n(1),m=n(33),f=n(26),_=n(346),y=n(5),w=n(24),C=n(188);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={name:"AIAudioDetail",mixins:[m.a],components:{AudioListItem:_.a,AuthorInfo:C.a,AudioPlayer:h.a},data:function(){return{pb100:!1,has_more:!0,listData:[],listQueryParams:{order_by:"new",page_size:14,page:1,parent_id:""},loading:!0,reList:[],play:!1,formatNumberForeign:y.i,i18nKeyForNum:{num_of_task:"Generate",num_of_collection:"Stars",num_of_share:"ShareLink"},setIconForNum:{num_of_task:"icon-play",num_of_collection:"icon-icon-collect1",num_of_share:"icon-icons-Share"},gridNum:3,debounceResize:null,isPlaying:!1,getVoiceLoading:!1,moreActions:[{label:"Download",type:"download",icon:"icon-icon-Download"},{label:"Share",type:"share",icon:"icon-icon_share"}],detailsData:{}}},mounted:function(){var t=this;window.addEventListener("scroll",this.handleScroll),this.getDataInfo(),this.debounceResize=Object(w.debounce)(this.handleResize,500),window.addEventListener("resize",this.debounceResize),this.$nextTick((function(){t.handleResize()}))},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},computed:k(k(k(k(k({},Object(v.e)("app",["topBanner"])),Object(v.e)("user",["cdnHost","token"])),Object(v.e)("payment",["paymentInfo"])),Object(v.c)("user",["isLoggedIn","accountSettingsData"])),{},{isSharePage:function(){return this.$route.params.isShare&&this.$route.params.listId},selfTag:function(){var t,e=this.detailsData||null,n=[];return null!=e&&null!==(t=e.tags)&&void 0!==t&&t.length&&(n=null==e?void 0:e.tags.map((function(t){return t.title}))),n},langTags:function(){var t,e=[],n=[{i18Key:"usaGeneral",value:"en"},{i18Key:"Chinese",value:"zh-cn"},{i18Key:"japaneseForSound",value:"ja"}];return null!==(t=this.detailsData)&&void 0!==t&&null!==(t=t.langs)&&void 0!==t&&t.length&&(e=this.detailsData.langs.map((function(t){var e=n.find((function(e){return e.value===t}));return e?e.i18Key:""}))),e},attrTags:function(){var t=this.detailsData||null,e=[];if(t){var n=[],o=[],l=[];if(t.gender){var c=d.z.filter((function(e){return e.value===(null==t?void 0:t.gender)}))||[];c.length&&o.push(c[0].i18Key)}if(t.age){var h=d.z.filter((function(e){return e.value===(null==t?void 0:t.age)}))||[];h.length&&n.push(h[0].i18Key)}return null!=t&&t.tones&&null!=t&&t.tones.length&&(l=null==t?void 0:t.tones.map((function(t){var e=d.z.find((function(e){return e.value===t}));return e?e.i18Key:""}))),e=[].concat(n,o,Object(r.a)(l))}return e},styleObj:function(){var t;return{background:"url(".concat(null===(t=this.detailsData)||void 0===t||null===(t=t.cover)||void 0===t?void 0:t.url,") no-repeat"),backgroundPosition:"center",backgroundSize:"cover",backgroundAttachment:"fixed"}}}),methods:{handleScroll:Object(w.throttle)((function(){this.has_more&&(this.pb100=!0);var t=document.documentElement.scrollHeight;document.documentElement.scrollTop+(window.innerHeight||document.documentElement.clientHeight)>=t-50&&!this.loading&&this.has_more&&(console.log("Reached bottom of page"),this.isSharePage||this.getList())}),500),handleClickAuthorInfo:function(){var t;this.$logEvent("log_actions",{operation:"click_author_info",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(t=this.detailsData)||void 0===t||null===(t=t.author)||void 0===t?void 0:t.id})},handleFollow:function(){var t;this.$logEvent("log_actions",{operation:"click_follow",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(t=this.detailsData)||void 0===t||null===(t=t.author)||void 0===t?void 0:t.id})},getTagType:function(){var t=this.$route,e=t.name,n=t.params;e=e.split("___")[0];var o=d.v.find((function(t){return e="TagDetail"===e?null==n?void 0:n.type:e,t.name.includes(e)}));return null==o?void 0:o.path},handleClickTag:function(t){this.$logEvent("log_actions",{operation:"click_tab",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null==t?void 0:t.id});var path=this.getTagType();this.$router.push(this.localePath("/tagInfo"+path+"/"+(null==t?void 0:t.id)))},getDataInfo:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,data,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=t.$route.params)||void 0===n||!n.id){e.next=13;break}return e.next=3,Object(f.v)({id:t.$route.params.id});case 3:if(r=e.sent,data=r.data,1e4===r.status.code){e.next=8;break}return e.abrupt("return");case 8:l=JSON.parse(JSON.stringify((null==data?void 0:data.stat)||{})),data.stat={num_of_task:l.num_of_task||0,num_of_collection:l.num_of_collection||0,num_of_share:l.num_of_share||0},t.detailsData=data,t.getList(),Object(f.l)({items:[{action:"view",obj_id:null===(o=t.detailsData)||void 0===o?void 0:o.id,obj_type:16,count:1}]});case 13:case"end":return e.stop()}}),e)})))()},getList:function(){var t,e,n,o=this;this.has_more?(this.loading=!0,null!==(t=this.$route.params)&&void 0!==t&&t.listId&&this.isSharePage?this.getListById(null===(n=this.$route.params)||void 0===n?void 0:n.listId):(this.listQueryParams.parent_id=null===(e=this.detailsData)||void 0===e?void 0:e.id,Object(f.y)(this.listQueryParams).then((function(t){var e;1e4===t.status.code&&t.data&&(o.listData=[].concat(Object(r.a)(o.listData),Object(r.a)(null===(e=t.data)||void 0===e?void 0:e.items)),o.has_more=t.data.has_more||!1,t.data.has_more&&o.listQueryParams.page++)})).finally((function(){o.loading=!1,o.pb100=!1})))):this.pb100=!1},getListById:function(t){var e=this;Object(f.P)({id:t}).then((function(t){1e4===t.status.code&&t.data&&(e.listData=[],e.listData.unshift(t.data))})).finally((function(){e.loading=!1}))},handleSeeMore:function(){var t=this.$route.path.replace(/\/share$/,"");console.log("this.$route",t),this.$router.replace(t)},handlePlayTry:function(){this.play=!0,this.$refs.playAudio.handleClickPlay()},handleClickNum:function(t){var e,n,o,r=this;switch(console.log(t),t){case"num_of_task":this.$logEvent("log_actions",{operation:"click_creation",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(e=this.detailsData)||void 0===e||null===(e=e.author)||void 0===e?void 0:e.id}),this.handleGoCreate();break;case"num_of_collection":if(this.$logEvent("log_actions",{operation:"click_collect",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(n=this.detailsData)||void 0===n||null===(n=n.author)||void 0===n?void 0:n.id}),!this.isLoggedIn)return void this.$EventBus.$emit("openLoginDialog",{callBack:function(){r.setCollect(r.detailsData,"ai_audio")}});this.setCollect(this.detailsData,"ai_audio");break;default:this.$logEvent("log_actions",{operation:"click_share",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(o=this.detailsData)||void 0===o||null===(o=o.author)||void 0===o?void 0:o.id}),this.handleShare()}},handleResize:function(){try{var t=window.innerWidth-172;this.gridNum=t>1747?3:2}catch(t){}},handleGoCreate:function(){var t=this.localePath("/ai-audio/create/".concat(this.detailsData.id));this.$router.push(t)},handleShare:function(){var t;Object(c.g)({items:[{action:"share",obj_no:this.detailsData.id,obj_type:16}]});var e=location.host+this.localePath("/ai-audio/detail/".concat(this.detailsData.id,"/share"));Object(y.d)(e),this.$message.success(this.$t("CopiedURLToClipboard")),this.detailsData.stat.num_of_share=this.detailsData.stat.num_of_share+1,console.log("66666",null===(t=this.detailsData.stat)||void 0===t?void 0:t.num_of_share)},backTo:function(){history.length>1&&"/"!=this.fromPath?this.$router.back():this.$router.push(this.localePath("/"))}}},I=(n(2922),n(0)),component=Object(I.a)(O,(function(){var t,e,o,r,l,c,d=this,h=d._self._c;return h("div",{ref:"scrollContainer",staticClass:"ai-audio-detail",class:{pb100:d.pb100},style:d.styleObj,on:{scroll:d.handleScroll}},[h("el-backtop",{attrs:{bottom:30,right:30}},[h("i",{staticClass:"el-icon-top"})]),d._v(" "),h("div",{staticClass:"ai-audio-detail-mask-bg"}),d._v(" "),h("div",{staticClass:"ai-audio-detail-back",on:{click:d.backTo}},[h("i",{staticClass:"el-icon-back"})]),d._v(" "),h("div",{staticClass:"ai-audio-detail-user-info"},[h("div",{staticClass:"avatar-box"},[h("img",{attrs:{src:null===(t=d.detailsData)||void 0===t||null===(t=t.cover)||void 0===t?void 0:t.url,alt:null===(e=d.detailsData)||void 0===e?void 0:e.name,loading:"lazy"}})]),d._v(" "),h("div",{staticClass:"user-name"},[d._v("\n\t\t\t"+d._s(null===(o=d.detailsData)||void 0===o?void 0:o.name)+"\n\t\t")]),d._v(" "),null!==(r=d.detailsData.tags)&&void 0!==r&&r.length?h("div",{staticClass:"tag-box"},d._l(d.detailsData.tags,(function(t,e){return h("div",{key:t+e,staticClass:"tag-box-item",on:{click:function(e){return d.handleClickTag(t)}}},[d._v("\n\t\t\t\t"+d._s(t.title)+"\n\t\t\t")])})),0):d._e(),d._v(" "),d.langTags.length||d.attrTags.length||d.selfTag.length?h("div",{staticClass:"lang-box"},[d._l(d.attrTags,(function(t,e){return h("div",{key:t+e,staticClass:"lang-item"},[d._v("\n\t\t\t\t"+d._s(d.$t(t))+"\n\t\t\t")])})),d._v(" "),d._l(d.langTags,(function(t,e){return h("div",{key:e,staticClass:"lang-item"},[d._v("\n\t\t\t\t"+d._s(d.$t(t))+"\n\t\t\t")])}))],2):d._e(),d._v(" "),h("div",{staticClass:"other-use-info"},[h("AuthorInfo",{attrs:{type:"aiAudio",activeImg:d.detailsData},on:{handleFollow:d.handleFollow,handleClickAuthorInfo:d.handleClickAuthorInfo}},[h("div",{staticClass:"button-try",on:{click:d.handleGoCreate}},[d._v("\n\t\t\t\t\t"+d._s(d.$t("Generate"))+"\n\t\t\t\t")])])],1),d._v(" "),h("div",{staticClass:"num-box"},d._l(d.detailsData.stat,(function(t,e){return h("div",{key:e,staticClass:"num-box-item",on:{click:function(t){return t.stopPropagation(),d.handleClickNum(e)}}},[h("div",{staticClass:"title"},[d._v("\n\t\t\t\t\t"+d._s(d.$t("".concat(d.i18nKeyForNum[e])))+"\n\t\t\t\t")]),d._v(" "),h("div",{staticClass:"info"},[h("span",{staticClass:"num"},[d._v(d._s(d.formatNumberForeign(t||0)))]),d._v(" "),h("div",{staticClass:"i-box",class:"bg-".concat(d.setIconForNum[e])},[h("i","num_of_collection"===e?{staticClass:"iconfont",class:d.setCollectData(d.detailsData)}:{staticClass:"iconfont",class:d.setIconForNum[e]})])])])})),0),d._v(" "),h("div",{staticClass:"explam"},[d._v("\n\t\t\t"+d._s(d.$t("audioSampleVoice"))+"\n\t\t")]),d._v(" "),h("div",{staticClass:"try-sound"},[h("div",{staticClass:"info"},[h("div",{staticClass:"info-text"},[d._v("\n\t\t\t\t\t"+d._s((null===(l=d.detailsData)||void 0===l?void 0:l.text)||d.$t("no_data"))+"\n\t\t\t\t")])]),d._v(" "),h("div",{staticClass:"btn",on:{click:d.handlePlayTry}},[h("AudioPlayer",{ref:"playAudio",attrs:{modelPlay:"",item:d.detailsData,customClass:"try-class",playIconCustomStyle:{position:"unset"},logParams:{operation:"click_audition",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(c=d.detailsData)||void 0===c||null===(c=c.author)||void 0===c?void 0:c.id}},on:{playEnd:function(t){d.play=!1},playIng:function(t){d.play=!0}}}),d._v(" "),h("span",[d._v(d._s(d.play?d.$t("audioStop"):d.$t("audition")))])],1)])]),d._v(" "),h("div",{staticClass:"ai-audio-detail-list"},[h("div",{staticClass:"title"},[d._v("\n\t\t\t"+d._s(d.$t("CommunityVoices"))+"\n\t\t")]),d._v(" "),h("div",{staticClass:"table-list",class:{"hide-scrollbar":0===d.listData.length},style:{gridTemplateColumns:d.listData.length?"repeat(".concat(d.gridNum,", 1fr)"):"repeat(".concat(1,", 1fr)")}},[d.listData.length?[d.isSharePage?[h("AudioListItem",{attrs:{logParams:{operation:"click_audition",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:"audio_community"},behaviorInfo:"on_ai_audio_community_detail_page",behaviorInfoSub:"from_audio_community",showMoreList:"",item:d.listData[0],obj:d.listData[0]}})]:d._l(d.listData,(function(t,e){return h("AudioListItem",{key:e,attrs:{logParams:{operation:"click_audition",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:"audio_community"},behaviorInfo:"on_ai_audio_community_detail_page",behaviorInfoSub:"from_audio_community",obj:t,item:t.voice}})}))]:d._e(),d._v(" "),0!==d.listData.length||d.loading?d._e():[h("div",{staticClass:"table-list-empty"},[h("img",{attrs:{src:n(475),loading:"lazy",alt:d.$t("willShowAudioToHere")}}),d._v(" "),h("span",[d._v(d._s(d.$t("willShowAudioToHere")))])])]],2),d._v(" "),h("p",{directives:[{name:"show",rawName:"v-show",value:d.loading,expression:"loading"},{name:"loading",rawName:"v-loading",value:d.loading,expression:"loading"}],staticClass:"load-tip load-tip-loading",class:{empty_loading:0===d.listData.length},attrs:{"element-loading-text":"".concat(d.$t("loading_tip"),"...")}}),d._v(" "),h("p",{directives:[{name:"show",rawName:"v-show",value:!d.has_more&&!d.loading&&d.listData.length>2,expression:"!has_more && !loading && listData.length > 2"}],staticClass:"load-tip"},[d._v(d._s(d.$t("done_tip")))])])],1)}),[],!1,null,"8b5d37be",null);e.default=component.exports},3334:function(t,e,n){"use strict";n.r(e);n(10),n(14),n(9),n(11),n(12);var o=n(3),r=n(15),l=n(2),c=(n(20),n(16),n(7),n(32),n(19),n(8),n(4),n(23),n(18),n(37),n(6),n(29),n(150)),d=n(267),h=n(212),v=n(13),m=n(1),f=n(33),_=n(26),y=n(40),w=n(346),C=n(5),x=n(188),k=n(24);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $={name:"AIAudioCreate",mixins:[f.a],components:{AudioListItem:w.a,AuthorInfo:x.a,selectSoundModel:h.a,CircularLoading:d.a,AudioPlayer:c.a},data:function(){return{playIconCustomStyle:{position:"absolute",left:"49px",bottom:"5px"},mockObj:{},hideBar:!0,dataId:null,timer:null,timer2:null,randomNumber:1,inputError:"",process:0,customStyle:{height:"114px",background:"#282933",borderRadius:"10px",padding:"16px"},inputValue:"",handleScrollThrottled:null,has_more:!0,listData:[],listQueryParams:{order_by:"new",page_size:8,page:1,account_no:""},createLoading:!1,loading:!1,reList:[],play:!1,formatNumberForeign:C.i,i18nKeyForNum:{num_of_task:"Generate",num_of_collection:"Stars",num_of_like:"ShareLink"},setIconForNum:{num_of_task:"icon-play",num_of_collection:"icon-icon-collect1",num_of_like:"icon-icons-Share"},debounceResize:null,isPlaying:!1,getVoiceLoading:!1,moreActions:[{label:"Download",type:"download",icon:"icon-icon-Download"},{label:"Share",type:"share",icon:"icon-icon_share"}],detailsData:{}}},mounted:function(){var t,e,n=this;(this.handleScrollThrottled=Object(k.throttle)(this.handleScroll,500),null!==(t=this.$route.params)&&void 0!==t&&t.id)?(this.dataId=null===(e=this.$route.params)||void 0===e?void 0:e.id,this.getDataInfo()):this.getHotData();this.$nextTick((function(){n.isLoggedIn&&n.getList()}))},beforeDestroy:function(){clearInterval(this.timer),clearTimeout(this.timer2)},computed:I(I(I(I(I({},Object(m.e)("app",["topBanner"])),Object(m.e)("user",["cdnHost","token","userInfo"])),Object(m.e)("payment",["paymentInfo"])),Object(m.c)("user",["isLoggedIn","accountSettingsData","isCompanyAccount"])),{},{userId:function(){var t;return null===(t=this.userInfo)||void 0===t?void 0:t.id},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount},isSharePage:function(){return this.$route.params.isShare||!1},selfTag:function(){var t,e=this.detailsData||null,n=[];return null!=e&&null!==(t=e.tags)&&void 0!==t&&t.length&&(n=null==e?void 0:e.tags.map((function(t){return t.title}))),n},langTags:function(){var t,e=[],n=[{i18Key:"usaGeneral",value:"en"},{i18Key:"Chinese",value:"zh-cn"},{i18Key:"japaneseForSound",value:"ja"}];return null!==(t=this.detailsData)&&void 0!==t&&null!==(t=t.langs)&&void 0!==t&&t.length&&(e=this.detailsData.langs.map((function(t){var e=n.find((function(e){return e.value===t}));return e?e.i18Key:""}))),e},attrTags:function(){var t=this.detailsData||null,e=[];if(t){var n=[],o=[],l=[];if(t.gender){var c=v.z.filter((function(e){return e.value===(null==t?void 0:t.gender)}))||[];c.length&&o.push(c[0].i18Key)}if(t.age){var d=v.z.filter((function(e){return e.value===(null==t?void 0:t.age)}))||[];d.length&&n.push(d[0].i18Key)}return null!=t&&t.tones&&null!=t&&t.tones.length&&(l=null==t?void 0:t.tones.map((function(t){var e=v.z.find((function(e){return e.value===t}));return e?e.i18Key:""}))),e=[].concat(n,o,Object(r.a)(l))}return e}}),methods:{handleValidate:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]&&t[0],e.inputValue){n.next=4;break}return e.inputError="audioCreatePlaceholder",n.abrupt("return");case 4:return n.next=6,Object(_.M)({text:e.inputValue,type:1,domain:"timbre_train",langs:["zh","en","ja"]});case 6:if(r=n.sent,l=r.status,c=void 0===l?{}:l,d=r.data,data=void 0===d?{}:d,1e4!==c.code){n.next=18;break}if(0!==data.err_code){n.next=14;break}if(e.inputError=null,!o){n.next=13;break}return n.abrupt("return",1);case 13:return n.abrupt("return");case 14:if(e.inputValue=Object(v.Q)(e.inputValue,data.sensitive),e.inputError=2===data.err_code?"audioTxtError2":"audioTxtError1",!o){n.next=18;break}return n.abrupt("return",2);case 18:case"end":return n.stop()}}),n)})))()},getHotData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,data,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:1,page_size:1,order_by:"hot"},e.next=3,Object(y.getAiaudioList)(n);case 3:o=e.sent,r=o.status,l=void 0===r?{}:r,c=o.data,data=void 0===c?{}:c,1e4===l.code&&(t.dataId=null==data||null===(d=data.items[0])||void 0===d||null===(d=d.timbre)||void 0===d?void 0:d.id,console.log("this.dataId",t.dataId),t.getDataInfo());case 6:case"end":return e.stop()}}),e)})))()},getTagType:function(){var t=this.$route,e=t.name,n=t.params;e=e.split("___")[0];var o=v.v.find((function(t){return e="TagDetail"===e?null==n?void 0:n.type:e,t.name.includes(e)}));return null==o?void 0:o.path},handleClickTag:function(t){this.$logEvent("log_actions",{operation:"click_tab",behavior_info:"on_ai_audio_create_detail_page",behavior_info_sub:null==t?void 0:t.id});var path=this.getTagType();this.$router.push(this.localePath("/tagInfo"+path+"/"+(null==t?void 0:t.id)))},loop1To5:function(){var t=Math.floor(5*Math.random());console.log("randomNumber",t),this.inputValue=["en","zhCN","ja"].includes(this.$i18n.locale)?v.A[this.$i18n.locale][t]:v.A.en[t],this.inputError=null},selectModel:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$refs.selectSoundModel.handleClose(),e.dataId=t.id,e.getDataInfo();case 3:case"end":return n.stop()}}),n)})))()},getDataInfo:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,data,c,d,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.dataId){e.next=7;break}return e.next=3,Object(_.v)({id:t.dataId});case 3:n=e.sent,o=n.status,r=void 0===o?{}:o,l=n.data,data=void 0===l?{}:l,console.log(n),1e4===r.code&&(v=JSON.parse(JSON.stringify((null==data?void 0:data.stat)||{})),data.stat={num_of_task:v.num_of_task||0,num_of_collection:v.num_of_collection||0,num_of_like:v.num_of_like||0},t.detailsData=data,t.mockObj={id:null===(c=t.detailsData)||void 0===c?void 0:c.id,timbre:{cover:{url:null===(d=t.detailsData)||void 0===d||null===(d=d.cover)||void 0===d?void 0:d.url},duration:0,id:null,name:null===(h=t.detailsData)||void 0===h?void 0:h.name,txt:t.inputValue,url:""}});case 7:case"end":return e.stop()}}),e)})))()},updateUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){var e=this.localePath("/ai-audio/create/".concat(t));this.$router.replace(e)}},handleSelectSound:function(){this.$logEvent("log_actions",{operation:"click_switch",behavior_info:"on_ai_audio_create_detail_page"}),this.$refs.selectSoundModel.openModal()},submitCreate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,l,c,d,h,data,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleValidate(!0);case 2:if(n=e.sent,t.inputValue){e.next=6;break}return t.inputError="audioCreatePlaceholder",e.abrupt("return");case 6:if(!t.createLoading){e.next=9;break}return t.$message.error(t.$t("code_10405")),e.abrupt("return");case 9:if(t.isLoggedIn){e.next=12;break}return t.$EventBus.$emit("openLoginDialog",{callBack:function(){t.submitCreate()}}),e.abrupt("return");case 12:if(2!==n){e.next=14;break}return e.abrupt("return");case 14:if(!t.inputError){e.next=16;break}return e.abrupt("return");case 16:return e.prev=16,t.scrollToTop(),t.$nextTick((function(){t.incrementProgressFn()})),t.mockObj.timbre.txt=t.inputValue,t.listData.unshift(t.mockObj),t.createLoading=!0,e.next=24,Object(_.K)({text:t.inputValue,timbre_id:null===(o=t.detailsData)||void 0===o?void 0:o.id});case 24:if(l=e.sent,c=l.status,d=void 0===c?{}:c,h=l.data,data=void 0===h?{}:h,v={70039:["showVipComputingDialog","vipDialogComputedTit2"],70010:["showBreakDialog","VipTip","basic"],80008:t.isVip?["showVipComputingDialog"]:["showNotVipComputingDialog"]},!d.code||!v[d.code]){e.next=32;break}return(m=t.$EventBus).$emit.apply(m,Object(r.a)(v[d.code])),t.createLoading=!1,t.listData.shift(),e.abrupt("return");case 32:1e4===d.code&&data.url?(t.incrementProgressFn(!0),t.inputError=null):(t.listData.shift(),t.createLoading=!1,t.inputError=null,t.$message.error(t.$t("audioCreateFail"))),e.next=41;break;case 35:e.prev=35,e.t0=e.catch(16),console.log(e.t0),t.listData.shift(),t.inputError=null,t.createLoading=!1;case 41:case"end":return e.stop()}}),e,null,[[16,35]])})))()},incrementProgressFn:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.process=60),!e&&clearInterval(this.timer),this.timer=setInterval(Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.process<100)){n.next=7;break}if(e||!(t.process>70)){n.next=4;break}return t.process=80,n.abrupt("return");case 4:t.process+=20,n.next=12;break;case 7:clearInterval(t.timer),t.process=0,t.createLoading=!1,t.$message.success(t.$t("CreateSuccess")),t.getList(!0);case 12:case"end":return n.stop()}}),n)}))),1e3)},scrollToTop:function(){this.$refs.scrollContainer.scrollTop=0},handleCustomTrain:function(){this.$logEvent("log_actions",{operation:"click_custom_create",behavior_info:"on_ai_audio_create_detail_page"}),this.$router.push(this.localePath("/ai-audio/train"))},resetListParams:function(){this.listData=[],this.has_more=!0,this.listQueryParams={order_by:"new",page_size:8,page:1,account_no:""}},handleScroll:function(t){t.preventDefault();var e=this.$refs.scrollContainer,n=e.scrollHeight;e.scrollTop+e.clientHeight>=n&&!this.loading&&this.has_more&&(console.log("当滚动到底部时触发加载数据"),this.getList())},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.has_more&&!e)return!1;e&&this.resetListParams(),this.loading=!0,this.listQueryParams.account_no=this.userId||"",Object(_.y)(this.listQueryParams).then((function(e){var n,o;1e4===e.status.code&&e.data&&(null===(n=e.data)||void 0===n||n.items.forEach((function(t){var e;t.voice.cover=null===(e=t.author)||void 0===e?void 0:e.head})),t.listData=[].concat(Object(r.a)(t.listData),Object(r.a)(null===(o=e.data)||void 0===o?void 0:o.items)),t.has_more=e.data.has_more||!1,t.has_more&&t.listQueryParams.page++,console.log("this.listData",t.listData))})).finally((function(){t.loading=!1}))},backTo:function(){this.$router.back()}}},j=$,T=(n(2926),n(0)),component=Object(T.a)(j,(function(){var t,e,o,r,l,c,d=this,h=d._self._c;return h("div",{staticClass:"ai-audio-create"},[h("div",{staticClass:"ai-audio-create-back",on:{click:d.backTo}},[h("i",{staticClass:"el-icon-back"})]),d._v(" "),h("div",{staticClass:"ai-audio-create-left"},[h("div",{staticClass:"left-1"},[h("div",{staticClass:"left-1-l"},[h("div",{staticClass:"left-1-l-1"},[d._v("\n                    "+d._s(d.$t("audioCreateTitle"))+"\n                ")]),d._v(" "),h("div",{staticClass:"left-1-l-2"},[d._v("\n                    "+d._s(d.$t("audioCreateTips"))+"\n                ")])]),d._v(" "),h("div",{staticClass:"left-1-r",on:{click:d.loop1To5}},[h("i",{staticClass:"iconfont icon-dice-square"}),d._v(" "),h("div",{staticClass:"left-1-r-2"},[d._v("\n                    "+d._s(d.$t("audioCreateMadomTxt"))+"\n                ")])])]),d._v(" "),h("el-input",{staticClass:"left-2",style:{marginBottom:d.inputError?"4px":"18px"},attrs:{"show-word-limit":"",placeholder:d.$t("audioCreatePlaceholder"),maxlength:"500",autosize:{minRows:6},type:"textarea"},model:{value:d.inputValue,callback:function(t){d.inputValue=t},expression:"inputValue"}}),d._v(" "),d.inputError?h("p",{staticClass:"inputError"},[h("i",{staticClass:"el-icon-warning"}),d._v(" "+d._s(d.$t(d.inputError))+"\n        ")]):d._e(),d._v(" "),h("div",{staticClass:"left-3"},[h("div",{staticClass:"left"},[d._v(d._s(d.$t("audioCreateSelectVoice")))]),d._v(" "),h("div",{staticClass:"right",on:{click:d.handleCustomTrain}},[d._v("\n                "+d._s(d.$t("customCreated"))+"\n            ")])]),d._v(" "),h("div",{staticClass:"left-4"},[h("AudioListItem",{attrs:{behaviorInfo:"on_ai_audio_create_detail_page",behaviorInfoSub:"from_audio_model",showPlayer:!1,modelPlay:"",item:d.detailsData,obj:d.detailsData,"custom-style":d.customStyle,"handle-options":["download","share"]}},[h("template",{slot:"custom_header"},[h("div",{staticClass:"custom-box"},[["",null,void 0].includes(null===(t=d.detailsData)||void 0===t||null===(t=t.cover)||void 0===t?void 0:t.url)?[h("div",{staticClass:"log-empty"},[d._v(d._s(d.$t("EmptyBannerText")))])]:[h("el-image",{staticClass:"log",attrs:{lazy:"",src:null===(e=d.detailsData)||void 0===e||null===(e=e.cover)||void 0===e?void 0:e.url,alt:null===(o=d.detailsData)||void 0===o?void 0:o.name}})],d._v(" "),h("AudioPlayer",{attrs:{customClass:"custom-player-create-1",item:d.detailsData,modelPlay:"",playIconCustomStyle:d.playIconCustomStyle,logParams:{operation:"click_audition",behavior_info:"on_ai_audio_create_detail_page"}}}),d._v(" "),h("div",{staticClass:"info-right"},[h("span",{staticClass:"info-1"},[d._v(d._s(null===(r=d.detailsData)||void 0===r?void 0:r.name))]),d._v(" "),h("span",{staticClass:"info-3"},d._l(d.detailsData.tags,(function(t,e){return h("div",{key:t+e,staticClass:"info-3-item",on:{click:function(e){return d.handleClickTag(t)}}},[d._v("\n                                    "+d._s(t.title)+"\n                                ")])})),0),d._v(" "),d.langTags.length||d.attrTags.length||d.selfTag.length?h("span",{staticClass:"info-2"},[d._l(d.langTags,(function(t,e){return h("div",{key:t+e,staticClass:"info-2-item"},[d._v("\n                                    "+d._s(d.$t(t))+"\n                                ")])})),d._v(" "),d._l(d.attrTags,(function(t,e){return h("div",{key:t+e,staticClass:"info-2-item"},[d._v("\n                                    "+d._s(d.$t(t))+"\n                                ")])}))],2):d._e()]),d._v(" "),h("div",{staticClass:"switch-voice-btn",on:{click:d.handleSelectSound}},[h("i",{staticClass:"iconfont icon-qiehuan"}),d._v(" "),h("div",{staticClass:"txt"},[d._v(d._s(d.$t("audioCreateChange")))])])],2)])],2)],1),d._v(" "),h("div",{staticClass:"left-5"},[h("div",{staticClass:"btn",class:{loadingClass:d.createLoading},on:{click:d.submitCreate}},[d.createLoading?[h("i",{staticClass:"el-icon-loading"}),d._v(" "),h("span",{staticClass:"loading-tip"},[d._v(d._s(d.$t("ai_dance_loading_toast")))])]:h("div",{staticClass:"btn-box"},[h("span",{staticClass:"btn-text-1"},[d._v(d._s(d.$t("Generate")))]),d._v(" "),h("span",{staticClass:"btn-text-2"},[h("el-tooltip",{attrs:{content:d.$t("audioCreateTip"),"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[h("span",{staticClass:"iconfont icon-ruleIcon"})])],1)])],2)])],1),d._v(" "),h("div",{staticClass:"ai-audio-create-right"},[h("div",{staticClass:"title"},[d._v("\n            "+d._s(d.$t("workFlow11"))+"\n        ")]),d._v(" "),h("div",{directives:[{name:"loading",rawName:"v-loading",value:1===d.listQueryParams.page&&d.loading,expression:"listQueryParams.page === 1 && loading"}],ref:"scrollContainer",staticClass:"content",class:{"hide-scrollbar":d.hideBar},style:{height:d.listQueryParams.page>1&&d.loading?"calc(100% - 180px)":"calc(100% - 40px)"},on:{mouseenter:function(t){d.hideBar=!1},mouseleave:function(t){d.hideBar=!0},scroll:d.handleScrollThrottled}},[d.listData.length?d._l(d.listData,(function(t,e){return h("AudioListItem",{key:e,attrs:{showPlayer:!1,behaviorInfo:"on_ai_audio_create_detail_page",logParams:{operation:"click_audition",behavior_info:"on_ai_audio_create_detail_page"},behaviorInfoSub:"history_record","custom-style":{width:"430px",height:"85px",background:"#282933",borderRadius:"10px",padding:"16px"},item:t.voice,obj:t,"handle-options":["download","share","del"],deleteSure:""},on:{updateList:function(t){return d.getList(!0)}},scopedSlots:d._u([{key:"custom_header",fn:function(e){var n,o,r,l,c,v,m,f;return[h("div",{staticClass:"header-info"},[["",null,void 0].includes(null===(n=e.data)||void 0===n||null===(n=n.timbre)||void 0===n||null===(n=n.cover)||void 0===n?void 0:n.url)?[h("div",{staticClass:"log-empty"},[d._v(d._s(d.$t("EmptyBannerText")))])]:[h("img",{staticClass:"log",attrs:{loading:"lazy",src:null===(o=e.data)||void 0===o||null===(o=o.timbre)||void 0===o||null===(o=o.cover)||void 0===o?void 0:o.url,alt:null===(r=e.data.timbre)||void 0===r?void 0:r.name}})],d._v(" "),h("div",{staticClass:"info-right"},[h("span",{staticClass:"name"},[d._v(d._s((null===(l=e.data.timbre)||void 0===l?void 0:l.name)||d.$t("no_data")))]),d._v(" "),h("el-tooltip",{attrs:{"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[h("div",{staticClass:"tooltip-txt",attrs:{slot:"content"},slot:"content"},[d._v("\n                                        "+d._s((null===(c=e.data.voice)||void 0===c?void 0:c.txt)||(null===(v=e.data.timbre)||void 0===v?void 0:v.txt)||d.$t("no_data"))+"\n                                    ")]),d._v(" "),h("span",{staticClass:"txt"},[d._v("\n                                        "+d._s((null===(m=e.data.voice)||void 0===m?void 0:m.txt)||(null===(f=e.data.timbre)||void 0===f?void 0:f.txt)||d.$t("no_data"))+"\n                                    ")])])],1),d._v(" "),h("AudioPlayer",{staticClass:"player-history-list",attrs:{obj:t,item:t.voice,logParams2:{operation:"click_broadcast",behavior_info:"on_ai_audio_list",behavior_info_sub:null==t?void 0:t.id},customClass:"custom-player-create"}})],2)]}}],null,!0)},[d._v(" "),0===e&&d.createLoading?h("template",{slot:"createIng"},[h("div",{staticClass:"create-ing"},[h("CircularLoading",{attrs:{font:14,process:d.process,circleWH:54}}),d._v(" "),h("div",{staticClass:"loading-tip"},[h("span",[d._v(d._s(d.$t("audioCreateIng")))]),d._v(" "),h("span",{staticClass:"loading-tip-animo"})])],1)]):d._e()],2)})):d._e(),d._v(" "),0!==d.listData.length||d.loading?d._e():[h("div",{staticClass:"table-list-empty"},[h("img",{attrs:{src:n(475),loading:"lazy",alt:d.$t("AiAudioCreateEmpty")}}),d._v(" "),h("span",[d._v(d._s(d.$t("AiAudioCreateEmpty")))])])]],2),d._v(" "),d.listQueryParams.page>1&&d.loading?h("div",{staticClass:"loading-more-box"},[h("div",{directives:[{name:"loading",rawName:"v-loading",value:d.listQueryParams.page>1&&d.loading,expression:"listQueryParams.page > 1 && loading"}],staticClass:"loading-more"})]):d._e()]),d._v(" "),h("selectSoundModel",{ref:"selectSoundModel",attrs:{selectList:null!==(l=d.detailsData)&&void 0!==l&&l.id?[null===(c=d.detailsData)||void 0===c?void 0:c.id]:[]},on:{selectModel:d.selectModel}})],1)}),[],!1,null,"da3eda36",null);e.default=component.exports},3335:function(t,e,n){"use strict";n.r(e);var o={data:function(){return{}}},r=(n(2948),n(0)),component=Object(r.a)(o,(function(){var t=this;return(0,t._self._c)("div",[t._v(t._s(t.$t("AccessDenied")))])}),[],!1,null,"4f34ea47",null);e.default=component.exports},3336:function(t,e,n){"use strict";n.r(e);var o={components:{},data:function(){return{}},watch:{},computed:{},created:function(){},mounted:function(){},methods:{}},r=n(0),component=Object(r.a)(o,(function(){var t=this;return(0,t._self._c)("div",{staticStyle:{"font-size":"50px",color:"#1e80ff",height:"100vh"}},[t._v(t._s(t.$t("notFound")))])}),[],!1,null,null,null);e.default=component.exports},3338:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(11),n(12),n(8),n(4),n(6);var o=n(2),r=(n(16),n(10),n(14),n(21)),l=n(1),c=n(5);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v={name:"InviteDialog",props:{visible:{type:Boolean,default:!1}},data:function(){return{copyTextToClipboard:c.d,dialogVisible:!1,shareUrl:""}},mounted:function(){this.handleGenerateUrl(),this.initJoinGroupView()},computed:h(h({},Object(l.e)("user",["userInfo"])),Object(l.c)("user",["isCompanyAccount"])),watch:{visible:function(t){this.dialogVisible=t}},methods:h(h({},Object(l.b)("user",["setShortUrl","setDownloadURL","setCDNHost","setCloudCDN"])),{},{initJoinGroupView:function(){var t=this;this.$EventBus.$on("openInviteDialog",(function(e){console.log("eventBus openInviteDialog"),t.dialogVisible||t.showDialog(e)}))},showDialog:function(){this.dialogVisible=!0},copyLink:function(){this.copyTextToClipboard(this.shareUrl),this.$message.success(this.$t("InvitationCopy"))},handleGenerateUrl:function(){var t=this,e={};e.target_host="".concat(window.location.origin,"/"),e.url="".concat(window.location.origin,"/")+"home?u_code="+this.userInfo.invite_user_code;var n=(this.userInfo.name?this.userInfo.name:this.userInfo.id)+""+this.$t("shareText");Object(r.p)(e).then((function(e){var o,r,l,c,d,h="",v="",m="",f="",_=e||{},y=_.status.code,code=void 0===y?"":y;_.data.canary;null!=e&&e.data&&(h=(null==e||null===(o=e.data)||void 0===o?void 0:o.url)||"",v=(null==e||null===(r=e.data)||void 0===r?void 0:r.qr_code)||"",m=(null==e||null===(l=e.data)||void 0===l?void 0:l.cdn_host)||"",f=(null==e||null===(c=e.data)||void 0===c?void 0:c.cloud_cdn)||"");1e4===code&&t.$cookies.set("enable_tavern_visitor",null==e||null===(d=e.data)||void 0===d?void 0:d.filter_mode);[1e4,"10000"].includes(code)&&!["",null,void 0].includes(h)&&(t.shareUrl="".concat(n,"\r\n").concat(h),t.setShortUrl(h),t.setDownloadURL(v||""),t.setCDNHost(m),t.setCloudCDN(f))}))},handleUserInfo:function(){var t,e=null===(t=this.userInfo)||void 0===t||null===(t=t.emp_assets)||void 0===t?void 0:t.compute;if(e&&this.isCompanyAccount){var n,o=(null===(n=this.userInfo)||void 0===n||null===(n=n.data)||void 0===n||null===(n=n.enterprise)||void 0===n?void 0:n.show_entry)?"ToB_GPULimitAdmin":"ToB_GPULimit";(e>144e5&&e<18e6||e>324e5&&e<36e6||e>1044e5&&e<108e6)&&this.$message.warning(this.$t(o))}}})},m=(n(2976),n(2977),n(0)),component=Object(m.a)(v,(function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"task-invite-dialog","close-on-click-modal":!0,"close-on-press-escape":!0,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"}),t._v(" "),e("div",{staticClass:"main-part"},[e("div",{staticClass:"title flex justify-center"},[e("div",{staticClass:"img-part"},[e("img",{attrs:{src:n(3229),alt:"wechat"}})])]),t._v(" "),e("div",{staticClass:"info flex w-full items-center justify-center"},[t._v("\n        "+t._s(t.$t("invite_dialog_text"))+"\n      ")])]),t._v(" "),e("span",{staticClass:"dialog-footer w-full flex justify-center",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"my-dialog-btn btn-left",on:{click:t.copyLink}},[t._v(t._s(t.$t("Invite")))])],1)])],1)}),[],!1,null,"5adba67b",null);e.default=component.exports},346:function(t,e,n){"use strict";n(10),n(36),n(14),n(18),n(9),n(11),n(12),n(8),n(6);var o=n(3),r=n(2),l=(n(20),n(16),n(7),n(89),n(4),n(23),n(49),n(76),n(37),n(30)),c=n(150),d=n(1),h=n(5),v=n(26);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _={components:{AudioPlayer:c.a},watch:{$route:{handler:function(){var t;null===(t=this.$refs)||void 0===t||null===(t=t.myPopover)||void 0===t||t.doClose()}}},props:{behaviorInfoSub:{type:String,default:"from_audio_model"},behaviorInfo:{type:String,default:"on_ai_audio_create_detail_page"},deleteSure:Boolean,showPlayer:{type:Boolean,default:!0},modelPlay:Boolean,url:{type:String,default:""},showMoreList:Boolean,showMore:{type:Boolean,default:!0},customStyle:{type:Object,default:function(){return{background:"#1A1D23"}}},item:{type:Object,default:function(){}},obj:{type:Object,default:function(){}},handleOptions:{type:Array,default:function(){return["share","download"]}}},computed:f(f(f({},Object(d.c)("user",["isLoggedIn"])),Object(d.e)("user",["userInfo","token"])),{},{isMine:function(){var t=this;return function(e){var n,o;return(null==e||null===(n=e.author)||void 0===n?void 0:n.id)==(null===(o=t.userInfo)||void 0===o?void 0:o.id)}},moreActions:function(){var t=this;return this.handleEnum.filter((function(e){return t.handleOptions.includes(e.type)}))}}),data:function(){return{handleEnum:[{label:"Report",type:"report",icon:"task-report-icon"},{label:"Download",type:"download",icon:"icon-icon-Download"},{label:"Share",type:"share",icon:"icon-icon_share"},{label:"Edit",type:"edit",icon:"icon-icon-edit"},{label:"Delete",type:"del",icon:"icon-moveDelete"}],isSeeking:!1,currentTime:0,playIconCustomStyle:{position:"unset !important"}}},methods:{clickPlayer:function(){console.log(99999)},getPersonalInfoUrl:function(){var t,e,n=(null===(t=this.obj)||void 0===t||null===(t=t.author)||void 0===t?void 0:t.id)||"",o=(null===(e=this.userInfo)||void 0===e?void 0:e.id)||"",path="/user/"+encodeURIComponent(n);return o==n&&(path="/personal"),path},jumpToOtherUser:function(){var t;this.$logEvent("log_actions",{operation:"click_author_image",behavior_info:"on_ai_audio_list",behavior_info_sub:null===(t=this.item)||void 0===t?void 0:t.id});var path=this.getPersonalInfoUrl();this.token?window.open(path,"_blank"):this.$EventBus.$emit("openLoginDialog",{callBack:function(){window.open(path,"_blank")}})},handleSeeMore:function(){var t=this.$route.path.indexOf("/share");if(-1!==t){var e=this.$route.path.slice(0,t);this.$router.replace(e)}},handleActions:function(t){var e=this;switch(console.log(t),t){case"del":if(this.$logEvent("log_actions",{operation:"click_delete",behavior_info:this.behaviorInfo,behavior_info_sub:this.behaviorInfoSub}),!this.isLoggedIn)return void this.$EventBus.$emit("openLoginDialog",{callBack:function(){e.handleDel()}});this.handleDel();break;case"share":this.$logEvent("log_actions",{operation:"click_share",behavior_info:this.behaviorInfo,behavior_info_sub:this.behaviorInfoSub}),this.handleShare();break;case"download":if(this.$logEvent("log_actions",{operation:"click_download",behavior_info:this.behaviorInfo,behavior_info_sub:this.behaviorInfoSub}),!this.isLoggedIn)return void this.$EventBus.$emit("openLoginDialog",{callBack:function(){e.handleDownload()}});this.handleDownload()}},handleDel:function(){var t=this;this.$confirm(this.$t(this.deleteSure?"audioDelSoundQuery":"audioDeledQuery"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"collectConfirm",type:"warning"}).then(Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.deleteSure){e.next=6;break}return e.next=3,Object(v.N)(null===(n=t.item)||void 0===n?void 0:n.id);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Object(v.O)({ids:[null===(o=t.item)||void 0===o?void 0:o.id]});case 8:e.t0=e.sent;case 9:r=e.t0,l=r.status,1e4===(void 0===l?{}:l).code&&(t.$message.success(t.$t("deleteSuccess")),t.$emit("updateList"));case 12:case"end":return e.stop()}}),e)}))))},handleDownload:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTts();case 2:if(n=e.sent,console.log("downlaodUrl--",n),n){e.next=7;break}return t.$message.warning(t.$t("taskOperateFailed")),e.abrupt("return");case 7:return o=t.$createAudioPlayer(n),e.prev=8,e.next=11,o.download();case 11:(r=e.sent).success||(t.$message.warning(t.$t("taskOperateFailed")),console.error("Download failed: ".concat(r.error))),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),t.$message.warning(t.$t("taskOperateFailed")),console.error("An error occurred during download:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[8,15]])})))()},getTts:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,h,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={author_id:(null===(n=t.item)||void 0===n?void 0:n.author_id)||(null===(o=t.item)||void 0===o||null===(o=o.author)||void 0===o?void 0:o.id)||t.authorId,scene:"trial",timbre_id:(null===(r=t.item)||void 0===r?void 0:r.timbre_id)||(null===(l=t.item)||void 0===l?void 0:l.id),text:null===(c=t.item)||void 0===c?void 0:c.text,voice_id:null===(d=t.item)||void 0===d?void 0:d.id},t.modelPlay&&delete h.voice_id,e.next=4,Object(v.K)(h);case 4:if(1e4!==(m=e.sent).status.code){e.next=9;break}return e.abrupt("return",(null===(f=m.data)||void 0===f?void 0:f.url)||"");case 9:return e.abrupt("return","");case 10:case"end":return e.stop()}}),e)})))()},handleShare:function(){var t,e,n,o;Object(l.g)({items:[{action:"share",obj_no:null===(t=this.item)||void 0===t?void 0:t.id,obj_type:16}]});var r=location.host+this.localePath("/ai-audio/detail/".concat((null===(e=this.obj)||void 0===e||null===(e=e.timbre)||void 0===e?void 0:e.id)||(null===(n=this.obj)||void 0===n?void 0:n.id),"/share/").concat(null===(o=this.item)||void 0===o?void 0:o.id));Object(h.d)(r),this.$message.success(this.$t("CopiedURLToClipboard"))},formatTime:function(t){if(0===t)return"00:00";if(t<60&&t%1!=0&&(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return t.toFixed(1);var e=Math.floor(t/60),n=Math.floor(t%60),o=e.toString().padStart(2,"0"),r=n.toString().padStart(2,"0");return"".concat(o,":").concat(r)}}},y=_,w=(n(2921),n(0)),component=Object(w.a)(y,(function(){var t,e,n,o,r,l,c=this,d=c._self._c;return d("div",{staticClass:"audio-play-list-item",style:c.customStyle},[c._t("seeMore",(function(){return[d("span",{directives:[{name:"show",rawName:"v-show",value:c.showMoreList,expression:"showMoreList"}],staticClass:"see-more",on:{click:c.handleSeeMore}},[c._v("\n            "+c._s(c.$t("viewMore"))+"\n            "),d("i",{staticClass:"el-icon-d-arrow-right"})])]})),c._v(" "),c.showMore?d("el-popover",{ref:"myPopover",attrs:{placement:"bottom-end","popper-class":"water-fall-popover","append-to-body":!1,"visible-arrow":!1,"popper-options":{boundariesElement:"body"},width:"100",trigger:"click"}},[d("div",{staticClass:"pop-btns flex"},c._l(c.moreActions,(function(t){return d("button",{directives:[{name:"show",rawName:"v-show",value:"del"!==t.type||(c.isMine(c.obj)||c.deleteSure),expression:"action.type === 'del' ? isMine(obj) || deleteSure : true"}],key:t.type,on:{click:function(e){return e.preventDefault(),c.handleActions(t.type)}}},[d("span",{staticClass:"pop-btns-text"},[c._v(c._s(c.$t(t.label)))]),c._v(" "),d("span",{staticClass:"pop-btns-icon"},[d("i",{staticClass:"iconfont",class:t.icon})])])})),0),c._v(" "),d("div",{staticClass:"login-waterFall-btn-icon",attrs:{slot:"reference"},slot:"reference"},[d("i",{staticClass:"iconfont icon-more"})])]):c._e(),c._v(" "),c._t("custom_header",(function(){var t,e,n,o;return[d("el-tooltip",{attrs:{"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[d("div",{staticClass:"tooltip-txt",attrs:{slot:"content"},slot:"content"},[c._v("\n                "+c._s((null===(t=c.item)||void 0===t?void 0:t.txt)||(null===(e=c.item)||void 0===e?void 0:e.text)||c.$t("no_data"))+"\n            ")]),c._v(" "),d("div",{staticClass:"header ellipsis-two-lines"},[c._v("\n                "+c._s((null===(n=c.item)||void 0===n?void 0:n.txt)||(null===(o=c.item)||void 0===o?void 0:o.text)||c.$t("no_data"))+"\n            ")])])]}),{data:c.obj}),c._v(" "),c.showPlayer?d("div",{staticClass:"audio-player"},[d("div",{staticClass:"audio-player-left",on:{click:c.jumpToOtherUser}},[[null,void 0,""].includes(null===(t=c.obj)||void 0===t||null===(t=t.author)||void 0===t?void 0:t.head)?d("span",{staticClass:"name-avatar"},[c._v(" "+c._s(null===(o=c.obj)||void 0===o||null===(o=o.author)||void 0===o?void 0:o.name.slice(0,1)))]):d("img",{staticClass:"avatar",attrs:{src:null===(e=c.obj)||void 0===e||null===(e=e.author)||void 0===e?void 0:e.head,alt:null===(n=c.obj)||void 0===n||null===(n=n.author)||void 0===n?void 0:n.name}}),c._v(" "),d("span",{staticClass:"name"},[c._v(c._s(null===(r=c.obj)||void 0===r||null===(r=r.author)||void 0===r?void 0:r.name))])]),c._v(" "),d("div",{staticClass:"audio-player-right"},[d("AudioPlayer",c._b({attrs:{item:c.item,modelPlay:c.modelPlay,logParams2:{operation:"click_broadcast",behavior_info:"on_ai_audio_list",behavior_info_sub:null===(l=c.item)||void 0===l?void 0:l.id},playIconCustomStyle:c.playIconCustomStyle}},"AudioPlayer",c.$attrs,!1))],1)]):c._e(),c._v(" "),c._t("createIng")],2)}),[],!1,null,"0e309a01",null);e.a=component.exports},347:function(t,e,n){"use strict";n(9),n(7),n(11),n(12),n(8),n(4),n(6);var o=n(2),r=n(1);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={name:"HeadTop",components:{UserPopover:n(185).a},computed:c(c({},Object(r.c)("user",["isLoggedIn","companyStatus"])),Object(r.e)("user",["userInfo","cdnHost"])),methods:{goRoute:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],path=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",e=arguments.length>2?arguments[2]:void 0;if(this.isLoggedIn&&!t)this.$router.push(this.localePath(path));else if(t&&!this.isLoggedIn){var n="https://".concat(this.cdnHost,"/static/upload/20241128/d41378aa-7629-47b6-b0f1-f4eee435b932.png");this.$EventBus.$emit("openLoginDialog",{backGroundUrl:n||"",redirect:path,autoActive:!0}),e&&this.$logEvent("log_actions",{operation:"register_popup",behavior_info:e})}else this.$router.push(this.localePath(path))},openLang:function(){this.$EventBus.$emit("openLangDialog")}}},h=d,v=(n(2927),n(0)),component=Object(v.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"head-top w-full"},[e("div",{staticClass:"header-content flex justify-between items-center"},[e("div",{staticClass:"left-img",on:{click:function(e){return t.goRoute(!1)}}},[e("img",{staticClass:"logo",attrs:{src:n(477),alt:"Avatar",loading:"lazy"}})]),t._v(" "),e("div",{staticClass:"right flex items-center"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoggedIn,expression:"!isLoggedIn"}],staticClass:"tools-item lang flex justify-center items-center",attrs:{title:t.$t("Language")},on:{click:t.openLang}},[e("i",{staticClass:"iconfont icon-lang"})]),t._v(" "),e("div",{staticClass:"check-avatar",on:{click:function(e){return t.goRoute(!0,"/ai-headshot-creations","click_view_my_ai_profile")}}},[t._v("\n        "+t._s(t.$t("checkAvatar"))+"\n      ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoggedIn,expression:"!isLoggedIn"}],staticClass:"login-btn flex justify-center items-center"},[e("div",{staticClass:"btn1 flex items-center justify-center",on:{click:function(e){return t.goRoute(!0,"/","click_register")}}},[t._v("\n          "+t._s(t.$t("Register"))+"\n        ")]),t._v(" "),e("div",{staticClass:"btn flex items-center justify-center",on:{click:function(e){return t.goRoute(!0,"/","click_login")}}},[t._v("\n          "+t._s(t.$t("LogIn"))+"\n        ")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoggedIn,expression:"isLoggedIn"}],staticClass:"userCard"},[e("user-popover")],1)])])])}),[],!1,null,"c9ab2388",null);e.a=component.exports},348:function(t,e,n){"use strict";var o={name:"AvatarFrame"},r=(n(2928),n(0)),component=Object(r.a)(o,(function(){var t=this._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"homePage-container"},[t("div",{staticClass:"homePage_pre-container"},[this._t("default")],2)])])}),[],!1,null,"c41a5920",null);e.a=component.exports},498:function(t,e,n){"use strict";n(32),n(10),n(28),n(4),n(23),n(18),n(37);var o=n(357),r=(n(9),n(7),n(11),n(12),n(8),n(6),n(2)),l=(n(16),n(55)),c=n(13);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v={props:{tabActive:{type:Number,default:1}},data:function(){return{tabList:c.r,tabActItem:{label:this.$t("Explore"),text:"作品",value:1}}},mounted:function(){this.$isChinaSite&&(this.tabList=this.tabList.filter((function(t){return 9!==t.value})))},methods:{changeTab:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tabActItem=h({},t),this.$emit("onChange",h({},t))},getHref:function(t){var e=this.$route.params.keyword;return this.localePath("/search".concat(t.path,"/").concat(e))}}},m=v,f=(n(2730),n(0)),_=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tabs-box-list flex"},t._l(t.tabList,(function(n){return e("a",{key:n.value,staticClass:"item",class:t.tabActive===n.value&&"active",attrs:{href:t.getHref(n)},on:{click:function(e){return e.preventDefault(),t.changeTab(n)}}},[t._v("\n    "+t._s(t.$t(n.label))+"\n  ")])})),0)}),[],!1,null,"9a1b419c",null).exports,y={props:{text:{type:Object,default:function(){return{}}}},data:function(){return{nodataImg:n(398)}}},w=(n(2731),Object(f.a)(y,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"nodata-box"},[e("div",{staticClass:"no-img"},[e("el-image",{staticStyle:{width:"90px",height:"66px"},attrs:{src:t.nodataImg}})],1),t._v(" "),e("div",{staticClass:"no-text"},[e("span",[t._v(t._s(t.text.left||""))]),t._v(" "),t.text.word?e("span",{staticClass:"taget-word"},[t._v("“"+t._s(t.text.word||"")+"”")]):t._e(),t._v(" "),e("span",[t._v(t._s(t.text.right||""))])])])])}),[],!1,null,"04c45aa1",null).exports),C=n(51);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={components:{homeList:l.a},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=k(k({},this.pageObj),{},{batch:this.pageObj.page,window_code:"square:home:explore:recommend"});this.hsaLoading=!0,Object(C.k)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},I=(n(2732),Object(f.a)(O,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"656ae098",null).exports);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var j={components:{Tabs:_,homeList:l.a,NoSearchData:w,AnliList:I},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("Explore")+"，"+this.$t("searchNoRight")+this.$t("Explore")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.isReq=!1,this.hasMore=!0,this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,l=e.type,param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({obj_name:o?"":n.replace(/\-/g," "),obj_type:l,url:o},this.pageObj);this.hasMore&&(this.hsaLoading=!0,Object(C.a)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more})).catch((function(){t.hsaLoading=!1,t.isReq=!1})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)}}},T=j,L=(n(2733),Object(f.a)(T,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"54280984",null).exports);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P={components:{homeList:l.a},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=D(D({},this.pageObj),{},{batch:this.pageObj.page,window_code:"square:home:model:recommend"});this.hsaLoading=!0,Object(C.d)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},E=(n(2734),Object(f.a)(P,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"22846dc7",null).exports),A=(n(36),n(14),{data:function(){return{tagIndex:"hot",typeOption:[{name:"Hot",id:"hot",icon:"hot"},{name:"New",id:"new",icon:"new1"}]}},methods:{setIcon:function(){var t=this,e="hot";return this.typeOption.forEach((function(n){t.tagIndex==n.id&&(e=n.icon)})),e},handleCommand:function(t){this.tagIndex=t,this.$emit("onChange",t)}}}),R=(n(2735),Object(f.a)(A,(function(){var t=this,e=t._self._c;return e("div",[e("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[e("div",{staticClass:"el-dropdown-link"},["score"===t.tagIndex?e("div",[e("i",{staticClass:"iconfont icon-icon-relativity"}),t._v(" "),e("span",[t._v(t._s(t.$t("relevanceSearch")))])]):t._e(),t._v(" "),"score"!==t.tagIndex?e("div",[e("i",{class:"iconfont icon-".concat(t.setIcon())}),t._v(" "),e("span",[t._v(t._s(t.$t(t.tagIndex.charAt(0).toUpperCase()+t.tagIndex.slice(1))))])]):t._e(),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.typeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n.id}},[e("div",{staticClass:"el-dropdown-item"},["score"!==n.id?e("i",{staticClass:"iconfont iconfont-1",class:"icon-".concat(n.icon)}):t._e(),t._v(" "),"score"===n.id?e("i",{staticClass:"iconfont icon-icon-relativity",staticStyle:{"margin-right":"12px"}}):t._e(),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1)],1)}),[],!1,null,"398e7bef",null).exports),M=(n(43),{data:function(){return{typeIndex:"model",modelTypeSelect:[],baseModelSelect:[],modelTypes:c.J,baseModels:c.a}},computed:{lang:function(){return this.$i18n.locale}},methods:{onFilterReset:function(){this.isReq||(this.modelTypeSelect=[],this.baseModelSelect=[],this.$emit("onChange",{model:this.modelTypeSelect,base:this.baseModelSelect}))},onFilter:function(t,e){var n=this;this.isReq||(this.$logEvent("log_actions",{operation:"click_modeltype_filter_button_on_home"}),1==e?this.modelTypeSelect.includes(t)?this.modelTypeSelect.forEach((function(e,o){e==t&&n.modelTypeSelect.splice(o,1)})):this.modelTypeSelect.push(t):this.baseModelSelect.includes(t)?this.baseModelSelect.forEach((function(e,o){e==t&&n.baseModelSelect.splice(o,1)})):this.baseModelSelect.push(t),"recommend"==this.tagIndex&&(this.tagIndex="hot"),this.$emit("onChange",{model:this.modelTypeSelect,base:this.baseModelSelect}))}}}),N=(n(2736),Object(f.a)(M,(function(){var t=this,e=t._self._c;return e("div",["model"==t.typeIndex?e("el-popover",{attrs:{placement:"bottom","popper-class":"homeFilter",trigger:"hover"}},[e("div",{staticClass:"filterCnt"},[t.lang.includes("zh")?e("div",{staticClass:"filterTit"},[t._v("\n        "+t._s(t.$t("Model")+t.$t("Type"))+"\n      ")]):e("div",{staticClass:"filterTit"},[t._v(t._s(t.$t("Model")+" "+t.$t("Type")))]),t._v(" "),e("div",{staticClass:"filterList"},t._l(t.modelTypes,(function(n,o){return e("div",{key:o,staticClass:"filterItem",class:{AfilterItem:t.modelTypeSelect.includes(n.value)},on:{click:function(e){return t.onFilter(n.value,1)}}},[t.modelTypeSelect.includes(n.value)?e("i",{staticClass:"el-icon-check"}):t._e(),t._v(" "),e("span",[t._v(t._s(n.label))])])})),0),t._v(" "),e("div",{staticClass:"filterTit",staticStyle:{"margin-top":"16px"}},[t._v(t._s(t.$t("BaseModel")))]),t._v(" "),e("div",{staticClass:"filterList"},t._l(t.baseModels,(function(n,o){return e("div",{key:o,staticClass:"filterItem",class:{AfilterItem:t.baseModelSelect.includes(n)},on:{click:function(e){return t.onFilter(n,2)}}},[t.baseModelSelect.includes(n)?e("i",{staticClass:"el-icon-check"}):t._e(),t._v(" "),e("span",[t._v(t._s(n))])])})),0),t._v(" "),e("div",{staticClass:"filterReset graBorder",on:{click:t.onFilterReset}},[t._v("\n        "+t._s(t.$t("resetSelection"))+"\n      ")])]),t._v(" "),e("el-badge",{staticClass:"item",attrs:{slot:"reference",value:t.modelTypeSelect.length+t.baseModelSelect.length,hidden:t.modelTypeSelect.length+t.baseModelSelect.length==0},slot:"reference"},[e("div",{staticClass:"filterBox"},[e("div",[e("i",{staticClass:"iconfont icon-a-filterIcon"}),t._v(" "),e("span",[t._v(t._s(t.$t("Filter")))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})])])],1):t._e()],1)}),[],!1,null,"a0675d5a",null).exports);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var B={components:{Tabs:_,homeList:l.a,NoSearchData:w,AnliList:E,MySelect:R,MySelectModel:N},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot",base_models:[],model_types:[]},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("AIModel")+"，"+this.$t("searchNoRight")+this.$t("AIModel")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.formData.order_by="hot",this.formData.base_models=[],this.formData.model_types=[],this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,param=F(F({obj_name:o?"":n.replace(/\-/g," "),obj_type:r,url:o},this.pageObj),this.formData);this.hasMore?(this.hsaLoading=!0,Object(C.a)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))):this.isReq=!1}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},changModel:function(t){this.formData.base_models=t.base||[],this.formData.model_types=t.model||[],this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.isReq=!1,this.hasMore=!0,this.getList()}}},H=(n(2737),Object(f.a)(B,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelectModel",{staticStyle:{"margin-right":"10px"},on:{onChange:t.changModel}}),t._v(" "),e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"2a25638e",null).exports),z=(n(19),n(74)),V=n(5),W=n(1);function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Q={name:"TabBard",props:{dataList:{type:Array,default:function(){return[]}}},data:function(){return{replaceImageType:V.x,imgVip:n(162),tabList:[]}},computed:Y({},Object(W.c)("user",["isLoggedIn"])),watch:{dataList:{handler:function(t){this.tabList=t.map((function(t){return Y(Y({},t),{},{flowLoad:!1})}))},deep:!0,immediate:!0}},mounted:function(){window.addEventListener("scroll",Object(z.throttle)(this.lazyLoad,200))},methods:{lazyLoad:function(){var t=this,e=document.documentElement.scrollHeight,n=window.innerHeight;this.$nextTick((function(){t.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset,e-t.scrollTop-n<1.5*n&&t.dataList.length>0&&t.$emit("onLoad")}))},setCollectUp:function(t){if(this.isLoggedIn){var e={target_id:t.id||"",target_type:"tag"};t.flowLoad=!0,C.n(e).then((function(e){1e4===e.status.code&&(t.tag.is_collect=!0)})).finally((function(){t.flowLoad=!1})),this.$forceUpdate()}else this.$EventBus.$emit("openLoginDialog")},setCollectOff:function(t){var e={target_id:t.id||"",target_type:"tag"};t.flowLoad=!0,C.m(e).then((function(e){1e4===e.status.code&&(t.tag.is_collect=!1)})).finally((function(){t.flowLoad=!1})),this.$forceUpdate()},objStatNull:function(t,e){return((null==t?void 0:t.stat)||{})[e]||0},goTagDetail:function(t){this.$router.push(this.localePath({path:"/tagInfo/".concat(t.id)}))}}},X=(n(2738),Object(f.a)(Q,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"user-list"},t._l(t.tabList,(function(n,i){var o,r,l,c,d,h;return e("div",{key:i,staticClass:"uitem"},[e("div",{staticClass:"up-bard",on:{click:function(e){return t.goTagDetail(n)}}},[e("div",{staticClass:"bgimg"},[e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.replaceImageType(null===(o=n.tag)||void 0===o?void 0:o.cover,"low")}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),t._v(" "),e("div",{staticClass:"user-info"},[e("div",{staticClass:"user-head"},[e("div",{staticClass:"head-img"},[e("el-image",{staticStyle:{height:"70px",width:"70px"},attrs:{src:t.replaceImageType(null===(r=n.tag)||void 0===r?void 0:r.cover,"low")}},[e("div",{attrs:{slot:"error"},slot:"error"},[e("div",{staticClass:"head-err"},[t._v("\n                    "+t._s(null===(l=n.tag)||void 0===l?void 0:l.title.slice(0,1))+"\n                  ")])])])],1)]),t._v(" "),e("div",{staticClass:"user-name"},[e("span",[t._v(t._s(null===(c=n.tag)||void 0===c?void 0:c.title))])]),t._v(" "),e("div",{staticClass:"user-flow"},[e("div",{staticClass:"uf-item"},[e("p",{staticClass:"num"},[t._v(t._s(t.objStatNull(n,"num_of_artwork")))]),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(t.$t("Explore")))])]),t._v(" "),e("div",{staticClass:"uf-item"},[e("p",{staticClass:"num"},[t._v(t._s(t.objStatNull(n,"num_of_model")))]),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(t.$t("motivatingTitle1")))])]),t._v(" "),e("div",{staticClass:"uf-item"},[e("p",{staticClass:"num"},[t._v(t._s(t.objStatNull(n,"num_of_post")))]),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(t.$t("Posts")))])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!n.flowLoad,expression:"!e.flowLoad"}]},[null!==(d=n.tag)&&void 0!==d&&d.is_collect?t._e():e("div",{staticClass:"btn-bard no-follw",on:{click:function(e){return t.setCollectUp(n)}}},[e("span",[t._v(t._s(t.$t("Collect")))])]),t._v(" "),null!==(h=n.tag)&&void 0!==h&&h.is_collect?e("div",{staticClass:"btn-bard yes-follw",attrs:{"data-yesflow":t.$t("Collected"),"data-unflow":t.$t("cancelFavorite")},on:{click:function(e){return t.setCollectOff(n)}}}):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.flowLoad,expression:"e.flowLoad"},{name:"loading",rawName:"v-loading",value:n.flowLoad,expression:"e.flowLoad"}],staticClass:"btn-bard"})])})),0)])}),[],!1,null,"b1d22e22",null).exports);function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var K={components:{ListItem:X},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({obj_name:"",obj_type:6},this.pageObj);this.hsaLoading=!0,Object(C.h)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},Z=K;n(2739);function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var it={components:{Tabs:_,ListItem:X,NoSearchData:w,MySelect:R,AnliList:Object(f.a)(Z,(function(){var t=this,e=t._self._c;return e("div",[e("ListItem",{attrs:{dataList:t.listData},on:{onLoad:t.getList}}),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()],1)}),[],!1,null,"2cb463d0",null).exports},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("Tags")+"，"+this.$t("searchNoRight")+this.$t("Tags")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.formData.order_by="hot",this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,param=et(et({obj_name:o?"":n.replace(/\-/g," "),obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(C.a)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more})).catch((function(){t.hsaLoading=!1,t.isReq=!1})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()}}},at=(n(2740),Object(f.a)(it,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",[e("ListItem",{attrs:{dataList:t.listData},on:{onLoad:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"7173903a",null).exports);function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ot={name:"UserBard",props:{dataList:{type:Array,default:function(){return[]}}},data:function(){return{replaceImageType:V.x,imgVip:n(162),userList:[]}},watch:{dataList:{handler:function(t){this.userList=t.map((function(t){return nt(nt({},t),{},{flowLoad:!1})}))},deep:!0,immediate:!0}},computed:nt({},Object(W.c)("user",["isLoggedIn"])),mounted:function(){window.addEventListener("scroll",Object(z.throttle)(this.lazyLoad,200))},methods:{lazyLoad:function(){var t=this,e=document.documentElement.scrollHeight,n=window.innerHeight;this.$nextTick((function(){t.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset,e-t.scrollTop-n<1.5*n&&t.dataList.length>0&&t.$emit("onLoad")}))},setFollowUser:function(t){if(this.isLoggedIn){var e={follow_account_no:t.id||""};t.flowLoad=!0,C.o(e).then((function(e){1e4===e.status.code&&(t.author.is_follow=!0)})).finally((function(){t.flowLoad=!1})),this.$forceUpdate()}else this.$EventBus.$emit("openLoginDialog")},setCancelUser:function(t){var e={follow_account_no:t.id||""};t.flowLoad=!0,C.l(e).then((function(e){1e4===e.status.code&&(t.author.is_follow=!1)})).finally((function(){t.flowLoad=!1})),this.$forceUpdate()},goUserDetail:function(t){var path="/user/"+encodeURIComponent(t.author.id);window.open(path,"_blank")}}},lt=(n(2741),Object(f.a)(ot,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"user-list"},t._l(t.userList,(function(n,i){return e("div",{key:i,staticClass:"uitem"},[e("div",{staticClass:"up-bard",on:{click:function(e){return t.goUserDetail(n)}}},[e("div",{staticClass:"bgimg"},[e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.replaceImageType(n.cover,"low")}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),t._v(" "),e("div",{staticClass:"user-info"},[e("div",{staticClass:"user-head"},[e("div",{staticClass:"head-img"},[e("el-image",{staticStyle:{height:"70px",width:"70px"},attrs:{src:t.replaceImageType(n.author.head,"low")}},[e("div",{attrs:{slot:"error"},slot:"error"},[e("div",{staticClass:"head-err"},[t._v("\n                    "+t._s(n.author.name.slice(0,1))+"\n                  ")])])])],1)]),t._v(" "),e("div",{staticClass:"user-name"},[e("span",[t._v(t._s(n.author.name))]),t._v(" "),n.author.vip_type&&n.author.vip_type>=0?[e("el-image",{staticStyle:{height:"20px",width:"20px"},attrs:{src:t.imgVip}})]:t._e()],2),t._v(" "),e("div",{staticClass:"user-flow"},[e("div",{staticClass:"uf-item"},[e("p",{staticClass:"num"},[t._v(t._s(n.author.num_of_collect||0))]),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(t.$t("Collects")))])]),t._v(" "),e("div",{staticClass:"uf-item"},[e("p",{staticClass:"num"},[t._v(t._s(n.author.num_of_follow||0))]),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(t.$t("Following")))])]),t._v(" "),e("div",{staticClass:"uf-item"},[e("p",{staticClass:"num"},[t._v(t._s(n.author.follower_cnt||0))]),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(t.$t("Follower")))])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!n.flowLoad,expression:"!e.flowLoad"}]},[n.author.is_follow?t._e():e("div",{staticClass:"btn-bard no-follw",on:{click:function(e){return t.setFollowUser(n)}}},[e("span",[t._v(t._s(t.$t("Follows")))])]),t._v(" "),n.author.is_follow?e("div",{staticClass:"btn-bard yes-follw",attrs:{"data-yesflow":t.$t("Followed"),"data-unflow":t.$t("UnFollow")},on:{click:function(e){return t.setCancelUser(n)}}}):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.flowLoad,expression:"e.flowLoad"},{name:"loading",rawName:"v-loading",value:n.flowLoad,expression:"e.flowLoad"}],staticClass:"btn-bard"})])})),0)])}),[],!1,null,"454bc325",null).exports);function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var ut={components:{ListItem:lt},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({obj_name:"",obj_type:8},this.pageObj);this.hsaLoading=!0,Object(C.j)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},pt=ut;n(2742);function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gt={components:{Tabs:_,ListItem:lt,NoSearchData:w,MySelect:R,AnliList:Object(f.a)(pt,(function(){var t=this,e=t._self._c;return e("div",[e("ListItem",{attrs:{dataList:t.listData},on:{onLoad:t.getList}}),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()],1)}),[],!1,null,"43068a4f",null).exports},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("User")+"，"+this.$t("searchNoRight")+this.$t("User")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.formData.order_by="hot",this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,param=vt(vt({obj_name:o?"":n.replace(/\-/g," "),obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(C.a)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more})).catch((function(){t.hsaLoading=!1,t.isReq=!1})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()}}},mt=(n(2743),Object(f.a)(gt,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",[e("ListItem",{attrs:{dataList:t.listData},on:{onLoad:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"2805b222",null).exports);function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bt={components:{homeList:l.a},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=_t(_t({},this.pageObj),{},{batch:this.pageObj.page,window_code:"square:home:post:recommend",order_by:"recommend"});this.hsaLoading=!0,Object(C.e)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},yt=(n(2744),Object(f.a)(bt,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"ffd53f0e",null).exports);function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xt={components:{Tabs:_,homeList:l.a,NoSearchData:w,AnliList:yt,MySelect:R},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("Post")+"，"+this.$t("searchNoRight")+this.$t("Post")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.formData.order_by="hot",this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,param=Ct(Ct({obj_name:o?"":n.replace(/\-/g," "),obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(C.a)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more})).catch((function(){t.hsaLoading=!1,t.isReq=!1})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()}}},kt=(n(2745),Object(f.a)(xt,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"2a0459d2",null).exports);function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $t={components:{homeList:l.a},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=It(It({},this.pageObj),{},{order_by:"hot",comfy_ui_type:13});this.hsaLoading=!0,Object(C.b)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},jt=(n(2746),Object(f.a)($t,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"5924eddf",null).exports);function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var St={components:{Tabs:_,homeList:l.a,NoSearchData:w,MySelect:R,AnliList:jt},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("WorkFlow")+"，"+this.$t("searchNoRight")+this.$t("WorkFlow")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.formData.order_by="hot",this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,param=Lt(Lt({obj_name:o?"":n.replace(/\-/g," "),obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(C.a)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more})).catch((function(){t.hsaLoading=!1,t.isReq=!1})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()}}},Dt=(n(2747),Object(f.a)(St,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"8b239cb8",null).exports);function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var At={components:{homeList:l.a},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=Et(Et({},this.pageObj),{},{order_by:"hot",comfy_ui_type:14});this.hsaLoading=!0,Object(C.b)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},Rt=(n(2748),Object(f.a)(At,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"2a0cee91",null).exports);function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ut={components:{Tabs:_,homeList:l.a,NoSearchData:w,MySelect:R,AnliList:Rt},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("aiapply")+"，"+this.$t("searchNoRight")+this.$t("aiapply")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.formData.order_by="hot",this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,param=Nt(Nt({obj_name:o?"":n.replace(/\-/g," "),obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(C.a)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more})).catch((function(){t.hsaLoading=!1,t.isReq=!1})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()}}},Ft=(n(2749),Object(f.a)(Ut,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"8cd7bdd0",null).exports);function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var Ht={components:{homeList:l.a},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({order_by:"hot",batch:1,run_available:0},this.pageObj);this.hsaLoading=!0,Object(C.c)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},zt=Ht,qt=(n(2750),Object(f.a)(zt,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"62acfba2",null).exports);function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gt={components:{Tabs:_,homeList:l.a,NoSearchData:w,MySelect:R,AnliList:qt},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("Canvas")+"，"+this.$t("searchNoRight")+this.$t("Canvas")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.formData.order_by="hot",this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,param=Wt(Wt({obj_name:o?"":n.replace(/\-/g," "),obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(C.a)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more})).catch((function(){t.hsaLoading=!1,t.isReq=!1})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()}}},Yt=(n(2751),Object(f.a)(Gt,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1"},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"be08c62c",null).exports);function Qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var Xt={components:{homeList:l.a},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({order_by:"hot",batch:1,run_available:0},this.pageObj);this.hsaLoading=!0,Object(C.i)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},Jt=Xt,Kt=(n(2752),Object(f.a)(Jt,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1",isTrainLora:"",cols:4},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"7013aa1d",null).exports);function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ee={components:{Tabs:_,homeList:l.a,NoSearchData:w,MySelect:R,AnliList:Kt},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("digitalHuman")+"，"+this.$t("searchNoRight")+this.$t("digitalHuman")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.formData.order_by="hot",this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,param=te(te({obj_name:o?"":n.replace(/\-/g," "),obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(C.a)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more})).catch((function(){t.hsaLoading=!1,t.isReq=!1})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()}}},ie=(n(2753),Object(f.a)(ee,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("homeList",{attrs:{list:t.listData,container:"wraper1",isTrainLora:"",cols:4},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"b6b8daa2",null).exports),ae={name:"searchView",components:{TopMenu:o.a,WorksPlan:L,ModelPlan:H,TagslPlan:at,UserPlan:mt,PostWorksPlan:kt,WorkFlowPlan:Dt,SwtftAppPlan:Ft,DesignTmpPlan:Yt,TavernPlan:ie},data:function(){return{baseParam:{keyword:"",url:"",type:0}}},mounted:function(){var t=this;this.setParam(),this.$nextTick((function(){var e=t.baseParam.type;t.$refs["tabPlanRef".concat(e)].initParam()}))},head:function(){var t,e=this.$route.params,n=e.keyword,o=e.type;o=o||"";var r=c.r.find((function(t){return t.path.includes(o)}))||{},title=r.title,desc=r.desc;n=null===(t=n)||void 0===t?void 0:t.replace(/\-/g," "),title=this.$t(title,{name:n});var l=this.$t(desc,{name:n});return{title:title,meta:[{hid:"description",name:"description",content:l},{hid:"keywords",name:"keywords",content:n},{hid:"og:title",name:"og:title",content:title},{hid:"og:description",name:"og:description",content:l}]}},methods:{setParam:function(){var t,e=this.$route,n=e.query.url,o=e.params,r=o.keyword,l=o.type;l=(null===(t=c.r.find((function(t){return t.path.includes(l)})))||void 0===t?void 0:t.value)||1,this.baseParam.keyword=r,this.baseParam.url=n,this.baseParam.type=Number(l)},onSearch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.type,o=e.keyword,r=e.url;this.baseParam.keyword=o,this.baseParam.url=r,this.baseParam.type=Number(n),this.$nextTick((function(){t.$refs["tabPlanRef".concat(n)].initParam()}))},onChangeType:function(t){this.baseParam.type=Number(t),this.$refs.TopMenuRef.changeType(t)}}},se=ae,ne=(n(2754),Object(f.a)(se,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-page-box"},[e("TopMenu",{ref:"TopMenuRef",staticClass:"menu-box",on:{onSearch:t.onSearch}}),t._v(" "),e("div",[1===t.baseParam.type?e("WorksPlan",{ref:"tabPlanRef1",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}}):t._e(),t._v(" "),2===t.baseParam.type?e("ModelPlan",{ref:"tabPlanRef2",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}}):t._e(),t._v(" "),6===t.baseParam.type?e("TagslPlan",{ref:"tabPlanRef6",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}}):t._e(),t._v(" "),8===t.baseParam.type?e("UserPlan",{ref:"tabPlanRef8",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}}):t._e(),t._v(" "),7===t.baseParam.type?e("PostWorksPlan",{ref:"tabPlanRef7",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}}):t._e(),t._v(" "),13===t.baseParam.type?e("WorkFlowPlan",{ref:"tabPlanRef13",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}}):t._e(),t._v(" "),14===t.baseParam.type?e("SwtftAppPlan",{ref:"tabPlanRef14",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}}):t._e(),t._v(" "),11===t.baseParam.type?e("DesignTmpPlan",{ref:"tabPlanRef11",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}}):t._e(),t._v(" "),9===t.baseParam.type?e("TavernPlan",{ref:"tabPlanRef9",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}}):t._e()],1),t._v(" "),e("el-backtop",{attrs:{bottom:30,right:30}},[e("i",{staticClass:"el-icon-top"})])],1)}),[],!1,null,"55b35d28",null));e.a=ne.exports},518:function(t,e,n){"use strict";n(7),n(14),n(4),n(9),n(11),n(12),n(8);var o=n(15),r=n(2),l=(n(16),n(32),n(47),n(10),n(19),n(165),n(18),n(6),n(30)),c=n(1),d=n(35),h=n.n(d),v=n(64),m=n(79),f=n(5);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={props:{active:{type:String,default:""},useNewTag:{type:Boolean,default:!1},renderList:{type:Array,default:function(){return[]}},clickType:{type:Boolean,default:!0},sourceFrom:{type:String,default:""},ssrData:{type:Array,default:function(){return[]}}},components:{SwipeableList:v.a},data:function(){return{itemScrollLeft:null,itemScroll:null,selectItem:{},tagInfo:{categories:[],items:[]},replaceImageType:f.x}},computed:y(y(y({},Object(c.e)("app",["tagHot","tagNew"])),Object(c.c)("user",["accountData"])),{},{setActive:function(){return function(t){return t.value===this.active||t.value===this.selectItem.value}},sortedItems:function(){var t,e,n=this.renderList;if(n=null!==(t=n)&&void 0!==t&&t.length?n:this.ssrData,this.useNewTag&&this.accountData&&null!==(e=this.accountData)&&void 0!==e&&null!==(e=e.collect_tags)&&void 0!==e&&e.length){var r,l,c=h()((null===(r=this.accountData)||void 0===r?void 0:r.collect_tags)||[]);l=c.map((function(t){return n.find((function(e){return e.id===t}))})).filter((function(t){return!!t}));var d=n.filter((function(t){return!c.includes(t.id)}));n=[].concat(Object(o.a)(l),Object(o.a)(d))}if(this.accountData&&this.accountData.tags&&this.accountData.tags.length>0&&!this.useNewTag){var v=h()(this.accountData.tags);return v.reverse(),n.sort((function(a,b){var t=v.findIndex((function(t){return t.id===a.id})),e=v.findIndex((function(t){return t.id===b.id}));return-1!==t&&-1!==e?t-e:-1!==t?-1:-1!==e?1:0}))}return n},imgUrl:function(){return function(t){if(t)return Object(f.x)(t,"low")}}}),mounted:function(){},activated:function(){this.getItemScrollLeft()},methods:y(y({},Object(c.d)("app",["setTagHot","setTagNew"])),{},{getTags:function(){var t=this;if(this.useNewTag){Object(m.f)().then((function(e){var n;if(["10000",1e4].includes(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var o=e.data||{},r=o.categories,l=void 0===r?[]:r,c=o.items,d=void 0===c?[]:c;t.tagInfo.categories=Array.isArray(l)?l:[];var h=Array.isArray(d)?d:[];return t.tagInfo.items=(h||[]).map((function(t){return t.name=t.title||t.id,t.style={},t.style.url=t.cover||"",t})),t.tagInfo.items.length&&t.setTagNew(t.tagInfo.items),t.tagInfo.categories.length&&t.setTagHot(t.tagInfo.categories),e}})).finally((function(){}))}else this.tagHot.length>0?this.getItemScrollLeft():Object(l.l)().then((function(e){t.setTagHot(e.data),t.getItemScrollLeft()}))},getItemScrollLeft:function(){var t=this;this.itemScrollLeft=null,this.$nextTick((function(){t.$refs.listItem&&t.$refs.listItem.forEach((function(e){e.classList.contains("active")&&(t.itemScrollLeft=e.getBoundingClientRect().left)}))}))},selectTags:function(t){var e=this;this.active||!this.clickType?this.selectItem=t:this.selectItem.value===t.value?this.selectItem={}:this.selectItem=t,this.$logEvent("log_actions",{operation:"click_tags",behavior_info:(null==t?void 0:t.id)+"/"+(null==t?void 0:t.name),behavior_info_sub:this.sourceFrom}),this.$emit("changeTags",this.selectItem),this.$nextTick((function(){e.changeScroll(t)}))},changeScroll:function(t){var e=this;this.selectItem.value===t.value&&this.$refs.listItem.forEach((function(t,n){t.classList.contains("active")&&(e.itemScroll={value:t.getBoundingClientRect().left,index:n})}))},imgError:function(t){var e;if(null!=t&&null!==(e=t.style)&&void 0!==e&&e.url&&this.$refs[key]){var n=t.style.url,o="tagImg".concat(n);this.$refs[o].src=n,Object(f.C)("imgerr",n)}}})},C=(n(2330),n(0)),component=Object(C.a)(w,(function(){var t=this,e=t._self._c;return e("swipeable-list",{attrs:{scrollLeftnum:t.itemScrollLeft,scrollChange:t.itemScroll}},t._l(t.sortedItems.filter((function(t,i){return i<40})),(function(n,o){var r,l;return e("a",{key:o+"_tags",ref:"listItem",refInFor:!0,staticClass:"tags-item",class:{active:t.clickType?t.setActive(n):null},attrs:{target:"_blank"},on:{click:function(e){return e.preventDefault(),t.selectTags(n)}}},[n.style&&null!==(r=n.style)&&void 0!==r&&r.url||n.cover?e("img",{attrs:{alt:t.$t(n.name||n.title),loading:"lazy",width:"30",height:"30",src:t.replaceImageType((null===(l=n.style)||void 0===l?void 0:l.url)||n.cover,"low")}}):t._e(),t._v(" "),e("span",[t._v(t._s(t.$t(n.name||n.title)))])])})),0)}),[],!1,null,"766adba5",null);e.a=component.exports},531:function(t,e,n){"use strict";n(28);var o={name:"SpinLoading",props:{size:{type:Number,default:30}},components:{},computed:{mySize:function(){return this.size+"px"},styleSize:function(){return{fontSize:this.mySize,width:this.mySize,height:this.mySize}}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}},r=(n(2546),n(0)),component=Object(r.a)(o,(function(){var t=this._self._c;return t("div",{staticClass:"spin-loading"},[t("div",{staticClass:"loadBox"},[t("div",{staticClass:"loaderContantBox",style:this.styleSize})])])}),[],!1,null,"1aadcc7e",null);e.a=component.exports},532:function(t,e,n){"use strict";n(10),n(28);var o={name:"AiFilterCard",props:{source:{type:Object,default:function(){return{}}},order:{type:[String,Number],default:function(){return 1}},isLoading:{type:Boolean,default:!1}},computed:{showRefreshBtn:function(){var t;return![1,"1"].includes(this.order)&&!["",null,void 0].includes(null==this||null===(t=this.source)||void 0===t?void 0:t.url)&&!this.taskLoading},showRemoveBtn:function(){var t;return[1,"1"].includes(this.order)&&!["",null,void 0].includes(null==this||null===(t=this.source)||void 0===t?void 0:t.url)},taskLoading:function(){var t=this.source||{},e=t.status,n=void 0===e?0:e,o=t.process,r=void 0===o?100:o;return[1,2].includes(n)||[3].includes(n)&&r<100},computedPercentage:function(){var t=(this.source||{}).process;return void 0===t?0:t},processLoading:function(){return 1!==this.order&&(this.isLoading||this.taskLoading)}},data:function(){return{loading:!1}},methods:{handleReMake:function(){this.taskLoading||this.$emit("reMake",this.source)},handleRemove:function(){this.$emit("removeImage")},changeImage:function(){this.taskLoading||this.$emit("selectImage",this.source.url)}}},r=(n(2601),n(0)),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-fast-tools-ai-filter-card"},[t.showRefreshBtn?e("span",{staticClass:"refresh-btn",on:{click:function(e){return e.stopPropagation(),t.handleReMake.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-refresh-icon1 refresh-btn-icon"})]):t._e(),t._v(" "),t.showRemoveBtn?e("span",{staticClass:"refresh-btn",on:{click:function(e){return e.stopPropagation(),t.handleRemove.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-close refresh-btn-icon"})]):t._e(),t._v(" "),t.source&&t.source.url?e("img",{staticClass:"filter-card-result-img",style:{opacity:t.processLoading?.3:1},attrs:{src:t.source.url,alt:""},on:{click:function(e){return e.stopPropagation(),t.changeImage.apply(null,arguments)}}}):t._e(),t._v(" "),e("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.processLoading,expression:"processLoading"}],staticClass:"ai-filter-card-progress",attrs:{type:"circle",percentage:t.computedPercentage,width:65,"stroke-width":4,"define-back-color":"#000",color:"#fff"}})],1)}),[],!1,null,null,null);e.a=component.exports},544:function(t,e,n){"use strict";var o={name:"MorePopover",props:{showDelete:{type:Boolean,default:!1},showSave:{type:Boolean,default:!1}},components:{},computed:{},data:function(){return{}},methods:{handleAction:function(t){this.$emit(t),this.handleClose()},handleClose:function(){var t=this;try{this.$nextTick((function(){t.$refs.morePopover.doClose()}))}catch(t){}}}},r=(n(2941),n(0)),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"more-actions"},[e("el-popover",{ref:"morePopover",attrs:{placement:"bottom-end","popper-class":"ai-album-popover","visible-arrow":!1,width:"100",trigger:"click"}},[e("div",{staticClass:"pop-btns flex"},[t.showSave?e("button",{staticClass:"flex items-center",on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.handleAction("save"))}}},[e("i",{staticClass:"iconfont icon-icon-Download"}),t._v(" "+t._s(t.$t("Download"))+"\n      ")]):t._e(),t._v(" "),t.showDelete?e("button",{staticClass:"flex items-center",on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.handleAction("delete"))}}},[e("i",{staticClass:"iconfont icon-icon-delete"}),t._v(" "+t._s(t.$t("Delete"))+"\n      ")]):t._e()]),t._v(" "),e("button",{staticClass:"popover-reference",attrs:{slot:"reference"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}},slot:"reference"},[e("i",{staticClass:"iconfont icon-more"})])])],1)}),[],!1,null,"413fdf18",null);e.a=component.exports},993:function(t,e,n){t.exports={}},997:function(t,e,n){t.exports={}},998:function(t,e,n){t.exports={}},999:function(t,e,n){t.exports={}}}]);