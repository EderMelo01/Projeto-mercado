/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[40,12,14,15,20,69,70,75,76,81,87,93,103,111,112,114,132,141],{105:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return f}));var r=n(17);function o(data){return Object(r.a)({url:"/api/v1/model/detail",method:"post",data:data,customConfig:{isSilent:!0}})}function c(data){return Object(r.a)({url:"/api/v1/model/auditDetail",method:"post",data:data})}function l(data){return Object(r.a)({url:"/api/v1/report/art-model",method:"POST",data:data})}function d(data){return Object(r.a)({url:"/api/v1/resource/getDownloadLink",method:"POST",data:data,customConfig:{isSilent:!0}})}function h(data){return Object(r.a)({url:"/api/v1/model/ver-select",method:"POST",data:data})}function f(data){return Object(r.a)({url:"/api/v1/train-model/square/refer",method:"POST",data:data})}},109:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return m}));var r=n(17),path="/api/v1/creativity";function o(data){return Object(r.a)({url:path+"/square/template/detail",method:"post",data:data})}function c(data){return Object(r.a)({url:path+"/generate/apply",method:"post",data:data})}function l(data){return Object(r.a)({url:path+"/generate/history",method:"post",data:data})}function d(data){return Object(r.a)({url:"/api/v1/task/index/batch-delete",method:"post",data:data})}function h(data){return Object(r.a)({url:"/api/v1/task/save-personal",method:"post",data:data})}function f(data){return Object(r.a)({url:"/api/v1/creativity/square/template/detail",method:"post",data:data})}function m(data){return Object(r.a)({url:"/api/v1/rcpt/g/state",method:"post",data:data})}},126:function(e,t,n){"use strict";n.d(t,"j",(function(){return o})),n.d(t,"h",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return y})),n.d(t,"b",(function(){return w}));var r=n(17);function o(data){return Object(r.a)({url:"/api/v1/character/list",method:"POST",data:data})}function c(data){return Object(r.a)({url:"/api/v1/character/my",method:"POST",data:data})}function l(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/api/v1/character/category",method:"POST",data:data})}function d(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/api/v1/character/session/list",method:"POST",data:data})}function h(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/api/v1/character/session/delete",method:"POST",data:data})}function f(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/api/v1/character/create",method:"POST",data:data})}function m(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/api/v1/character/edit",method:"POST",data:data})}function v(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/api/v1/character/delete",method:"POST",data:data})}function _(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/api/v1/character/detail",method:"POST",data:data})}function y(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/api/v1/character/tool/recognize",method:"POST",data:data})}function w(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/api/v1/character/create/simple",method:"POST",data:data})}},128:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));n(16),n(10),n(18);var r=n(13);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null===r.B||void 0===r.B?void 0:r.B.sd35,n=null===r.B||void 0===r.B?void 0:r.B.flux,o=(null===r.B||void 0===r.B?void 0:r.B.sa)||[],c=["SDXL 1.0","SDXL 0.9","SDXL Turbo","SDXL 1.0 LCM","SDXL Lightning","Pony","SDXL Hyper"].includes(e)||(e||"").includes("SDXL"),l=["SD 1.5","SD 2.0","SD 1.4","SD 2.1 768","SD 2.1","SD 2.0 768","SD 1.5 LCM","Other"].includes(e),d=["SD 3"].includes(e),h=n.includes(e),f=o.includes(e),m=t.includes(e)||(e||"").includes("SD 3.5");return c?"sdxl":l||d?"sd":h?"flux":f?"sa":m?"SD 3.5":void 0}function c(e,t){for(var a=e,b=t;0!==b;){var n=[b,a%b];a=n[0],b=n[1]}return"".concat(e/a,":").concat(t/a)}var l=[{code:6,label:"1:2",icon:"icon-a-2_3",type:"vertical",sd:{standard:{width:512,height:1024}},sdxl:{standard:{width:768,height:1536}},flux:{standard:{width:512,height:1024},quality:{width:768,height:1536}}},{code:3,label:"9:16",icon:"icon-a-9_161",sd:{standard:{width:432,height:768}},sdxl:{standard:{width:810,height:1440}},flux:{standard:{width:592,height:1024},quality:{width:864,height:1536}},type:"vertical"},{code:1,label:"2:3",icon:"icon-a-2_3",sd:{standard:{width:512,height:768}},sdxl:{standard:{width:768,height:1152}},flux:{standard:{width:688,height:1024},quality:{width:1024,height:1536}},type:"vertical"},{code:7,label:"3:4",icon:"icon-a-2_3",sd:{standard:{width:576,height:768}},sdxl:{standard:{width:768,height:1024}},flux:{standard:{width:768,height:1024},quality:{width:1152,height:1536}},type:"vertical"},{code:8,label:"4:5",icon:"icon-a-2_3",sd:{standard:{width:612,height:765}},sdxl:{standard:{width:1152,height:1440}},flux:{standard:{width:768,height:960},quality:{width:1152,height:1440}},type:"vertical"},{code:2,label:"1:1",icon:"icon-a-1_11",sd:{standard:{width:768,height:768}},sdxl:{standard:{width:1024,height:1024}},flux:{standard:{width:1024,height:1024},quality:{width:1536,height:1536}}},{code:9,label:"5:4",icon:"icon-a-1_11",sd:{standard:{width:765,height:612}},sdxl:{standard:{width:1440,height:1152}},flux:{standard:{width:960,height:768},quality:{width:1440,height:1152}},type:"horizontal"},{code:4,label:"4:3",icon:"icon-a-1_11",sd:{standard:{width:768,height:576}},sdxl:{standard:{width:1024,height:768}},flux:{standard:{width:1024,height:768},quality:{width:1536,height:1152}},type:"horizontal"},{code:11,label:"3:2",icon:"icon-a-1_11",sd:{standard:{width:768,height:512}},sdxl:{standard:{width:1152,height:768}},flux:{standard:{width:1024,height:688},quality:{width:1536,height:1024}},type:"horizontal"},{code:12,label:"16:9",icon:"icon-a-1_11",sd:{standard:{width:768,height:432}},sdxl:{standard:{width:1440,height:810}},flux:{standard:{width:1024,height:592},quality:{width:1536,height:864}},type:"horizontal"},{code:13,label:"2:1",icon:"icon-a-1_11",sd:{standard:{width:1024,height:512}},sdxl:{standard:{width:1536,height:768}},flux:{standard:{width:1024,height:512},quality:{width:1536,height:768}},type:"horizontal"},{code:5,label:"newGenerate43",icon:"icon-icon-Custom",sd:{},sdxl:{},flux:{}}]},1926:function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return E}));var r=n(233),o=n(234),c=n(69),l=(n(7),n(10),n(19),n(4),n(18),n(9),n(85),n(101),n(75),n(36),n(14),n(11),n(12),n(8),n(23),n(49),n(50),n(48),n(2)),d=n(3),h=(n(20),n(165),n(3765),n(441),n(6),n(15)),f=(n(16),n(43),n(3766));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(){return Object(o.a)((function e(data){Object(r.a)(this,e),this.items=[],data&&(this.data=data)}),[{key:"applyWords",value:function(e){this.items=e.map((function(e){return f.a.fromWord(e)}))}},{key:"pushPrompt",value:function(text,data){var e=f.a.createEmpty(v({text:text},data));return this.items.push(e),e}},{key:"removePrompt",value:function(e){this.items=this.items.filter((function(t){return t!==e}))}},{key:"insertPromptOf",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.state.isDict&&(t=f.a.fromWord(v({},t.data.word)));var r=this.items.indexOf(e)+n;return this.items.splice(r,0,t),this.items=this.items.slice(),t}},{key:"insertPromptLast",value:function(e){return e.state.isDict&&(e=f.a.fromWord(v({},e.data.word))),this.items=[].concat(Object(h.a)(this.items),[e]),e}}])}(),y=n(3800),w=n(3689),x=n(3652);function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,a){if(e){if("string"==typeof e)return S(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function S(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={normal:"OPS_normal",style:"OPS_style",quality:"OPS_quality",command:"OPS_command",eg:"OPS_negative"},T=function(){return Object(o.a)((function e(data){Object(r.a)(this,e),this.groups=[],this.dictAdd=[],this.data=Object.assign({id:(new Date).getTime(),name:window.$nuxt.$t("untitled"),input:window.$nuxt.$t("Input"),output:window.$nuxt.$t("Output")},data)}),[{key:"id",get:function(){return this.data.id}},{key:"importPrompts",value:(n=Object(d.a)(regeneratorRuntime.mark((function e(text,t){var n,r,o,c,l,d,h,f,m,v,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w=function(e){var t={};e.forEach((function(e){var n=e.subType||"normal";e.isEg&&(n="eg"),n in t?t[n].push(e):t[n]=[e]}));var n={};for(var r in t)n[r]=new _({id:r,type:r,name:window.$nuxt.$t(j[r])||r,index:P[r]||0}),n[r].applyWords(t[r]);return n},e.next=3,Object(y.b)(text,O({zh2en:!0},t));case 3:for(d in n=e.sent,r=n.words,this.data.parser=t.parser,o={},c=[],r.forEach((function(e){e.group?(o[e.group]||(o[e.group]=[]),o[e.group].push(e)):c.push(e)})),l=[],o)f=o[d],m=w(f),v=null===(h=f[0])||void 0===h?void 0:h.lv,l.push({id:"group-".concat(d),groupLv:Number.parseFloat(v),lists:C(m)});c.length>0&&l.push({id:"group-noGoutp",lists:C(w(c))}),this.groups=l,this.translate();case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"exportPrompts",value:function(){return Object(y.c)(this.groups,{parser:this.data.parser||"stable-diffusion-webui"})}},{key:"reflowPrompts",value:(t=Object(d.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.exportPrompts(),t&&(this.dictAdd.push(t),n+=" , "+t),e.next=4,this.importPrompts(n,{parser:this.data.parser||"stable-diffusion-webui"});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"translate",value:(e=Object(d.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c,l,d,h,f,m,v,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=k(this.groups),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=44;break}o=r.value,c=k(o.lists),e.prev=7,c.s();case 9:if((l=c.n()).done){e.next=34;break}if("normal"===(d=l.value).data.type){e.next=13;break}return e.abrupt("continue",32);case 13:h=k(d.items),e.prev=14,h.s();case 16:if((f=h.n()).done){e.next=24;break}if(!(m=f.value).data.word.langText){e.next=20;break}return e.abrupt("continue",22);case 20:Object(w.a)(m.data.word.text)<5&&t.push(m);case 22:e.next=16;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(14),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=9;break;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(7),c.e(e.t1);case 39:return e.prev=39,c.f(),e.finish(39);case 42:e.next=4;break;case 44:e.next=49;break;case 46:e.prev=46,e.t2=e.catch(2),n.e(e.t2);case 49:return e.prev=49,n.f(),e.finish(49);case 52:return v=t.map((function(e){return e.data.word.text})),e.next=55,Object(x.a)(v);case 55:(_=e.sent)&&_.forEach((function(e,i){t[i].data.word.langText=e}));case 57:case"end":return e.stop()}}),e,this,[[2,46,49,52],[7,36,39,42],[14,26,29,32]])}))),function(){return e.apply(this,arguments)})},{key:"disableAll",value:function(){var e=!0;this.groups.forEach((function(t){t.lists.forEach((function(t){return t.items.forEach((function(t){t.data.disabled||(e=!1)}))}))})),this.groups.forEach((function(t){t.lists.forEach((function(t){return t.items.forEach((function(t){return t.data.disabled=!e}))}))}))}}]);var e,t,n}(),P={normal:6,style:7,quality:8,command:9,eg:10};function C(e){return Object.values(e).sort((function(a,b){return(a.data.index||0)-(b.data.index||0)}))}var M=null===("undefined"==typeof location?"undefined":Object(c.a)(location))?location.origin:"",E=function(){return Object(o.a)((function e(t){if(Object(r.a)(this,e),this.data={server:location.host.includes("seaart")?location.origin:M,enablePngExportFixed:!1,enablePngExportCopy:!1},null!=t&&t.initPrompts)this.works=t.initPrompts.map((function(e){return new T({initText:e})}));else{var n="mobile"===localStorage.getItem("visitFrom")?"black hair, Surrealism, 8k, super detail":"black hair, hair bobbles, wince, longeyelashes, solid circle eyes, fake animal ears, light smile, ear blush, fang, Surrealism, drop shadow, anaglyph, stereogram, tachi-e, pov, atmospheric perspective, 8k, super detail, ccurate, best quality";this.works=[new T({initText:n,parser:"stable-diffusion-webui"})]}}),[{key:"addWorkspace",value:function(){this.works.push(new T)}},{key:"removeWorkspace",value:function(e){this.works=this.works.filter((function(t){return t!==e}))}}])}()},1928:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(9),n(7),n(11),n(12),n(8),n(6);var r=n(2);n(16),n(4),n(50),n(48),n(112),n(28),n(49);function o(a){for(var e=[],t=0,g=0;g<a.length;g++){var n=a.charCodeAt(g);128>n?e[t++]=n:(2048>n?e[t++]=n>>6|192:(55296==(64512&n)&&g+1<a.length&&56320==(64512&a.charCodeAt(g+1))?(n=65536+((1023&n)<<10)+(1023&a.charCodeAt(++g)),e[t++]=n>>18|240,e[t++]=n>>12&63|128):e[t++]=n>>12|224,e[t++]=n>>6&63|128),e[t++]=63&n|128)}var r=0;for(t=0;t<e.length;t++)r+=e[t],r=c(r,"+-a^+6");return r=c(r,"+-3^+b+-f"),0>(r^=0)&&(r=2147483648+(2147483647&r)),(r%=1e6).toString()+"."+r.toString()}var c=function(a,b){for(var e=0;e<b.length-2;e+=3){var t=b.charAt(e+2);t="a"<=t?t.charCodeAt(0)-87:Number(t),t="+"==b.charAt(e+1)?a>>>t:a<<t,a="+"==b.charAt(e)?a+t:a^t}return a};function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={client:"gtx",from:"auto",to:"en",hl:"en",tld:"com"};function f(text,e){var t=d(d({},h),e),n={client:t.client,sl:t.from,tl:t.to,hl:t.hl,ie:"UTF-8",oe:"UTF-8",otf:"1",ssel:"0",tsel:"0",kc:"7",q:text,tk:o(text)},r=new URLSearchParams(n);return["at","bd","ex","ld","md","qca","rw","rm","ss","t"].forEach((function(e){return r.append("dt",e)})),"https://translate.google.".concat(t.tld,"/translate_a/single?").concat(r)}n(23),n(37);function m(body){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t={text:"",pronunciation:"",from:{language:{didYouMean:!1,iso:""},text:{autoCorrected:!1,value:"",didYouMean:!1}}};if(body[0].forEach((function(e){e[0]?t.text+=e[0]:e[2]&&(t.pronunciation+=e[2])})),body[2]===body[8][0][0]?t.from.language.iso=body[2]:(t.from.language.didYouMean=!0,t.from.language.iso=body[8][0][0]),body[7]&&body[7][0]){var n=body[7][0];n=(n=n.replace(/<b><i>/g,"[")).replace(/<\/i><\/b>/g,"]"),t.from.text.value=n,!0===body[7][5]?t.from.text.autoCorrected=!0:t.from.text.didYouMean=!0}return e&&(t.raw=body),t}var v=n(3);n(20);function _(e,t){return y.apply(this,arguments)}function y(){return(y=Object(v.a)(regeneratorRuntime.mark((function e(text,t){var n,r,body;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f(text,t),e.next=4,fetch("".concat("https://cors.api.seaart.dev/").concat(n));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Request failed");case 7:return e.next=9,r.json();case 9:return body=e.sent,e.abrupt("return",m(body,t.raw));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},193:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(17);function o(data){return Object(r.a)({url:"/api/v1/artwork/delete",method:"post",data:data})}function c(data){return Object(r.a)({url:"/api/v1/artwork/visibility",method:"post",data:data})}},1931:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(3),o=n(233),c=n(234),l=(n(9),n(85),n(101),n(16),n(75),n(10),n(36),n(14),n(4),n(23),n(49),n(18),n(50),n(71),n(48),n(20),n(570));function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,a){if(e){if("string"==typeof e)return h(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function h(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}var f,m=function(){return Object(c.a)((function e(){Object(o.a)(this,e),this.localPromptDefineMap={},this.notionPromptDefineMap={},this.isReady=null}),[{key:"ready",value:(h=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.isReady||t){e.next=2;break}return e.abrupt("return",this.isReady);case 2:return this.isReady=this.init(),e.abrupt("return",this.isReady);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"init",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=window.$nuxt.$cookies.get("lang")||localStorage.getItem("language")||"zhCN").startsWith("zh")&&(n="zhCN"),["zhCN","en","ar","ko","de","fr","ru","es","th","pt","ja"].includes(n)||(n="en"),r=null===(t=l.default.state)||void 0===t||null===(t=t.user)||void 0===t?void 0:t.cloudCdn){e.next=14;break}return e.next=8,fetch("/api/v1/url/short",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:location.href})});case 8:if(!(o=e.sent).ok){e.next=14;break}return e.next=12,o.json();case 12:d=e.sent,r=(null===(c=d.data)||void 0===c?void 0:c.cloud_cdn)||"image.cdn2.seaart.me";case 14:return e.next=16,fetch("https://".concat(r,"/prompt/prompt_").concat(n,".json"));case 16:return e.next=18,e.sent.json();case 18:return h=e.sent,this.localPromptDefineMap=h,e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"queryPromptsDefine",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(t){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready();case 2:n=[],r=d(t);try{for(r.s();!(o=r.n()).done;)c=o.value,(l=this.localPromptDefineMap[null==c?void 0:c.toLowerCase()])?n.push(l):n.push(null)}catch(e){r.e(e)}finally{r.f()}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getPromptsDefine",value:(e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready(null==t?void 0:t.isRead);case 2:if(null==t||!t.onlyMyNotion){e.next=6;break}return e.abrupt("return",this.notionPromptDefineMap);case 6:return e.abrupt("return",this.localPromptDefineMap);case 7:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e,t,n,h}();function v(e){return f||(f=new m(e)),f}},218:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return _}));var r=n(17),path="/api/v1/im/channel";function o(data){return Object(r.a)({url:path+"/create",method:"post",data:data})}function c(data){return Object(r.a)({url:path+"/edit",method:"post",data:data})}function l(data){return Object(r.a)({url:path+"/disband",method:"post",data:data})}function d(data){return Object(r.a)({url:path+"/joined/list",method:"post",data:data})}function h(data){return Object(r.a)({url:path+"/detail",method:"post",data:data})}function f(data){return Object(r.a)({url:path+"/members",method:"post",data:data})}function m(data){return Object(r.a)({url:path+"/quit",method:"post",data:data})}function v(data){return Object(r.a)({url:path+"/join",method:"post",data:data})}function _(data){return Object(r.a)({url:path+"/kick-out",method:"post",data:data})}},219:function(e,t,n){"use strict";var r=n(3),o=n(233),c=n(234),l=(n(20),n(4),n(29),function(){return Object(c.a)((function e(t,n){Object(o.a)(this,e),this.timeInterval=t,this.callback=n,this.timerId=null,this.queue=[],this.running=!1}),[{key:"checkStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.queue=e,this.running||this.start()}},{key:"poll",value:(e=Object(r.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=9;break}return e.next=3,this.shouldPoll();case 3:return e.sent||this.stop(),e.next=7,new Promise((function(e){t.timerId=window.setTimeout((function(){"function"==typeof t.callback&&t.callback(),e()}),t.timeInterval)}));case 7:e.next=0;break;case 9:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"shouldPoll",value:function(){return!!this.queue.length}},{key:"start",value:function(){this.running=!0,this.poll()}},{key:"stop",value:function(){this.running=!1,this.timerId&&window.clearTimeout(this.timerId),this.queue=[]}}]);var e}());t.a=l},221:function(e,t,n){"use strict";var r=n(46),o=n(720),c=n(568);r({target:"Array",proto:!0},{fill:o}),c("fill")},235:function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return m}));var r=n(17);function o(data){return Object(r.a)({url:"/api/v1/post/portfolio/add",method:"POST",data:data})}function c(data){return Object(r.a)({url:"/api/v1/post/video/add",method:"POST",data:data})}function l(data){return Object(r.a)({url:"api/v1/post/article/add",method:"POST",data:data})}function d(data){return Object(r.a)({url:"api/v1/post/article/edit",method:"POST",data:data})}function h(data){return Object(r.a)({url:"/api/v1/resource/pre-sign/get",method:"POST",data:data})}function f(data){return Object(r.a)({url:"/api/v1/resource/pre-sign/confirm",method:"POST",data:data})}function m(data){return Object(r.a)({url:"/api/v1/resource/pre-sign/confirmPart",method:"POST",data:data})}},26:function(e,t,n){"use strict";n.d(t,"q",(function(){return d})),n.d(t,"G",(function(){return h})),n.d(t,"I",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"H",(function(){return v})),n.d(t,"L",(function(){return _})),n.d(t,"r",(function(){return y})),n.d(t,"s",(function(){return w})),n.d(t,"m",(function(){return x})),n.d(t,"h",(function(){return k})),n.d(t,"B",(function(){return S})),n.d(t,"C",(function(){return I})),n.d(t,"D",(function(){return O})),n.d(t,"F",(function(){return j})),n.d(t,"J",(function(){return T})),n.d(t,"t",(function(){return P})),n.d(t,"v",(function(){return C})),n.d(t,"K",(function(){return M})),n.d(t,"b",(function(){return E})),n.d(t,"w",(function(){return A})),n.d(t,"x",(function(){return D})),n.d(t,"y",(function(){return $})),n.d(t,"R",(function(){return L})),n.d(t,"u",(function(){return R})),n.d(t,"f",(function(){return N})),n.d(t,"e",(function(){return B})),n.d(t,"S",(function(){return z})),n.d(t,"Q",(function(){return U})),n.d(t,"N",(function(){return F})),n.d(t,"O",(function(){return H})),n.d(t,"P",(function(){return W})),n.d(t,"M",(function(){return G})),n.d(t,"l",(function(){return V})),n.d(t,"E",(function(){return X})),n.d(t,"A",(function(){return J})),n.d(t,"z",(function(){return K})),n.d(t,"d",(function(){return Y})),n.d(t,"n",(function(){return Z})),n.d(t,"i",(function(){return Q})),n.d(t,"a",(function(){return ee})),n.d(t,"c",(function(){return te})),n.d(t,"p",(function(){return ne})),n.d(t,"k",(function(){return re})),n.d(t,"o",(function(){return oe})),n.d(t,"j",(function(){return ie}));var r=n(17),o="/api/v1/character",c="/api/v1/account/character",l="/api/v1";function d(data){return Object(r.a)({url:o+"/detail",method:"post",data:data})}function h(data){return Object(r.a)({url:"/api/v1/report/ai-character",method:"post",data:data})}function f(data){return Object(r.a)({url:c+"/setting/update",method:"post",data:data})}function m(data){return Object(r.a)({url:o+"/session/create",method:"post",data:data})}function v(data){return Object(r.a)({url:o+"/session/chat/reset",method:"post",data:data})}function _(data){return Object(r.a)({url:o+"/session/chat/start",method:"post",data:data})}function y(data){return Object(r.a)({url:o+"/session/list",method:"post",data:data})}function w(data){return Object(r.a)({url:o+"/session/message/list",method:"post",data:data})}function x(data){return Object(r.a)({url:o+"/session/message/edit",method:"post",data:data})}function k(data){return Object(r.a)({url:o+"/session/message/delete",method:"post",data:data})}function S(data){return Object(r.a)({url:o+"/quick-chat/start",method:"post",data:data})}function I(data){return Object(r.a)({url:o+"/quick-chat/task/progress",method:"post",data:data})}function O(data){return Object(r.a)({url:o+"/quick-chat/can-talk",method:"post",data:data})}function j(data){return Object(r.a)({url:l+"/square/timbre/comprehensive-rec",method:"post",data:data})}function T(data){return Object(r.a)({url:l+"/character/session/timbre/set",method:"post",data:data})}function P(data){return Object(r.a)({url:l+"/square/timbre/my",method:"post",data:data})}function C(data){return Object(r.a)({url:l+"/timbre/detail",method:"post",data:data})}function M(data){return Object(r.a)({url:l+"/timbre/tts",method:"post",data:data,customConfig:{isSilent:!0,timeout:6e4}})}function E(data){return Object(r.a)({url:l+"/timbre/train/progress",method:"post",data:data})}function A(data){return Object(r.a)({url:l+"/square/timbre/list",method:"post",data:data})}function D(data){return Object(r.a)({url:l+"/square/task/timbre/search",method:"post",data:data})}function $(data){return Object(r.a)({url:l+"/square/timbre/voice/list",method:"post",data:data})}function L(data){return Object(r.a)({url:l+"/timbre/train",method:"post",data:data})}function R(data){return Object(r.a)({url:l+"/resource/pre-sign/get",method:"POST",data:data})}function N(data){return Object(r.a)({url:l+"/resource/pre-sign/confirm",method:"POST",data:data,customConfig:{isSilent:!0}})}function B(data){return Object(r.a)({url:l+"/resource/pre-sign/confirmPart",method:"POST",data:data})}function z(data){return Object(r.a)({url:l+"/timbre/train/log",method:"POST",data:data})}function U(data){return Object(r.a)({url:l+"/timbre/edit",method:"POST",data:data})}function F(data){return Object(r.a)({url:l+"/timbre/delete",method:"POST",data:data})}function H(data){return Object(r.a)({url:l+"/timbre/voice/delete",method:"POST",data:data})}function W(data){return Object(r.a)({url:l+"/timbre/voice/get",method:"POST",data:data})}function G(data){return Object(r.a)({url:l+"/tool/text/detection",method:"POST",data:data})}function V(data){return Object(r.a)({url:l+"/dot/log",method:"POST",data:data})}function X(data){return Object(r.a)({url:o+"/reply/recommend",method:"post",data:data})}function J(data){return Object(r.a)({url:o+"/message/polish",method:"post",data:data})}function K(data){return Object(r.a)({url:l+"/datacard/my",method:"post",data:data})}function Y(data){return Object(r.a)({url:l+"/datacard/detail",method:"post",data:data,customConfig:{isSilent:!0}})}function Z(data){return Object(r.a)({url:l+"/datacard/edit",method:"post",data:data})}function Q(data){return Object(r.a)({url:l+"/datacard/delete",method:"post",data:data})}function ee(data){return Object(r.a)({url:l+"/datacard/create",method:"post",data:data})}function te(data){return Object(r.a)({url:o+"/session/bind-datacard",method:"post",data:data})}function ne(data){return Object(r.a)({url:"/api/v1/character/session/edit-datacard",method:"post",data:data})}function re(data){return Object(r.a)({url:o+"/session/remove-datacard",method:"post",data:data})}function oe(data){return Object(r.a)({url:o+"/session/edit",method:"post",data:data})}function ie(data){return Object(r.a)({url:o+"/session/delete",method:"post",data:data})}},274:function(e,t,n){"use strict";var r=n(46),o=n(111),c=n(220).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=c(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},281:function(e,t,n){"use strict";var r=n(3),o=n(233),c=n(234),l=(n(20),n(7),n(10),n(19),n(36),n(14),n(89),n(4),n(23),n(18),n(37),n(235)),d=n(5),h=n(42),f=n(78),m=n(25),v=function(){return Object(c.a)((function e(t){var n=this;Object(o.a)(this,e),this.startUpload=function(){var e=n.uploadIndex,t=n.fileChunk[e];if(t)return new Promise((function(r,o){var c=n.pre_signs[e];n.needRetryCN&&(c=c.replace("storage.googleapis.com","upload.api.seaart.me")),console.log("url",c.slice(0,30));var l=new XMLHttpRequest;l.timeout=6e4,l.open("PUT",c),l.ontimeout=function(){console.log("ontimeout retry"),l.abort()},l.setRequestHeader("Content-Type","application/octet-stream"),l.upload.onprogress=function(e){var t=e.loaded,r=e.total,o=Math.floor(t/r*1e4),c=n.fileChunk.length,l=Math.floor(1/c*1e4);n.updateProgress(l*o/1e4)},l.onreadystatechange=function(){if(console.log("xhr.onreadystatechange",l.readyState,l.status),4===l.readyState&&200===l.status){if(!n.fileChunk[e])return;n.fileChunk[e].uploadStatus=!0,console.log("onreadystatechange","success"),n.needRetryCN=!1,r()}else if(4===l.readyState&&200!==l.status){var t=!(location.href.includes("seaart.ai")&&"production".includes("production")),d=c.includes("storage.googleapis.com");t&&d&&!n.needRetryCN?(console.log("onreadystatechange","retry"),n.needRetryCN=!0,r(n.startUpload())):(console.log("onreadystatechange","retry fail"),n.needRetryCN=!1,n.uploading=!1,n.uploadingStatus="error",m.default.prototype.$message.error(Object(f.a)("uploadError")+" not slice; in onreadystatechange; xhr.readyState=4 & xhr.status !== 200"),o("error"))}},l.onerror=function(e){if(console.log("onerror",e),n.needRetryCN||n.reloadNum<1)n.needRetryCN=!1,console.log("onerror","fail"),Object(d.C)("uploadErr",{url:c,code:e.currentTarget.readyState,user:Object(h.o)(),createdTime:(new Date).getTime()}),o(e);else{console.log("onerror","retry"),n.reloadNum--;var t=!(location.href.includes("seaart.ai")&&"production".includes("production")),l=c.includes("storage.googleapis.com");t&&l&&(n.needRetryCN=!0,console.log("onerror","start retry")),r(n.startUpload())}},l.send(t.file.file)}))},this.chunkStartUpload=function(){return console.log("chunkStartUpload",n.reloadNum),new Promise((function(e,t){n.videoSliceUpload((function(n){"error"==n&&(console.log("chunkStartUpload finnallyRes"),t("error")),e(n)}))}))};var r=t.file,c=t.chunkSize,l=t.maxSize,v=t.reloadNum,_=t.category;this.category=_,this.uploadingStatus="init",this.reloadNum=v||3,this.fileChunk=[],this.progress=0,this.result={url:"",info:""},this.uploading=!1,this.file=r||null,this.pre_signs=[],this.chunkSize=c||20971520,this.maxSize=l||1073741824,this.uploadIndex=0,this.needRetryCN=!1}),[{key:"beforeUpload",value:(e=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var r,o,c,l,d,h,v,_,y,w,x,k,S,I=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(r=n||{}).chunkSize,c=r.maxSize,l=r.reloadNum,d=r.category,this.file=t||this.file,this.chunkSize=o||this.chunkSize,this.maxSize=c||this.maxSize,this.reloadNum=l||this.reloadNum,this.category=d||this.category,!((h=this.file.size)>this.maxSize)){e.next=10;break}return m.default.prototype.$message.error(Object(f.a)("uploadVideoError")+" "+Object(f.a)("HttpErrorCode_30003")),e.abrupt("return");case 10:if(!this.uploading){e.next=12;break}return e.abrupt("return");case 12:return this.uploading=!0,this.uploadingStatus="pending",e.next=16,this.getUploadConfig();case 16:if(v=e.sent,_=v.data,y=_.file_id,w=_.pre_signs,x=_.chunk_size,k=void 0===x?20971520:x,this.chunkSize=k,S=h/this.chunkSize>1,this.file.file_id=y,this.pre_signs=w,!S){e.next=30;break}return e.abrupt("return",new Promise((function(e,t){I.cutFile().then((function(e){return I.fileChunk=e,I.chunkStartUpload()})).then((function(n){var r=(n.data||{}).status;[0,"0"].includes(r)?(I.progress=100,I.uploadingStatus="complete",I.uploading=!1,e(I.result)):(I.uploadingStatus="fail",t(Object(f.a)("uploadVideoError")))})).catch((function(e){console.log("切片上传失败",e),t(e),I.uploading=!1,I.uploadingStatus="error"}))})));case 30:return this.fileChunk=[{uploadStatus:!1,file:{file:this.file},index:0,progress:0}],e.abrupt("return",new Promise((function(e,t){I.startUpload().then((function(){return I.chunkUploadCheck()})).then((function(e){var t=e.data,n=t.url,r=t.video_info,o=t.upload_obj_info;return I.result.url=n,I.result.info=54===I.category?o:r,I.confirmFileDone()})).then((function(n){var r=(n.data||{}).status;[0,"0"].includes(r)?(I.progress=100,I.uploadingStatus="complete",I.uploading=!1,e(I.result)):(m.default.prototype.$message.error(Object(f.a)("uploadError")+" resource/pre-sign/confirm api status not 0"),I.uploadingStatus="fail",t(Object(f.a)("uploadVideoError")))})).catch((function(e){t(e),I.uploading=!1,I.uploadingStatus="error"}))})));case 32:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"cutFile",value:function(){var e=this.chunkSize,t=this.file;return window.$nuxt.$worker.run((function(e,t){for(var n=[],r=0;r<e.size;)n.push({file:e.slice(r,r+t)}),r+=t;return n.map((function(e,t){return{uploadStatus:!1,file:e,index:t,progress:0}}))}),[t,e])}},{key:"getUploadConfig",value:function(){var e=this.file,t={file_size:e.size,file_name:e.name,content_type:"application/octet-stream",category:this.category};return Object(l.e)(t)}},{key:"videoSliceUpload",value:function(e){var t=this,n=this.fileChunk[this.uploadIndex],o=this.uploadIndex,c=new XMLHttpRequest;c.open("PUT",this.pre_signs[this.uploadIndex]),c.timeout=6e4,c.ontimeout=function(){this.uploadingStatus="fail",e("error"),console.log("ontimeout retry"),c.abort()},c.setRequestHeader("Content-Type","application/octet-stream"),c.onerror=function(n){console.log("onerror slice"),t.uploadingStatus="fail",e("error")},c.upload.onprogress=function(e){var n=e.loaded,r=e.total,o=Math.floor(n/r*1e4),c=t.fileChunk.length,l=Math.floor(1/c*1e4);t.updateProgress(l*o/1e4)},c.onreadystatechange=Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,d,h,v,_;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(4!==c.readyState||200!==c.status){n.next=28;break}if(t.reloadNum=3,t.fileChunk[o]){n.next=4;break}return n.abrupt("return");case 4:return t.fileChunk[o].uploadStatus=!0,n.next=7,t.chunkUploadCheck();case 7:if(r=n.sent,l=r.data,d=l.url,h=l.video_info,v=l.upload_obj_info,!(t.uploadIndex>=t.fileChunk.length-1)){n.next=24;break}return t.result.url=d,t.result.info=54===t.category?v:h,n.prev=12,n.next=15,t.confirmFileDone();case 15:_=n.sent,e(_),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(12),e("error");case 22:n.next=26;break;case 24:t.uploadIndex++,t.videoSliceUpload(e);case 26:n.next=29;break;case 28:4===c.readyState&&200!==c.status&&(console.log("onreadystatechange slice 4"),m.default.prototype.$message.error(Object(f.a)("uploadError")+" sliced; in onreadystatechange; xhr.readyState=4 & xhr.status !== 200"),t.uploadingStatus="fail",e("error"));case 29:case"end":return n.stop()}}),n,null,[[12,19]])}))),c.send(n.file.file)}},{key:"updateProgress",value:function(e){var t=this.fileChunk.filter((function(e){return e.uploadStatus})).length,n=this.fileChunk.length,r=parseFloat((t/n*1e4).toFixed(2));r+=e,this.progress=parseFloat((r/100).toFixed(2))}},{key:"chunkUploadCheck",value:function(){console.log("chunkUploadCheck");var e=this.uploadIndex,t=this.file.file_id;return Object(l.c)({file_id:t,pre_sign_url:this.pre_signs[e]})}},{key:"confirmFileDone",value:function(){var e=this.file.file_id,t={};return t.file_id=e,Object(l.d)(t)}}]);var e}();t.a=v},297:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),o=(n(9),n(7),n(32),n(10),n(19),n(11),n(12),n(8),n(4),n(6),n(22)),c=n(219),l=n(1);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={data:function(){return{successTaskList:[]}},watch:{list:{handler:function(e){var t,n=(e||[]).filter((function(e){return[1,2,"1","2"].includes(e.status)})).map((function(e){return e.id})),r=null===(t=this.top)||void 0===t||null===(t=t.taskInfo)||void 0===t?void 0:t.taskId;if(r){var o=(e||[]).find((function(e){return(null==e?void 0:e.id)===r}));this.$emit("updateTask",o)}n.length&&this.mockProcessTask()},immediate:!0,deep:!0},userInfo:{handler:function(e){var t=(e||{}).id;!(void 0===t?"":t)&&this.endPoll()},immediate:!0,deep:!0}},computed:h(h({},Object(l.c)("user",["isLoggedIn"])),Object(l.e)("user",["userInfo"])),beforeCreate:function(){var e=this;this.pollingMiddleware=new c.a(3e3,(function(){e.fetchTaskData()}))},beforeDestroy:function(){this.pollingMiddleware&&this.pollingMiddleware.stop(),this.pollingMiddleware=null},methods:{mockProcessTask:function(){var e=this.list.filter((function(e){return[1,2,"1","2"].includes(e.status)})).map((function(e){return e.id}));e.length?this.startPoll(e):this.endPoll()},startPoll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.pollingMiddleware&&this.pollingMiddleware.checkStart(e)},endPoll:function(){this.pollingMiddleware&&this.pollingMiddleware.stop()},fetchTaskData:function(){var e=this.list.filter((function(e){return[1,2,"1","2"].includes(e.status)})).map((function(e){return e.id}));e.length?this.getTaskInfo(e):this.endPoll()},getTaskInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};return n.task_ids=t,this.isLoggedIn||(n.g_mode=1),Object(o.a)(n).then((function(t){var n=(t&&t.data?t.data:{}).items;((void 0===n?[]:n)||[]).forEach((function(t){var n;[3,"3"].includes(null==t?void 0:t.status)&&e.$message.success(e.$t("youHaveCompleted")),e.updateData(t,t.task_id);var r=null===(n=e.top)||void 0===n||null===(n=n.taskInfo)||void 0===n?void 0:n.taskId;r&&(null==t?void 0:t.task_id)===r&&e.$emit("updateTask",t)}))}))},updateData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.list.forEach((function(r){if(n===r.id){if([4,"4"].includes(t.status)&&0===t.process)return e.$set(r,"status",t.status),e.$set(r,"status_desc",t.status_desc),void e.$set(r,"comfyui_current_node",(null==t?void 0:t.comfyui_current_node)||{});if(![0,100].includes(t.process)&&r.process>=t.process)return e.$set(r,"status",t.status),void e.$set(r,"status_desc",t.status_desc);e.$set(r,"pub_community",(null==t?void 0:t.pub_community)||0),e.$set(r,"comfyui_current_node",(null==t?void 0:t.comfyui_current_node)||{}),e.$set(r,"deduction_detail",t.deduction_detail),e.$set(r,"process",t.process>100?100:t.process),e.$set(r,"status",t.status),e.$set(r,"status_desc",t.status_desc),e.$set(r,"expiration_time",null==t?void 0:t.expiration_time),e.$set(r,"create_at",null==t?void 0:t.create_at),e.$set(r,"components",(t.img_uris||[]).filter((function(e){return null==e?void 0:e.url})))}}))}}}},2979:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},n.p="/dist/",n(n.s=131)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,c,l,d){var h,f="function"==typeof e?e.options:e;if(t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0),r&&(f.functional=!0),c&&(f._scopeId="data-v-"+c),l?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},f._ssrRegister=h):o&&(h=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),h)if(f.functional){f._injectStyles=h;var m=f.render;f.render=function(e,t){return h.call(t),m(e,t)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,h):[h]}return{exports:e,options:f}}n.d(t,"a",(function(){return r}))},131:function(e,t,n){"use strict";n.r(t);var r=n(28),o=n.n(r),c=n(37),l=n(4),d=n.n(l),h=n(5),f=n.n(h),m={props:{transformOrigin:{type:[Boolean,String],default:!1},offset:f.a.props.offset,boundariesPadding:f.a.props.boundariesPadding,popperOptions:f.a.props.popperOptions},data:f.a.data,methods:f.a.methods,beforeDestroy:f.a.beforeDestroy,deactivated:f.a.deactivated},v={name:"ElSubmenu",componentName:"ElSubmenu",mixins:[c.a,d.a,m],components:{ElCollapseTransition:o.a},props:{index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}},data:function(){return{popperJS:null,timeout:null,items:{},submenus:{},mouseInChild:!1}},watch:{opened:function(e){var t=this;this.isMenuPopup&&this.$nextTick((function(e){t.updatePopper()}))}},computed:{appendToBody:function(){return void 0===this.popperAppendToBody?this.isFirstLevel:this.popperAppendToBody},menuTransitionName:function(){return this.rootMenu.collapse?"el-zoom-in-left":"el-zoom-in-top"},opened:function(){return this.rootMenu.openedMenus.indexOf(this.index)>-1},active:function(){var e=!1,t=this.submenus,n=this.items;return Object.keys(n).forEach((function(t){n[t].active&&(e=!0)})),Object.keys(t).forEach((function(n){t[n].active&&(e=!0)})),e},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},isMenuPopup:function(){return this.rootMenu.isMenuPopup},titleStyle:function(){return"horizontal"!==this.mode?{color:this.textColor}:{borderBottomColor:this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent",color:this.active?this.activeTextColor:this.textColor}},isFirstLevel:function(){for(var e=!0,t=this.$parent;t&&t!==this.rootMenu;){if(["ElSubmenu","ElMenuItemGroup"].indexOf(t.$options.componentName)>-1){e=!1;break}t=t.$parent}return e}},methods:{handleCollapseToggle:function(e){e?this.initPopper():this.doDestroy()},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},handleClick:function(){var e=this.rootMenu,t=this.disabled;"hover"===e.menuTrigger&&"horizontal"===e.mode||e.collapse&&"vertical"===e.mode||t||this.dispatch("ElMenu","submenu-click",this)},handleMouseenter:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showTimeout;if("ActiveXObject"in window||"focus"!==e.type||e.relatedTarget){var r=this.rootMenu,o=this.disabled;"click"===r.menuTrigger&&"horizontal"===r.mode||!r.collapse&&"vertical"===r.mode||o||(this.dispatch("ElSubmenu","mouse-enter-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.rootMenu.openMenu(t.index,t.indexPath)}),n),this.appendToBody&&this.$parent.$el.dispatchEvent(new MouseEvent("mouseenter")))}},handleMouseleave:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.rootMenu;"click"===n.menuTrigger&&"horizontal"===n.mode||!n.collapse&&"vertical"===n.mode||(this.dispatch("ElSubmenu","mouse-leave-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){!e.mouseInChild&&e.rootMenu.closeMenu(e.index)}),this.hideTimeout),this.appendToBody&&t&&"ElSubmenu"===this.$parent.$options.name&&this.$parent.handleMouseleave(!0))},handleTitleMouseenter:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var title=this.$refs["submenu-title"];title&&(title.style.backgroundColor=this.rootMenu.hoverBackground)}},handleTitleMouseleave:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var title=this.$refs["submenu-title"];title&&(title.style.backgroundColor=this.rootMenu.backgroundColor||"")}},updatePlacement:function(){this.currentPlacement="horizontal"===this.mode&&this.isFirstLevel?"bottom-start":"right-start"},initPopper:function(){this.referenceElm=this.$el,this.popperElm=this.$refs.menu,this.updatePlacement()}},created:function(){var e=this;this.$on("toggle-collapse",this.handleCollapseToggle),this.$on("mouse-enter-child",(function(){e.mouseInChild=!0,clearTimeout(e.timeout)})),this.$on("mouse-leave-child",(function(){e.mouseInChild=!1,clearTimeout(e.timeout)}))},mounted:function(){this.parentMenu.addSubmenu(this),this.rootMenu.addSubmenu(this),this.initPopper()},beforeDestroy:function(){this.parentMenu.removeSubmenu(this),this.rootMenu.removeSubmenu(this)},render:function(e){var t=this,n=this.active,r=this.opened,o=this.paddingStyle,c=this.titleStyle,l=this.backgroundColor,d=this.rootMenu,h=this.currentPlacement,f=this.menuTransitionName,m=this.mode,v=this.disabled,_=this.popperClass,y=this.$slots,w=this.isFirstLevel,x=e("transition",{attrs:{name:f}},[e("div",{ref:"menu",directives:[{name:"show",value:r}],class:["el-menu--"+m,_],on:{mouseenter:function(e){return t.handleMouseenter(e,100)},mouseleave:function(){return t.handleMouseleave(!0)},focus:function(e){return t.handleMouseenter(e,100)}}},[e("ul",{attrs:{role:"menu"},class:["el-menu el-menu--popup","el-menu--popup-"+h],style:{backgroundColor:d.backgroundColor||""}},[y.default])])]),k=e("el-collapse-transition",[e("ul",{attrs:{role:"menu"},class:"el-menu el-menu--inline",directives:[{name:"show",value:r}],style:{backgroundColor:d.backgroundColor||""}},[y.default])]),S="horizontal"===d.mode&&w||"vertical"===d.mode&&!d.collapse?"el-icon-arrow-down":"el-icon-arrow-right";return e("li",{class:{"el-submenu":!0,"is-active":n,"is-opened":r,"is-disabled":v},attrs:{role:"menuitem","aria-haspopup":"true","aria-expanded":r},on:{mouseenter:this.handleMouseenter,mouseleave:function(){return t.handleMouseleave(!1)},focus:this.handleMouseenter}},[e("div",{class:"el-submenu__title",ref:"submenu-title",on:{click:this.handleClick,mouseenter:this.handleTitleMouseenter,mouseleave:this.handleTitleMouseleave},style:[o,c,{backgroundColor:l}]},[y.title,e("i",{class:["el-submenu__icon-arrow",S]})]),this.isMenuPopup?x:k])}},_=v,y=n(0),component=Object(y.a)(_,undefined,undefined,!1,null,null,null);component.options.__file="packages/menu/src/submenu.vue";var w=component.exports;w.install=function(e){e.component(w.name,w)};t.default=w},28:function(e,t){e.exports=n(3491)},37:function(e,t,n){"use strict";t.a={inject:["rootMenu"],computed:{indexPath:function(){for(var path=[this.index],e=this.$parent;"ElMenu"!==e.$options.componentName;)e.index&&path.unshift(e.index),e=e.$parent;return path},parentMenu:function(){for(var e=this.$parent;e&&-1===["ElMenu","ElSubmenu"].indexOf(e.$options.componentName);)e=e.$parent;return e},paddingStyle:function(){if("vertical"!==this.rootMenu.mode)return{};var e=20,t=this.$parent;if(this.rootMenu.collapse)e=20;else for(;t&&"ElMenu"!==t.$options.componentName;)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return{paddingLeft:e+"px"}}}}},4:function(e,t){e.exports=n(170)},5:function(e,t){e.exports=n(440)}})},2989:function(e,t,n){var r,o,c;!function(n){"use strict";var l=n.setTimeout,d=n.clearTimeout,h=n.XMLHttpRequest,f=n.XDomainRequest,m=n.ActiveXObject,v=n.EventSource,_=n.document,y=n.Promise,w=n.fetch,x=n.Response,k=n.TextDecoder,S=n.TextEncoder,I=n.AbortController;if("undefined"==typeof window||void 0===_||"readyState"in _||null!=_.body||(_.readyState="loading",window.addEventListener("load",(function(e){_.readyState="complete"}),!1)),null==h&&null!=m&&(h=function(){return new m("Microsoft.XMLHTTP")}),null==Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),Date.now||(Date.now=function(){return(new Date).getTime()}),null==I){var O=w;w=function(e,t){var n=t.signal;return O(e,{headers:t.headers,credentials:t.credentials,cache:t.cache}).then((function(e){var t=e.body.getReader();return n._reader=t,n._aborted&&n._reader.cancel(),{status:e.status,statusText:e.statusText,headers:e.headers,body:{getReader:function(){return t}}}}))},I=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){null!=this.signal._reader&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function j(){this.bitsNeeded=0,this.codePoint=0}j.prototype.decode=function(e){function t(e,t,n){if(1===n)return e>=128>>t&&e<<t<=2047;if(2===n)return e>=2048>>t&&e<<t<=55295||e>=57344>>t&&e<<t<=65535;if(3===n)return e>=65536>>t&&e<<t<=1114111;throw new Error}function n(e,t){if(6===e)return t>>6>15?3:t>31?2:1;if(12===e)return t>15?3:2;if(18===e)return 3;throw new Error}for(var r=65533,o="",c=this.bitsNeeded,l=this.codePoint,i=0;i<e.length;i+=1){var d=e[i];0!==c&&(d<128||d>191||!t(l<<6|63&d,c-6,n(c,l)))&&(c=0,l=r,o+=String.fromCharCode(l)),0===c?(d>=0&&d<=127?(c=0,l=d):d>=192&&d<=223?(c=6,l=31&d):d>=224&&d<=239?(c=12,l=15&d):d>=240&&d<=247?(c=18,l=7&d):(c=0,l=r),0===c||t(l,c,n(c,l))||(c=0,l=r)):(c-=6,l=l<<6|63&d),0===c&&(l<=65535?o+=String.fromCharCode(l):(o+=String.fromCharCode(55296+(l-65535-1>>10)),o+=String.fromCharCode(56320+(l-65535-1&1023))))}return this.bitsNeeded=c,this.codePoint=l,o};null!=k&&null!=S&&function(){try{return"test"===(new k).decode((new S).encode("test"),{stream:!0})}catch(e){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+e)}return!1}()||(k=j);var T=function(){};function P(e){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=T,this.onload=T,this.onerror=T,this.onreadystatechange=T,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=T}function C(e){return e.replace(/[A-Z]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)+32)}))}function M(e){for(var map=Object.create(null),t=e.split("\r\n"),i=0;i<t.length;i+=1){var n=t[i].split(": "),r=n.shift(),o=n.join(": ");map[C(r)]=o}this._map=map}function E(){}function A(e){this._headers=e}function D(){}function $(){this._listeners=Object.create(null)}function L(e){l((function(){throw e}),0)}function R(e){this.type=e,this.target=void 0}function N(e,t){R.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}function B(e,t){R.call(this,e),this.status=t.status,this.statusText=t.statusText,this.headers=t.headers}function z(e,t){R.call(this,e),this.error=t.error}P.prototype.open=function(e,t){this._abort(!0);var n=this,r=this._xhr,o=1,c=0;this._abort=function(e){0!==n._sendTimeout&&(d(n._sendTimeout),n._sendTimeout=0),1!==o&&2!==o&&3!==o||(o=4,r.onload=T,r.onerror=T,r.onabort=T,r.onprogress=T,r.onreadystatechange=T,r.abort(),0!==c&&(d(c),c=0),e||(n.readyState=4,n.onabort(null),n.onreadystatechange())),o=0};var f=function(){if(1===o){var e=0,t="",c=void 0;if("contentType"in r)e=200,t="OK",c=r.contentType;else try{e=r.status,t=r.statusText,c=r.getResponseHeader("Content-Type")}catch(n){e=0,t="",c=void 0}0!==e&&(o=2,n.readyState=2,n.status=e,n.statusText=t,n._contentType=c,n.onreadystatechange())}},m=function(){if(f(),2===o||3===o){o=3;var e="";try{e=r.responseText}catch(e){}n.readyState=3,n.responseText=e,n.onprogress()}},v=function(e,t){if(null!=t&&null!=t.preventDefault||(t={preventDefault:T}),m(),1===o||2===o||3===o){if(o=4,0!==c&&(d(c),c=0),n.readyState=4,"load"===e)n.onload(t);else if("error"===e)n.onerror(t);else{if("abort"!==e)throw new TypeError;n.onabort(t)}n.onreadystatechange()}},_=function(){c=l((function(){_()}),500),3===r.readyState&&m()};"onload"in r&&(r.onload=function(e){v("load",e)}),"onerror"in r&&(r.onerror=function(e){v("error",e)}),"onabort"in r&&(r.onabort=function(e){v("abort",e)}),"onprogress"in r&&(r.onprogress=m),"onreadystatechange"in r&&(r.onreadystatechange=function(e){!function(e){null!=r&&(4===r.readyState?"onload"in r&&"onerror"in r&&"onabort"in r||v(""===r.responseText?"error":"load",e):3===r.readyState?"onprogress"in r||m():2===r.readyState&&f())}(e)}),!("contentType"in r)&&"ontimeout"in h.prototype||(t+=(-1===t.indexOf("?")?"?":"&")+"padding=true"),r.open(e,t,!0),"readyState"in r&&(c=l((function(){_()}),0))},P.prototype.abort=function(){this._abort(!1)},P.prototype.getResponseHeader=function(e){return this._contentType},P.prototype.setRequestHeader=function(e,t){var n=this._xhr;"setRequestHeader"in n&&n.setRequestHeader(e,t)},P.prototype.getAllResponseHeaders=function(){return null!=this._xhr.getAllResponseHeaders&&this._xhr.getAllResponseHeaders()||""},P.prototype.send=function(){if("ontimeout"in h.prototype&&("sendAsBinary"in h.prototype||"mozAnon"in h.prototype)||null==_||null==_.readyState||"complete"===_.readyState){var e=this._xhr;"withCredentials"in e&&(e.withCredentials=this.withCredentials);try{e.send(void 0)}catch(e){throw e}}else{var t=this;t._sendTimeout=l((function(){t._sendTimeout=0,t.send()}),4)}},M.prototype.get=function(e){return this._map[C(e)]},null!=h&&null==h.HEADERS_RECEIVED&&(h.HEADERS_RECEIVED=2),E.prototype.open=function(e,t,n,r,o,c,l){e.open("GET",o);var d=0;for(var f in e.onprogress=function(){var t=e.responseText.slice(d);d+=t.length,n(t)},e.onerror=function(e){e.preventDefault(),r(new Error("NetworkError"))},e.onload=function(){r(null)},e.onabort=function(){r(null)},e.onreadystatechange=function(){if(e.readyState===h.HEADERS_RECEIVED){var n=e.status,r=e.statusText,o=e.getResponseHeader("Content-Type"),c=e.getAllResponseHeaders();t(n,r,o,new M(c))}},e.withCredentials=c,l)Object.prototype.hasOwnProperty.call(l,f)&&e.setRequestHeader(f,l[f]);return e.send(),e},A.prototype.get=function(e){return this._headers.get(e)},D.prototype.open=function(e,t,n,r,o,c,l){var d=null,h=new I,f=h.signal,m=new k;return w(o,{headers:l,credentials:c?"include":"same-origin",signal:f,cache:"no-store"}).then((function(e){return d=e.body.getReader(),t(e.status,e.statusText,e.headers.get("Content-Type"),new A(e.headers)),new y((function(e,t){var r=function(){d.read().then((function(t){if(t.done)e(void 0);else{var o=m.decode(t.value,{stream:!0});n(o),r()}})).catch((function(e){t(e)}))};r()}))})).catch((function(e){return"AbortError"===e.name?void 0:e})).then((function(e){r(e)})),{abort:function(){null!=d&&d.cancel(),h.abort()}}},$.prototype.dispatchEvent=function(e){e.target=this;var t=this._listeners[e.type];if(null!=t)for(var n=t.length,i=0;i<n;i+=1){var r=t[i];try{"function"==typeof r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){L(e)}}},$.prototype.addEventListener=function(e,t){e=String(e);var n=this._listeners,r=n[e];null==r&&(r=[],n[e]=r);for(var o=!1,i=0;i<r.length;i+=1)r[i]===t&&(o=!0);o||r.push(t)},$.prototype.removeEventListener=function(e,t){e=String(e);var n=this._listeners,r=n[e];if(null!=r){for(var o=[],i=0;i<r.length;i+=1)r[i]!==t&&o.push(r[i]);0===o.length?delete n[e]:n[e]=o}},N.prototype=Object.create(R.prototype),B.prototype=Object.create(R.prototype),z.prototype=Object.create(R.prototype);var U=-1,F=0,H=1,W=2,G=-1,V=0,X=1,J=2,K=3,Y=/^text\/event\-stream(;.*)?$/i,Z=function(e,t){var n=null==e?t:parseInt(e,10);return n!=n&&(n=t),Q(n)},Q=function(e){return Math.min(Math.max(e,1e3),18e6)},ee=function(e,t,n){try{"function"==typeof t&&t.call(e,n)}catch(e){L(e)}};function te(e,t){$.call(this),t=t||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,function(e,t,n){t=String(t);var r=Boolean(n.withCredentials),o=n.lastEventIdQueryParameterName||"lastEventId",c=Q(1e3),m=Z(n.heartbeatTimeout,45e3),v="",_=c,y=!1,w=0,x=n.headers||{},k=n.Transport,S=ne&&null==k?void 0:new P(null!=k?new k:null!=h&&"withCredentials"in h.prototype||null==f?new h:new f),I=null!=k&&"string"!=typeof k?new k:null==S?new D:new E,O=void 0,j=0,T=U,C="",M="",A="",$="",L=V,R=0,te=0,re=function(t,n,r,o){if(T===F)if(200===t&&null!=r&&Y.test(r)){T=H,y=Date.now(),_=c,e.readyState=H;var l=new B("open",{status:t,statusText:n,headers:o});e.dispatchEvent(l),ee(e,e.onopen,l)}else{var d="";200!==t?(n&&(n=n.replace(/\s+/g," ")),d="EventSource's response has a status "+t+" "+n+" that is not 200. Aborting the connection."):d="EventSource's response has a Content-Type specifying an unsupported type: "+(null==r?"-":r.replace(/\s+/g," "))+". Aborting the connection.",ae();l=new B("error",{status:t,statusText:n,headers:o});e.dispatchEvent(l),ee(e,e.onerror,l),console.error(d)}},oe=function(t){if(T===H){for(var n=-1,i=0;i<t.length;i+=1){(h=t.charCodeAt(i))!=="\n".charCodeAt(0)&&h!=="\r".charCodeAt(0)||(n=i)}var r=(-1!==n?$:"")+t.slice(0,n+1);$=(-1===n?$:"")+t.slice(n+1),""!==t&&(y=Date.now(),w+=t.length);for(var o=0;o<r.length;o+=1){var h=r.charCodeAt(o);if(L===G&&h==="\n".charCodeAt(0))L=V;else if(L===G&&(L=V),h==="\r".charCodeAt(0)||h==="\n".charCodeAt(0)){if(L!==V){L===X&&(te=o+1);var f=r.slice(R,te-1),x=r.slice(te+(te<o&&r.charCodeAt(te)===" ".charCodeAt(0)?1:0),o);"data"===f?(C+="\n",C+=x):"id"===f?M=x:"event"===f?A=x:"retry"===f?(c=Z(x,c),_=c):"heartbeatTimeout"===f&&(m=Z(x,m),0!==j&&(d(j),j=l((function(){se()}),m)))}if(L===V){if(""!==C){v=M,""===A&&(A="message");var k=new N(A,{data:C.slice(1),lastEventId:M});if(e.dispatchEvent(k),"open"===A?ee(e,e.onopen,k):"message"===A?ee(e,e.onmessage,k):"error"===A&&ee(e,e.onerror,k),T===W)return}C="",A=""}L=h==="\r".charCodeAt(0)?G:V}else L===V&&(R=o,L=X),L===X?h===":".charCodeAt(0)&&(te=o+1,L=J):L===J&&(L=K)}}},ie=function(t){if(T===H||T===F){T=U,0!==j&&(d(j),j=0),j=l((function(){se()}),_),_=Q(Math.min(16*c,2*_)),e.readyState=F;var n=new z("error",{error:t});e.dispatchEvent(n),ee(e,e.onerror,n),null!=t&&console.error(t)}},ae=function(){T=W,null!=O&&(O.abort(),O=void 0),0!==j&&(d(j),j=0),e.readyState=W},se=function(){if(j=0,T===U){y=!1,w=0,j=l((function(){se()}),m),T=F,C="",A="",M=v,$="",R=0,te=0,L=V;var n=t;if("data:"!==t.slice(0,5)&&"blob:"!==t.slice(0,5)&&""!==v){var i=t.indexOf("?");n=-1===i?t:t.slice(0,i+1)+t.slice(i+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,(function(p,e){return e===o?"":p})),n+=(-1===t.indexOf("?")?"?":"&")+o+"="+encodeURIComponent(v)}var r=e.withCredentials,c={Accept:"text/event-stream"},d=e.headers;if(null!=d)for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(c[h]=d[h]);try{O=I.open(S,re,oe,ie,n,r,c)}catch(e){throw ae(),e}}else if(y||null==O){var f=Math.max((y||Date.now())+m-Date.now(),1);y=!1,j=l((function(){se()}),f)}else ie(new Error("No activity within "+m+" milliseconds. "+(T===F?"No response received.":w+" chars received.")+" Reconnecting.")),null!=O&&(O.abort(),O=void 0)};e.url=t,e.readyState=F,e.withCredentials=r,e.headers=x,e._close=ae,se()}(this,e,t)}var ne=null!=w&&null!=x&&"body"in x.prototype;te.prototype=Object.create($.prototype),te.prototype.CONNECTING=F,te.prototype.OPEN=H,te.prototype.CLOSED=W,te.prototype.close=function(){this._close()},te.CONNECTING=F,te.OPEN=H,te.CLOSED=W,te.prototype.withCredentials=void 0;var re=v;null==h||null!=v&&"withCredentials"in v.prototype||(re=te),function(n){if("object"==typeof e.exports){var l=n(t);void 0!==l&&(e.exports=l)}else o=[t],void 0===(c="function"==typeof(r=n)?r.apply(t,o):r)||(e.exports=c)}((function(e){e.EventSourcePolyfill=te,e.NativeEventSource=v,e.EventSource=re}))}("undefined"==typeof globalThis?"undefined"!=typeof window?window:"undefined"!=typeof self?self:this:globalThis)},3024:function(e,t,n){"use strict";var r=n(3),o=(n(4),n(20),{data:function(){return{imgCanvas:null,maskCanvas:null,maskCtx:null,imgCtx:null,maskImageSourceUrl:""}},methods:{handleMixGenerateMask:function(e,t){var n=arguments,o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l,d,h,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=n.length>2&&void 0!==n[2]?n[2]:"",l=n.length>3?n[3]:void 0,d=document.createElement("canvas"),h=document.createElement("canvas"),d.width=e,d.height=t,h.width=e,h.height=t,o.imgCanvas=d,o.maskCanvas=h,d.id="imageCanvas",h.id="maskCanvas",o.imgCtx=d.getContext("2d",{willReadFrequently:!0}),o.maskCtx=h.getContext("2d",{willReadFrequently:!0}),o.imgCtx.clearRect(0,0,o.imgCanvas.width,o.imgCanvas.height),o.maskCtx.clearRect(0,0,o.maskCanvas.width,o.maskCanvas.height),r.next=18,o.loadImage(c);case 18:f=r.sent,o.imgCtx.drawImage(f,0,0,e,t),o.maskCtx.drawImage(l,0,0,e,t),o.handleSaveMask(e,t);case 22:case"end":return r.stop()}}),r)})))()},handleSaveMask:function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!0}),o=document.createElement("canvas"),c=o.getContext("2d",{willReadFrequently:!0});n.width=e,n.height=t,o.width=e,o.height=t,c.clearRect(0,0,n.width,n.height),c.drawImage(this.imgCanvas,0,0,this.maskCanvas.width,this.maskCanvas.height,0,0,n.width,n.height),r.clearRect(0,0,n.width,n.height),r.drawImage(this.maskCanvas,0,0,this.maskCanvas.width,this.maskCanvas.height,0,0,n.width,n.height);for(var l=r.getImageData(0,0,n.width,n.height),i=0;i<l.data.length;i+=4)255==l.data[i+3]?l.data[i+3]=0:l.data[i+3]=255,l.data[i]=0,l.data[i+1]=0,l.data[i+2]=0;r.globalCompositeOperation="source-over",r.putImageData(l,0,0),c.globalCompositeOperation="destination-in",c.drawImage(n,0,0);var d=o.toDataURL();this.maskImageSourceUrl=d},loadImage:function(e){return new Promise((function(t,n){var image=new Image;image.onload=function(){t(image)},image.setAttribute("crossOrigin","anonymous"),image.src=e}))}}});t.a=o},3034:function(e,t,n){"use strict";function r(){document.body.addEventListener("mousedown",o)}function o(e){}n.d(t,"a",(function(){return r}))},3036:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(15),o=n(31),c=n(3),l=(n(20),n(32),n(19),n(14),n(4),n(441),n(50),n(6),n(48),n(3766)),d=n(1931);function h(e,t){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(regeneratorRuntime.mark((function e(t,n){var c,h,f,m,v,_,y,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w=function(e){return e.map((function(e){var t=l.a.fromWord(e);return t.state.isDict=!0,t}))},c=Object(d.a)(),e.next=4,c.getPromptsDefine({onlyMyNotion:t,isRead:n});case 4:h=e.sent,f={},m={"质量":"OPS_quality","绘画":"OPS_painting","画面效果":"OPS_picture_effect","容貌":"OPS_appearance","构图":"OPS_composition","命令":"OPS_command"},v=regeneratorRuntime.mark((function e(){var t,n,c,l,d,v,y,w,x,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h[_],n=t.dir,!t.isAlias){e.next=4;break}return e.abrupt("return",0);case 4:if(!n){e.next=14;break}if("command"!=t.subType){e.next=9;break}return e.abrupt("return",0);case 9:c=[{text:t.text,langText:t.lang,subType:t.subType,desc:t.desc}];case 10:l=n.split("/"),d=Object(o.a)(l,2),v=d[0],y=d[1],f[v]||(f[v]={name:v,children:[],words:[],langKey:m[v]||""}),y?((x=f[v].children.find((function(e){return e.name===y})))||(x={name:y,children:[],words:[],langKey:t.t},f[v].children.push(x)),(w=x.words).push.apply(w,Object(r.a)(c))):(k=f[v].words).push.apply(k,Object(r.a)(c));case 14:case"end":return e.stop()}}),e)})),e.t0=regeneratorRuntime.keys(h);case 9:if((e.t1=e.t0()).done){e.next=17;break}return _=e.t1.value,e.delegateYield(v(),"t2",12);case 12:if(0!==e.t2){e.next=15;break}return e.abrupt("continue",9);case 15:e.next=9;break;case 17:return(y=Object.values(f)).forEach((function(e){e.words=w(e.words),e.children.forEach((function(e){e.words=w(e.words)}))})),e.abrupt("return",y);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},3044:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));n(9),n(11),n(12);var r=n(15),o=n(69),c=n(3),l=n(2),d=(n(20),n(7),n(32),n(47),n(10),n(19),n(36),n(43),n(14),n(28),n(89),n(8),n(4),n(274),n(23),n(18),n(37),n(110),n(6),n(29),n(42)),h=n(1),f=n(22),m=n(218),v=n(53),_=n(40),y=n(38),w=n(13),x=n(24),k=n(30);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O={textToImage:1,imageToImage:9,conditionToImage:10,extraUpscale:6,descriptors:8,preview:12,expansion:13,characterRepair:25},j={0:"textToImage",1:"textToImage",2:"imageToImage",3:"imageToImage",6:"extraUpscale",8:"descriptors",9:"imageToImage",10:"promptStudio",12:"preview",13:"expansion",25:"characterRepair"},T={normal:1,sdxl:5,studio:7},P={1:"normal",5:"sdxl",7:"studio",11:"studio"},C={data:function(){return{action:1,isShowPopup:!1,menuIndex:"textToImage",handleType:"SET",channelId:"PRIVATE",channelInfo:{name:"PRIVATE",num:0},menuKey:["animGen","imageToImage","conditionToImage","extraUpscale","descriptors","preview","promptStudio","expansion","faceSwap","characterRepair"],config:{task:{},textToImage:{},imageToImage:{},conditionToImage:{},extraUpscale:{},faceSwap:{},descriptors:{},preview:{},promptStudio:{},expansion:{},SIMPLE:{},animGen:{},characterRepair:{}},randomPrompt:"",isFirstOpen:!0,defaultModule:"canny",UPLOAD:new y.a({type:2}),creativeMode:"normal",studioSdList:w.e,studioSdxlList:w.f,studioFluxList:w.g,readOff:!0,paymentInfoDone:!1,userInfoDone:!1,isNoLogin:!1,isHistory:!1,fluxModelId:w.h,currentGenerateMode:1}},mounted:function(){this.init()},computed:I(I(I(I(I({},Object(h.c)("creation",["taskBaseModels","animationLoraRecommends","taskModules","taskUnits","taskSdxlUnits","taskModels","sd_xl_base_model","image_mode","lab_base_model","lab_ctr_units","lab_style_enhancement_tag","default_flux"])),Object(h.c)("user",["accountSettingsData","userInfo","isCompanyAccount"])),Object(h.e)("payment",["paymentInfo"])),Object(h.e)("user",["userInfo","token"])),{},{showNewGenerateGuide:function(){var e;return this.userInfo&&(null==this||null===(e=this.userInfo)||void 0===e?void 0:e.show_task_v2_guide)},serverCurrentGenerateMode:function(){var e;return"v2"===(null===(e=this.userInfo)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.task_flow_version)?2:1},studioSizeList:function(){var e=this.config[this.menuIndex].base_model_type||"",t=this.getCurrentModelType(e);return this.isStudioFlux||"SA"===t?this.studioFluxList:"SD"===t?this.studioSdList:this.studioSdxlList},isVip:function(){var e,t;return(null===(e=this.paymentInfo)||void 0===e?void 0:e.activeState)||(null===(t=this.paymentInfo)||void 0===t?void 0:t.liteActiveState)||this.isCompanyAccount},isOnlyVipLite:function(){var e,t;return!(null!==(e=this.paymentInfo)&&void 0!==e&&e.activeState)&&!this.isCompanyAccount&&(null===(t=this.paymentInfo)||void 0===t?void 0:t.liteActiveState)},showPrompt:function(){return["textToImage","imageToImage","conditionToImage","expansion"].includes(this.menuIndex)},showHandle:function(){return!["task","promptStudio","SIMPLE"].includes(this.menuIndex)},isStudioMode:function(){var e;return["textToImage","imageToImage","conditionToImage"].includes(this.menuIndex)&&this.checkIsStudioMode(null===(e=this.config[this.menuIndex])||void 0===e?void 0:e.category)},isStudioSD35Mode:function(){var e=this.config[this.menuIndex].base_model_type||"",t=this.getCurrentModelType(e);return["textToImage"].includes(this.menuIndex)&&"SD 3.5"===t},isStudioFlux:function(){var e=this.fluxModelId,t=this.config[this.menuIndex]||{},n=t.art_model_no,r=void 0===n?"":n,o=t.category,c=t.base_model_type,l=((null===w.B||void 0===w.B?void 0:w.B.sa)||[]).includes(c);return(r===e||l||c.includes("Flux"))&&["textToImage"].includes(this.menuIndex)&&this.checkIsStudioMode(o)},isShowStyleFidelity:function(){var e=this,t=this.getConfigCategory(),n=(["5",5,"sdxl","SDXL"].includes(t)?this.taskSdxlUnits:this.taskUnits).find((function(t){var n;return(null===(n=e.config[e.menuIndex].controlnet_units)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.type)==t.type}))||{};return null==n?void 0:n.has_style_fidelity},isDefaultNewGenerateUser:function(){var e;return"v2_b"===(null==this||null===(e=this.userInfo)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.task_flow_gt)}}),provide:function(){return{top:this}},watch:{paymentInfo:{handler:function(e){var t;null!==(t=Object.keys(e))&&void 0!==t&&t.length&&(this.paymentInfoDone=!0,this.changeSpeedType())},deep:!0,immediate:!0},userInfo:{handler:function(e){var t;if(null!==(t=Object.keys(e))&&void 0!==t&&t.length){this.userInfoDone=!0,this.changeSpeedType();var n=e.settings,r=(void 0===n?{}:n).insight;this.readOff=1===r}},deep:!0,immediate:!0},isShowPopup:{handler:function(e){try{document.body.style.overflow=e?"hidden":""}catch(e){document.body.style.overflow=""}},deep:!0,immediate:!0},menuIndex:function(e){e&&this.setStoreMenuIndex(e)},creativeMode:{handler:function(e,t){var n,r=null===(n=this.config[this.menuIndex])||void 0===n?void 0:n.category;r=P[r]||"","textToImage"===this.menuIndex&&e!==r&&(this.creativeMode=r)},immediate:!0},"$i18n.locale":function(e){this.initPromptLang()}},methods:I(I(I({},Object(h.b)("creation",["setStoreMenuIndex"])),Object(h.b)("user",["recordCurrentGenerateModeVersion"])),{},{initPromptLang:function(){var e=this;this.$nextTick((function(){var t;e.getRandomPrompt(),null===(t=e.$refs.simpleGenerate)||void 0===t||t.changeModel(void 0,!0)}))},init:function(){this.currentGenerateMode=localStorage.getItem("generateMode"),this.$EventBus.$off("openGenerate"),this.$EventBus.$on("openGenerate",this.handleOpenGenerate),this.resetConfig(!0)},handleOpenGenerate:function(e){var t,n=e.action,data=e.data,r=e.recordCurrentGenerateModeVersion,o=void 0!==r&&r;this.getRandomPrompt(),o&&this.recordCurrentGenerateModeVersion("2");var c="/studio"===this.$route.path?"studio":5===data.category?"sdxl":"normal";data&&null!=data&&data.source&&((null===w.B||void 0===w.B?void 0:w.B.sd3)||[]).includes(null==data||null===(t=data.source)||void 0===t?void 0:t.base_model)&&(this.currentGenerateMode=1,this.recordCurrentGenerateModeVersion("1"),localStorage.setItem("generateMode","1"));var l={action:n,data:data&&data.source||data};l.creativeMode=c,this.show(l)},setTextToImageConfig:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$set(this.config.textToImage,e,t),"prompt"===e&&this.setDefaultMeta({prompt:t})},getRandomPrompt:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(_.getRandomPrompts)();case 3:n=t.sent,r=n.data.local,e.randomPrompt=r,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.randomPrompt="";case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleSwitchMenu:function(e){this.recordCurrentGenerateModeVersion(e),this.currentGenerateMode=localStorage.getItem("generateMode")||1,this.show({action:1,data:"",creativeMode:"normal"})},checkIsOpen:function(){var e=this;return new Promise((function(t,n){var r,o;if((null===(r=e.paymentInfo)||void 0===r?void 0:r.activeState)||(null===(o=e.paymentInfo)||void 0===o?void 0:o.liteActiveState)||e.isCompanyAccount||!e.isLoggedIn)return t(!1);Object(k.f)({type:0}).then((function(e){var n=null==e?void 0:e.data;t(n)})).catch((function(e){t(!1)}))}))},checkOpenSwitchNewNotice:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null!==(e=this.userInfo)&&void 0!==e&&e.id&&!n&&setTimeout((function(){try{var e=Object(d.l)(),n=localStorage.getItem("generateMode"),r=!t.showNewGenerateGuide||localStorage.getItem("hasConfirmGenerateNotice");e&&!r&&!t.isDefaultNewGenerateUser&&["1",1].includes(n)&&t.$nextTick((function(){var e;null===(e=t.$refs)||void 0===e||null===(e=e.newVersionNoticeModal)||void 0===e||e.show()}))}catch(e){}}),2e3)},show:function(e,t){var n=arguments,r=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var c,l,h,f,m,v,data,_,y,w,x,k,S;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(l=n.length>2&&void 0!==n[2]&&n[2],r.currentGenerateMode=localStorage.getItem("generateMode"),(h=Object(d.l)())&&"SIMPLE"!==(null==e||null===(c=e.data)||void 0===c?void 0:c.openType)||(r.currentGenerateMode=2,r.recordCurrentGenerateModeVersion("2"),localStorage.setItem("generateMode","2"),r.currentGenerateMode=localStorage.getItem("generateMode")),r.currentGenerateMode||(r.currentGenerateMode=r.isDefaultNewGenerateUser?2:1),f=!r.showNewGenerateGuide||localStorage.getItem("hasConfirmGenerateNotice"),!h||f||r.isDefaultNewGenerateUser||!["1",1].includes(r.currentGenerateMode)){o.next=11;break}return o.next=9,r.checkIsOpen();case 9:m=o.sent,r.checkOpenSwitchNewNotice(m);case 11:if(r.$EventBus.$emit("checkDailyDialog"),r.openBannerPopup(),v=e.action,data=e.data,_=e.category,y=e.creativeMode,w=void 0===y?"normal":y,r.isShowPopup=v>-1,r.$store.dispatch("creation/setGenerateViewShow",r.isShowPopup),r.$EventBus.$emit("shareToNetworks"),console.log(e,"老创作的参数----"),![2,"2"].includes(r.currentGenerateMode)){o.next=22;break}return console.log("创作流打开事件---"),null!==(x=r.$refs.easyGenerate)&&void 0!==x&&x.show?(console.log("创作流打开事件---11"),r.$refs.easyGenerate.show(e,t,l)):setTimeout((function(){console.log("创作流打开事件---22"),r.$refs.easyGenerate.show(e,t,l)}),2e3),o.abrupt("return");case 22:if(!r.isHistory||data||_){o.next=24;break}return o.abrupt("return");case 24:if("studio"===w?("studio"!==r.creativeMode&&r.checkIsStudioMode(null===(k=r.config[r.menuIndex])||void 0===k?void 0:k.category)&&r.resetStudioParams(),r.creativeMode="studio"):(S=5===_||5===(null==data?void 0:data.category)||5===r.config[r.menuIndex].category,r.creativeMode=S?"sdxl":w),t||(r.isFirstOpen=!0),r.$store.dispatch("creation/setGenerateTaskNum",0),h&&"SIMPLE"!==data.openType){o.next=34;break}return r.setDefaultMeta(e,t),r.$nextTick((function(){var t;null===(t=r.$refs.simpleGenerate)||void 0===t||t.setParams(e.data)})),r.menuIndex="SIMPLE",r.isNoLogin=!h,r.config[r.menuIndex].logEventSource=(null==data?void 0:data.logEventSource)||0,o.abrupt("return");case 34:if(0!==v){o.next=38;break}return r.$nextTick((function(){r.updateTask(Object.assign(data,{status:1,status_desc:""}))})),r.setDefaultMeta(e,t,l),o.abrupt("return");case 38:"animGen"===r.setMenuIndex(data)&&(r.menuIndex=r.setMenuIndex(data)),r.getConfig(I(I({},data),{},{action:v})),r.$EventBus.$emit("hasCanRewards");case 42:case"end":return o.stop()}}),o)})))()},getReferParams:function(e){var t={},n=e.model_ver_no,r=e.art_work_no,o=e.id,c=e.prompt,l=(e.banner,e.samples,e.taskSource),d=void 0===l?0:l,h=e.art_model,f=this.getParentId(e);return null!=h&&h.ver_id?t.art_model_ver_no=h.ver_id:n?[3,"3"].includes(d)||(t.art_model_ver_no=n):r||o?t.art_work_no=r||f:c&&!e.noRefer&&(t.prompt=c),0===Object.keys(t).length||[0,"0"].includes(d)||(t.source=d),o||r||null==e||!e.parent_task_id||(t.id=(null==e?void 0:e.parent_task_id)||""),t},getParentId:function(e){var t=e.parent_art_work,n=e.type,r=e.parent_art_work_no,o=e.id;return 1===n&&(r||t)?r||t.id:o},setLoading:function(e){var t=this.config;for(var i in t)t[i].generateing=e},resetTextToImageMode:function(){try{var e=this.taskBaseModels[0];this.config.textToImage.art_model_no=e.id,this.config.textToImage.modelName=e.name,this.config.textToImage.art_work_no="",this.config.textToImage.lora_models=[],this.config.textToImage.model_cover=(null==e?void 0:e.cover)||"",this.config.textToImage.is_agency_fee=!1,this.config.textToImage.agency_fee=0,this.config.textToImage.art_model_ver_no_name=(null==e?void 0:e.model_ver_name)||"",this.config.textToImage.art_model_ver_no=(null==e?void 0:e.model_ver_no)||"",this.config.textToImage.base_model_type=(null==e?void 0:e.base_model)||"",this.config.textToImage.modelTags=this.getStudioModelTags(e)}catch(e){}},getStudioModelTags:function(){var source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(null==source?void 0:source.tags)?null==source?void 0:source.tags:[]},getConfig:function(e){var t=this,n=this.getReferParams(e);if(0===Object.keys(n).length||6===e.action){var r;this.checkIsStudioMode(null==e?void 0:e.category)||(this.creativeMode="/studio"===this.$route.path?"studio":[5,"5","sdxl"].includes(null==e?void 0:e.category)?"sdxl":"normal");this.getTextToImageCategory();(5===this.config[this.menuIndex].category||"normal"===this.creativeMode&&5===e.category)&&(this.creativeMode="sdxl",this.config[this.menuIndex].vae="None");var o=this.getCacheConfig(),l=!1;return null!=e&&e.id||!o||null===(r=o.textToImage)||void 0===r||!r.art_model_no||(l=!0),6===(null==e?void 0:e.action)&&(l=!1),void this.setDefaultMeta(e,l)}this.setLoading(!0);var d=null!=e&&e.parent_task_id?f.h:f.o;null!=e&&e.parent_task_id&&(n={id:null==e?void 0:e.parent_task_id});var h={art_model_ver_no:e.model_ver_no,img_url:e.cover,action:3,source:3};d(e.hsaModelEdit?h:n).then(function(){var n=Object(c.a)(regeneratorRuntime.mark((function n(r){var o,c,l,d,h,f,m,_,y,x,k,S,j,T,data,P,C,M,E,A,D,$,L,R,N,B,z,U,F,H,W,G,V,X,J,K,Y,Z,pattern,Q,ee,te,ne,re,oe,ie,ae,se,ue,ce,le,de,he,fe,pe,me,ge,meta,ve,_e,be,ye,we,xe,ke,Se,Ie,Oe,je,Te,Pe,Ce,Me,Ee,Ae,De,$e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if([1e4,"10000"].includes(null==r||null===(o=r.status)||void 0===o?void 0:o.code)){n.next=3;break}return t.$message.error(r.status.msg||t.$t("ServerError")),n.abrupt("return");case 3:if(data=I(I({},e),r.data),P=JSON.parse(JSON.stringify(data)),null!==(c=data)&&void 0!==c&&c.art_model||(data=t.getDefaultModel(data)),null!=e&&e.parent_task_id&&(data.meta=Object.assign({},(null==e?void 0:e.meta)||{},(null==r||null===(C=r.data)||void 0===C?void 0:C.meta)||{}),data.art_work_no=(null===(M=data)||void 0===M?void 0:M.artwork_no)||""),null!=e&&e.parent_task_id&&(data.channel=null===(E=data)||void 0===E?void 0:E.category),data&&([5,"5"].includes(null===(l=data)||void 0===l?void 0:l.category)||[5,"5"].includes(null===(d=data)||void 0===d||null===(d=d.task)||void 0===d?void 0:d.category))&&(data.channel="sdxl",data.category=5),A=[t.checkIsStudioMode(null===(h=data)||void 0===h?void 0:h.category),t.checkIsStudioMode(null===(f=data)||void 0===f||null===(f=f.task)||void 0===f?void 0:f.category)].some((function(e){return e})),data&&A&&(data.channel="studio",data.category=7,t.creativeMode="studio",8===(null===(D=data)||void 0===D?void 0:D.type)&&(data.meta.controlnet_units=t.convertStudioControlNet((null===(B=data)||void 0===B||null===(B=B.meta)||void 0===B||null===(B=B.lab_base)||void 0===B?void 0:B.conds)||[])),z=((null===w.B||void 0===w.B?void 0:w.B.sa)||[]).includes(null===($=data)||void 0===$?void 0:$.base_model_name),((null===(L=data)||void 0===L?void 0:L.art_model_no)===t.fluxModelId||z||null!==(R=data)&&void 0!==R&&null!==(R=R.base_model_name)&&void 0!==R&&R.includes("Flux"))&&(data.meta=Object.assign({},(null===(U=data)||void 0===U?void 0:U.meta)||{},{init_images:[]}),data.action=1),t.checkIsStudioMode(null===(N=t.config[t.menuIndex])||void 0===N?void 0:N.category)||t.resetStudioParams()),t.menuIndex=t.setMenuIndex(data),t.handleModelType()&&5===data.category&&setTimeout((function(){t.creativeMode="sdxl"}),100),t.config[t.menuIndex].roop_arg.face_restorer_visibility=.6,t.config[t.menuIndex].roop_arg.image="",t.config[t.menuIndex].isUploadImage=!1,t.config[t.menuIndex].enable_hr=!1,t.config[t.menuIndex].hr_upscaler="",t.config[t.menuIndex].hr_scale=1.5,t.config[t.menuIndex].ad_model="",t.config[t.menuIndex].restore_faces=!1,t.config[t.menuIndex].ad_units={lora:{},ad_denoising_strength:.3,ad_confidence:.3,prompt:"",negative_prompt:""},t.config[t.menuIndex].exchange_face={target_uri:"",face_distance:1.5,source_uri:""},t.config[t.menuIndex].embeddings=[],F=t.handleMeta(data,"",t.menuIndex),"expansion"===t.menuIndex&&(F.action=O.expansion),F.logEventSource=(null==e?void 0:e.logEventSource)||0,F=t.setImageSize(F),F=t.handleInitConfig(F),H=[t.checkIsStudioMode(null===(m=data)||void 0===m?void 0:m.category),t.checkIsStudioMode(null===(_=data)||void 0===_?void 0:_.channel)].some((function(e){return e})),["textToImage","imageToImage","conditionToImage"].includes(t.menuIndex)&&H)try{J=["imageToImage","conditionToImage"],K=(t.lab_base_model||[]).filter((function(e){var n=((null===w.B||void 0===w.B?void 0:w.B.sa)||[]).includes(null==e?void 0:e.base_model),r=null==e?void 0:e.base_model.includes("SD 3.5");return J.includes(t.menuIndex)?!((null==e?void 0:e.id)===t.fluxModelId||n||r):e})),Y=K[0],F.art_model_no=F.art_model_no||Y.id,F.modelName=F.modelName||Y.name,F.art_work_no="",F.model_cover=F.model_cover||(null==Y?void 0:Y.cover),F.is_agency_fee=F.is_agency_fee||!1,F.agency_fee=F.agency_fee||0,F.art_model_ver_no_name=(null===(W=F)||void 0===W?void 0:W.art_model_ver_no_name)||(null==Y?void 0:Y.model_ver_name)||"",F.art_model_ver_no=(null===(G=F)||void 0===G?void 0:G.art_model_ver_no)||(null==Y?void 0:Y.model_ver_no)||"",F.base_model_type=(null===(V=F)||void 0===V?void 0:V.base_model_type)||(null==Y?void 0:Y.base_model)||"",F.modelTags=null!==(X=F)&&void 0!==X&&X.modelTags?F.modelTags:t.getStudioModelTags(Y),F=t.checkStudioParams(F)}catch(e){}if("imageToImage"!==t.menuIndex&&"animGen"!==t.menuIndex){n.next=41;break}if(pattern=/^(http|https):\/\//,F.keepDenoisingStrength=!1,3===F.action&&(F.copyMask="",F.mask="",F.tempMask="",F.keepDenoisingStrength=!1),!pattern.test(F.mask)){n.next=40;break}return F.ad_model="",F.keepDenoisingStrength=!0,n.next=40,Object(v.b)(F.mask,(function(e){F.copyMask=F.mask,F.mask=e,F.tempMask=e}));case 40:!pattern.test(F.mask)&&null!==(Z=data)&&void 0!==Z&&null!==(Z=Z.meta)&&void 0!==Z&&null!==(Z=Z.ad_units)&&void 0!==Z&&Z.length&&(ee=(null===(Q=data)||void 0===Q||null===(Q=Q.meta)||void 0===Q?void 0:Q.ad_units[0])||{},F.ad_model=ee.ad_model||"",F.ad_units=Object.assign({},{lora:{},ad_denoising_strength:.3,ad_confidence:.3,prompt:"",negative_prompt:""},ee||{}),delete F.ad_units.ad_model);case 41:if(["textToImage","imageToImage","animGen"].includes(t.menuIndex)&&null!==(y=data)&&void 0!==y&&null!==(y=y.meta)&&void 0!==y&&null!==(y=y.ad_units)&&void 0!==y&&y.length&&(oe=(null===(te=data.meta)||void 0===te?void 0:te.ad_units[0])||{},ie=null===(ne=data)||void 0===ne||null===(ne=ne.meta)||void 0===ne||null===(ne=ne.ad_units)||void 0===ne||null===(ne=ne[0])||void 0===ne||null===(ne=ne.lora_models)||void 0===ne?void 0:ne[0],ae=ie?I(I({},ie),{},{banner:{url:(null==ie||null===(re=ie.art_model)||void 0===re||null===(re=re.banner)||void 0===re?void 0:re.url)||""}}):{},F.ad_model=oe.ad_model||"",F.characterRepairZoom=!!F.ad_model,F.ad_units=Object.assign({},{lora:ae||{},ad_denoising_strength:.3,ad_confidence:.3,prompt:"",negative_prompt:""},oe||{}),delete F.ad_units.ad_model),null!==(x=F)&&void 0!==x&&x.hr_scale&&(F.hr_scale=1.5),null!==(k=data)&&void 0!==k&&null!==(k=k.meta)&&void 0!==k&&null!==(k=k.ad_units)&&void 0!==k&&k.length||(F.ad_model="",F.characterRepairZoom=!!F.ad_model,F.ad_units={lora:{},ad_denoising_strength:.3,ad_confidence:.3,prompt:"",negative_prompt:""}),data&&t.checkIsStudioMode(null===(S=data)||void 0===S?void 0:S.channel)){F.studio.keepImageSize=!0,t.creativeMode="studio",F.category=7,fe=((null===w.B||void 0===w.B?void 0:w.B.sa)||[]).includes(null===(se=F)||void 0===se?void 0:se.base_model_type),pe=(t.fluxModelId===(null===(ue=F)||void 0===ue?void 0:ue.art_model_no)||fe)&&"textToImage"===t.menuIndex,me=t.getStudioDefaultStyle(F.base_model_type,pe),ge=t.getStudioDefaultStyle(F.base_model_type,pe),meta=r&&r.data&&r.data.meta?r.data.meta:{},ve=(null==P||null===(ce=P.meta)||void 0===ce?void 0:ce.width)||me.width,_e=(null==P||null===(le=P.meta)||void 0===le?void 0:le.height)||me.height,F.studio.width=ve,F.studio.height=_e,(ve>ge.max||_e>ge.max)&&(be=t.convertStudioBaseSize(ve,_e,ge),F.studio.width=be.width,F.studio.height=be.height),F.width=(null==P||null===(de=P.meta)||void 0===de?void 0:de.width)||t.config[t.menuIndex].width,F.height=(null==P||null===(he=P.meta)||void 0===he?void 0:he.height)||t.config[t.menuIndex].height;try{ke={conds:[],style_selections:["Studio Enhance","Studio Expand"],expand_token_length:10,hdr_enabled:!0,hdr_intensity:.5,auto_brightness_open:!0,auto_brightness_strength:75,auto_adjust_open:!1,auto_adjust_strength:20,semantics_open:!1,film_turbo:0,sharpness:2,scheduler:"karras",custom_height_width:!1,quality_open:!1,quality_detail_offset:.45,quality_mode:1,quality_type:"anime",intelligence_open:!1,prompt_magic:!0},"conditionToImage"===t.menuIndex&&(ke.conds=[{image:"",mode:"PyraCanny",stop_at:.5,weight:1}]),["",null,void 0].includes(null==meta||null===(ye=meta.lab_base)||void 0===ye?void 0:ye.quality_detail_offset)&&(F.lab_base.quality_detail_offset=.45),["",null,void 0].includes(null===(we=F)||void 0===we||null===(we=we.lab_base)||void 0===we?void 0:we.quality_type)&&(F.lab_base.quality_type=t.getStudioModelTagsType(F)||"anime"),(null===(xe=F)||void 0===xe?void 0:xe.art_model_no)===t.fluxModelId&&(F.ipList=((null===(Se=F)||void 0===Se||null===(Se=Se.lab_base)||void 0===Se?void 0:Se.conds)||[]).filter((function(e){return"IpMaintain"===e.mode})),F.lab_base.conds=((null===(Ie=F)||void 0===Ie||null===(Ie=Ie.lab_base)||void 0===Ie?void 0:Ie.conds)||[]).filter((function(e){return"IpMaintain"!==e.mode}))),F.lab_base=Object.assign({},ke,F.lab_base)}catch(e){}}else t.creativeMode=[5,"5","sdxl"].includes(null===(Oe=F)||void 0===Oe?void 0:Oe.category)?"sdxl":"normal";data&&[5,"5","sdxl"].includes(null===(j=data)||void 0===j?void 0:j.channel)&&(Pe=r&&r.data&&r.data.meta?r.data.meta:{},Ce=(null==Pe?void 0:Pe.width)||832,Me=(null==Pe?void 0:Pe.height)||1216,(Ce>1536||Me>1536)&&(Ee=t.convertBaseSize(Ce,Me),Ce=Ee.width,Me=Ee.height),F.sdxl=Object.assign({},(null===(je=F)||void 0===je?void 0:je.sdxl)||{}),F.width=t.config[t.menuIndex].width,F.height=t.config[t.menuIndex].height,F.sdxl.width=Ce||832,F.sdxl.height=Me||1216,F.negative_prompt_sdxl=null===(Te=data.meta)||void 0===Te?void 0:Te.negative_prompt,F.negative_prompt=t.config[t.menuIndex].negative_prompt),F.steps<=0&&(F.steps=[5,"5"].includes(F.category)?30:20),F.imgFiles=[],F.tabIndex=t.creativeMode,null!==(T=F)&&void 0!==T&&T.base_model_type.includes("SD 3.5")&&(F.steps=null===(Ae=P.meta)||void 0===Ae?void 0:Ae.steps,F.width=null===(De=P.meta)||void 0===De?void 0:De.width,F.height=null===($e=P.meta)||void 0===$e?void 0:$e.height),t.config[t.menuIndex]=F,t.setLoading(!1),t.$set(t.config,t.menuIndex,t.config[t.menuIndex]);case 53:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).finally((function(){t.setLoading(!1)}))},getDefaultModel:function(){var e,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(v.d)((null==data?void 0:data.category)||(null==data?void 0:data.channel)||(null==data||null===(e=data.task)||void 0===e?void 0:e.category));if(!(null!=data&&data.art_model||[7,11].includes(t)))try{var n=5!==t?this.taskBaseModels[0]:this.sd_xl_base_model[0],r={banner:{url:""}};r.id=null==n?void 0:n.id,r.name=null==n?void 0:n.name,r.art_work_no="",r.banner.url=null==n?void 0:n.cover,r.is_agency_fee=(null==n?void 0:n.is_agency_fee)||!1,r.agency_fee=(null==n?void 0:n.agency_fee)||0,r.version_name=(null==n?void 0:n.model_ver_name)||"",r.art_model_ver_no_name=(null==n?void 0:n.model_ver_name)||"",r.model_ver_no=(null==n?void 0:n.model_ver_no)||"",r.base_model=(null==n?void 0:n.base_model)||"",r.modelTags=Array.isArray(null==n?void 0:n.tags)?null==n?void 0:n.tags:[],data.art_model=r}catch(e){}return data},updateStudioSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.getStudioDefaultStyle(e,this.isStudioFlux),c=this.getStudioDefaultStyle(e,this.isStudioFlux),l=t,d=n;if(t>c.max||n>c.max||r){var h=this.convertStudioBaseSize(t,n,c);l=(null==h?void 0:h.width)||o.width,d=(null==h?void 0:h.height)||o.height}return{width:l||o.width,height:d||o.height}},convertStudioControlNet:function(){var e=this;return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])||[]).map((function(t){var n=(e.lab_ctr_units||[]).find((function(e){return(null==e?void 0:e.default_model)===t.mode}))||{},r=e.getControlNet();return r.input_image=(null==t?void 0:t.image)||"",r.type=null==n?void 0:n.type,r.module=null==n?void 0:n.type,r}))},convertBaseSize:function(e,t){var n={},r=parseFloat((e/t).toFixed(2)),o=[{code:10,label:"9 : 7",width:1152,height:896},{code:11,label:"7 : 9",width:896,height:1152},{code:18,label:"3 : 4",width:885,height:1180},{code:19,label:"4 : 3",width:1180,height:885},{code:12,label:"19 : 13",width:1216,height:832},{code:13,label:"13 : 19",width:832,height:1216},{code:14,label:"16 : 9",width:1344,height:768},{code:15,label:"9 : 16",width:768,height:1344}].find((function(e){var t=parseFloat((e.width/e.height).toFixed(2));return r===t}));if(o)n.width=o.width,n.height=o.height;else{var c=Object(v.g)(e,t,1216);n.width=c.width,n.height=c.height}return n},convertStudioBaseSize:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(this.studioSizeList||[]).filter((function(e){return 8!==e.code})),o={},c=parseFloat((e/t).toFixed(2)),l=r.find((function(e){var t=parseFloat((e.width/e.height).toFixed(2));return c===t})),d=n;if(!n){var h,f=(null===(h=this.config[this.menuIndex])||void 0===h?void 0:h.base_model_type)||"",m=m||this.isStudioFlux;d=this.getStudioDefaultStyle(f,m)}if(l)o.width=l.width,o.height=l.height;else{var _=Object(v.g)(e,t,d.max);o.width=_.width,o.height=_.height}return o},setImageSize:function(){var source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(x.cloneDeep)(source),t=this.resizeImageSizeByImageMode(e.width||768,e.height||768,this.menuIndex);return e.width=t.width,e.height=t.height,e},handleInitConfig:function(){var e,source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(x.cloneDeep)(source),pattern=/--auto|--s2/g;try{t.local_prompt=t.local_prompt.replace(pattern,""),t.local_prompt.trim(),t.prompt=t.prompt.replace(pattern,""),t.prompt.trim()}catch(e){}if("textToImage"===this.menuIndex&&["sdxl",5,"5"].includes(t.category))try{t.cfg_scale=t.cfg_scale||7,t.steps=t.steps||30;var n,r=this.sd_xl_base_model[0];if(t.art_model_no=t.art_model_no||r.id,t.modelName=t.modelName||r.name,t.art_model_no===r.id)t.art_work_no=(null==r||null===(n=r.artwork)||void 0===n?void 0:n.id)||"";else t.art_work_no=t.art_work_no||"";t.art_work_no=t.art_work_no||"",t.model_cover=t.model_cover||r.cover,t.is_agency_fee=t.is_agency_fee||!1,t.agency_fee=t.agency_fee||0,t.art_model_ver_no_name=(null==t?void 0:t.art_model_ver_no_name)||(null==r?void 0:r.model_ver_name)||"",t.art_model_ver_no=(null==t?void 0:t.art_model_ver_no)||(null==r?void 0:r.model_ver_no)||"",t.base_model_type=(null==r?void 0:r.base_model)||"",t.modelTags=this.getStudioModelTags(r)}catch(e){}if(null!=t&&null!==(e=t.roop_arg)&&void 0!==e&&e.image&&(t.roopZoom=!0),t&&t.sdxl)try{var o;t.enablePromptMagic=![0,"0",null,void 0].includes(t.sdxl.prompt_magic),t.sdxl={prompt_magic:[0,"0",null,void 0].includes(null==t||null===(o=t.sdxl)||void 0===o?void 0:o.prompt_magic)?.4:t.sdxl.prompt_magic,prompt_style:t.sdxl.prompt_style||"Fantasy Art"}}catch(e){}return t},setSeed:function(){var e,meta=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object(x.cloneDeep)(meta);if(data&&([5,"5"].includes(null==data?void 0:data.category)||[5,"5"].includes(null==data||null===(e=data.task)||void 0===e?void 0:e.category))){var n=this.config[this.menuIndex].seedsdxl;t.seedTempsdxl=t.seed||"",t.seedsdxl=n,t.seed=this.config[this.menuIndex].seed}else{var r=this.config[this.menuIndex].seed;t.seedTemp=t.seed||"",t.seed=r}return t},handleCategoryDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.config[this.menuIndex],n=t.prompt,r=t.local_prompt,o=t.art_work_no;t.art_model_no,t.modelName;e.MJ={prompt:n,local_prompt:r,art_work_no:o}},setModelVersion:function(){var source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object(x.cloneDeep)(source);try{"LORA"===e.type&&(t.lora_models[0].model_ver_no=e.model_ver_no),"Checkpoint"===e.type&&(t.art_model_ver_no=e.model_ver_no)}catch(e){}return t},setDefaultMeta:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=e.action,l=(e.art_work_no,e.imageUrl);if(c=c<1?1:c,this.taskBaseModels.length){var h=Object(d.l)(),f=localStorage.getItem("isSetSIMPLE")||!h;this.menuIndex=f?"SIMPLE":j[c]||"textToImage";var m=this.getModelParams(e);if(m=this.setModelVersion(m,e),f&&localStorage.removeItem("isSetSIMPLE"),t)if(r)this.creativeMode=this.config[this.menuIndex].tabIndex;else{var v,_=null===(v=this.config[this.menuIndex])||void 0===v?void 0:v.category;_=P[_]||"",this.creativeMode=this.config[this.menuIndex].tabIndex,_!==this.creativeMode&&this.changeHandle({creativeMode:this.creativeMode})}else"object"!==Object(o.a)(l)&&(e.imageUrl=this.handleWorkIndex()?["","","",l]:[l]),delete this.config[this.menuIndex].channel,this.config[this.menuIndex]=I(I(I({},this.config[this.menuIndex]),e),{},{action:c},m),this.$set(this.config,this.menuIndex,this.config[this.menuIndex])}else setTimeout((function(){n.setDefaultMeta(e,t)}),2e3)},getModelParams:function(e){var t,n,r,o,c=this,l=this.config[this.menuIndex].category,d=[5,"5","sdxl"].includes(l),h=this.checkIsStudioMode(l),f=e.art_work_no,m=(e.model_ver_no,e.type),v=e.banner,_=e.action,y=e.name,x=e.id,k=e.samples,S=["LORA","Checkpoint"].includes(m)&&(!(null!=k&&k.length)||""===(null==v?void 0:v.url)),I=d?this.sd_xl_base_model[0]:this.taskBaseModels[0];if(h){var O=["imageToImage","conditionToImage"];I=(this.lab_base_model||[]).filter((function(e){var t=((null===w.B||void 0===w.B?void 0:w.B.sa)||[]).includes(null==e?void 0:e.base_model),n=null==e?void 0:e.base_model.includes("SD 3.5");return O.includes(c.menuIndex)?!((null==e?void 0:e.id)===c.fluxModelId||t||n):e}))[0]}var j={art_work_no:f,art_model_no:I.id,modelName:I.name,agency_fee:0,is_agency_fee:!1,model_cover:I.cover||"",art_model_ver_no_name:(null===(t=I)||void 0===t?void 0:t.model_ver_name)||"",art_model_ver_no:(null===(n=I)||void 0===n?void 0:n.model_ver_no)||"",base_model_type:(null===(r=I)||void 0===r?void 0:r.base_model)||"",modelTags:this.getStudioModelTags(I)};return S&&("LORA"===m&&(j=this.getLoraParams(j,e)),"Checkpoint"===m&&(j.art_model_no=x,j.modelName=y)),6!==_&&(j.art_work_no=""),S&&(j.category=1),null!=e&&null!==(o=e.base_model)&&void 0!==o&&o.toLowerCase().includes("sdxl")&&!h&&(j.category=5),j},getLoraParams:function(e,t){var n,r=t.id,o=t.name,c=t.origin_model,l=t.agency_fee,d=t.is_agency_fee,h=t.base_model,f=t.cover;c&&(e.art_model_no=null==c?void 0:c.model_no,e.modelName=null==c?void 0:c.name,e.model_cover=(null==c||null===(n=c.banner)||void 0===n?void 0:n.url)||"",e.art_model_ver_no_name=(null==c?void 0:c.version_name)||"",e.base_model_type=(null==c?void 0:c.base_model)||"");return e.lora_models=[{id:r,name:o,banner:{url:f||""},weight:1,model_id:r,agency_fee:l,is_agency_fee:d,base_model:h||""}],e},handleUpdateImageSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};t.width=e.width||e.realWidth,t.height=e.height||e.realHeight;var n=this.handleSize(t);this.config[this.menuIndex].width=n.width,this.config[this.menuIndex].height=n.height},handleVariationsMeta:function(data,meta){try{var e,t=data.img_uris,n=(meta||{}).init_images,r=null==data||null===(e=data.banner)||void 0===e?void 0:e.url;meta.init_images=t.length?n||[]:r?[r]:[]}catch(e){}return meta},handleMeta:function(data,e){var t,n,r,o,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=this.getImageNums(),d=c||e,h=this.handleParams(data,d),meta=h.meta,f=h.art_work_no,m=h.art_model,_=h.base_model_name,y=void 0===_?"":_;[3,"3"].includes(null==data?void 0:data.action)&&(meta=this.handleVariationsMeta(data,meta)),meta.lcm_mode=null!==(t=meta)&&void 0!==t&&t.lcm_mode?1:0,(meta=this.setSeed(meta,data)).lora_models=this.changeLora(meta.lora_models);var w=Array.isArray(null==data||null===(n=data.meta)||void 0===n?void 0:n.embeddings)?null==data||null===(r=data.meta)||void 0===r?void 0:r.embeddings:[];meta.embeddings=(w||[]).map((function(e){return I(I({},e),(null==e?void 0:e.art_model)||{})}));var x={};if(e){var k=this.config[e];meta=I({width:k.width,height:k.height,seed:k.seed,prompt:k.prompt,left_margin:k.left_margin,up_margin:k.up_margin},meta)}else x=this.getOtherParams(data);return I(I(I(I({},this.config[e||this.menuIndex]),{},{art_work_no:f,art_model_ver_no:m?m.model_ver_no:"",denoising_strength:.35},meta),x),{},{isTranslate:!0,n_iter:l||2,isRead:x.imageUrl&&x.imageUrl[0],category:Object(v.d)((null==data?void 0:data.category)||(null==data||null===(o=data.meta)||void 0===o?void 0:o.category)||1),base_model_type:y})},setMenuIndex:function(e){var t,n=e||{meta:{}},meta=n.meta,r=n.action,o=n.task,c=meta||{},l=c.controlnet_units,d=c.init_images,h=Object(v.d)(null==e?void 0:e.channel);return 24===r||24===(null===(t=e.task)||void 0===t?void 0:t.type)||6===e.type?"animGen":[23,"23"].includes(null==e?void 0:e.type)?"faceSwap":[3,"3"].includes(h)?"textToImage":[2,3].includes(r)||7===(null==o?void 0:o.type)||9===r||d&&d.length>0?"imageToImage":l&&l.length&&3!==r?(this.isFirstOpen=!1,"conditionToImage"):6===r?"extraUpscale":8===r?"descriptors":13===r||11===(null==o?void 0:o.type)?"expansion":10===r?"conditionToImage":"textToImage"},getOtherParams:function(data){var e=data||{},t=e.meta,n=t.controlnet_units,r=void 0===n?[]:n,image=t.image,o=e.operate_number,c={workIndex:0};if(["imageToImage","conditionToImage","animGen"].includes(this.menuIndex)){var l,d=(null==data?void 0:data.category)||(null==data||null===(l=data.meta)||void 0===l?void 0:l.category)||1;c={imageUrl:this.getImageUrl(data),controlnet_units:o?[]:this.getControlNetParams(r,d)}}else"expansion"===this.menuIndex&&(c={imageUrl:[image],isDrag:!1});return c},getControlNetParams:function(e,t){var n=this,r=e.map((function(e){var r=e.type,o=e.processor_res,c=void 0===o?512:o,l=e.module,d=e.model,h=e.control_mode,f=e.weight,m=e.threshold_a,v=r||n.defaultModule,_=d,y=l,w=t||n.getConfigCategory(),x=["5",5,"sdxl","SDXL"].includes(w)?n.taskSdxlUnits:n.taskUnits,k=x.find((function(i){return i.type==n.defaultModule}))||{},S=x.find((function(e){return e.models.includes(d)}));S&&(v=S.type);return("None"==d||["t2i-adapter_diffusers_xl_canny","t2i-adapter_xl_canny","t2i-adapter_diffusers_xl_openpose","t2i-adapter_xl_openpose","t2i-adapter_diffusers_xl_lineart","t2i-adapter_diffusers_xl_depth_midas","t2i-adapter_diffusers_xl_depth_zoe"].includes(d))&&(v=n.defaultModule,_=(null==k?void 0:k.default_model)||"None",y=(null==k?void 0:k.default_module)||"none"),r&&(v=r),{type:v,processor_res:c,module:y,isHandle:"none"!==l,model:_,threshold_a:m,control_mode:String(h),weight:f}}));return r},getImageUrl:function(data){var e=[],t=data||{},n=t.meta,r=n.init_images,o=n.controlnet_units,c=t.operate_number,l=t.img_uris,d=t.banner;return c&&l&&l.length&&(e[3]=l[c-1].url),null!=o&&o.length&&!c&&(e=o.map((function(e){return e.input_image}))),this.handleWorkIndex()&&!e[3]&&(e[3]=r?r[0]:(null==d?void 0:d.url)||""),e},changeLora:function(e){return e?e.map((function(e){var t=e.art_model,n=e.model_ver_no;return I(I(I({},e),t),{},{model_ver_no:n})})):[]},changeMenu:function(e){var t=this,n={SIMPLE:"click_starter_button",textToImage:"click_premium_button"};n[e]&&this.$logEvent("log_actions",{operation:n[e],behavior_info:"creative_flow_tab"}),this.token||"SIMPLE"===e?(this.menuIndex=e,this.creativeMode=this.config[this.menuIndex].tabIndex,"textToImage"===e&&Number(this.config.textToImage.imageMode)>=4&&(this.config.textToImage.imageMode=3),"conditionToImage"===e&&this.isFirstOpen&&(this.showControlnetPopup(),this.isFirstOpen=!1),this.isStudioMode&&this.resetStudioParams()):this.$EventBus.$emit("openLoginDialog",{callBack:function(){t.menuIndex=e}})},clearExtraImageMeta:function(){try{delete this.config.extraUpscale.meta}catch(e){}},checkStudioModelType:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})||{}).base_model_type,n=void 0===t?"":t,r=((null==e?void 0:e.meta)||{}).lora_models,o=void 0===r?[]:r,c=["SDXL 1.0","SDXL 0.9","SDXL Turbo","SDXL 1.0 LCM","SDXL Lightning","Pony","SDXL Hyper"],l=["SD 1.5","SD 2.0","SD 1.4","SD 2.1 768","SD 2.1","SD 2.0 768","SD 1.5 LCM"],d=["SD 3"],h=(null===w.B||void 0===w.B?void 0:w.B.sa)||[],f=(null===w.B||void 0===w.B?void 0:w.B.sd35)||[],m=c.includes(n)||(n||"").includes("SDXL"),v=l.includes(n),_=d.includes(n),y=((null===w.B||void 0===w.B?void 0:w.B.flux)||[]).includes(n),x=(h||[]).includes(n),k=f.includes(n)||(n||"").includes("SD 3.5");return(o||[]).every((function(e){var t=c.includes(null==e?void 0:e.base_model),r=l.includes(null==e?void 0:e.base_model),o=d.includes(null==e?void 0:e.base_model),S=h.includes(null==e?void 0:e.base_model),I=((null===w.B||void 0===w.B?void 0:w.B.flux)||[]).includes(null==e?void 0:e.base_model),O=f.includes(null==e?void 0:e.base_model)&&(null==e?void 0:e.base_model)===n;return!(k&&!O||m&&!t||v&&!r||_&&!o||y&&!I||x&&!S)}))},generate:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,d,h,pattern,m,_,y,w,x,k,S,I,O,j,T;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(d=e.config[e.menuIndex]).generateing){t.next=3;break}return t.abrupt("return");case 3:if(!e.isStudioMode||"textToImage"!==e.menuIndex||!((null==d||null===(n=d.lab_base)||void 0===n?void 0:n.conds)||[]).some((function(e){return e.loading}))){t.next=6;break}return e.$message.warning(e.$t("uploadingWaitTip")),t.abrupt("return");case 6:if("textToImage"!==e.menuIndex||!e.vipLimit(d)){t.next=8;break}return t.abrupt("return");case 8:if(!e.validParams(d)){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,e.getParams();case 12:if(h=t.sent,![1,"1",5,"sdxl"].includes(null===(r=h)||void 0===r?void 0:r.category))try{delete h.meta.embeddings}catch(e){}if(!e.isStudioMode||e.checkStudioModelType(d,h)){t.next=17;break}return e.$message.warning(e.$t("studio25")),t.abrupt("return");case 17:if(pattern=/^(http|https):\/\//,"imageToImage"!==e.menuIndex||["",null,void 0].includes(e.config.imageToImage.mask)||pattern.test(e.config.imageToImage.mask)){t.next=21;break}return e.$message.warning("".concat(e.$t("uploadError"))),t.abrupt("return");case 21:if(e.handleModelType()&&[5,"5","sdxl"].includes(d.category)&&!e.isStudioMode&&(w={},x=["prompt","width","height","steps","cfg_scale","sdxl","n_iter","base_ratio","predict_mode","predict_strength","sampler_name","negative_prompt","lora_models","vae","clip_skip","refiner_mode","refiner_switch_at","lcm_mode"],["art_work_no","art_model_no","art_model_ver_no"].forEach((function(e){w[e]=h[e]})),w.action=h.action,w.category=h.category,w.channel_id=h.channel_id||"",w.meta={},w.speed_type=h.speed_type,x.forEach((function(e){w.meta[e]=d[e]})),["imageToImage","conditionToImage"].includes(e.menuIndex)&&(w.meta.controlnet_units=h.meta.controlnet_units||[]),k="random"===d.seedModesdxl?Object(v.c)():d.seedsdxl,w.meta.embeddings=(null===(m=h)||void 0===m||null===(m=m.meta)||void 0===m?void 0:m.embeddings)||[],w.meta.seed=k||-1,d.enablePromptMagic||(w.meta.sdxl.prompt_magic=0),w.meta.negative_prompt=e.config[e.menuIndex].negative_prompt_sdxl,w.meta.width=(null===(_=w.meta)||void 0===_||null===(_=_.sdxl)||void 0===_?void 0:_.width)||832,w.meta.height=(null===(y=w.meta)||void 0===y||null===(y=y.sdxl)||void 0===y?void 0:y.height)||1216,"imageToImage"===e.menuIndex&&(w.meta.init_images=h.meta.init_images,w.meta.denoising_strength=h.meta.denoising_strength,I={mask:null===(S=h.meta)||void 0===S?void 0:S.mask,mask_blur:4,inpainting_fill:1,inpainting_mask_invert:0,inpaint_full_res_padding:32},["",null,void 0].includes(I.mask)||(w.meta=Object.assign(w.meta,I))),h=w),e.isStudioMode&&(O=h.action,j=JSON.parse(JSON.stringify(h)),(h=e.pickStudioParams(j,d)).action=O),e.checkIsStudioMode(null===(o=h)||void 0===o||null===(o=o.meta)||void 0===o?void 0:o.channel)&&(h.category=7,delete h.meta.channel),["faceSwap"].includes(e.menuIndex)&&(h=e.getFaceSwapParams(d)),["characterRepair"].includes(e.menuIndex)){h.meta.n_iter=1,h.meta.width=d.realWidth||d.width,h.meta.height=d.realHeight||d.height;try{delete h.meta.denoising_strength,delete h.meta.cfg_scale}catch(e){}}if("textToImage"===e.menuIndex&&null!==(c=e.config)&&void 0!==c&&null!==(c=c.textToImage)&&void 0!==c&&c.hr_upscaler&&(h.meta.denoising_strength=(null===(T=e.config)||void 0===T||null===(T=T.textToImage)||void 0===T?void 0:T.hr_upscaler_redraw)||0),!e.checkIsStudioMode(h.category)||6===(null===(l=h)||void 0===l?void 0:l.action)){t.next=30;break}return e.generateStudioTask(h,d),t.abrupt("return");case 30:d.generateing=!0,Object(f.d)(h).then((function(t){var n;t.data;if(t&&1e4!==(null==t||null===(n=t.status)||void 0===n?void 0:n.code))d.generateing=!1;else{d.generateing=!1,e.clearConfig(d),e.$message.success(e.$t("CreateSuccess"));var r=e.creativeMode||"normal";e.show({action:0,data:t.data,creativeMode:r},!0,!0)}})).catch((function(e){d.generateing=!1}));case 32:case"end":return t.stop()}}),t)})))()},generateStudioTask:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){};n.generateing=!0,"textToImage"===this.menuIndex&&(r=f.u),"imageToImage"===this.menuIndex&&(r=3!==t.action?f.t:f.w,delete t.action,delete t.category),"conditionToImage"===this.menuIndex&&(r=f.s),r&&["textToImage","imageToImage","conditionToImage"].includes(this.menuIndex)?"function"==typeof r&&r(t).then((function(r){var o;if(r&&1e4!==(null==r||null===(o=r.status)||void 0===o?void 0:o.code))n.generateing=!1;else{var c=Object.assign({},t,(null==r?void 0:r.data)||{});c.banner=null,c.img_uris=[],n.generateing=!1,e.clearConfig(n),e.$message.success(e.$t("CreateSuccess"));var l=e.creativeMode||"normal";e.show({action:0,data:c,creativeMode:l},!0,!0)}})).catch((function(e){n.generateing=!1})):n.generateing=!1},pickStudioParams:function(){var e,t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l={category:7};l.channel_id=o.channel_id||"",l.meta={},l.speed_type=o.speed_type;if(l.art_model_no=o.art_model_no,l.art_model_ver_no=o.art_model_ver_no,l.meta.lora_models=o.meta.lora_models||[],["cfg_scale","prompt","negative_prompt","n_iter","lab_base","mask","seed","sampler_name","steps"].forEach((function(e){l.meta[e]=o.meta[e]})),"conditionToImage"===this.menuIndex)try{(l.meta.lab_base.conds||[]).map((function(e,t){return e.image=o.meta.controlnet_units.length?o.meta.controlnet_units[t].input_image:"",e}))}catch(e){}null!==(e=l.meta)&&void 0!==e&&e.n_iter||(l.meta.n_iter=(null==c?void 0:c.n_iter)||2);var d,h=this.getStudioDefaultStyle(c.base_model_type);if(l.meta.width=(null===(t=o.meta)||void 0===t||null===(t=t.studio)||void 0===t?void 0:t.width)||h.width,l.meta.height=(null===(n=o.meta)||void 0===n||null===(n=n.studio)||void 0===n?void 0:n.height)||h.height,o.source&&(l.source=o.source),o.parent_task_id&&(l.parent_task_id=o.parent_task_id),["textToImage"].includes(this.menuIndex)){var f,m=/^blob:/;l.meta.lab_base.conds=((null==l||null===(f=l.meta)||void 0===f||null===(f=f.lab_base)||void 0===f?void 0:f.conds)||[]).filter((function(e){return"ImagePrompt"===e.mode&&e.image&&!m.test(e.image)}))}if(["textToImage"].includes(this.menuIndex)&&l.art_model_no===this.fluxModelId){var v,_,y,w=/^blob:/,x=((null==o||null===(v=o.meta)||void 0===v?void 0:v.ipList)||[]).filter((function(e){return"IpMaintain"===e.mode&&e.image&&!w.test(e.image)}));null!=l&&null!==(_=l.meta)&&void 0!==_&&null!==(_=_.lora_models)&&void 0!==_&&_.length&&(x=(x||[]).filter((function(e){return"IpMaintain"!==e.mode}))),(y=l.meta.lab_base.conds).push.apply(y,Object(r.a)(x||[]))}(["imageToImage"].includes(this.menuIndex)&&(l.meta.init_images=o.meta.init_images||[],l.meta.denoising_strength=o.meta.denoising_strength),["conditionToImage"].includes(this.menuIndex))&&(l.meta.lab_base.conds=((null==l||null===(d=l.meta)||void 0===d||null===(d=d.lab_base)||void 0===d?void 0:d.conds)||[]).filter((function(e){return!["IpMaintain","ImagePrompt"].includes(null==e?void 0:e.mode)})));return l},getFaceSwapParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={action:22,meta:{exchange_face:{}}},n=Array.isArray(e.imageUrl)&&e.imageUrl.length?e.imageUrl[0]:"";return t.meta.exchange_face=Object.assign({},e.exchange_face,{target_uri:n}),t},resetCurrentAction:function(){this.config[this.menuIndex].action=O[this.menuIndex]},clearConfig:function(e){e.parent_task_id&&delete e.parent_task_id,e=I(I({},e),{},{imageUrl:[""],imgFiles:[""],mask:"",keepDenoisingStrength:!1,prompt:"",local_prompt:"",action:O[this.menuIndex],roop_arg:{face_restorer_visibility:.6,image:""},workIndex:this.handleWorkIndex()?3:0,controlnet_units:this.handleWorkIndex()?[]:[this.getControlNet()],MJ:{local_prompt:"",prompt:"",art_work_no:""},exchange_face:{target_uri:"",face_distance:1.5,source_uri:""},logEventSource:0}),"conditionToImage"===this.menuIndex&&(e.lab_base.conds=[{image:"",mode:"PyraCanny",stop_at:.5,weight:1}]),this.config[this.menuIndex]=e},vipLimit:function(e){return!this.isVip&&((null!=e&&null!==(t=e.lora_models)&&void 0!==t&&t.length?e.lora_models:[]).length>3&&(this.$EventBus.$emit("showBreakDialog","LoRALimit5TipWeb","basic"),!0));var t},validParams:function(e){var t=e.prompt,n=e.art_work_no,r=e.art_model_no,o=["textToImage","imageToImage","conditionToImage","expansion"];if("textToImage"===this.menuIndex){var c,l=this.config.textToImage,d=l.category,h=l.lab_base,f=void 0===h?{}:h;this.checkIsStudioMode(d)&&(null==f||null===(c=f.conds)||void 0===c?void 0:c.length)&&o.shift()}var m=this.imageUrlEmpty(e);return["extraUpscale","imageToImage","conditionToImage","descriptors","preview","expansion","faceSwap","animGen","characterRepair"].includes(this.menuIndex)&&!m?"animGen"==this.menuIndex?this.$message.warning(this.$t("pleaseSelectImage")):this.$message.warning(this.$t("pleaseUoloadImage")):["faceSwap"].includes(this.menuIndex)&&this.faceWapImageUrlEmpty(e)?this.$message.warning(this.$t("pleaseUoloadImage")):o.includes(this.menuIndex)&&!t?this.$message.warning(this.$t("PromptNotEmpty")):!this.isValidModelId(e)||n||r?"extraUpscale"===this.menuIndex&&!this.validImageSize(e)&&this.$message.warning(this.$t("ImageSizeExceedsError")):this.$message.warning(this.$t("PleaseSelectBaseName"))},faceWapImageUrlEmpty:function(e){var t=((null==e?void 0:e.exchange_face)||{}).source_uri;return["",null,void 0].includes(void 0===t?"":t)},imageUrlEmpty:function(e){var t=e.imageUrl,n=e.controlnet_units.every((function(e,i){return t[i]}));return"conditionToImage"===this.menuIndex?n:this.handleWorkIndex()?n&&t[3]:t.every((function(img){return img}))},isValidModelId:function(e){var t=e.category;return["textToImage","imageToImage","conditionToImage","expansion"].includes(this.menuIndex)&&[1,2].includes(t)},validImageSize:function(e){var t=e.realWidth,n=e.realHeight,r=e.scaling_ratio;return[t,n].every((function(e){return e*r<=4096}))},getParams:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,d,h,f,m,v,_,y,w,meta;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.config[e.menuIndex],r={},o=n.art_work_no,c=n.art_model_no,l=n.parent_task_id,d=n.art_model_ver_no,h=n.action,f=n.operate_number,m=n.category,v=n.speed_type,_=n.animatediff,y=n.logEventSource,w=void 0===y?0:y,meta=e.getCommonMeta(n),t.next=6,e.getPrivateMeta(n,meta);case 6:return meta=t.sent,r={action:"conditionToImage"===e.menuIndex?10:h,art_work_no:o,art_model_no:c,art_model_ver_no:d,parent_task_id:l,operate_number:f,channel_id:"PRIVATE"!==e.channelId&&e.channelId,category:m,speed_type:v,meta:meta},w&&(r.source=w),"animGen"===e.menuIndex&&(r.meta.animatediff=_),"textToImage"!==e.menuIndex&&([3,"3","midjourney","sdxl",5,"5"].includes(n.channel)||[3,"3","midjourney","sdxl",5,"5"].includes(meta.channel))&&(([3,"3","midjourney"].includes(n.channel)||[3,"3","midjourney"].includes(meta.channel))&&(r.category=3),(["sdxl",5,"5"].includes(n.channel)||["sdxl",5,"5"].includes(meta.channel))&&(r.category=5),[3,"3","midjourney","sdxl",5,"5"].includes(meta.channel)&&delete r.meta.channel),8===n.action&&"descriptors"===e.menuIndex&&(Reflect.deleteProperty(r,"art_work_no"),Reflect.deleteProperty(r,"art_model_no"),Reflect.deleteProperty(r,"art_model_ver_no")),Object.keys(r).forEach((function(e){r[e]||Reflect.deleteProperty(r,e)})),t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))()},getCommonMeta:function(e){var t,n,r,meta={},o=["prompt","negative_prompt","restore_faces","seed","sampler_name","width","height","steps","cfg_scale","lora_models","vae","clip_skip","hr_second_pass_steps","lcm_mode"];(["development"].includes("production")&&o.push("roop_arg"),["textToImage","imageToImage","conditionToImage","expansion","animGen"].includes(this.menuIndex)&&o.push("n_iter"),this.handleModelType()&&[5,"5","sdxl"].includes(e.category)&&!this.isStudioMode)&&(o=["prompt","width","height","steps","cfg_scale","lora_models","sdxl","n_iter","sampler_name","negative_prompt","seed","vae","clip_skip","refiner_mode","refiner_switch_at","lcm_mode"],meta.sdxl={},meta.sdxl={prompt_magic:e.enablePromptMagic?e.sdxl.prompt_magic:0,prompt_style:e.sdxl.prompt_style,width:(null===(n=e.sdxl)||void 0===n?void 0:n.width)||832,height:(null===(r=e.sdxl)||void 0===r?void 0:r.height)||1216});return this.isStudioMode&&(o=["prompt","negative_prompt","restore_faces","seed","sampler_name","width","height","steps","cfg_scale","lora_models","vae","clip_skip","hr_second_pass_steps","lcm_mode","studio","lab_base","ipList"]),["extraUpscale","descriptors"].includes(this.menuIndex)||(o.forEach((function(t){meta[t]=e[t]})),["",null,void 0,0,"0"].includes(meta.seed)&&(meta.seed=-1),["-1",-1].includes(meta.seed)&&(meta.seed=Object(v.c)(this.isStudioFlux)),["",null,void 0].includes(null==meta||null===(t=meta.roop_arg)||void 0===t?void 0:t.image)&&delete meta.roop_arg,["textToImage","imageToImage","animGen","conditionToImage"].includes(this.menuIndex)&&![5,"5"].includes(e.category)||delete meta.roop_arg,!["",null,void 0].includes(e.hr_upscaler)&&"textToImage"===this.menuIndex&&[1,"1"].includes(e.category)&&(e.enable_hr?(meta.enable_hr=!0,meta.hr_upscaler=e.hr_upscaler||"R-ESRGAN 4x+",meta.hr_scale=1.5):meta.enable_hr=!1),meta.width=(null==meta?void 0:meta.width)<=0?1024:meta.width,meta.height=(null==meta?void 0:meta.height)<=0?1024:meta.height,meta.lora_models=e.lora_models.map((function(e){var t=e.model_id,n=e.weight,r=e.model_ver_no,o=e.base_model;return{model_id:t,weight:n,model_ver_no:r||"",base_model:void 0===o?"":o}}))),meta},getCanvasParams:function(){var e=arguments,t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,pattern;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.length>0&&void 0!==e[0]?e[0]:{}).generateing){n.next=3;break}return n.abrupt("return");case 3:if(r.generateing=!0,o={mask:r.mask,mask_blur:4,inpainting_fill:1,inpainting_mask_invert:0,inpaint_full_res_padding:32},pattern=/^(http|https):\/\//,["",null,void 0].includes(r.tempMask)||["",null,void 0].includes(r.mask)||r.tempMask!==r.mask){n.next=10;break}return o.mask=r.copyMask,t.config.imageToImage.mask=r.copyMask,n.abrupt("return",o);case 10:if(["",null,void 0].includes(r.mask)||"data:,"===r.mask||pattern.test(r.mask)){n.next=13;break}return n.next=13,t.uploadMaskImage(r.mask).then((function(e){t.config.imageToImage.mask=e,o.mask=t.config.imageToImage.mask}));case 13:return n.abrupt("return",["",null,void 0].includes(o.mask)?{}:o);case 14:case"end":return n.stop()}}),n)})))()},updateDisplayMask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.config.imageToImage;t.tempMask=e,t.mask=e},uploadMaskImage:function(mask){var e=mask.includes("data:image/png;base64")?mask:"data:image/png;base64,".concat(mask),t=Object(v.a)(e);return this.UPLOAD.startUpload(t,{name:"img2img-mask".concat(Date.now(),".png"),type:"png",isRedirection:!0,category:46})},getPrivateMeta:function(e,meta){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,d,h,f,m,v,_,y,w,k,S,O,j,T,P,C,M;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.menuIndex,o=e.denoising_strength,c=e.imageUrl,l=e.controlnet_units,d=e.scaling_ratio,h=e.up_scaler,f=e.controlnet_processor_res,m=e.left_margin,v=e.up_margin,_=e.embeddings,y=e.meta,meta.embeddings=(_||[]).map((function(e){return{model_id:null==e?void 0:e.id,model_ver_id:null==e?void 0:e.model_ver_no}})),!["imageToImage","animGen","characterRepair"].includes(r)){n.next=16;break}if(meta.denoising_strength=o,meta.init_images=c.slice(3),l.length&&(meta.controlnet_units=t.getControlnet_units(l,c)),!l.length){n.next=11;break}n.t0={},n.next=14;break;case 11:return n.next=13,t.getCanvasParams(e);case 13:n.t0=n.sent;case 14:w=n.t0,meta=Object.assign({},meta,w);case 16:return["imageToImage","textToImage","animGen","characterRepair"].includes(r)&&(""!==e.ad_model&&(S=e.ad_units.lora,O=S.id,j=S.model_ver_no,T=S.weights,P={model_id:O,model_ver_no:j,weight:T},delete(C=Object(x.cloneDeep)(e.ad_units)).lora,meta.ad_units=[Object.assign({ad_model:e.ad_model,lora_models:null!==(k=Object.keys(e.ad_units.lora))&&void 0!==k&&k.length?[P]:[]},C)]),3===e.action&&(e.enable_hr?(meta.enable_hr=!0,meta.hr_upscaler=e.hr_upscaler||"R-ESRGAN 4x+",meta.hr_scale=1.5):meta.enable_hr=!1)),"extraUpscale"===r&&(meta.hi_res_arg={upscaling_resize:d,upscaler_1:h,image:c[0]},meta.width=e.realWidth||e.width,meta.height=e.realHeight||e.height,meta=I(I({},y),meta)),"conditionToImage"===r&&(meta.controlnet_units=t.getControlnet_units(l,c)),"descriptors"===r&&(meta={img_2_text:{uri:e.imageUrl[0]}}),"preview"===r&&(meta={controlnet_input_images:c,controlnet_module:null===(M=l[0])||void 0===M?void 0:M.module,controlnet_processor_res:f}),"expansion"===r&&(meta=I(I({},meta),{},{left_margin:m,up_margin:v,image:c[0]})),n.abrupt("return",meta);case 23:case"end":return n.stop()}}),n)})))()},getControlnet_units:function(e,t){var n=this;return e.map((function(e,r){var o=e.type,c=e.processor_res,l=e.threshold_a,d=e.control_mode,h=e.model,f=e.module,m=e.weight,v=e.isHandle,_=l;return"0"===d&&n.isShowStyleFidelity||(_=null),{processor_res:v?c:0,input_image:t[r],threshold_a:_,model:h,module:v?f:"none",control_mode:Number(d),weight:m,guidance:1,guidance_end:1,type:o}}))},updateTask:function(data){this.$refs.taskView.updateMessageList(data)},taskViewScrollToBottom:function(){try{var e,t,n,r=null===(e=this.$refs)||void 0===e||null===(e=e.taskView)||void 0===e?void 0:e.list,o=null===(t=this.$refs)||void 0===t||null===(t=t.taskView)||void 0===t||null===(t=t.$refs)||void 0===t?void 0:t.scrollWrapper;if(r&&r.length&&o&&![0,"0"].includes(o.scrollTop))return;null===(n=this.$refs)||void 0===n||null===(n=n.taskView)||void 0===n||n.scrollToTop(0,"instant")}catch(e){}},getDefaultNegativePrompt:function(i){var e="",t=w.i.negative_prompt;return"textToImage"===i&&(e=t),e},resetConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getCacheConfig(),r=this.getImageMode(),o=this.config[this.menuIndex],c=JSON.parse(JSON.stringify(this.config)),l=this.getImageMode("textToImage"),d=r.imageMode||2,h=l.imageMode||2,f=this.getImageNums(),m=5!==this.getTextToImageCategory()?20:30;w.i.negative_prompt,t&&o.category;for(var i in this.config){var v={ipList:[],prompt:"",local_prompt:"",negative_prompt:this.getDefaultNegativePrompt(i),negative_prompt_sdxl:"worst quality, low quality,  bad anatomy, bad hands, bad body, missing fingers, extra digit, fewer digits",art_work_no:"",art_model_no:"",art_model_ver_no:"",base_model_type:"",modelName:"",is_agency_fee:!1,agency_fee:0,model_cover:"",art_model_ver_no_name:"",modelTags:[],lora_models:[],cfg_scale:7,steps:"textToImage"!==i?20:m,seed:-1,seedsdxl:-1,seedMode:"random",seedModesdxl:"random",width:r.width||768,height:r.height||768,imageMode:"expansion"===i?3:"textToImage"===i?h:d,realWidth:0,realHeight:0,restore_faces:!1,sampler_name:"DPM++ 2M Karras",vae:this.handleResetVae(i),lcm_mode:0,clip_skip:1,denoising_strength:.35,workIndex:["imageToImage","animGen","characterRepair"].includes(i)?3:0,controlnet_units:["imageToImage","animGen","characterRepair"].includes(i)?[]:[this.getControlNet()],imageUrl:["imageToImage","animGen","characterRepair"].includes(i)?["","","",""]:[""],imgFiles:["imageToImage","animGen","characterRepair"].includes(i)?[{},{},{},{}]:[{}],scaling_ratio:2,n_iter:f||1,up_scaler:"4x-UltraSharp",action:O[i],mask:"",tempMask:"",copyMask:"",keepDenoisingStrength:!1,channelZoom:!0,styleZoom:!0,advancedZoom:!1,characterRepairZoom:!1,promptMagicZoom:!1,faceSwapZoom:!0,enablePromptMagic:!0,enable_hr:!1,advanceRepairZoom:"characterRepair"===i,hr_upscaler:"",hr_second_pass_steps:20,hr_upscaler_redraw:.5,hr_scale:1.5,sdxl:{prompt_magic:.4,prompt_style:"Fantasy Art",width:832,height:1216},studio:{style:"classic",width:1152,height:896},lab_base:{conds:"conditionToImage"!==i?[]:[{image:"",mode:"PyraCanny",stop_at:.5,weight:1}],style_selections:["Studio Enhance","Studio Expand"],expand_token_length:10,hdr_enabled:!0,hdr_intensity:.5,auto_brightness_open:!0,auto_brightness_strength:75,auto_adjust_open:!1,auto_adjust_strength:20,semantics_open:!1,film_turbo:0,sharpness:2,scheduler:"karras",quality_open:!1,quality_detail_offset:.45,quality_mode:1,quality_type:"anime",intelligence_open:!1,prompt_magic:!0},roopZoom:!1,roop_arg:{face_restorer_visibility:.6,image:""},exchange_face:{target_uri:"",face_distance:1.5,source_uri:""},ad_model:"characterRepair"===i?"face":"",ad_units:{lora:{},ad_denoising_strength:.3,ad_confidence:.3,prompt:"",negative_prompt:""},isTranslate:!1,generateing:!1,controlnet_processor_res:512,category:t&&this.menuIndex===i?this.config[i].category:"textToImage"!==i||t?1:this.getTextToImageCategory(),left_margin:0,up_margin:0,MJ:{local_prompt:"",prompt:"",art_work_no:""},isDrag:!1,speed_type:this.config[i].speed_type,isUploadImage:!1,isRead:!0,animatediff:{lora:"",weight:1,category:0},logEventSource:0,refiner_mode:0,refiner_switch_at:.8,tabIndex:"normal",embeddings:[]};if("textToImage"===i&&(v.width=l.width||768,v.height=l.height||768),e)try{var _,y;null===(_=(v=Object.assign({},v,n[i]||{}))[this.menuIndex])||void 0===_||_.category;v.generateing=!1,v.speed_type=this.config[i].speed_type,v.keepDenoisingStrength=!1,v.logEventSource=0,((null===(y=v)||void 0===y?void 0:y.imgFiles)||[]).forEach((function(e){["",null,void 0].includes(e)||(e.uploading=!1)}))}catch(e){}try{t&&(v.prompt=c[i].prompt||"",v.local_prompt=c[i].local_prompt||"")}catch(e){}this.$set(this.config,i,v)}if(t){var x=this.config[this.menuIndex];[7,"7"].includes(x.category)&&this.resetStudioParams(),this.creativeMode=P[x.category]||1,x.tabIndex=this.creativeMode}},getCacheConfig:function(){var e=null;try{e=localStorage.getItem("cacheConfig")||null,e=JSON.parse(e)||null}catch(e){}return e},getImageMode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=localStorage.getItem("imageMode");("textToImage"===this.menuIndex||"textToImage"===e)&&Number(t)>3&&(t=3);var n=(null==this?void 0:this.image_mode)||2;t=t&&[1,2,3,4,"1","2","3","4"].includes(t)?Number(t):n,localStorage.setItem("imageMode","".concat(t));var r={1:512,2:768,3:1024,4:1536},o=r[t]?r[t]:768;return{imageMode:t,width:Number((o/3*2).toFixed(0)),height:o,baseSize:o}},getImageNums:function(){var e=localStorage.getItem("imageNums")||2;return e?["1","2","3","4",1,2,3,4].includes(e)?Number(e):2:this.isStudioSD35Mode?4:void 0},getTextToImageCategory:function(){var e=localStorage.getItem("defaultCategory")||1;return[1,2,4,5,6,7,"1","2","3","4","5","6","7"].includes(e)?Number(e):1},resizeImageSizeByImageMode:function(e,t,n){if("expansion"===n)return{width:e,height:t};var r=this.getImageMode();return e>r.baseSize||t>r.baseSize?Object(v.g)(e,t,r.baseSize):{width:e,height:t}},getControlNet:function(){return{type:this.defaultModule,processor_res:512,module:this.defaultModule,model:this.getModel()||"",control_mode:"0",threshold_a:.5,weight:1,isHandle:!0}},closePopup:function(){if(this.isHistory=!0,this.token&&"LandingPage"===this.$route.name)this.$router.replace("/");else{this.isShowPopup=!1,localStorage.setItem("cacheConfig",JSON.stringify(this.config));try{var e;null===(e=this.$refs.easyGenerate)||void 0===e||e.saveConfig()}catch(e){}this.$store.dispatch("creation/setGenerateViewShow",this.isShowPopup),this.$store.dispatch("creation/setGenerateTaskNum",0)}},handleParams:function(e,t){var n=this.accountSettingsData.is_off_localization,r=["mask","mask_blur","inpainting_fill","inpainting_mask_invert","inpaint_full_res","inpaint_full_res_padding"];"imageToImage"===this.menuIndex&&(r=e.meta.mask?r.slice(1):r);var o,c=e.local_prompt,l=e.parent_task_id,d=e.operate_number,h=e.meta,f=h.prompt,m=(h.sampler_name,e.action),_=e.channel,y=e.art_model,w=(e.banner,e.task,y||{}),x=w.name,k=w.id,S=w.agency_fee,O=void 0===S?0:S,j=w.is_agency_fee,T=void 0!==j&&j;if("textToImage"===this.menuIndex){var P=Object(v.d)(_);localStorage.setItem("defaultCategory",P),e.meta.category=P}(t||(e.meta.imageMode=this.setImageModel(e.meta)),k)&&(e.meta.art_model_no=k,e.meta.modelName=x,e.meta.agency_fee=O||0,e.meta.is_agency_fee=T||!1,e.meta.model_cover=(null==y||null===(o=y.banner)||void 0===o?void 0:o.url)||"",e.meta.art_model_ver_no_name=(null==y?void 0:y.version_name)||"",e.meta.base_model_type=(null==y?void 0:y.base_model)||"",e.meta.modelTags=this.getStudioModelTags(y));return y&&y.id==e.id&&(y.model_ver_no=e.model_ver_no),3===e.meta.category&&this.handleCategoryDisplay(e.meta),e.meta.local_prompt=c,e.meta=I(I({},e.meta),{},{action:m},this.handleSize(e.meta,this.menuIndex)),n||(e.meta.prompt=c,e.meta.local_prompt=f),l&&(e.meta.parent_task_id=l),d&&(e.meta.operate_number=d),Object.keys(e.meta).forEach((function(t){r.includes(t)&&delete e.meta[t]})),e},handleSize:function(meta,e){var t=meta.width,n=meta.height,r=meta.realWidth,o=meta.realHeight,c=meta.imageMode;if("expansion"===e)return{width:t,height:n};var l=(t=r||t)/(n=o||n),d=this.getMaxSize(c);if((t>d||n>d)&&(l>1?(t=d,n=parseInt(d/l)):(n=d,t=parseInt(d*l))),t<d||n<d){var h=Object(v.g)(meta.width,meta.height,d);t=h.width,n=h.height}return{width:t,height:n}},setImageModel:function(e){var t=e.width,n=e.height,r=t>n?t:n,o=[512,768,1024,1536].findIndex((function(e){return r<=e}));return o>-1?o+1:3},getMaxSize:function(e){var t=this.config[this.menuIndex].imageMode;return t=e||t,w.j[t-1].width},imgReadInfo:function(data,e){this.config[e]=this.handleMeta(I(I({},this.config[e]),data),e)},getModel:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultModule,r=(["5",5,"sdxl","SDXL"].includes(null===(e=this.config[this.menuIndex])||void 0===e?void 0:e.category)?this.taskSdxlUnits:this.taskUnits).find((function(i){return i.type==n}))||{},o=(null==r||null===(t=r.models)||void 0===t?void 0:t[0])||"",c=this.taskModules.findIndex((function(e){return e===n})),l=this.taskModels[c];return o||l},sendParams:function(e){var t=this.config[e],n=t.module,r=t.isHandle,o=t.action,c=t.advancedZoom,l=t.styleZoom,d=t.channelZoom,h=t.lab_base,f={module:n,isHandle:r,action:o,advancedZoom:c,styleZoom:l,channelZoom:d},m=this.config[this.menuIndex],v=m.imageUrl,_=m.imgFiles;"conditionToImage"===e&&(this.isFirstOpen=!this.isFirstOpen&&this.isFirstOpen,f=I(I({},f),{},{ad_model:"",enable_hr:!1,workIndex:0,controlnet_units:[this.getControlNet()],imageUrl:[v[3]]})),"imageToImage"!==e&&"animGen"!==e&&"characterRepair"!==e||(f=I(I({},f),{},{workIndex:3,controlnet_units:[],imageUrl:["","","",v[0]],imgFiles:[{},{},{},_[0]||{}]}));var y=Object(x.cloneDeep)(I(I(I({},this.config[this.menuIndex]),f),{},{isRead:!1}));if(y.lab_base.conds="conditionToImage"===e?[{image:"",mode:"PyraCanny",stop_at:.5,weight:1}]:[],"textToImage"===e)try{null!=h&&h.quality_open?(y.lab_base.scheduler=h.scheduler||"karras",y.sampler_name=this.config[e].sampler_name||"dpmpp_2m_sde_gpu"):y.lab_base.quality_open=h.quality_open}catch(e){}this.config[e]=y,this.changeMenu(e,this.creativeMode,"send")},showControlnetPopup:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.controlnetPopup.show(e,this.menuIndex)},resetControlNetParams:function(e){var t=this,n=e.workIndex,r=e.controlnet_units,o=["5",5,"sdxl","SDXL"].includes(e.category),c=this.checkIsStudioMode(e.category),l=o?this.taskSdxlUnits:this.taskUnits;c&&(l=this.lab_ctr_units||[]);var d=l.find((function(i){return i.type==t.defaultModule}))||{};r[n].type=this.defaultModule,r[n].model=(null==d?void 0:d.default_model)||"None",r[n].module=(null==d?void 0:d.default_module)||"none"},changeCategory:function(e){var t=this,n=JSON.parse(JSON.stringify(this.config[this.menuIndex]));n.embeddings=[];var r=n.MJ,o={MJ:{},category:this.getConfigCategory(),workIndex:Number(n.workIndex)};if([1,5].includes(n.category)&&"conditionToImage"===this.menuIndex&&this.resetControlNetParams(n),3!==e&&3!==n.category||(["local_prompt","prompt","art_work_no"].forEach((function(e){o.MJ[e]=n[e]})),o=I(I({},o),r)),o.category=e,this.handleModelType()){if([5,"5"].includes(o.category)){var c,l;o.cfg_scale=7,o.steps=30,o.enablePromptMagic=!0,o.sdxl={prompt_magic:.4,prompt_style:"Fantasy Art",width:(null===(c=n.sdxl)||void 0===c?void 0:c.width)||832,height:(null===(l=n.sdxl)||void 0===l?void 0:l.height)||1216};var d=this.sd_xl_base_model[0];o.art_work_no="",o.agency_fee=0,o.is_agency_fee=!1,o.art_model_no=d.id,o.modelName=d.name,o.model_cover=(null==d?void 0:d.cover)||"",o.art_model_ver_no_name=(null==d?void 0:d.model_ver_name)||"",o.art_model_ver_no=(null==d?void 0:d.model_ver_no)||"",o.lora_models=[],o.sampler_name="DPM++ 2M Karras",o.base_model_type=(null==d?void 0:d.base_model)||"",o.modelTags=this.getStudioModelTags(d),o.vae="None"}else o.cfg_scale=7,o.steps=20,o.sampler_name="DPM++ 2M Karras",o.vae="vae-ft-mse-840000-ema-pruned";if(1==o.category)try{var h=this.taskBaseModels[0];o.art_model_no=h.id,o.modelName=h.name,o.model_cover=(null==h?void 0:h.cover)||"",o.is_agency_fee=!1,o.agency_fee=0,o.art_model_ver_no_name=(null==h?void 0:h.model_ver_name)||"",o.art_model_ver_no="",o.art_work_no="",o.lora_models=[],o.base_model_type=(null==h?void 0:h.base_model)||"",o.modelTags=this.getStudioModelTags(h),o.negative_prompt=this.getDefaultNegativePrompt("textToImage");var f={lab_base:{conds:[],style_selections:["Studio Enhance","Studio Expand"],expand_token_length:10,hdr_enabled:!0,hdr_intensity:.5,auto_brightness_open:!0,auto_brightness_strength:75,auto_adjust_open:!1,auto_adjust_strength:20,semantics_open:!1,film_turbo:0,sharpness:2,scheduler:"karras",custom_height_width:!1,quality_open:!1,quality_detail_offset:.45,quality_mode:1,quality_type:"anime",intelligence_open:!1,prompt_magic:!0},studio:{style:"classic",width:1152,height:896}};o.lab_base=f.lab_base,o.studio=f.studio}catch(e){}var m=["5",5,"sdxl","SDXL"].includes(o.category)?this.taskSdxlUnits:this.taskUnits;n.controlnet_units.forEach((function(e){var n,r=m.find((function(i){return i.type==e.type}))||{},o=(null==r||null===(n=r.models)||void 0===n?void 0:n[0])||"";t.$set(e,"model",o)}))}localStorage.setItem("defaultCategory",o.category),this.config[this.menuIndex]=I(I({},n),o)},handleSetCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";this.config[this.menuIndex].category=T[e],this.config[this.menuIndex].tabIndex=e},resetStudioParams:function(){var e=this,t={negative_prompt:"",cfg_scale:6,steps:30,category:7,sampler_name:"dpmpp_2m_sde_gpu",denoising_strength:.5,base_model_type:"",modelTags:[],embeddings:[],lab_base:{conds:[],style_selections:["Studio Enhance","Studio Expand"],expand_token_length:10,hdr_enabled:!0,hdr_intensity:.5,auto_brightness_open:!0,auto_brightness_strength:75,auto_adjust_open:!1,auto_adjust_strength:20,semantics_open:!1,film_turbo:0,sharpness:2,scheduler:"karras",custom_height_width:!1,quality_open:!1,quality_detail_offset:.45,quality_mode:1,quality_type:"anime",intelligence_open:!1,prompt_magic:!0},studio:{style:"classic",width:1152,height:896}};try{var n=["imageToImage","conditionToImage"],r=(this.lab_base_model||[]).filter((function(t){var r=((null==t?void 0:t.base_model)||"").includes("SD 3.5");return n.includes(e.menuIndex)?!((null==t?void 0:t.id)===e.fluxModelId||r):t}))[0];t.art_model_no=r.id,t.modelName=r.name,t.art_work_no="",t.lora_models=[],t.model_cover=(null==r?void 0:r.cover)||"",t.is_agency_fee=!1,t.agency_fee=0,t.art_model_ver_no_name=(null==r?void 0:r.model_ver_name)||"",t.art_model_ver_no=(null==r?void 0:r.model_ver_no)||"",t.base_model_type=(null==r?void 0:r.base_model)||"",t.modelTags=this.getStudioModelTags(r);var o=((null===w.B||void 0===w.B?void 0:w.B.sa)||[]).includes(null==t?void 0:t.base_model_type),c=["textToImage"].includes(this.menuIndex)&&(t.art_model_no===this.fluxModelId||o),l=this.getStudioDefaultStyle(t.base_model_type,c);t.studio.width=l.width,t.studio.height=l.height}catch(e){}if(["textToImage","imageToImage","conditionToImage"].includes(this.menuIndex)){var d=Object.assign(this.config[this.menuIndex],t);"conditionToImage"===this.menuIndex&&(d.lab_base.conds=(d.controlnet_units||[]).map((function(t){return e.$set(t,"type","canny"),{image:"",mode:"PyraCanny",stop_at:.5,weight:1}}))),this.$set(this.config,this.menuIndex,d)}},checkStudioParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{e.steps<25&&(e.steps=30),e.lab_base.quality_mode||(e.lab_base.quality_mode=1)}catch(e){}return e},getCurrentModelType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null===w.B||void 0===w.B?void 0:w.B.flux,n=(null===w.B||void 0===w.B?void 0:w.B.sa)||[],r=null===w.B||void 0===w.B?void 0:w.B.sd35,o=["SDXL 1.0","SDXL 0.9","SDXL Turbo","SDXL 1.0 LCM","SDXL Lightning","Pony","SDXL Hyper"].includes(e)||(e||"").includes("SDXL"),c=["SD 1.5","SD 2.0","SD 1.4","SD 2.1 768","SD 2.1","SD 2.0 768","SD 1.5 LCM"].includes(e),l=["SD 3"].includes(e),d=t.includes(e)||(e||"").includes("Flux"),h=r.includes(e)||(e||"").includes("SD 3.5");return n.includes(e)?"SA":d?"FLUX":o?"SDXL":c?"SD":l?"SD3":h?"SD 3.5":void 0},getStudioDefaultStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getCurrentModelType(e),r={width:832,height:1216,min:768,max:1536};return"SD"===n&&(r={width:624,height:936,min:512,max:1024}),(t||"SA"===n)&&(r={width:688,height:1024,min:384,max:1024}),r},getStudioModelTagsType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(null==e?void 0:e.modelTags)||[],n=this.lab_style_enhancement_tag||{},r=n.anime,o=void 0===r?[]:r,c=n.realism,l=void 0===c?[]:c,d=(o||[]).some((function(e){return null==t?void 0:t.includes(e)})),h=(l||[]).some((function(e){return null==t?void 0:t.includes(e)}));return d?"anime":h&&!d?"realistic":"anime"},changeHandle:function(e){if(console.log("切换频道"),(null==e?void 0:e.creativeMode)&&this.handleSetCategory(e.creativeMode),e.channelId&&localStorage.setItem("channelId",e.channelId),Object.assign(this,e),"sdxl"===e.creativeMode&&this.changeCategory(5),"studio"===e.creativeMode){var t=Number(localStorage.getItem("speed_type")),n=this.isOnlyVipLite||!t?2:t;for(var i in this.config)this.config[i]=I(I({},this.config[i]),{},{speed_type:this.isVip?n:1});this.resetStudioParams()}if("normal"===e.creativeMode){var r=Number(localStorage.getItem("speed_type")),o=this.isOnlyVipLite||!r?2:r;for(var c in this.config)this.config[c]=I(I({},this.config[c]),{},{speed_type:this.isVip?o:1});1==this.getConfigCategory()&&this.changeCategory(1)}this.handleModelType()||(this.menuIndex="textToImage"),this.config[this.menuIndex].lcm_mode=0},handleChannelInviteCode:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=localStorage.getItem("channelInviteCode")){t.next=3;break}return t.abrupt("return");case 3:if(!e.userInfo.id){t.next=9;break}return t.next=6,Object(m.d)({channel_id:n});case 6:r=t.sent,o=r.data.name,e.openChannelInvitePopup(o);case 9:case"end":return t.stop()}}),t)})))()},openChannelInvitePopup:function(e){var t=this;this.$confirm(this.$t("ChannelInviteTitle")+e,this.$t("Tip"),{confirmButtonText:this.$t("Agree"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){t.isShowPopup=!0,t.setDefaultMeta({active:1,data:{}}),t.handleType="CHANNEL"})).catch((function(){localStorage.removeItem("channelInviteCode")}))},viewChannelPerson:function(){this.$refs.channelPersonPopup.show(!0,this.channelInfo)},updateStudioControlNet:function(e,t,n){var r=this;try{(this.config[this.menuIndex].lab_base.conds||[]).forEach((function(o,c){c===n&&r.$set(o,t,e)}))}catch(e){}},addControlNet:function(i){this.config[this.menuIndex].imageUrl[i]="";var e=this.config[this.menuIndex],t=e.controlnet_units,n=e.category;t[i]=this.getControlNet(),this.checkIsStudioMode(n)&&this.config[this.menuIndex].lab_base.conds.push({image:"",mode:"PyraCanny",stop_at:.5,weight:1}),this.config[this.menuIndex].workIndex=i,this.$set(this.config[this.menuIndex],"controlnet_units",t)},changeWorkTab:function(e,t){var n,r=this.config[this.menuIndex],o=r.controlnet_units,c=r.imageUrl,l=r.imgFiles,d=r.workIndex,h=r.category;if(null!==(n=l[d])&&void 0!==n&&n.uploading)return this.$message.warning(this.$t("uploadingWaitTip")),!1;if(t){var f=c.splice(3,1),m=l.splice(3,1);if(o.splice(e,1),c.splice(e,1),l.splice(e,1),f.length&&(c[3]=f[0]),m.length&&(l[3]=m[0]),this.checkIsStudioMode(h))try{this.config[this.menuIndex].lab_base.conds.splice(d,1)}catch(e){}this.config[this.menuIndex].workIndex=this.getWorkIndex(d,e,o)}else this.config[this.menuIndex].workIndex=e;this.$set(this.config,this.menuIndex,this.config[this.menuIndex])},getWorkIndex:function(e,t,n){return 3===e?e:e===t?n.length?0:3:e>t?n.length-1:e},setResizeInfo:function(e){var t=this.config.expansion;!t.isDrag&&e.isDrag&&(e.prompt="",e.local_prompt="",e.isTranslate=!1),this.$set(this.config,"expansion",I(I({},t),e))},clearMask:function(){this.config.imageToImage.mask=""},checkCharacterRepair:function(){["",null,void 0].includes(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")?this.config.imageToImage.ad_model="":this.clearMask()},setTextToImagePrompt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.config.textToImage.prompt=e},setUploadImageStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.config[this.menuIndex].isUploadImage=t},changeReadOff:function(e){this.readOff=e},changeSpeedType:function(){var e=Number(localStorage.getItem("speed_type")),t=this.isOnlyVipLite||!e?2:e;if(this.paymentInfoDone&&this.userInfoDone)for(var i in this.config)this.config[i]=I(I({},this.config[i]),{},{speed_type:this.isVip?t:1})},handleWorkIndex:function(){return["imageToImage","animGen","characterRepair"].includes(this.menuIndex)},getConfigCategory:function(){return this.config[this.menuIndex].category},handleModelType:function(){return["textToImage","imageToImage","conditionToImage"].includes(this.menuIndex)},handleResetVae:function(e){return"sdxl"===this.creativeMode&&5===this.config[this.menuIndex].category&&e===this.menuIndex?"None":"vae-ft-mse-840000-ema-pruned"},checkIsStudioMode:function(){return["7","11",7,11,"studio"].includes(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}})}},3045:function(e,t,n){"use strict";n(9),n(7),n(11),n(12),n(8),n(4),n(6);var r=n(2),o=n(1);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{isShowSubBanner:!1}},computed:l(l(l({},Object(o.e)("user",["userInfo"])),Object(o.e)("payment",["paymentInfo"])),Object(o.c)("user",["isLoggedIn"])),methods:{setSubBanner:function(){var e=localStorage.getItem("SubBannerTime"),t=!e||((new Date).getTime()-e)/1e3/3600>24;this.isShowSubBanner=!this.isVip&&t&&this.isLoggedIn},closeSubBanner:function(){this.isShowSubBanner=!1},isOldUser:function(){var e=this.userInfo.create_at,t=void 0===e?"":e;return!t||((new Date).getTime()-t)/1e3/3600>24},isNewDay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bannerPopupTime",t=localStorage.getItem(e);return!t||t<=(new Date).getTime()},openBannerPopup:function(){this.setSubBanner()}}};t.a=d},3050:function(e,t,n){e.exports={chunk:n(4172),compact:n(4173),concat:n(4174),difference:n(4175),differenceBy:n(4176),differenceWith:n(4177),drop:n(4178),dropRight:n(4179),dropRightWhile:n(4180),dropWhile:n(4181),fill:n(4182),findIndex:n(4186),findLastIndex:n(4187),first:n(4188),flatten:n(3752),flattenDeep:n(4189),flattenDepth:n(4190),fromPairs:n(4191),head:n(3767),indexOf:n(4192),initial:n(4193),intersection:n(4194),intersectionBy:n(4195),intersectionWith:n(4196),join:n(4197),last:n(3482),lastIndexOf:n(4198),nth:n(4200),pull:n(4202),pullAll:n(3768),pullAllBy:n(4204),pullAllWith:n(4205),pullAt:n(4206),remove:n(4211),reverse:n(4212),slice:n(4213),sortedIndex:n(4214),sortedIndexBy:n(4215),sortedIndexOf:n(4216),sortedLastIndex:n(4217),sortedLastIndexBy:n(4218),sortedLastIndexOf:n(4219),sortedUniq:n(4220),sortedUniqBy:n(4221),tail:n(4222),take:n(4223),takeRight:n(4224),takeRightWhile:n(4225),takeWhile:n(4226),union:n(4227),unionBy:n(4229),unionWith:n(4230),uniq:n(4231),uniqBy:n(4232),uniqWith:n(4233),unzip:n(3696),unzipWith:n(3771),without:n(4234),xor:n(4235),xorBy:n(4236),xorWith:n(4237),zip:n(4238),zipObject:n(4239),zipObjectDeep:n(4240),zipWith:n(4242)}},3090:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),o=(n(4),n(20),n(5)),c={data:function(){return{captchaAction:"",captchaToken:""}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadCaptcha();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("Google Captcha failed to load or execute",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},methods:{loadCaptcha:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=window)||void 0===t||!t.grecaptcha||null===(n=window)||void 0===n||null===(n=n.grecaptcha)||void 0===n||!n.enterprise){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(o.w)("https://www.recaptcha.net/recaptcha/enterprise.js?render=".concat("6LfuV2wqAAAAAJ83QW1gae0CmT7GrgzzecQbFpJ5"));case 5:return e.next=7,new Promise((function(e,t){var n,r;null!==(n=window)&&void 0!==n&&n.grecaptcha&&null!==(r=window)&&void 0!==r&&null!==(r=r.grecaptcha)&&void 0!==r&&r.enterprise?grecaptcha.enterprise.ready(e):t(new Error("grecaptcha.enterprise not available"))}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Google Captcha failed to load or execute",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},getCaptchaToken:function(){var e=arguments,t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:"",n.prev=1,null!==(o=window)&&void 0!==o&&null!==(o=o.grecaptcha)&&void 0!==o&&o.enterprise){n.next=4;break}return n.abrupt("return");case 4:return t.captchaAction=r,n.next=7,grecaptcha.enterprise.execute("6LfuV2wqAAAAAJ83QW1gae0CmT7GrgzzecQbFpJ5",{action:r});case 7:t.captchaToken=n.sent,console.log("getToken captchaToken"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.error("Error executing recaptcha:",n.t0);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()},updateCaptcha:function(){var e=arguments,t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=e.length>0&&void 0!==e[0]?e[0]:"",t.captchaAction=c,null===(r=window)||void 0===r||!r.grecaptcha||null===(o=window)||void 0===o||null===(o=o.grecaptcha)||void 0===o||!o.enterprise){n.next=7;break}return n.next=5,t.getCaptchaToken(c);case 5:n.next=18;break;case 7:return n.prev=7,n.next=10,t.loadCaptcha();case 10:return n.next=12,t.getCaptchaToken(c);case 12:console.log("captchaToken",t.captchaToken),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(7),console.log("Google Captcha failed to load or execute",n.t0);case 18:case"end":return n.stop()}}),n,null,[[7,15]])})))()}}}},3113:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),o=(n(20),{data:function(){return{captchaAction:"",captchaToken:""}},mounted:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{createWorkFlowAppTask:function(e){try{this.$refs.GenerateResultsRef.addHeadItem(e)}catch(e){}}}})},3230:function(e,t,n){"use strict";n(4170)},3231:function(e,t,n){"use strict";var r=n(46),o=n(3688),c=n(158),l=n(146),d=n(157),h=n(574);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=l(this),r=d(n);return c(e),(t=h(n,0)).length=o(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},3232:function(e,t,n){"use strict";n(568)("flatMap")},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n(9),n(11),n(12);var r=n(15),o=(n(232),n(44),n(88)),c=n.n(o),l=n(2),d=(n(7),n(47),n(10),n(19),n(36),n(14),n(8),n(4),n(18),n(6),n(21)),h=n(30),f=n(1),m=n(42);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={data:function(){return{isCollecting:!1,followLoading:!1,likeLoading:!1,isAppealLoading:!1}},computed:_(_(_(_({},Object(f.e)("user",["collectData","followData","likeData","portfolioData","WaterFallDeleteLits","likeDataIds","collectDataIds"])),Object(f.c)("user",["isLoggedIn"])),Object(f.e)("payment",["productLevel"])),{},{setCollectData:function(){var e=this.collectData,t=this.collectDataIds;return function(n){if(e&&e.ids&&e.ids.includes(n.id)){var r,o,c;if(null!=e&&null!==(r=e.collect)&&void 0!==r&&r.collection_id&&(null==e||null===(o=e.collect)||void 0===o||!o.id))return"icon-collect_selected";this.$set(n,"collect",e.collect);var l=9===n.obj_type?null===(c=n.character)||void 0===c?void 0:c.stat:n.stat;e.num_of_collection>=0&&l&&this.$set(l,"num_of_collection",e.num_of_collection)}return this.isLoggedIn&&(n.collect||t.includes(n.id))?"icon-collect_selected":"icon-collect-gpt"}},setFollowData:function(){var e=this.followData;return function(t){return e.id==t.id&&this.$set(t.author,"is_follow",e.is_follow),this.isLoggedIn&&t.author.is_follow?"followed":"follow"}},setlikeData:function(){var e=this.likeData,t=this.likeDataIds;return function(n){return e.id==n.id&&(this.$set(n,"liked",e.liked),e.num_of_like>=0&&(n.stat&&this.$set(n.stat,"num_of_like",e.num_of_like),(n.num_of_praise||0==n.num_of_praise)&&this.$set(n,"num_of_praise",e.num_of_like))),this.isLoggedIn&&(n.liked||t.includes(n.id))?"icon-like_selected":"icon-like"}},setPortfolioList:function(){var e=this.portfolioData;return function(t,n){return t.forEach((function(element){var t,n;element&&e.ids&&e.ids.includes(element.id)&&(null!=e&&null!==(t=e.folder_no)&&void 0!==t&&t.collection_id?null!=element&&null!==(n=element.folder_no)&&void 0!==n&&n.collection_id&&(element.folder_no.collection_id=e.folder_no.collection_id,e.folder_no.collection_name&&(element.folder_no.collection_name=e.folder_no.collection_name)):element.folder_no=null)})),"all"==n?t.filter((function(e){return e})):t.filter((function(e){return e.folder_no&&e.folder_no.collection_id==n}))}},setCollectList:function(){var e=this.collectData;return function(t,n){return t.forEach((function(element){var t,n,r;element&&e.ids&&e.ids.includes(element.id)&&(null!=e&&null!==(t=e.collect)&&void 0!==t&&t.collection_id?null!=element&&null!==(n=element.collect)&&void 0!==n&&n.collection_id?(element.collect.collection_id=e.collect.collection_id||"default",null!==(r=e.collect)&&void 0!==r&&r.collection_name&&(element.collect.collection_name=e.collect.collection_name)):element.collect=e.collect:element.collect=null)})),"all"==n?t.filter((function(e){return e.collect})):t.filter((function(e){return e.collect&&e.collect.collection_id==n}))}}}),methods:_(_({},Object(f.d)("user",["changeCollectData","changeFollowData","changeLikeData","changePortfolioData","setWaterFallDeleteLits","changeLikeDataIds","changeCollectDataIds"])),{},{setCollect:function(e,t){var n,r,o=this;if(console.log("点击收藏",e,t,this.isLoggedIn),!this.isLoggedIn)return this.$logEvent("log_actions",{operation:"register_popup",behavior_info:"click_collect",behavior_info_sub:(null==this||null===(n=this.dotReportInfo)||void 0===n?void 0:n.view_domain)||""}),void(null!==(r=this.$route)&&void 0!==r&&null!==(r=r.name)&&void 0!==r&&r.includes("aiChat")?this.$EventBus.$emit("openLoginDialog",{callBack:function(){return o.$emit("newChat")}}):this.$EventBus.$emit("openLoginDialog"));var c=e.collect&&e.collect.id,l=e.id,d=e.obj_type,h=e.ai_video,f=e.pt;d=h?d+"_"+(null==h?void 0:h.video_type):d,this.$logEvent("log_actions",{operation:(c?"cancel_":"")+"collect",obj_type:d,behavior_info:l,behavior_info_sub:f}),c?this.unFavorite(e,t):this.addFavorite(e,t)},setResourceAppeal:function(e){var t=this;this.isAppealLoading||(this.isAppealLoading=!0,Object(d.cb)(e).then((function(e){c()({message:t.$t("appealSuccess"),type:"success",duration:5e3}),t.appealShow=!1})).finally((function(){e.remark&&(e.remark=""),t.isAppealLoading=!1,t.appealShow=!1})))},addFavorite:function(e,t,n,r){var o=this,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5?arguments[5]:void 0;if(console.log("收藏",e,t),this.$emit("addFavorite"),!this.isCollecting){this.isCollecting=!0;var f={collection_no:n?n.id:null};"artwork"==t&&(f.artwork_no=e.id,this.$logEvent("log_actions",{operation:"quick_collect",behavior_info:"click_collect_icon",behavior_info_sub:e.id})),"model"==t&&(f.art_model_no=e.id,this.$logEvent("log_actions",{operation:"collect_model",behavior_info:e.id})),"lookbook"!=t&&"gallery"!=t||(f.post_no=e.id,this.$logEvent("log_actions",{operation:"click_collect_post_button"})),"palette"==t&&(f.tpl_no=e.id),"swtft_app"!=t&&"workflow"!=t||(f.comfy_ui_no=e.id),"character"===t&&(f.character_no=(null==e?void 0:e.id)||"",this.$logEvent("log_actions",{operation:"click_collect",behavior_info:"on_tavern_page"})),"ai_video"===t&&(f.video_no=e.id),"ai_audio"===t&&(f.timbre_no=(null==e?void 0:e.id)||"",this.$logEvent("log_actions",{operation:"click_collect",behavior_info:"on_ai_audio_waterfall_flow",behavior_info_sub:null==e?void 0:e.id}));var m=this.getDotInfo(e,t,"collection");Object(d.f)(f).then((function(c){var d;if(1e4==c.status.code){Object(h.g)({items:[m]});var f={ids:[e.id],collect:{collection_id:n?n.id:"default",collection_name:n?n.name:"default",id:c.data.id}},v=9===e.obj_type&&(null===(d=e.character)||void 0===d?void 0:d.stat)||e.stat;if(v){var _=v.num_of_collection;_++,f.num_of_collection=_,v.num_of_collection=_}o.changeCollectData(f),o.changeCollectDataIds({id:e.id,type:"add"}),o.isCollecting=!1,"function"==typeof r&&r(c.data),l||o.$EventBus.$emit("setCollectMsgBox",e,t,m)}})).catch((function(e){"function"==typeof c&&c(e),o.isCollecting=!1}))}},unFavorite:function(e,t){var n=this;if(console.log("取消收藏",e,t),!this.isCollecting){this.isCollecting=!0;var r=this.getDotInfo(e,t,"cancel_collection");Object(d.h)({id:e.collect.id}).then((function(o){var c;if(1e4==o.status.code){n.$emit("unFavorite",e),Object(h.g)({items:[r]});var l={ids:[e.id],collect:null},d=9===e.obj_type&&(null===(c=e.character)||void 0===c?void 0:c.stat)||e.stat;if(d){var f=d.num_of_collection;f--,l.num_of_collection=f,d.num_of_collection=f}n.changeCollectData(l),n.changeCollectDataIds({id:e.id,type:"del"}),n.isCollecting=!1,"character"===t?(formData.character_no=(null==e?void 0:e.id)||"",n.$logEvent("log_actions",{operation:"click_cancel_collect",behavior_info:"on_tavern_page"})):n.$logEvent("log_actions",{operation:"model"==t?"cancel_collect_model":"cancel_collect_image",behavior_info:e.id})}})).catch((function(e){n.isCollecting=!1}))}},unBatchFavorite:function(e,t,n){var o=this;this.isCollecting||(this.isCollecting=!0,Object(d.g)({ids:t?e.folderNos:e.collectIds,category:t?2:null}).then((function(c){if(1e4==c.status.code){var l=Object(r.a)(e.ids),d={};t?(d={ids:l,folder_no:null},o.changePortfolioData(d)):(d={ids:l,collect:null},o.changeCollectData(d)),o.isCollecting=!1,"function"==typeof n&&n(c.data)}})).catch((function(e){o.isCollecting=!1})))},moveFavorite:function(e,t,n,o){var c=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!this.isCollecting){this.isCollecting=!0;var h={folder_no:t?t.id:null,ids:n?e.folderNos:e.collectIds,category:n?2:null};Object(d.i)(h).then((function(l){if(1e4==l.status.code){var d=Object(r.a)(e.ids),h={};n?(h={ids:d,folder_no:{collection_id:t?t.id:"default",collection_name:t?t.name:"default"}},c.changePortfolioData(h)):(h={ids:d,collect:{collection_id:t?t.id:"default",collection_name:t?t.name:"default"}},c.changeCollectData(h)),c.isCollecting=!1,"function"==typeof o&&o(l.data)}})).catch((function(e){"function"==typeof l&&l(e),c.isCollecting=!1}))}},setFollow:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!this.followLoading){this.followLoading=!0;var r={follow_account_no:e.author.id};e.author.is_follow?Object(d.w)(r).then((function(r){1e4==r.status.code&&(t.$logEvent("log_actions",{operation:"unfollow",behavior_info:n||e.author.id}),t.changeFollowData({id:e.id,is_follow:!1}),t.followLoading=!1)})):Object(d.v)(r).then((function(r){1e4==r.status.code&&(t.$logEvent("log_actions",{operation:"follow",behavior_info:n||e.author.id}),t.changeFollowData({id:e.id,is_follow:!0}),t.followLoading=!1)}))}},setLike:function(e,t,n){var r=this,o={artwork:1,model:2,account:3,gallery:4,post:4,lookbook:5,character:9,palette:11,swtft_app:13,workflow:13,ai_video:15,ai_audio:16};if(!Object(m.l)()){var c;this.$logEvent("log_actions",{operation:"register_popup",behavior_info:"click_like",behavior_info_sub:(null==this||null===(c=this.dotReportInfo)||void 0===c?void 0:c.view_domain)||""});var l={};return"ai_video_detail"==n&&(l={callBack:function(){location.reload()}}),void this.$EventBus.$emit("openLoginDialog",l)}var d=e.id,f=e.obj_type,v=e.ai_video,_=e.pt;if(f=v?f+"_"+(null==v?void 0:v.video_type):f,this.$logEvent("log_actions",{operation:(e.liked?"cancel_":"")+"like",obj_type:f,behavior_info:d,behavior_info_sub:_}),4==o[t])this.$logEvent("log_actions",{operation:"like_post",behavior_info:this.$route.path,behavior_info_sub:("lookbook"==t?"video":t)+","+e.id});else if(5==o[t]){var y,w,x;this.$logEvent("log_actions",{operation:(e.liked?"cancel_like_":"like_")+t,behavior_info:null!=e&&null!==(y=e.author)&&void 0!==y&&y.id?null==e||null===(w=e.author)||void 0===w?void 0:w.id:null==e||null===(x=e.portfolio)||void 0===x?void 0:x.id})}else{var k,S,I;this.$logEvent("log_actions",{operation:(e.liked?"cancel_like_":"like_")+t,behavior_info:null!=e&&null!==(k=e.author)&&void 0!==k&&k.id?null==e||null===(S=e.author)||void 0===S?void 0:S.id:null==e||null===(I=e.portfolio)||void 0===I?void 0:I.id})}if(!this.likeLoading){this.likeLoading=!0;var O=this.getDotInfo(e,t,e.liked?"dislike":"like");Object(h.g)({items:[O]}).then((function(t){var n;if(1e4==(null==t||null===(n=t.status)||void 0===n?void 0:n.code)){var o={id:e.id,liked:!e.liked};if(e.stat){var c=e.stat.num_of_like;e.liked?c--:c++,o.num_of_like=c}if(e.num_of_praise||0==e.num_of_praise){var l=e.num_of_praise;e.liked?l--:l++,o.num_of_like=l}r.changeLikeData(o),r.changeLikeDataIds({id:o.id,type:!0===o.liked?"add":"del"})}else{var d;r.$message({message:(null==t||null===(d=t.status)||void 0===d?void 0:d.msg)||r.$t("ServerError"),type:"error"})}})).finally((function(){r.likeLoading=!1}))}},reportArtwork:function(e){var t=this;Object(h.o)({id:e}).then((function(e){1e4==e.status.code&&c()({message:t.$t("ReportSuccess"),type:"success",duration:5e3})}))},getDotInfo:function(e,t,n){var r,o=[],c={artwork:1,model:2,account:3,gallery:4,post:4,lookbook:5,character:9,palette:11,swtft_app:13,workflow:13,ai_video:15,ai_audio:16};if(this.list){var l=this.list.findIndex((function(i){return i.id===e.id}));o=(l<10?this.list.slice(0,l):this.list.slice(l-10,l)).map((function(e){return e.id})).filter((function(e){return"banner"!=e&&"ai_tool"!=e}))}var d=_({action:n,obj_no:e.id,obj_type:c[t]?c[t]:t,negative_ids:o,batch_id:null==e?void 0:e.pt,stat:null==e?void 0:e.stat},this.productLevel&&{vip:this.productLevel});return d=this.dotReportInfo&&null!==(r=Object.keys(this.dotReportInfo))&&void 0!==r&&r.length?_(_({},this.dotReportInfo),d):_(_({},d),{},{category:"default",view_domain:"",batch_id:""})}})}},3355:function(e,t,n){var r=n(3360),o=n(3362);e.exports=function(source,e,object,t){var n=!object;object||(object={});for(var c=-1,l=e.length;++c<l;){var d=e[c],h=t?t(object[d],source[d],d,object,source):void 0;void 0===h&&(h=source[d]),n?o(object,d,h):r(object,d,h)}return object}},3356:function(e,t,n){var r=n(3413),o=n(3381),c=n(3407);e.exports=function(object){return c(object)?r(object,!0):o(object)}},3357:function(e,t,n){var r=n(3418);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},3360:function(e,t,n){var r=n(3362),o=n(3401),c=Object.prototype.hasOwnProperty;e.exports=function(object,e,t){var n=object[e];c.call(object,e)&&o(n,t)&&(void 0!==t||e in object)||r(object,e,t)}},3362:function(e,t,n){var r=n(3412);e.exports=function(object,e,t){"__proto__"==e&&r?r(object,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):object[e]=t}},3363:function(e,t,n){var r=n(3404),o=n(3364),c=n(3377),l=n(3415),d=Object.getOwnPropertySymbols?function(object){for(var e=[];object;)r(e,c(object)),object=o(object);return e}:l;e.exports=d},3364:function(e,t,n){var r=n(3414)(Object.getPrototypeOf,Object);e.exports=r},3378:function(e,t,n){var r=n(3409),o=n(3411),c=n(3360),l=n(3379),d=n(3380),h=n(3383),f=n(3403),m=n(3384),v=n(3385),_=n(3416),y=n(3386),w=n(3361),x=n(3387),k=n(3388),S=n(3393),I=n(3400),O=n(3410),j=n(3394),T=n(3370),P=n(3396),C=n(3374),M=n(3356),E="[object Arguments]",A="[object Function]",D="[object Object]",$={};$[E]=$["[object Array]"]=$["[object ArrayBuffer]"]=$["[object DataView]"]=$["[object Boolean]"]=$["[object Date]"]=$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Map]"]=$["[object Number]"]=$[D]=$["[object RegExp]"]=$["[object Set]"]=$["[object String]"]=$["[object Symbol]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$["[object Error]"]=$[A]=$["[object WeakMap]"]=!1,e.exports=function e(t,n,L,R,object,N){var B,z=1&n,U=2&n,F=4&n;if(L&&(B=object?L(t,R,object,N):L(t)),void 0!==B)return B;if(!T(t))return t;var H=I(t);if(H){if(B=x(t),!z)return f(t,B)}else{var W=w(t),G=W==A||"[object GeneratorFunction]"==W;if(O(t))return h(t,z);if(W==D||W==E||G&&!object){if(B=U||G?{}:S(t),!z)return U?v(t,d(B,t)):m(t,l(B,t))}else{if(!$[W])return object?t:{};B=k(t,W,z)}}N||(N=new r);var V=N.get(t);if(V)return V;N.set(t,B),P(t)?t.forEach((function(r){B.add(e(r,n,L,r,t,N))})):j(t)&&t.forEach((function(r,o){B.set(o,e(r,n,L,o,t,N))}));var X=H?void 0:(F?U?y:_:U?M:C)(t);return o(X||t,(function(r,o){X&&(r=t[o=r]),c(B,o,e(r,n,L,o,t,N))})),B}},3379:function(e,t,n){var r=n(3355),o=n(3374);e.exports=function(object,source){return object&&r(source,o(source),object)}},3380:function(e,t,n){var r=n(3355),o=n(3356);e.exports=function(object,source){return object&&r(source,o(source),object)}},3381:function(e,t,n){var r=n(3370),o=n(3376),c=n(3382),l=Object.prototype.hasOwnProperty;e.exports=function(object){if(!r(object))return c(object);var e=o(object),t=[];for(var n in object)("constructor"!=n||!e&&l.call(object,n))&&t.push(n);return t}},3382:function(e,t){e.exports=function(object){var e=[];if(null!=object)for(var t in Object(object))e.push(t);return e}},3383:function(e,t,n){(function(e){var r=n(3399),o=t&&!t.nodeType&&t,c=o&&"object"==typeof e&&e&&!e.nodeType&&e,l=c&&c.exports===o?r.Buffer:void 0,d=l?l.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=d?d(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(1927)(e))},3384:function(e,t,n){var r=n(3355),o=n(3377);e.exports=function(source,object){return r(source,o(source),object)}},3385:function(e,t,n){var r=n(3355),o=n(3363);e.exports=function(source,object){return r(source,o(source),object)}},3386:function(e,t,n){var r=n(3417),o=n(3363),c=n(3356);e.exports=function(object){return r(object,c,o)}},3387:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},3388:function(e,t,n){var r=n(3357),o=n(3389),c=n(3390),l=n(3391),d=n(3392);e.exports=function(object,e,t){var n=object.constructor;switch(e){case"[object ArrayBuffer]":return r(object);case"[object Boolean]":case"[object Date]":return new n(+object);case"[object DataView]":return o(object,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return d(object,t);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(object);case"[object RegExp]":return c(object);case"[object Symbol]":return l(object)}}},3389:function(e,t,n){var r=n(3357);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},3390:function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},3391:function(e,t,n){var r=n(3402),o=r?r.prototype:void 0,c=o?o.valueOf:void 0;e.exports=function(symbol){return c?Object(c.call(symbol)):{}}},3392:function(e,t,n){var r=n(3357);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},3393:function(e,t,n){var r=n(3408),o=n(3364),c=n(3376);e.exports=function(object){return"function"!=typeof object.constructor||c(object)?{}:r(o(object))}},3394:function(e,t,n){var r=n(3395),o=n(3373),c=n(3375),l=c&&c.isMap,d=l?o(l):r;e.exports=d},3395:function(e,t,n){var r=n(3361),o=n(3371);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},3396:function(e,t,n){var r=n(3397),o=n(3373),c=n(3375),l=c&&c.isSet,d=l?o(l):r;e.exports=d},3397:function(e,t,n){var r=n(3361),o=n(3371);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},3469:function(e,t,n){var r=n(3407),o=n(3371);e.exports=function(e){return o(e)&&r(e)}},3482:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},3491:function(e,t,n){"use strict";t.__esModule=!0;var r=n(194);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.beforeEnter=function(e){(0,r.addClass)(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},e.prototype.enter=function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},e.prototype.afterEnter=function(e){(0,r.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},e.prototype.beforeLeave=function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},e.prototype.leave=function(e){0!==e.scrollHeight&&((0,r.addClass)(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},e.prototype.afterLeave=function(e){(0,r.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},e}();t.default={name:"ElCollapseTransition",functional:!0,render:function(e,t){var n=t.children;return e("transition",{on:new o},n)}}},35:function(e,t,n){var r=n(3378);e.exports=function(e){return r(e,5)}},3523:function(e,t,n){var r=n(3618),o=n(3616),c=n(3691),l=n(3619),d=n(4228),h=n(3676);e.exports=function(e,t,n){var f=-1,m=o,v=e.length,_=!0,y=[],w=y;if(n)_=!1,m=c;else if(v>=200){var x=t?null:d(e);if(x)return h(x);_=!1,m=l,w=new r}else w=t?[]:y;e:for(;++f<v;){var k=e[f],S=t?t(k):k;if(k=n||0!==k?k:0,_&&S==S){for(var I=w.length;I--;)if(w[I]===S)continue e;t&&w.push(S),y.push(k)}else m(w,S,n)||(w!==y&&w.push(S),y.push(k))}return y}},3578:function(e,t,n){var r=n(3618),o=n(3616),c=n(3691),l=n(3474),d=n(3373),h=n(3619);e.exports=function(e,t,n,f){var m=-1,v=o,_=!0,y=e.length,w=[],x=t.length;if(!y)return w;n&&(t=l(t,d(n))),f?(v=c,_=!1):t.length>=200&&(v=h,_=!1,t=new r(t));e:for(;++m<y;){var k=e[m],S=null==n?k:n(k);if(k=f||0!==k?k:0,_&&S==S){for(var I=x;I--;)if(t[I]===S)continue e;w.push(k)}else v(t,S,f)||w.push(k)}return w}},3622:function(e,t,n){var r=n(3475);e.exports=function(e,t,n,o){for(var c=e.length,l=o?c:-1;(o?l--:++l<c)&&t(e[l],l,e););return n?r(e,o?0:l,o?l+1:c):r(e,o?l+1:0,o?c:l)}},3623:function(e,t,n){var r=n(3695),o=n(3539),c=n(3516);e.exports=function(e,t,n){var l=0,d=null==e?l:e.length;if("number"==typeof t&&t==t&&d<=2147483647){for(;l<d;){var h=l+d>>>1,f=e[h];null!==f&&!c(f)&&(n?f<=t:f<t)?l=h+1:d=h}return d}return r(e,t,o,n)}},3652:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var r=n(15),o=n(3),c=(n(20),n(19),n(36),n(4),n(6),n(3689)),l=n(17);window._translatePrompts=h;var d={};function h(e,t){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(regeneratorRuntime.mark((function e(t,n){var o,c,h,f,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],c=[],t.forEach((function(text,i){if(d[text]){var e=d[text];o.push([text,e])}else o.push([text]),c.push([text,i])})),0!=(h=c.map((function(e){return e[0]}))).length){e.next=7;break}return e.abrupt("return",o.map((function(e){return e[1]})));case 7:return f=window.$nuxt.$cookies.get("lang")||navigator.language||navigator.browserLanguage,m=[],v={list:{content:h},language:(null==n?void 0:n.to)||f},e.next=12,(data=v,Object(l.a)({url:"/api/v1/translate/locals",method:"POST",data:data.list,customConfig:{isSilent:!0,language:data.language}})).then((function(e){var t=e.data.content,content=void 0===t?[]:t,n=e.status.code;1e4===(void 0===n?0:n)&&(Object(r.a)(content).forEach((function(text,i){if(c[i]){var e=c[i][0],t=c[i][1];o[t].push(text),d[e]=text,d[text]||(d[text]=e)}})),m=o.map((function(e){return e[1]})))}));case 12:return e.abrupt("return",m);case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}var data}),e,null,[[0,15]])})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,r,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slice(),r=[],t.forEach((function(text,i){Object(c.a)(text)&&r.push([text,i])})),o=r.map((function(e){return e[0]})),e.next=6,h(o,{to:"en"});case 6:return(l=e.sent)&&l.forEach((function(e,i){var t=r[i][1];n[t]=e})),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},3684:function(e,t,n){var r;(function(){function o(e){"use strict";var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r].defaultValue);return n}var c={},l={},d={},h=o(!0),f="vanilla",m={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:o(!0),allOn:function(){"use strict";var e=o(!0),t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}()};function v(e,t){"use strict";var n=t?"Error in "+t+" extension->":"Error in unnamed extension",r={valid:!0,error:""};c.helper.isArray(e)||(e=[e]);for(var i=0;i<e.length;++i){var o=n+" sub-extension "+i+": ",l=e[i];if("object"!=typeof l)return r.valid=!1,r.error=o+"must be an object, but "+typeof l+" given",r;if(!c.helper.isString(l.type))return r.valid=!1,r.error=o+'property "type" must be a string, but '+typeof l.type+" given",r;var d=l.type=l.type.toLowerCase();if("language"===d&&(d=l.type="lang"),"html"===d&&(d=l.type="output"),"lang"!==d&&"output"!==d&&"listener"!==d)return r.valid=!1,r.error=o+"type "+d+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',r;if("listener"===d){if(c.helper.isUndefined(l.listeners))return r.valid=!1,r.error=o+'. Extensions of type "listener" must have a property called "listeners"',r}else if(c.helper.isUndefined(l.filter)&&c.helper.isUndefined(l.regex))return r.valid=!1,r.error=o+d+' extensions must define either a "regex" property or a "filter" method',r;if(l.listeners){if("object"!=typeof l.listeners)return r.valid=!1,r.error=o+'"listeners" property must be an object but '+typeof l.listeners+" given",r;for(var h in l.listeners)if(l.listeners.hasOwnProperty(h)&&"function"!=typeof l.listeners[h])return r.valid=!1,r.error=o+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+h+" must be a function but "+typeof l.listeners[h]+" given",r}if(l.filter){if("function"!=typeof l.filter)return r.valid=!1,r.error=o+'"filter" must be a function, but '+typeof l.filter+" given",r}else if(l.regex){if(c.helper.isString(l.regex)&&(l.regex=new RegExp(l.regex,"g")),!(l.regex instanceof RegExp))return r.valid=!1,r.error=o+'"regex" property must either be a string or a RegExp object, but '+typeof l.regex+" given",r;if(c.helper.isUndefined(l.replace))return r.valid=!1,r.error=o+'"regex" extensions must implement a replace string or function',r}}return r}function _(e,t){"use strict";return"¨E"+t.charCodeAt(0)+"E"}c.helper={},c.extensions={},c.setOption=function(e,t){"use strict";return h[e]=t,this},c.getOption=function(e){"use strict";return h[e]},c.getOptions=function(){"use strict";return h},c.resetOptions=function(){"use strict";h=o(!0)},c.setFlavor=function(e){"use strict";if(!m.hasOwnProperty(e))throw Error(e+" flavor was not found");c.resetOptions();var t=m[e];for(var option in f=e,t)t.hasOwnProperty(option)&&(h[option]=t[option])},c.getFlavor=function(){"use strict";return f},c.getFlavorOptions=function(e){"use strict";if(m.hasOwnProperty(e))return m[e]},c.getDefaultOptions=function(e){"use strict";return o(e)},c.subParser=function(e,t){"use strict";if(c.helper.isString(e)){if(void 0===t){if(l.hasOwnProperty(e))return l[e];throw Error("SubParser named "+e+" not registered!")}l[e]=t}},c.extension=function(e,t){"use strict";if(!c.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=c.helper.stdExtName(e),c.helper.isUndefined(t)){if(!d.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return d[e]}"function"==typeof t&&(t=t()),c.helper.isArray(t)||(t=[t]);var n=v(t,e);if(!n.valid)throw Error(n.error);d[e]=t},c.getAllExtensions=function(){"use strict";return d},c.removeExtension=function(e){"use strict";delete d[e]},c.resetExtensions=function(){"use strict";d={}},c.validateExtension=function(e){"use strict";var t=v(e,null);return!!t.valid||(console.warn(t.error),!1)},c.hasOwnProperty("helper")||(c.helper={}),c.helper.isString=function(a){"use strict";return"string"==typeof a||a instanceof String},c.helper.isFunction=function(a){"use strict";return a&&"[object Function]"==={}.toString.call(a)},c.helper.isArray=function(a){"use strict";return Array.isArray(a)},c.helper.isUndefined=function(e){"use strict";return void 0===e},c.helper.forEach=function(e,t){"use strict";if(c.helper.isUndefined(e))throw new Error("obj param is required");if(c.helper.isUndefined(t))throw new Error("callback param is required");if(!c.helper.isFunction(t))throw new Error("callback param must be a function/closure");if("function"==typeof e.forEach)e.forEach(t);else if(c.helper.isArray(e))for(var i=0;i<e.length;i++)t(e[i],i,e);else{if("object"!=typeof e)throw new Error("obj does not seem to be an array or an iterable object");for(var n in e)e.hasOwnProperty(n)&&t(e[n],n,e)}},c.helper.stdExtName=function(s){"use strict";return s.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},c.helper.escapeCharactersCallback=_,c.helper.escapeCharacters=function(text,e,t){"use strict";var n="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";t&&(n="\\\\"+n);var r=new RegExp(n,"g");return text=text.replace(r,_)},c.helper.unescapeHTMLEntities=function(e){"use strict";return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var y=function(e,t,n,r){"use strict";var o,s,c,l,d,h=r||"",g=h.indexOf("g")>-1,f=new RegExp(t+"|"+n,"g"+h.replace(/g/g,"")),m=new RegExp(t,h.replace(/g/g,"")),v=[];do{for(o=0;c=f.exec(e);)if(m.test(c[0]))o++||(l=(s=f.lastIndex)-c[0].length);else if(o&&! --o){d=c.index+c[0].length;var _={left:{start:l,end:s},match:{start:s,end:c.index},right:{start:c.index,end:d},wholeMatch:{start:l,end:d}};if(v.push(_),!g)return v}}while(o&&(f.lastIndex=s));return v};c.helper.matchRecursiveRegExp=function(e,t,n,r){"use strict";for(var o=y(e,t,n,r),c=[],i=0;i<o.length;++i)c.push([e.slice(o[i].wholeMatch.start,o[i].wholeMatch.end),e.slice(o[i].match.start,o[i].match.end),e.slice(o[i].left.start,o[i].left.end),e.slice(o[i].right.start,o[i].right.end)]);return c},c.helper.replaceRecursiveRegExp=function(e,t,n,r,o){"use strict";if(!c.helper.isFunction(t)){var l=t;t=function(){return l}}var d=y(e,n,r,o),h=e,f=d.length;if(f>0){var m=[];0!==d[0].wholeMatch.start&&m.push(e.slice(0,d[0].wholeMatch.start));for(var i=0;i<f;++i)m.push(t(e.slice(d[i].wholeMatch.start,d[i].wholeMatch.end),e.slice(d[i].match.start,d[i].match.end),e.slice(d[i].left.start,d[i].left.end),e.slice(d[i].right.start,d[i].right.end))),i<f-1&&m.push(e.slice(d[i].wholeMatch.end,d[i+1].wholeMatch.start));d[f-1].wholeMatch.end<e.length&&m.push(e.slice(d[f-1].wholeMatch.end)),h=m.join("")}return h},c.helper.regexIndexOf=function(e,t,n){"use strict";if(!c.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(t instanceof RegExp==!1)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var r=e.substring(n||0).search(t);return r>=0?r+(n||0):r},c.helper.splitAtIndex=function(e,t){"use strict";if(!c.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[e.substring(0,t),e.substring(t)]},c.helper.encodeEmailAddress=function(e){"use strict";var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=e.replace(/./g,(function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else{var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e}))},c.helper.padEnd=function(e,t,n){"use strict";return t|=0,n=String(n||" "),e.length>t?String(e):((t-=e.length)>n.length&&(n+=n.repeat(t/n.length)),String(e)+n.slice(0,t))},"undefined"==typeof console&&(console={warn:function(e){"use strict";alert(e)},log:function(e){"use strict";alert(e)},error:function(e){"use strict";throw e}}),c.helper.regexes={asteriskDashAndColon:/([*_:~])/g},c.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},c.Converter=function(e){"use strict";var t={},n=[],r=[],o={},l=f,_={parsed:{},raw:"",format:""};function y(e,t){if(t=t||null,c.helper.isString(e)){if(t=e=c.helper.stdExtName(e),c.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,t){"function"==typeof e&&(e=e(new c.Converter));c.helper.isArray(e)||(e=[e]);var o=v(e,t);if(!o.valid)throw Error(o.error);for(var i=0;i<e.length;++i)switch(e[i].type){case"lang":n.push(e[i]);break;case"output":r.push(e[i]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(c.extensions[e],e);if(c.helper.isUndefined(d[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=d[e]}"function"==typeof e&&(e=e()),c.helper.isArray(e)||(e=[e]);var o=v(e,t);if(!o.valid)throw Error(o.error);for(var i=0;i<e.length;++i){switch(e[i].type){case"lang":n.push(e[i]);break;case"output":r.push(e[i])}if(e[i].hasOwnProperty("listeners"))for(var l in e[i].listeners)e[i].listeners.hasOwnProperty(l)&&w(l,e[i].listeners[l])}}function w(e,t){if(!c.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof t+" given");o.hasOwnProperty(e)||(o[e]=[]),o[e].push(t)}!function(){for(var n in e=e||{},h)h.hasOwnProperty(n)&&(t[n]=h[n]);if("object"!=typeof e)throw Error("Converter expects the passed parameter to be an object, but "+typeof e+" was passed instead.");for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.extensions&&c.helper.forEach(t.extensions,y)}(),this._dispatch=function(e,text,t,n){if(o.hasOwnProperty(e))for(var r=0;r<o[e].length;++r){var c=o[e][r](e,text,this,t,n);c&&void 0!==c&&(text=c)}return text},this.listen=function(e,t){return w(e,t),this},this.makeHtml=function(text){if(!text)return text;var e={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:n,outputModifiers:r,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return text=(text=(text=(text=(text=text.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),t.smartIndentationFix&&(text=function(text){var e=text.match(/^\s*/)[0].length,t=new RegExp("^\\s{0,"+e+"}","gm");return text.replace(t,"")}(text)),text="\n\n"+text+"\n\n",text=(text=c.subParser("detab")(text,t,e)).replace(/^[ \t]+$/gm,""),c.helper.forEach(n,(function(n){text=c.subParser("runExtension")(n,text,t,e)})),text=c.subParser("metadata")(text,t,e),text=c.subParser("hashPreCodeTags")(text,t,e),text=c.subParser("githubCodeBlocks")(text,t,e),text=c.subParser("hashHTMLBlocks")(text,t,e),text=c.subParser("hashCodeTags")(text,t,e),text=c.subParser("stripLinkDefinitions")(text,t,e),text=c.subParser("blockGamut")(text,t,e),text=c.subParser("unhashHTMLSpans")(text,t,e),text=(text=(text=c.subParser("unescapeSpecialChars")(text,t,e)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),text=c.subParser("completeHTMLDocument")(text,t,e),c.helper.forEach(r,(function(n){text=c.subParser("runExtension")(n,text,t,e)})),_=e.metadata,text},this.makeMarkdown=this.makeMd=function(e,t){if(e=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">¨NBSP;<"),!t){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");t=window.document}var n=t.createElement("div");n.innerHTML=e;var r={preList:function(e){for(var t=e.querySelectorAll("pre"),n=[],i=0;i<t.length;++i)if(1===t[i].childElementCount&&"code"===t[i].firstChild.tagName.toLowerCase()){var content=t[i].firstChild.innerHTML.trim(),r=t[i].firstChild.getAttribute("data-language")||"";if(""===r)for(var o=t[i].firstChild.className.split(" "),l=0;l<o.length;++l){var d=o[l].match(/^language-(.+)$/);if(null!==d){r=d[1];break}}content=c.helper.unescapeHTMLEntities(content),n.push(content),t[i].outerHTML='<precode language="'+r+'" precodenum="'+i.toString()+'"></precode>'}else n.push(t[i].innerHTML),t[i].innerHTML="",t[i].setAttribute("prenum",i.toString());return n}(n)};!function e(t){for(var n=0;n<t.childNodes.length;++n){var r=t.childNodes[n];3===r.nodeType?/\S/.test(r.nodeValue)||/^[ ]+$/.test(r.nodeValue)?(r.nodeValue=r.nodeValue.split("\n").join(" "),r.nodeValue=r.nodeValue.replace(/(\s)+/g,"$1")):(t.removeChild(r),--n):1===r.nodeType&&e(r)}}(n);for(var o=n.childNodes,l="",i=0;i<o.length;i++)l+=c.subParser("makeMarkdown.node")(o[i],r);return l},this.setOption=function(e,n){t[e]=n},this.getOption=function(e){return t[e]},this.getOptions=function(){return t},this.addExtension=function(e,t){y(e,t=t||null)},this.useExtension=function(e){y(e)},this.setFlavor=function(e){if(!m.hasOwnProperty(e))throw Error(e+" flavor was not found");var n=m[e];for(var option in l=e,n)n.hasOwnProperty(option)&&(t[option]=n[option])},this.getFlavor=function(){return l},this.removeExtension=function(e){c.helper.isArray(e)||(e=[e]);for(var a=0;a<e.length;++a){for(var t=e[a],i=0;i<n.length;++i)n[i]===t&&n.splice(i,1);for(var o=0;o<r.length;++o)r[o]===t&&r.splice(o,1)}},this.getAllExtensions=function(){return{language:n,output:r}},this.getMetadata=function(e){return e?_.raw:_.parsed},this.getMetadataFormat=function(){return _.format},this._setMetadataPair=function(e,t){_.parsed[e]=t},this._setMetadataFormat=function(e){_.format=e},this._setMetadataRaw=function(e){_.raw=e}},c.subParser("anchors",(function(text,e,t){"use strict";var n=function(n,r,o,l,d,h,title){if(c.helper.isUndefined(title)&&(title=""),o=o.toLowerCase(),n.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)l="";else if(!l){if(o||(o=r.toLowerCase().replace(/ ?\n/g," ")),l="#"+o,c.helper.isUndefined(t.gUrls[o]))return n;l=t.gUrls[o],c.helper.isUndefined(t.gTitles[o])||(title=t.gTitles[o])}var f='<a href="'+(l=l.replace(c.helper.regexes.asteriskDashAndColon,c.helper.escapeCharactersCallback))+'"';return""!==title&&null!==title&&(f+=' title="'+(title=(title=title.replace(/"/g,"&quot;")).replace(c.helper.regexes.asteriskDashAndColon,c.helper.escapeCharactersCallback))+'"'),e.openLinksInNewWindow&&!/^#/.test(l)&&(f+=' rel="noopener noreferrer" target="¨E95Eblank"'),f+=">"+r+"</a>"};return text=(text=(text=(text=(text=t.converter._dispatch("anchors.before",text,e,t)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[([^\[\]]+)]()()()()()/g,n),e.ghMentions&&(text=text.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,(function(t,n,r,o,l){if("\\"===r)return n+o;if(!c.helper.isString(e.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var d=e.ghMentionsLink.replace(/\{u}/g,l),h="";return e.openLinksInNewWindow&&(h=' rel="noopener noreferrer" target="¨E95Eblank"'),n+'<a href="'+d+'"'+h+">"+o+"</a>"}))),text=t.converter._dispatch("anchors.after",text,e,t)}));var w=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,x=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,k=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,S=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,I=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,O=function(e){"use strict";return function(t,n,link,r,o,l,d){var h=link=link.replace(c.helper.regexes.asteriskDashAndColon,c.helper.escapeCharactersCallback),f="",m="",v=n||"",_=d||"";return/^www\./i.test(link)&&(link=link.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&l&&(f=l),e.openLinksInNewWindow&&(m=' rel="noopener noreferrer" target="¨E95Eblank"'),v+'<a href="'+link+'"'+m+">"+h+"</a>"+f+_}},j=function(e,t){"use strict";return function(n,b,r){var o="mailto:";return b=b||"",r=c.subParser("unescapeSpecialChars")(r,e,t),e.encodeEmails?(o=c.helper.encodeEmailAddress(o+r),r=c.helper.encodeEmailAddress(r)):o+=r,b+'<a href="'+o+'">'+r+"</a>"}};c.subParser("autoLinks",(function(text,e,t){"use strict";return text=(text=(text=t.converter._dispatch("autoLinks.before",text,e,t)).replace(k,O(e))).replace(I,j(e,t)),text=t.converter._dispatch("autoLinks.after",text,e,t)})),c.subParser("simplifiedAutoLinks",(function(text,e,t){"use strict";return e.simplifiedAutoLink?(text=t.converter._dispatch("simplifiedAutoLinks.before",text,e,t),text=(text=e.excludeTrailingPunctuationFromURLs?text.replace(x,O(e)):text.replace(w,O(e))).replace(S,j(e,t)),text=t.converter._dispatch("simplifiedAutoLinks.after",text,e,t)):text})),c.subParser("blockGamut",(function(text,e,t){"use strict";return text=t.converter._dispatch("blockGamut.before",text,e,t),text=c.subParser("blockQuotes")(text,e,t),text=c.subParser("headers")(text,e,t),text=c.subParser("horizontalRule")(text,e,t),text=c.subParser("lists")(text,e,t),text=c.subParser("codeBlocks")(text,e,t),text=c.subParser("tables")(text,e,t),text=c.subParser("hashHTMLBlocks")(text,e,t),text=c.subParser("paragraphs")(text,e,t),text=t.converter._dispatch("blockGamut.after",text,e,t)})),c.subParser("blockQuotes",(function(text,e,t){"use strict";text=t.converter._dispatch("blockQuotes.before",text,e,t),text+="\n\n";var n=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return e.splitAdjacentBlockquotes&&(n=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),text=text.replace(n,(function(n){return n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),n=c.subParser("githubCodeBlocks")(n,e,t),n=(n=(n=c.subParser("blockGamut")(n,e,t)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var pre=t;return pre=(pre=pre.replace(/^  /gm,"¨0")).replace(/¨0/g,"")})),c.subParser("hashBlock")("<blockquote>\n"+n+"\n</blockquote>",e,t)})),text=t.converter._dispatch("blockQuotes.after",text,e,t)})),c.subParser("codeBlocks",(function(text,e,t){"use strict";text=t.converter._dispatch("codeBlocks.before",text,e,t);return text=(text=(text+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,(function(n,r,o){var l=r,d=o,h="\n";return l=c.subParser("outdent")(l,e,t),l=c.subParser("encodeCode")(l,e,t),l=(l=(l=c.subParser("detab")(l,e,t)).replace(/^\n+/g,"")).replace(/\n+$/g,""),e.omitExtraWLInCodeBlocks&&(h=""),l="<pre><code>"+l+h+"</code></pre>",c.subParser("hashBlock")(l,e,t)+d}))).replace(/¨0/,""),text=t.converter._dispatch("codeBlocks.after",text,e,t)})),c.subParser("codeSpans",(function(text,e,t){"use strict";return void 0===(text=t.converter._dispatch("codeSpans.before",text,e,t))&&(text=""),text=text.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(n,r,o,l){var d=l;return d=(d=d.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),d=r+"<code>"+(d=c.subParser("encodeCode")(d,e,t))+"</code>",d=c.subParser("hashHTMLSpans")(d,e,t)})),text=t.converter._dispatch("codeSpans.after",text,e,t)})),c.subParser("completeHTMLDocument",(function(text,e,t){"use strict";if(!e.completeHTMLDocument)return text;text=t.converter._dispatch("completeHTMLDocument.before",text,e,t);var n="html",r="<!DOCTYPE HTML>\n",title="",o='<meta charset="utf-8">\n',c="",l="";for(var meta in void 0!==t.metadata.parsed.doctype&&(r="<!DOCTYPE "+t.metadata.parsed.doctype+">\n","html"!==(n=t.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==n||(o='<meta charset="utf-8">')),t.metadata.parsed)if(t.metadata.parsed.hasOwnProperty(meta))switch(meta.toLowerCase()){case"doctype":break;case"title":title="<title>"+t.metadata.parsed.title+"</title>\n";break;case"charset":o="html"===n||"html5"===n?'<meta charset="'+t.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+t.metadata.parsed.charset+'">\n';break;case"language":case"lang":c=' lang="'+t.metadata.parsed[meta]+'"',l+='<meta name="'+meta+'" content="'+t.metadata.parsed[meta]+'">\n';break;default:l+='<meta name="'+meta+'" content="'+t.metadata.parsed[meta]+'">\n'}return text=r+"<html"+c+">\n<head>\n"+title+o+l+"</head>\n<body>\n"+text.trim()+"\n</body>\n</html>",text=t.converter._dispatch("completeHTMLDocument.after",text,e,t)})),c.subParser("detab",(function(text,e,t){"use strict";return text=(text=(text=(text=(text=(text=t.converter._dispatch("detab.before",text,e,t)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,(function(e,t){for(var n=t,r=4-n.length%4,i=0;i<r;i++)n+=" ";return n}))).replace(/¨A/g,"    ")).replace(/¨B/g,""),text=t.converter._dispatch("detab.after",text,e,t)})),c.subParser("ellipsis",(function(text,e,t){"use strict";return e.ellipsis?(text=(text=t.converter._dispatch("ellipsis.before",text,e,t)).replace(/\.\.\./g,"…"),text=t.converter._dispatch("ellipsis.after",text,e,t)):text})),c.subParser("emoji",(function(text,e,t){"use strict";if(!e.emoji)return text;return text=(text=t.converter._dispatch("emoji.before",text,e,t)).replace(/:([\S]+?):/g,(function(e,t){return c.helper.emojis.hasOwnProperty(t)?c.helper.emojis[t]:e})),text=t.converter._dispatch("emoji.after",text,e,t)})),c.subParser("encodeAmpsAndAngles",(function(text,e,t){"use strict";return text=(text=(text=(text=(text=t.converter._dispatch("encodeAmpsAndAngles.before",text,e,t)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),text=t.converter._dispatch("encodeAmpsAndAngles.after",text,e,t)})),c.subParser("encodeBackslashEscapes",(function(text,e,t){"use strict";return text=(text=(text=t.converter._dispatch("encodeBackslashEscapes.before",text,e,t)).replace(/\\(\\)/g,c.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,c.helper.escapeCharactersCallback),text=t.converter._dispatch("encodeBackslashEscapes.after",text,e,t)})),c.subParser("encodeCode",(function(text,e,t){"use strict";return text=(text=t.converter._dispatch("encodeCode.before",text,e,t)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,c.helper.escapeCharactersCallback),text=t.converter._dispatch("encodeCode.after",text,e,t)})),c.subParser("escapeSpecialCharsWithinTagAttributes",(function(text,e,t){"use strict";return text=(text=(text=t.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",text,e,t)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,(function(e){return e.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,c.helper.escapeCharactersCallback)}))).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,(function(e){return e.replace(/([\\`*_~=|])/g,c.helper.escapeCharactersCallback)})),text=t.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",text,e,t)})),c.subParser("githubCodeBlocks",(function(text,e,t){"use strict";return e.ghCodeBlocks?(text=t.converter._dispatch("githubCodeBlocks.before",text,e,t),text=(text=(text+="¨0").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,(function(n,r,o,l){var d=e.omitExtraWLInCodeBlocks?"":"\n";return l=c.subParser("encodeCode")(l,e,t),l="<pre><code"+(o?' class="'+o+" language-"+o+'"':"")+">"+(l=(l=(l=c.subParser("detab")(l,e,t)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+d+"</code></pre>",l=c.subParser("hashBlock")(l,e,t),"\n\n¨G"+(t.ghCodeBlocks.push({text:n,codeblock:l})-1)+"G\n\n"}))).replace(/¨0/,""),t.converter._dispatch("githubCodeBlocks.after",text,e,t)):text})),c.subParser("hashBlock",(function(text,e,t){"use strict";return text=(text=t.converter._dispatch("hashBlock.before",text,e,t)).replace(/(^\n+|\n+$)/g,""),text="\n\n¨K"+(t.gHtmlBlocks.push(text)-1)+"K\n\n",text=t.converter._dispatch("hashBlock.after",text,e,t)})),c.subParser("hashCodeTags",(function(text,e,t){"use strict";text=t.converter._dispatch("hashCodeTags.before",text,e,t);return text=c.helper.replaceRecursiveRegExp(text,(function(n,r,o,l){var d=o+c.subParser("encodeCode")(r,e,t)+l;return"¨C"+(t.gHtmlSpans.push(d)-1)+"C"}),"<code\\b[^>]*>","</code>","gim"),text=t.converter._dispatch("hashCodeTags.after",text,e,t)})),c.subParser("hashElement",(function(text,e,t){"use strict";return function(e,n){var r=n;return r=(r=(r=r.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),r="\n\n¨K"+(t.gHtmlBlocks.push(r)-1)+"K\n\n"}})),c.subParser("hashHTMLBlocks",(function(text,e,t){"use strict";text=t.converter._dispatch("hashHTMLBlocks.before",text,e,t);var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],r=function(e,n,r,o){var c=e;return-1!==r.search(/\bmarkdown\b/)&&(c=r+t.converter.makeHtml(n)+o),"\n\n¨K"+(t.gHtmlBlocks.push(c)-1)+"K\n\n"};e.backslashEscapesHTMLTags&&(text=text.replace(/\\<(\/?[^>]+?)>/g,(function(e,t){return"&lt;"+t+"&gt;"})));for(var i=0;i<n.length;++i)for(var o,l=new RegExp("^ {0,3}(<"+n[i]+"\\b[^>]*>)","im"),d="<"+n[i]+"\\b[^>]*>",h="</"+n[i]+">";-1!==(o=c.helper.regexIndexOf(text,l));){var f=c.helper.splitAtIndex(text,o),m=c.helper.replaceRecursiveRegExp(f[1],r,d,h,"im");if(m===f[1])break;text=f[0].concat(m)}return text=text.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,c.subParser("hashElement")(text,e,t)),text=(text=c.helper.replaceRecursiveRegExp(text,(function(e){return"\n\n¨K"+(t.gHtmlBlocks.push(e)-1)+"K\n\n"}),"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,c.subParser("hashElement")(text,e,t)),text=t.converter._dispatch("hashHTMLBlocks.after",text,e,t)})),c.subParser("hashHTMLSpans",(function(text,e,t){"use strict";function n(html){return"¨C"+(t.gHtmlSpans.push(html)-1)+"C"}return text=(text=(text=(text=(text=t.converter._dispatch("hashHTMLSpans.before",text,e,t)).replace(/<[^>]+?\/>/gi,(function(e){return n(e)}))).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,(function(e){return n(e)}))).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,(function(e){return n(e)}))).replace(/<[^>]+?>/gi,(function(e){return n(e)})),text=t.converter._dispatch("hashHTMLSpans.after",text,e,t)})),c.subParser("unhashHTMLSpans",(function(text,e,t){"use strict";text=t.converter._dispatch("unhashHTMLSpans.before",text,e,t);for(var i=0;i<t.gHtmlSpans.length;++i){for(var n=t.gHtmlSpans[i],r=0;/¨C(\d+)C/.test(n);){var o=RegExp.$1;if(n=n.replace("¨C"+o+"C",t.gHtmlSpans[o]),10===r){console.error("maximum nesting of 10 spans reached!!!");break}++r}text=text.replace("¨C"+i+"C",n)}return text=t.converter._dispatch("unhashHTMLSpans.after",text,e,t)})),c.subParser("hashPreCodeTags",(function(text,e,t){"use strict";text=t.converter._dispatch("hashPreCodeTags.before",text,e,t);return text=c.helper.replaceRecursiveRegExp(text,(function(n,r,o,l){var d=o+c.subParser("encodeCode")(r,e,t)+l;return"\n\n¨G"+(t.ghCodeBlocks.push({text:n,codeblock:d})-1)+"G\n\n"}),"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),text=t.converter._dispatch("hashPreCodeTags.after",text,e,t)})),c.subParser("headers",(function(text,e,t){"use strict";text=t.converter._dispatch("headers.before",text,e,t);var n=isNaN(parseInt(e.headerLevelStart))?1:parseInt(e.headerLevelStart),r=e.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,o=e.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;text=(text=text.replace(r,(function(r,o){var l=c.subParser("spanGamut")(o,e,t),h=e.noHeaderId?"":' id="'+d(o)+'"',f="<h"+n+h+">"+l+"</h"+n+">";return c.subParser("hashBlock")(f,e,t)}))).replace(o,(function(r,o){var l=c.subParser("spanGamut")(o,e,t),h=e.noHeaderId?"":' id="'+d(o)+'"',f=n+1,m="<h"+f+h+">"+l+"</h"+f+">";return c.subParser("hashBlock")(m,e,t)}));var l=e.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function d(n){var title,r;if(e.customizedHeaderId){var o=n.match(/\{([^{]+?)}\s*$/);o&&o[1]&&(n=o[1])}return title=n,r=c.helper.isString(e.prefixHeaderId)?e.prefixHeaderId:!0===e.prefixHeaderId?"section-":"",e.rawPrefixHeaderId||(title=r+title),title=e.ghCompatibleHeaderId?title.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():e.rawHeaderId?title.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():title.replace(/[^\w]/g,"").toLowerCase(),e.rawPrefixHeaderId&&(title=r+title),t.hashLinkCounts[title]?title=title+"-"+t.hashLinkCounts[title]++:t.hashLinkCounts[title]=1,title}return text=text.replace(l,(function(r,o,l){var h=l;e.customizedHeaderId&&(h=l.replace(/\s?\{([^{]+?)}\s*$/,""));var span=c.subParser("spanGamut")(h,e,t),f=e.noHeaderId?"":' id="'+d(l)+'"',m=n-1+o.length,header="<h"+m+f+">"+span+"</h"+m+">";return c.subParser("hashBlock")(header,e,t)})),text=t.converter._dispatch("headers.after",text,e,t)})),c.subParser("horizontalRule",(function(text,e,t){"use strict";text=t.converter._dispatch("horizontalRule.before",text,e,t);var n=c.subParser("hashBlock")("<hr />",e,t);return text=(text=(text=text.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,n),text=t.converter._dispatch("horizontalRule.after",text,e,t)})),c.subParser("images",(function(text,e,t){"use strict";function n(e,n,r,o,l,d,h,title){var f=t.gUrls,m=t.gTitles,v=t.gDimensions;if(r=r.toLowerCase(),title||(title=""),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(""===o||null===o){if(""!==r&&null!==r||(r=n.toLowerCase().replace(/ ?\n/g," ")),o="#"+r,c.helper.isUndefined(f[r]))return e;o=f[r],c.helper.isUndefined(m[r])||(title=m[r]),c.helper.isUndefined(v[r])||(l=v[r].width,d=v[r].height)}n=n.replace(/"/g,"&quot;").replace(c.helper.regexes.asteriskDashAndColon,c.helper.escapeCharactersCallback);var _='<img src="'+(o=o.replace(c.helper.regexes.asteriskDashAndColon,c.helper.escapeCharactersCallback))+'" alt="'+n+'"';return title&&c.helper.isString(title)&&(_+=' title="'+(title=title.replace(/"/g,"&quot;").replace(c.helper.regexes.asteriskDashAndColon,c.helper.escapeCharactersCallback))+'"'),l&&d&&(_+=' width="'+(l="*"===l?"auto":l)+'"',_+=' height="'+(d="*"===d?"auto":d)+'"'),_+=" />"}return text=(text=(text=(text=(text=(text=t.converter._dispatch("images.before",text,e,t)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,(function(e,t,r,o,c,l,d,title){return n(e,t,r,o=o.replace(/\s/g,""),c,l,d,title)}))).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,n)).replace(/!\[([^\[\]]+)]()()()()()/g,n),text=t.converter._dispatch("images.after",text,e,t)})),c.subParser("italicsAndBold",(function(text,e,t){"use strict";function n(e,t,n){return t+e+n}return text=t.converter._dispatch("italicsAndBold.before",text,e,t),text=e.literalMidWordUnderscores?(text=(text=text.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return n(t,"<strong><em>","</em></strong>")}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return n(t,"<strong>","</strong>")}))).replace(/\b_(\S[\s\S]*?)_\b/g,(function(e,t){return n(t,"<em>","</em>")})):(text=(text=text.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?n(t,"<strong><em>","</em></strong>"):e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?n(t,"<strong>","</strong>"):e}))).replace(/_([^\s_][\s\S]*?)_/g,(function(e,t){return/\S$/.test(t)?n(t,"<em>","</em>"):e})),text=e.literalMidWordAsterisks?(text=(text=text.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,(function(e,t,r){return n(r,t+"<strong><em>","</em></strong>")}))).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,(function(e,t,r){return n(r,t+"<strong>","</strong>")}))).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,(function(e,t,r){return n(r,t+"<em>","</em>")})):(text=(text=text.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,(function(e,t){return/\S$/.test(t)?n(t,"<strong><em>","</em></strong>"):e}))).replace(/\*\*(\S[\s\S]*?)\*\*/g,(function(e,t){return/\S$/.test(t)?n(t,"<strong>","</strong>"):e}))).replace(/\*([^\s*][\s\S]*?)\*/g,(function(e,t){return/\S$/.test(t)?n(t,"<em>","</em>"):e})),text=t.converter._dispatch("italicsAndBold.after",text,e,t)})),c.subParser("lists",(function(text,e,t){"use strict";function n(n,r){t.gListLevel++,n=n.replace(/\n{2,}$/,"\n");var o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,l=/\n[ \t]*\n(?!¨0)/.test(n+="¨0");return e.disableForced4SpacesIndentedSublists&&(o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),n=(n=n.replace(o,(function(n,r,o,d,h,f,m){m=m&&""!==m.trim();var v=c.subParser("outdent")(h,e,t),_="";return f&&e.tasklists&&(_=' class="task-list-item" style="list-style-type: none;"',v=v.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return m&&(e+=" checked"),e+=">"}))),v=v.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,(function(e){return"¨A"+e})),r||v.search(/\n{2,}/)>-1?(v=c.subParser("githubCodeBlocks")(v,e,t),v=c.subParser("blockGamut")(v,e,t)):(v=(v=c.subParser("lists")(v,e,t)).replace(/\n$/,""),v=(v=c.subParser("hashHTMLBlocks")(v,e,t)).replace(/\n\n+/g,"\n\n"),v=l?c.subParser("paragraphs")(v,e,t):c.subParser("spanGamut")(v,e,t)),v="<li"+_+">"+(v=v.replace("¨A",""))+"</li>\n"}))).replace(/¨0/g,""),t.gListLevel--,r&&(n=n.replace(/\s+$/,"")),n}function r(e,t){if("ol"===t){var n=e.match(/^ *(\d+)\./);if(n&&"1"!==n[1])return' start="'+n[1]+'"'}return""}function o(t,o,c){var l=e.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,d=e.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,h="ul"===o?l:d,f="";if(-1!==t.search(h))!function e(m){var v=m.search(h),style=r(t,o);-1!==v?(f+="\n\n<"+o+style+">\n"+n(m.slice(0,v),!!c)+"</"+o+">\n",h="ul"===(o="ul"===o?"ol":"ul")?l:d,e(m.slice(v))):f+="\n\n<"+o+style+">\n"+n(m,!!c)+"</"+o+">\n"}(t);else{var style=r(t,o);f="\n\n<"+o+style+">\n"+n(t,!!c)+"</"+o+">\n"}return f}return text=t.converter._dispatch("lists.before",text,e,t),text+="¨0",text=(text=t.gListLevel?text.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,n){return o(t,n.search(/[*+-]/g)>-1?"ul":"ol",!0)})):text.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,n,r){return o(n,r.search(/[*+-]/g)>-1?"ul":"ol",!1)}))).replace(/¨0/,""),text=t.converter._dispatch("lists.after",text,e,t)})),c.subParser("metadata",(function(text,e,t){"use strict";if(!e.metadata)return text;function n(content){t.metadata.raw=content,(content=(content=content.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,(function(e,n,r){return t.metadata.parsed[n]=r,""}))}return text=(text=(text=(text=t.converter._dispatch("metadata.before",text,e,t)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,(function(e,t,content){return n(content),"¨M"}))).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,(function(e,r,content){return r&&(t.metadata.format=r),n(content),"¨M"}))).replace(/¨M/g,""),text=t.converter._dispatch("metadata.after",text,e,t)})),c.subParser("outdent",(function(text,e,t){"use strict";return text=(text=(text=t.converter._dispatch("outdent.before",text,e,t)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),text=t.converter._dispatch("outdent.after",text,e,t)})),c.subParser("paragraphs",(function(text,e,t){"use strict";for(var n=(text=(text=(text=t.converter._dispatch("paragraphs.before",text,e,t)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),r=[],o=n.length,i=0;i<o;i++){var l=n[i];l.search(/¨(K|G)(\d+)\1/g)>=0?r.push(l):l.search(/\S/)>=0&&(l=(l=c.subParser("spanGamut")(l,e,t)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",r.push(l))}for(o=r.length,i=0;i<o;i++){for(var d="",h=r[i],f=!1;/¨(K|G)(\d+)\1/.test(h);){var m=RegExp.$1,v=RegExp.$2;d=(d="K"===m?t.gHtmlBlocks[v]:f?c.subParser("encodeCode")(t.ghCodeBlocks[v].text,e,t):t.ghCodeBlocks[v].codeblock).replace(/\$/g,"$$$$"),h=h.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,d),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(h)&&(f=!0)}r[i]=h}return text=(text=(text=r.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),t.converter._dispatch("paragraphs.after",text,e,t)})),c.subParser("runExtension",(function(e,text,t,n){"use strict";if(e.filter)text=e.filter(text,n.converter,t);else if(e.regex){var r=e.regex;r instanceof RegExp||(r=new RegExp(r,"g")),text=text.replace(r,e.replace)}return text})),c.subParser("spanGamut",(function(text,e,t){"use strict";return text=t.converter._dispatch("spanGamut.before",text,e,t),text=c.subParser("codeSpans")(text,e,t),text=c.subParser("escapeSpecialCharsWithinTagAttributes")(text,e,t),text=c.subParser("encodeBackslashEscapes")(text,e,t),text=c.subParser("images")(text,e,t),text=c.subParser("anchors")(text,e,t),text=c.subParser("autoLinks")(text,e,t),text=c.subParser("simplifiedAutoLinks")(text,e,t),text=c.subParser("emoji")(text,e,t),text=c.subParser("underline")(text,e,t),text=c.subParser("italicsAndBold")(text,e,t),text=c.subParser("strikethrough")(text,e,t),text=c.subParser("ellipsis")(text,e,t),text=c.subParser("hashHTMLSpans")(text,e,t),text=c.subParser("encodeAmpsAndAngles")(text,e,t),e.simpleLineBreaks?/\n\n¨K/.test(text)||(text=text.replace(/\n+/g,"<br />\n")):text=text.replace(/  +\n/g,"<br />\n"),text=t.converter._dispatch("spanGamut.after",text,e,t)})),c.subParser("strikethrough",(function(text,e,t){"use strict";return e.strikethrough&&(text=(text=t.converter._dispatch("strikethrough.before",text,e,t)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,(function(n,r){return function(n){return e.simplifiedAutoLink&&(n=c.subParser("simplifiedAutoLinks")(n,e,t)),"<del>"+n+"</del>"}(r)})),text=t.converter._dispatch("strikethrough.after",text,e,t)),text})),c.subParser("stripLinkDefinitions",(function(text,e,t){"use strict";var n=function(n,r,o,l,d,h,title){return r=r.toLowerCase(),text.toLowerCase().split(r).length-1<2?n:(o.match(/^data:.+?\/.+?;base64,/)?t.gUrls[r]=o.replace(/\s/g,""):t.gUrls[r]=c.subParser("encodeAmpsAndAngles")(o,e,t),h?h+title:(title&&(t.gTitles[r]=title.replace(/"|'/g,"&quot;")),e.parseImgDimensions&&l&&d&&(t.gDimensions[r]={width:l,height:d}),""))};return text=(text=(text=(text+="¨0").replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,n)).replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,n)).replace(/¨0/,"")})),c.subParser("tables",(function(text,e,t){"use strict";if(!e.tables)return text;function n(n,style){return"<td"+style+">"+c.subParser("spanGamut")(n,e,t)+"</td>\n"}function r(r){var i,o=r.split("\n");for(i=0;i<o.length;++i)/^ {0,3}\|/.test(o[i])&&(o[i]=o[i].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(o[i])&&(o[i]=o[i].replace(/\|[ \t]*$/,"")),o[i]=c.subParser("codeSpans")(o[i],e,t);var l,header,style,d,h=o[0].split("|").map((function(s){return s.trim()})),f=o[1].split("|").map((function(s){return s.trim()})),m=[],v=[],_=[],y=[];for(o.shift(),o.shift(),i=0;i<o.length;++i)""!==o[i].trim()&&m.push(o[i].split("|").map((function(s){return s.trim()})));if(h.length<f.length)return r;for(i=0;i<f.length;++i)_.push((l=f[i],/^:[ \t]*--*$/.test(l)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(l)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(l)?' style="text-align:center;"':""));for(i=0;i<h.length;++i)c.helper.isUndefined(_[i])&&(_[i]=""),v.push((header=h[i],style=_[i],d=void 0,d="",header=header.trim(),(e.tablesHeaderId||e.tableHeaderId)&&(d=' id="'+header.replace(/ /g,"_").toLowerCase()+'"'),"<th"+d+style+">"+(header=c.subParser("spanGamut")(header,e,t))+"</th>\n"));for(i=0;i<m.length;++i){for(var w=[],x=0;x<v.length;++x)c.helper.isUndefined(m[i][x]),w.push(n(m[i][x],_[x]));y.push(w)}return function(e,t){for(var n="<table>\n<thead>\n<tr>\n",r=e.length,i=0;i<r;++i)n+=e[i];for(n+="</tr>\n</thead>\n<tbody>\n",i=0;i<t.length;++i){n+="<tr>\n";for(var o=0;o<r;++o)n+=t[i][o];n+="</tr>\n"}return n+"</tbody>\n</table>\n"}(v,y)}return text=(text=(text=(text=t.converter._dispatch("tables.before",text,e,t)).replace(/\\(\|)/g,c.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,r)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,r),text=t.converter._dispatch("tables.after",text,e,t)})),c.subParser("underline",(function(text,e,t){"use strict";return e.underline?(text=t.converter._dispatch("underline.before",text,e,t),text=(text=e.literalMidWordUnderscores?(text=text.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return"<u>"+t+"</u>"}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return"<u>"+t+"</u>"})):(text=text.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/(_)/g,c.helper.escapeCharactersCallback),text=t.converter._dispatch("underline.after",text,e,t)):text})),c.subParser("unescapeSpecialChars",(function(text,e,t){"use strict";return text=(text=t.converter._dispatch("unescapeSpecialChars.before",text,e,t)).replace(/¨E(\d+)E/g,(function(e,t){var n=parseInt(t);return String.fromCharCode(n)})),text=t.converter._dispatch("unescapeSpecialChars.after",text,e,t)})),c.subParser("makeMarkdown.blockquote",(function(e,t){"use strict";var n="";if(e.hasChildNodes())for(var r=e.childNodes,o=r.length,i=0;i<o;++i){var l=c.subParser("makeMarkdown.node")(r[i],t);""!==l&&(n+=l)}return n="> "+(n=n.trim()).split("\n").join("\n> ")})),c.subParser("makeMarkdown.codeBlock",(function(e,t){"use strict";var n=e.getAttribute("language"),r=e.getAttribute("precodenum");return"```"+n+"\n"+t.preList[r]+"\n```"})),c.subParser("makeMarkdown.codeSpan",(function(e){"use strict";return"`"+e.innerHTML+"`"})),c.subParser("makeMarkdown.emphasis",(function(e,t){"use strict";var n="";if(e.hasChildNodes()){n+="*";for(var r=e.childNodes,o=r.length,i=0;i<o;++i)n+=c.subParser("makeMarkdown.node")(r[i],t);n+="*"}return n})),c.subParser("makeMarkdown.header",(function(e,t,n){"use strict";var r=new Array(n+1).join("#"),o="";if(e.hasChildNodes()){o=r+" ";for(var l=e.childNodes,d=l.length,i=0;i<d;++i)o+=c.subParser("makeMarkdown.node")(l[i],t)}return o})),c.subParser("makeMarkdown.hr",(function(){"use strict";return"---"})),c.subParser("makeMarkdown.image",(function(e){"use strict";var t="";return e.hasAttribute("src")&&(t+="!["+e.getAttribute("alt")+"](",t+="<"+e.getAttribute("src")+">",e.hasAttribute("width")&&e.hasAttribute("height")&&(t+=" ="+e.getAttribute("width")+"x"+e.getAttribute("height")),e.hasAttribute("title")&&(t+=' "'+e.getAttribute("title")+'"'),t+=")"),t})),c.subParser("makeMarkdown.links",(function(e,t){"use strict";var n="";if(e.hasChildNodes()&&e.hasAttribute("href")){var r=e.childNodes,o=r.length;n="[";for(var i=0;i<o;++i)n+=c.subParser("makeMarkdown.node")(r[i],t);n+="](",n+="<"+e.getAttribute("href")+">",e.hasAttribute("title")&&(n+=' "'+e.getAttribute("title")+'"'),n+=")"}return n})),c.subParser("makeMarkdown.list",(function(e,t,n){"use strict";var r="";if(!e.hasChildNodes())return"";for(var o=e.childNodes,l=o.length,d=e.getAttribute("start")||1,i=0;i<l;++i)if(void 0!==o[i].tagName&&"li"===o[i].tagName.toLowerCase()){r+=("ol"===n?d.toString()+". ":"- ")+c.subParser("makeMarkdown.listItem")(o[i],t),++d}return(r+="\n\x3c!-- --\x3e\n").trim()})),c.subParser("makeMarkdown.listItem",(function(e,t){"use strict";for(var n="",r=e.childNodes,o=r.length,i=0;i<o;++i)n+=c.subParser("makeMarkdown.node")(r[i],t);return/\n$/.test(n)?n=n.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):n+="\n",n})),c.subParser("makeMarkdown.node",(function(e,t,n){"use strict";n=n||!1;var r="";if(3===e.nodeType)return c.subParser("makeMarkdown.txt")(e,t);if(8===e.nodeType)return"\x3c!--"+e.data+"--\x3e\n\n";if(1!==e.nodeType)return"";switch(e.tagName.toLowerCase()){case"h1":n||(r=c.subParser("makeMarkdown.header")(e,t,1)+"\n\n");break;case"h2":n||(r=c.subParser("makeMarkdown.header")(e,t,2)+"\n\n");break;case"h3":n||(r=c.subParser("makeMarkdown.header")(e,t,3)+"\n\n");break;case"h4":n||(r=c.subParser("makeMarkdown.header")(e,t,4)+"\n\n");break;case"h5":n||(r=c.subParser("makeMarkdown.header")(e,t,5)+"\n\n");break;case"h6":n||(r=c.subParser("makeMarkdown.header")(e,t,6)+"\n\n");break;case"p":n||(r=c.subParser("makeMarkdown.paragraph")(e,t)+"\n\n");break;case"blockquote":n||(r=c.subParser("makeMarkdown.blockquote")(e,t)+"\n\n");break;case"hr":n||(r=c.subParser("makeMarkdown.hr")(e,t)+"\n\n");break;case"ol":n||(r=c.subParser("makeMarkdown.list")(e,t,"ol")+"\n\n");break;case"ul":n||(r=c.subParser("makeMarkdown.list")(e,t,"ul")+"\n\n");break;case"precode":n||(r=c.subParser("makeMarkdown.codeBlock")(e,t)+"\n\n");break;case"pre":n||(r=c.subParser("makeMarkdown.pre")(e,t)+"\n\n");break;case"table":n||(r=c.subParser("makeMarkdown.table")(e,t)+"\n\n");break;case"code":r=c.subParser("makeMarkdown.codeSpan")(e,t);break;case"em":case"i":r=c.subParser("makeMarkdown.emphasis")(e,t);break;case"strong":case"b":r=c.subParser("makeMarkdown.strong")(e,t);break;case"del":r=c.subParser("makeMarkdown.strikethrough")(e,t);break;case"a":r=c.subParser("makeMarkdown.links")(e,t);break;case"img":r=c.subParser("makeMarkdown.image")(e,t);break;default:r=e.outerHTML+"\n\n"}return r})),c.subParser("makeMarkdown.paragraph",(function(e,t){"use strict";var n="";if(e.hasChildNodes())for(var r=e.childNodes,o=r.length,i=0;i<o;++i)n+=c.subParser("makeMarkdown.node")(r[i],t);return n=n.trim()})),c.subParser("makeMarkdown.pre",(function(e,t){"use strict";var n=e.getAttribute("prenum");return"<pre>"+t.preList[n]+"</pre>"})),c.subParser("makeMarkdown.strikethrough",(function(e,t){"use strict";var n="";if(e.hasChildNodes()){n+="~~";for(var r=e.childNodes,o=r.length,i=0;i<o;++i)n+=c.subParser("makeMarkdown.node")(r[i],t);n+="~~"}return n})),c.subParser("makeMarkdown.strong",(function(e,t){"use strict";var n="";if(e.hasChildNodes()){n+="**";for(var r=e.childNodes,o=r.length,i=0;i<o;++i)n+=c.subParser("makeMarkdown.node")(r[i],t);n+="**"}return n})),c.subParser("makeMarkdown.table",(function(e,t){"use strict";var i,n,r="",o=[[],[]],l=e.querySelectorAll("thead>tr>th"),d=e.querySelectorAll("tbody>tr");for(i=0;i<l.length;++i){var h=c.subParser("makeMarkdown.tableCell")(l[i],t),f="---";if(l[i].hasAttribute("style"))switch(l[i].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":f=":---";break;case"text-align:right;":f="---:";break;case"text-align:center;":f=":---:"}o[0][i]=h.trim(),o[1][i]=f}for(i=0;i<d.length;++i){var m=o.push([])-1,v=d[i].getElementsByTagName("td");for(n=0;n<l.length;++n){var _=" ";void 0!==v[n]&&(_=c.subParser("makeMarkdown.tableCell")(v[n],t)),o[m].push(_)}}var y=3;for(i=0;i<o.length;++i)for(n=0;n<o[i].length;++n){var w=o[i][n].length;w>y&&(y=w)}for(i=0;i<o.length;++i){for(n=0;n<o[i].length;++n)1===i?":"===o[i][n].slice(-1)?o[i][n]=c.helper.padEnd(o[i][n].slice(-1),y-1,"-")+":":o[i][n]=c.helper.padEnd(o[i][n],y,"-"):o[i][n]=c.helper.padEnd(o[i][n],y);r+="| "+o[i].join(" | ")+" |\n"}return r.trim()})),c.subParser("makeMarkdown.tableCell",(function(e,t){"use strict";var n="";if(!e.hasChildNodes())return"";for(var r=e.childNodes,o=r.length,i=0;i<o;++i)n+=c.subParser("makeMarkdown.node")(r[i],t,!0);return n.trim()})),c.subParser("makeMarkdown.txt",(function(e){"use strict";var t=e.nodeValue;return t=(t=t.replace(/ +/g," ")).replace(/¨NBSP;/g," "),t=(t=(t=(t=(t=(t=(t=(t=(t=c.helper.unescapeHTMLEntities(t)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")}));void 0===(r=function(){"use strict";return c}.call(t,n,t,e))||(e.exports=r)}).call(this)},3688:function(e,t,n){"use strict";var r=n(392),o=n(157),c=n(726),l=n(119),d=function(e,t,source,n,h,f,m,v){for(var element,_,y=h,w=0,x=!!m&&l(m,v);w<n;)w in source&&(element=x?x(source[w],w,t):source[w],f>0&&r(element)?(_=o(element),y=d(e,t,element,_,y,f-1)-1):(c(y+1),e[y]=element),y++),w++;return y};e.exports=d},3689:function(e,t,n){"use strict";function r(text){for(var e=0,i=0;i<text.length;i++){var t=text.charCodeAt(i);t>=19968&&t<=40869&&e++}return e/text.length*100}n.d(t,"a",(function(){return r}))},3690:function(e,t,n){var r=n(3401),o=n(3407),c=n(3504),l=n(3370);e.exports=function(e,t,object){if(!l(object))return!1;var n=typeof t;return!!("number"==n?o(object)&&c(t,object.length):"string"==n&&t in object)&&r(object[t],e)}},3691:function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},3692:function(e,t,n){var r=n(3618),o=n(3616),c=n(3691),l=n(3474),d=n(3373),h=n(3619),f=Math.min;e.exports=function(e,t,n){for(var m=n?c:o,v=e[0].length,_=e.length,y=_,w=Array(_),x=1/0,k=[];y--;){var S=e[y];y&&t&&(S=l(S,d(t))),x=f(S.length,x),w[y]=!n&&(t||v>=120&&S.length>=120)?new r(y&&S):void 0}S=e[0];var I=-1,O=w[0];e:for(;++I<v&&k.length<x;){var j=S[I],T=t?t(j):j;if(j=n||0!==j?j:0,!(O?h(O,T):m(k,T,n))){for(y=_;--y;){var P=w[y];if(!(P?h(P,T):m(e[y],T,n)))continue e}O&&O.push(T),k.push(j)}}return k}},3693:function(e,t,n){var r=n(3469);e.exports=function(e){return r(e)?e:[]}},3694:function(e,t,n){var r=n(3474),o=n(3674),c=n(4203),l=n(3373),d=n(3403),h=Array.prototype.splice;e.exports=function(e,t,n,f){var m=f?c:o,v=-1,_=t.length,y=e;for(e===t&&(t=d(t)),n&&(y=r(e,l(n)));++v<_;)for(var w=0,x=t[v],k=n?n(x):x;(w=m(y,k,w,f))>-1;)y!==e&&h.call(y,w,1),h.call(e,w,1);return e}},3695:function(e,t,n){var r=n(3516),o=Math.floor,c=Math.min;e.exports=function(e,t,n,l){var d=0,h=null==e?0:e.length;if(0===h)return 0;for(var f=(t=n(t))!=t,m=null===t,v=r(t),_=void 0===t;d<h;){var y=o((d+h)/2),w=n(e[y]),x=void 0!==w,k=null===w,S=w==w,I=r(w);if(f)var O=l||S;else O=_?S&&(l||x):m?S&&x&&(l||!k):v?S&&x&&!k&&(l||!I):!k&&!I&&(l?w<=t:w<t);O?d=y+1:h=y}return c(h,4294967294)}},3696:function(e,t,n){var r=n(3564),o=n(3474),c=n(3749),l=n(3722),d=n(3469),h=Math.max;e.exports=function(e){if(!e||!e.length)return[];var t=0;return e=r(e,(function(e){if(d(e))return t=h(e.length,t),!0})),l(t,(function(t){return o(e,c(t))}))}},3697:function(e,t,n){var r=n(3578),o=n(3468),c=n(3523);e.exports=function(e,t,n){var l=e.length;if(l<2)return l?c(e[0]):[];for(var d=-1,h=Array(l);++d<l;)for(var f=e[d],m=-1;++m<l;)m!=d&&(h[d]=r(h[d]||f,e[m],t,n));return c(o(h,1),t,n)}},3765:function(e,t,n){"use strict";var r=n(46),o=n(4171);r({target:"Number",stat:!0,forced:Number.parseFloat!==o},{parseFloat:o})},3766:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(2),o=n(3),c=n(233),l=n(234),d=(n(20),n(16),n(9),n(7),n(11),n(12),n(8),n(4),n(71),n(6),n(3800)),h=n(1931),f=n(3689),m=n(3652);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){function e(data){Object(c.a)(this,e),this.state={isEdit:!1,isDict:!1},this.data=Object.assign({disabled:!1},data)}return Object(l.a)(e,[{key:"updateContent",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(text){var t,n,r,o,c,l,d,v,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(h.a)(),r=text,(text.startsWith("--")||text.startsWith("—"))&&(text=text.split(" ")[0],o=!0),this.data.word.desc=void 0,this.data.word.langText=void 0,this.data.word.rawText="",c=Object(f.a)(text),o||!(c>50)){e.next=12;break}return e.next=10,Object(m.a)([text],{to:"en"});case 10:null!=(d=e.sent)&&d[0]&&(l=!0,this.data.word.langText=text,text=d[0],r=text);case 12:return this.data.word.text=text,this.data.word.rawText=r,e.next=16,null===(t=n.queryPromptsDefine([text]))||void 0===t?void 0:t[0];case 16:if((v=e.sent)&&(v.lang&&(this.data.word.langText=v.lang),v.desc&&(this.data.word.desc=v.desc),v.subType&&(this.data.word.subType=v.subType)),l||o||this.data.word.langText||!(c<5)){e.next=23;break}return e.next=21,Object(m.a)([text]);case 21:(_=e.sent)&&_[0]&&(this.data.word.langText=_[0]);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"fromWord",value:function(t){return new e({word:Object.assign(w(),t)})}},{key:"createEmpty",value:function(data){return new e({word:_(_({},w()),{},{id:"".concat(data.text,",").concat(Date.now()),text:data.text||"",rawText:data.text||"",type:d.a.Word,group:data.group,subType:data.subType,desc:"",args:[],lv:1,isEg:!1})})}}]);var t}();function w(){return{id:null,text:null,rawText:null,langText:null,type:d.a.Word,group:null,subType:null,desc:null,args:[],lv:null,isEg:null}}},3767:function(e,t){e.exports=function(e){return e&&e.length?e[0]:void 0}},3768:function(e,t,n){var r=n(3694);e.exports=function(e,t){return e&&e.length&&t&&t.length?r(e,t):e}},3769:function(e,t,n){var r=n(4208),o=n(3504),c=Array.prototype.splice;e.exports=function(e,t){for(var n=e?t.length:0,l=n-1;n--;){var d=t[n];if(n==l||d!==h){var h=d;o(d)?c.call(e,d,1):r(e,d)}}return e}},3770:function(e,t,n){var r=n(3401);e.exports=function(e,t){for(var n=-1,o=e.length,c=0,l=[];++n<o;){var d=e[n],h=t?t(d):d;if(!n||!r(h,f)){var f=h;l[c++]=0===d?0:d}}return l}},3771:function(e,t,n){var r=n(3540),o=n(3474),c=n(3696);e.exports=function(e,t){if(!e||!e.length)return[];var n=c(e);return null==t?n:o(n,(function(e){return r(t,void 0,e)}))}},3772:function(e,t){e.exports=function(e,t,n){for(var r=-1,o=e.length,c=t.length,l={};++r<o;){var d=r<c?t[r]:void 0;n(l,e[r],d)}return l}},3800:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return A}));var r=n(3),o=(n(20),n(19),n(4),n(441),n(6),n(9),n(85),n(101),n(75),n(14),n(49),n(16),n(7),n(70),n(36),n(3765),n(23),n(50),n(118),n(37),n(110),n(48),n(3652));function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,a){if(e){if("string"==typeof e)return l(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function l(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}function d(e,t){return h.apply(this,arguments)}function h(){return(h=Object(r.a)(regeneratorRuntime.mark((function e(text,t){var n,r,c,l,d,i,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=m(text),text=r.text,c=text.split("::"),l=[],d=regeneratorRuntime.mark((function e(){var n,text,r,d,h,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,text=c[i],r=1,(d=c[n+1])&&(m=null===(h=/^[\.\-0-9]+/.exec(d))||void 0===h?void 0:h[0])&&(c[n+1]=d.slice(m.length),r=Number.parseFloat(m)),v=f(text).filter((function(text){return""!=text})),null==t||!t.zh2en){e.next=10;break}return e.next=9,Object(o.b)(v);case 9:v=e.sent;case 10:v.forEach((function(text,i){var e={text:text,type:P.Word,rawText:text,group:"".concat(n,"::").concat(r),lv:r};l.push(e)}));case 11:case"end":return e.stop()}}),e)})),i=0;case 6:if(!(i<c.length)){e.next=11;break}return e.delegateYield(d(),"t0",8);case 8:i++,e.next=6;break;case 11:return h=null===(n=l[l.length-1])||void 0===n?void 0:n.group,r.commands.forEach((function(e){l.push({id:e.command,text:e.command,rawText:e.rawText,type:P.Word,subType:"command",group:h,args:e.args})})),e.abrupt("return",l);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(text){return(text.match(/{[^}]*}|[^{,，|\[\]\(\)\n]+/g)||[]).map((function(e){return e.trim()}))}function m(text){var e=[];return text=text.replace(/(--|—)(version|v|aspect|ar|quality|q|chaos|c|seed|sameseed|stop|style|stylize|s|no|niji|repeat|iw|width|w|height|h+) ([\w\.:]+)/g,(function(t){return e.push({command:(arguments.length<=1?void 0:arguments[1])+(arguments.length<=2?void 0:arguments[2]),args:[arguments.length<=3?void 0:arguments[3]],rawText:t}),""})),text=text.replace(/(--|—)([a-zA-Z0-9]+)/g,(function(t){return e.push({command:(arguments.length<=1?void 0:arguments[1])+(arguments.length<=2?void 0:arguments[2]),args:[],rawText:t}),""})),{text:text,commands:e}}var v=n(2),_=(n(11),n(12),n(8),n(765),n(24));function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,a){if(e){if("string"==typeof e)return w(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function w(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t){return I.apply(this,arguments)}function I(){return(I=Object(r.a)(regeneratorRuntime.mark((function e(text,t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],r=O(text).filter((function(e){return""!=e})),null==t||!t.zh2en){e.next=6;break}return e.next=5,Object(o.b)(r);case 5:r=e.sent;case 6:return r.forEach((function(text,i){var e=j(text).word;n.push(e)})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(text){return text.split(/[,，\n]/).map((function(e){return e.trim()}))}function j(text){var e,t,n,r,o;return c(/^\[(.*?):(.*?):(.*?)\]$/.test(text))?r=k({text:n=text,type:P.Word,rawText:text},T.Editing_from_to_when):c(/^\[(.*?):(.*?)\]$/.test(text))?r=k({text:n=text,type:P.Word,rawText:text},T.Editing_to_when):c(/^\(([^:]+?):([0-9\.]+?)\)$/.exec(text))?r={text:n=o[1],lv:e=o[2],type:P.Word,rawText:text}:c(/^(\(+)(.+?)(\)+)$/.exec(text))?(n=o[2],t=o[1].length,r={text:n,lv:e=Object(_.round)(Math.pow(1.1,t),2),alv:t,type:P.Word,rawText:text}):c(/^(\[+)(.+?)(\]+)$/.exec(text))?(n=o[2],t=-o[1].length,r={text:n,lv:e=Object(_.round)(1/Math.pow(1.1,Math.abs(t)),2),alv:t,type:P.Word,rawText:text}):r=c(/^<(.+?):(.+?):(.*?)>$/.exec(text))?{text:text,type:P.Word,rawText:text,langText:"".concat(o[1]),subType:"command",link:"https://www.google.com/search?q=".concat(encodeURIComponent(o[2]),"%20 civitai.com ")}:{text:n=text,type:P.Word,rawText:text},{displayText:n,lv:e,word:r};function c(e){return o=e,e}}var T={Editing_from_to_when:{subType:"command",langText:"剪辑 (Editing) ",desc:"[起始词:结束词:切换时机] \n在生成采样的过程中，从一个关键词切换到另一个关键词。\n切换时机：大于 1 的整数代表指定步数，如果小于 1 的小数代表百分比时间。\n结束词: 如果为空表示切换时删除起始词",link:"https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Features#prompt-editing"},Editing_to_when:{subType:"command",langText:"剪辑 (Editing) ",desc:"[起始词:切换时机] \n在生成采样的过程中，从一个关键词切换到另一个关键词。\n切换时机：大于 1 的整数代表指定步数，如果小于 1 的小数代表百分比时间。",link:"https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Features#prompt-editing"}};var P,C=n(1931);function M(e){return E.apply(this,arguments)}function E(){return E=Object(r.a)(regeneratorRuntime.mark((function e(text){var t,n,r,o,c,l,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("midjourney"!==(t=h.length>1&&void 0!==h[1]?h[1]:{parser:"stable-diffusion-webui"}).parser){e.next=7;break}return e.next=4,d(text,t);case 4:case 10:n=e.sent,e.next=14;break;case 7:if("stable-diffusion-webui"!==t.parser){e.next=13;break}return e.next=10,S(text,t);case 13:throw new Error("err ParsePrompts not support this parser:".concat(t.parser));case 14:return t.minify&&(n=D(n)),r=Object(C.a)(),e.next=18,r.queryPromptsDefine(n.map((function(e){return e.text})));case 18:return o=e.sent,c={words:[],egWords:[]},l={},n.forEach((function(e,i){void 0!==l[e.rawText]?l[e.rawText]=l[e.rawText]+1:l[e.rawText]=0,e.id=e.rawText+"__"+l[e.rawText];var t=o[i];t&&(t.lang&&(e.langText=t.lang),t.subType&&(e.subType=t.subType),t.desc&&(e.desc=t.desc),t.dir&&(e.dir=t.dir)),c.words.push(e)})),e.abrupt("return",c);case 23:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function A(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;if("midjourney"===n.parser)e=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n="",r=[],i=0,o=t.length,l=c(t);try{for(l.s();!(e=l.n()).done;){var d,h=e.value,f=[],m=c(h.lists);try{for(m.s();!(d=m.n()).done;){var v,_=c(d.value.items);try{for(_.s();!(v=_.n()).done;){var y=v.value;y.data.disabled||("command"===y.data.word.subType?r.push(y.data.word.rawText):f.push(y.data.word.rawText))}}catch(e){_.e(e)}finally{_.f()}}}catch(e){m.e(e)}finally{m.f()}n+=f.filter((function(e){return""!=e})).join(", "),o>0&&(i<o-1?n+=" ::".concat(1==h.groupLv?"":h.groupLv," "):h.groupLv&&1!=h.groupLv&&(n+=" ::".concat(h.groupLv," "))),i++}}catch(e){l.e(e)}finally{l.f()}return r.length>0&&(n+=" ".concat(r.join(" "))),n.trim()}(t);else{if("stable-diffusion-webui"!==n.parser)throw new Error("err ParsePrompts not support this parser:".concat(n.parser));e=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n="",r=[],o=(t.length,y(t));try{for(o.s();!(e=o.n()).done;){var c,l=e.value,d=[],h=y(l.lists);try{for(h.s();!(c=h.n()).done;){var f,m=y(c.value.items);try{for(m.s();!(f=m.n()).done;){var v=f.value;v.data.disabled||("command"===v.data.word.subType?r.push(v.data.word.rawText):d.push(v.data.word.rawText))}}catch(e){m.e(e)}finally{m.f()}}}catch(e){h.e(e)}finally{h.f()}n+=d.filter((function(e){return""!=e})).join(", "),n+=" "}}catch(e){o.e(e)}finally{o.f()}return r.length>0&&(n+=" ".concat(r.join(" "))),n.trim()}(t)}return e}function D(e){var map={};return e.forEach((function(e){return map[e.rawText]=e})),Object.values(map)}!function(e){e.Word="word"}(P||(P={}))},395:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},n.p="/dist/",n(n.s=65)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,c,l,d){var h,f="function"==typeof e?e.options:e;if(t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0),r&&(f.functional=!0),c&&(f._scopeId="data-v-"+c),l?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},f._ssrRegister=h):o&&(h=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),h)if(f.functional){f._injectStyles=h;var m=f.render;f.render=function(e,t){return h.call(t),m(e,t)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,h):[h]}return{exports:e,options:f}}n.d(t,"a",(function(){return r}))},10:function(e,t){e.exports=n(388)},11:function(e,t){e.exports=n(314)},12:function(e,t){e.exports=n(717)},15:function(e,t){e.exports=n(718)},19:function(e,t){e.exports=n(571)},22:function(e,t){e.exports=n(572)},3:function(e,t){e.exports=n(156)},4:function(e,t){e.exports=n(170)},5:function(e,t){e.exports=n(440)},65:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.close,expression:"close"}],staticClass:"el-autocomplete",attrs:{"aria-haspopup":"listbox",role:"combobox","aria-expanded":e.suggestionVisible,"aria-owns":e.id}},[n("el-input",e._b({ref:"input",on:{input:e.handleInput,change:e.handleChange,focus:e.handleFocus,blur:e.handleBlur,clear:e.handleClear},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex-1)},function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex+1)},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeyEnter(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.close(t)}]}},"el-input",[e.$props,e.$attrs],!1),[e.$slots.prepend?n("template",{slot:"prepend"},[e._t("prepend")],2):e._e(),e.$slots.append?n("template",{slot:"append"},[e._t("append")],2):e._e(),e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e.$slots.suffix?n("template",{slot:"suffix"},[e._t("suffix")],2):e._e()],2),n("el-autocomplete-suggestions",{ref:"suggestions",class:[e.popperClass?e.popperClass:""],attrs:{"visible-arrow":"","popper-options":e.popperOptions,"append-to-body":e.popperAppendToBody,placement:e.placement,id:e.id}},e._l(e.suggestions,(function(t,r){return n("li",{key:r,class:{highlighted:e.highlightedIndex===r},attrs:{id:e.id+"-item-"+r,role:"option","aria-selected":e.highlightedIndex===r},on:{click:function(n){e.select(t)}}},[e._t("default",[e._v("\n        "+e._s(t[e.valueKey])+"\n      ")],{item:t})],2)})),0)],1)};r._withStripped=!0;var o=n(19),c=n.n(o),l=n(10),d=n.n(l),h=n(12),f=n.n(h),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-autocomplete-suggestion el-popper",class:{"is-loading":!e.parent.hideLoading&&e.parent.loading},style:{width:e.dropdownWidth},attrs:{role:"region"}},[n("el-scrollbar",{attrs:{tag:"ul","wrap-class":"el-autocomplete-suggestion__wrap","view-class":"el-autocomplete-suggestion__list"}},[!e.parent.hideLoading&&e.parent.loading?n("li",[n("i",{staticClass:"el-icon-loading"})]):e._t("default")],2)],1)])};m._withStripped=!0;var v=n(5),_=n.n(v),y=n(4),w=n.n(y),x=n(15),k={components:{ElScrollbar:n.n(x).a},mixins:[_.a,w.a],componentName:"ElAutocompleteSuggestions",data:function(){return{parent:this.$parent,dropdownWidth:""}},props:{options:{default:function(){return{gpuAcceleration:!1}}},id:String},methods:{select:function(e){this.dispatch("ElAutocomplete","item-click",e)}},updated:function(){var e=this;this.$nextTick((function(t){e.popperJS&&e.updatePopper()}))},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$refs.input.$refs.input||this.$parent.$refs.input.$refs.textarea,this.referenceList=this.$el.querySelector(".el-autocomplete-suggestion__list"),this.referenceList.setAttribute("role","listbox"),this.referenceList.setAttribute("id",this.id)},created:function(){var e=this;this.$on("visible",(function(t,n){e.dropdownWidth=n+"px",e.showPopper=t}))}},S=n(0),component=Object(S.a)(k,m,[],!1,null,null,null);component.options.__file="packages/autocomplete/src/autocomplete-suggestions.vue";var I=component.exports,O=n(11),j=n.n(O),T=n(3),P=n(22),C=n.n(P),M={name:"ElAutocomplete",mixins:[w.a,C()("input"),j.a],inheritAttrs:!1,componentName:"ElAutocomplete",components:{ElInput:d.a,ElAutocompleteSuggestions:I},directives:{Clickoutside:f.a},props:{valueKey:{type:String,default:"value"},popperClass:String,popperOptions:Object,placeholder:String,clearable:{type:Boolean,default:!1},disabled:Boolean,name:String,size:String,value:String,maxlength:Number,minlength:Number,autofocus:Boolean,fetchSuggestions:Function,triggerOnFocus:{type:Boolean,default:!0},customItem:String,selectWhenUnmatched:{type:Boolean,default:!1},prefixIcon:String,suffixIcon:String,label:String,debounce:{type:Number,default:300},placement:{type:String,default:"bottom-start"},hideLoading:Boolean,popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},data:function(){return{activated:!1,suggestions:[],loading:!1,highlightedIndex:-1,suggestionDisabled:!1}},computed:{suggestionVisible:function(){var e=this.suggestions;return(Array.isArray(e)&&e.length>0||this.loading)&&this.activated},id:function(){return"el-autocomplete-"+Object(T.generateId)()}},watch:{suggestionVisible:function(e){var t=this.getInput();t&&this.broadcast("ElAutocompleteSuggestions","visible",[e,t.offsetWidth])}},methods:{getMigratingConfig:function(){return{props:{"custom-item":"custom-item is removed, use scoped slot instead.",props:"props is removed, use value-key instead."}}},getData:function(e){var t=this;this.suggestionDisabled||(this.loading=!0,this.fetchSuggestions(e,(function(e){t.loading=!1,t.suggestionDisabled||(Array.isArray(e)?(t.suggestions=e,t.highlightedIndex=t.highlightFirstItem?0:-1):console.error("[Element Error][Autocomplete]autocomplete suggestions must be an array"))})))},handleInput:function(e){if(this.$emit("input",e),this.suggestionDisabled=!1,!this.triggerOnFocus&&!e)return this.suggestionDisabled=!0,void(this.suggestions=[]);this.debouncedGetData(e)},handleChange:function(e){this.$emit("change",e)},handleFocus:function(e){this.activated=!0,this.$emit("focus",e),this.triggerOnFocus&&this.debouncedGetData(this.value)},handleBlur:function(e){this.$emit("blur",e)},handleClear:function(){this.activated=!1,this.$emit("clear")},close:function(e){this.activated=!1},handleKeyEnter:function(e){var t=this;this.suggestionVisible&&this.highlightedIndex>=0&&this.highlightedIndex<this.suggestions.length?(e.preventDefault(),this.select(this.suggestions[this.highlightedIndex])):this.selectWhenUnmatched&&(this.$emit("select",{value:this.value}),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1})))},select:function(e){var t=this;this.$emit("input",e[this.valueKey]),this.$emit("select",e),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1}))},highlight:function(e){if(this.suggestionVisible&&!this.loading)if(e<0)this.highlightedIndex=-1;else{e>=this.suggestions.length&&(e=this.suggestions.length-1);var t=this.$refs.suggestions.$el.querySelector(".el-autocomplete-suggestion__wrap"),n=t.querySelectorAll(".el-autocomplete-suggestion__list li")[e],r=t.scrollTop,o=n.offsetTop;o+n.scrollHeight>r+t.clientHeight&&(t.scrollTop+=n.scrollHeight),o<r&&(t.scrollTop-=n.scrollHeight),this.highlightedIndex=e,this.getInput().setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)}},getInput:function(){return this.$refs.input.getInput()}},mounted:function(){var e=this;this.debouncedGetData=c()(this.debounce,this.getData),this.$on("item-click",(function(t){e.select(t)}));var t=this.getInput();t.setAttribute("role","textbox"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-controls","id"),t.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)},beforeDestroy:function(){this.$refs.suggestions.$destroy()}},E=Object(S.a)(M,r,[],!1,null,null,null);E.options.__file="packages/autocomplete/src/autocomplete.vue";var A=E.exports;A.install=function(e){e.component(A.name,A)};t.default=A}})},41:function(e,t,n){"use strict";n.d(t,"r",(function(){return o})),n.d(t,"o",(function(){return c})),n.d(t,"m",(function(){return l})),n.d(t,"A",(function(){return d})),n.d(t,"y",(function(){return h})),n.d(t,"z",(function(){return f})),n.d(t,"x",(function(){return m})),n.d(t,"s",(function(){return v})),n.d(t,"f",(function(){return _})),n.d(t,"u",(function(){return y})),n.d(t,"d",(function(){return w})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return k})),n.d(t,"e",(function(){return S})),n.d(t,"v",(function(){return I})),n.d(t,"B",(function(){return O})),n.d(t,"D",(function(){return j})),n.d(t,"E",(function(){return T})),n.d(t,"a",(function(){return P})),n.d(t,"F",(function(){return C})),n.d(t,"q",(function(){return M})),n.d(t,"C",(function(){return E})),n.d(t,"p",(function(){return A})),n.d(t,"j",(function(){return D})),n.d(t,"k",(function(){return $})),n.d(t,"t",(function(){return L})),n.d(t,"i",(function(){return R})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return B})),n.d(t,"l",(function(){return z})),n.d(t,"w",(function(){return U})),n.d(t,"n",(function(){return F}));var r=n(17);function o(data){return Object(r.a)({url:"/api/v1/model/list",method:"post",data:data})}function c(data){return Object(r.a)({url:"/api/v1/square/task/model/search",method:"post",data:data})}function l(data){return Object(r.a)({url:"/api/v1/resource/createModel",method:"post",data:data})}function d(data){return Object(r.a)({url:"/api/v1/resource/commitModel",method:"post",data:data})}function h(data){return Object(r.a)({url:"/api/v1/model/edit",method:"post",data:data})}function f(data){return Object(r.a)({url:"/api/v1/model/ver/edit",method:"post",data:data})}function m(data){return Object(r.a)({url:"/api/v1/resource/delModel",method:"post",data:data})}function v(data){return Object(r.a)({url:"/api/v1/model/list/other",method:"POST",data:data})}function _(data){return Object(r.a)({url:"/api/v1/train-model/data-set/list",method:"POST",data:data})}function y(data){return Object(r.a)({url:"/api/v1/resource/publish",method:"POST",data:data,customConfig:{isSilent:!0}})}function w(data){return Object(r.a)({url:"/api/v1/train-model/data-set/detail",method:"POST",data:data})}function x(data){return Object(r.a)({url:"/api/v1/train-model/data-set/create",method:"POST",data:data})}function k(data){return Object(r.a)({url:"/api/v1/train-model/data-set/delete",method:"POST",data:data})}function S(data){return Object(r.a)({url:"/api/v1/train-model/data-set/edit",method:"POST",data:data})}function I(data){return Object(r.a)({url:"/api/v1/model/recommend/byUrl",method:"POST",data:data})}function O(data){return Object(r.a)({url:"/api/v1/train-model/create",method:"POST",data:data})}function j(data){return Object(r.a)({url:"/api/v1/train-model/in-progress-list",method:"POST",data:data})}function T(data){return Object(r.a)({url:"/api/v1/train-model/batch-progress",method:"POST",data:data})}function P(data){return Object(r.a)({url:"/api/v1/model/ver/add",method:"POST",data:data})}function C(data){return Object(r.a)({url:"/api/v1/model/versionDetail",method:"POST",data:data})}function M(data){return Object(r.a)({url:"/api/v1/model/delist",method:"POST",data:data,customConfig:{isSilent:!0}})}function E(data){return Object(r.a)({url:"/api/v1/train-model/estimate",method:"POST",data:data})}function A(data){return Object(r.a)({url:"/api/v1/square/model/artwork/related",method:"POST",data:data})}function D(data){return Object(r.a)({url:"/api/v1/square/model/my",method:"POST",data:data})}function $(data){return Object(r.a)({url:"/api/v1/square/model/other",method:"POST",data:data})}function L(data){return Object(r.a)({url:"/api/v1/model/save",method:"POST",data:data})}function R(data){return Object(r.a)({url:"/api/v1/model/detail-with-ver",method:"POST",data:data})}function N(data){return Object(r.a)({url:"/api/v1/model/ver/can-del",method:"POST",data:data})}function B(data){return Object(r.a)({url:"/api/v1/task/create-refer",method:"POST",data:data})}function z(data){return Object(r.a)({url:"/api/v1/square/my-artwork/community",method:"POST",data:data})}function U(data){return Object(r.a)({url:"/api/v1/model/publish",method:"POST",data:data})}function F(data){return Object(r.a)({url:"/api/v1/model/import/submit",method:"POST",data:data})}},4170:function(e,t,n){"use strict";var r=n(46),o=n(67);r({global:!0,forced:o.globalThis!==o},{globalThis:o})},4171:function(e,t,n){"use strict";var r=n(67),o=n(62),c=n(58),l=n(103),d=n(732).trim,h=n(733),f=c("".charAt),m=r.parseFloat,v=r.Symbol,_=v&&v.iterator,y=1/m(h+"-0")!=-1/0||_&&!o((function(){m(Object(_))}));e.exports=y?function(e){var t=d(l(e)),n=m(t);return 0===n&&"-"===f(t,0)?-0:n}:m},4172:function(e,t,n){var r=n(3475),o=n(3690),c=n(3441),l=Math.ceil,d=Math.max;e.exports=function(e,t,n){t=(n?o(e,t,n):void 0===t)?1:d(c(t),0);var h=null==e?0:e.length;if(!h||t<1)return[];for(var f=0,m=0,v=Array(l(h/t));f<h;)v[m++]=r(e,f,f+=t);return v}},4173:function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var c=e[t];c&&(o[r++]=c)}return o}},4174:function(e,t,n){var r=n(3404),o=n(3468),c=n(3403),l=n(3400);e.exports=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],d=e;d--;)t[d-1]=arguments[d];return r(l(n)?c(n):[n],o(t,1))}},4175:function(e,t,n){var r=n(3578),o=n(3468),c=n(3432),l=n(3469),d=c((function(e,t){return l(e)?r(e,o(t,1,l,!0)):[]}));e.exports=d},4176:function(e,t,n){var r=n(3578),o=n(3468),c=n(3444),l=n(3432),d=n(3469),h=n(3482),f=l((function(e,t){var n=h(t);return d(n)&&(n=void 0),d(e)?r(e,o(t,1,d,!0),c(n,2)):[]}));e.exports=f},4177:function(e,t,n){var r=n(3578),o=n(3468),c=n(3432),l=n(3469),d=n(3482),h=c((function(e,t){var n=d(t);return l(n)&&(n=void 0),l(e)?r(e,o(t,1,l,!0),void 0,n):[]}));e.exports=h},4178:function(e,t,n){var r=n(3475),o=n(3441);e.exports=function(e,t,n){var c=null==e?0:e.length;return c?(t=n||void 0===t?1:o(t),r(e,t<0?0:t,c)):[]}},4179:function(e,t,n){var r=n(3475),o=n(3441);e.exports=function(e,t,n){var c=null==e?0:e.length;return c?(t=n||void 0===t?1:o(t),r(e,0,(t=c-t)<0?0:t)):[]}},4180:function(e,t,n){var r=n(3444),o=n(3622);e.exports=function(e,t){return e&&e.length?o(e,r(t,3),!0,!0):[]}},4181:function(e,t,n){var r=n(3444),o=n(3622);e.exports=function(e,t){return e&&e.length?o(e,r(t,3),!0):[]}},4182:function(e,t,n){var r=n(4183),o=n(3690);e.exports=function(e,t,n,c){var l=null==e?0:e.length;return l?(n&&"number"!=typeof n&&o(e,t,n)&&(n=0,c=l),r(e,t,n,c)):[]}},4183:function(e,t,n){var r=n(3441),o=n(4184);e.exports=function(e,t,n,c){var l=e.length;for((n=r(n))<0&&(n=-n>l?0:l+n),(c=void 0===c||c>l?l:r(c))<0&&(c+=l),c=n>c?0:o(c);n<c;)e[n++]=t;return e}},4184:function(e,t,n){var r=n(4185),o=n(3441);e.exports=function(e){return e?r(o(e),0,4294967295):0}},4185:function(e,t){e.exports=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},4186:function(e,t,n){var r=n(3617),o=n(3444),c=n(3441),l=Math.max;e.exports=function(e,t,n){var d=null==e?0:e.length;if(!d)return-1;var h=null==n?0:c(n);return h<0&&(h=l(d+h,0)),r(e,o(t,3),h)}},4187:function(e,t,n){var r=n(3617),o=n(3444),c=n(3441),l=Math.max,d=Math.min;e.exports=function(e,t,n){var h=null==e?0:e.length;if(!h)return-1;var f=h-1;return void 0!==n&&(f=c(n),f=n<0?l(h+f,0):d(f,h-1)),r(e,o(t,3),f,!0)}},4188:function(e,t,n){e.exports=n(3767)},4189:function(e,t,n){var r=n(3468),o=1/0;e.exports=function(e){return(null==e?0:e.length)?r(e,o):[]}},4190:function(e,t,n){var r=n(3468),o=n(3441);e.exports=function(e,t){return(null==e?0:e.length)?(t=void 0===t?1:o(t),r(e,t)):[]}},4191:function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r}},4192:function(e,t,n){var r=n(3674),o=n(3441),c=Math.max;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var d=null==n?0:o(n);return d<0&&(d=c(l+d,0)),r(e,t,d)}},4193:function(e,t,n){var r=n(3475);e.exports=function(e){return(null==e?0:e.length)?r(e,0,-1):[]}},4194:function(e,t,n){var r=n(3474),o=n(3692),c=n(3432),l=n(3693),d=c((function(e){var t=r(e,l);return t.length&&t[0]===e[0]?o(t):[]}));e.exports=d},4195:function(e,t,n){var r=n(3474),o=n(3692),c=n(3444),l=n(3432),d=n(3693),h=n(3482),f=l((function(e){var t=h(e),n=r(e,d);return t===h(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?o(n,c(t,2)):[]}));e.exports=f},4196:function(e,t,n){var r=n(3474),o=n(3692),c=n(3432),l=n(3693),d=n(3482),h=c((function(e){var t=d(e),n=r(e,l);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?o(n,void 0,t):[]}));e.exports=h},4197:function(e,t){var n=Array.prototype.join;e.exports=function(e,t){return null==e?"":n.call(e,t)}},4198:function(e,t,n){var r=n(3617),o=n(3739),c=n(4199),l=n(3441),d=Math.max,h=Math.min;e.exports=function(e,t,n){var f=null==e?0:e.length;if(!f)return-1;var m=f;return void 0!==n&&(m=(m=l(n))<0?d(f+m,0):h(m,f-1)),t==t?c(e,t,m):r(e,o,m,!0)}},4199:function(e,t){e.exports=function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}},4200:function(e,t,n){var r=n(4201),o=n(3441);e.exports=function(e,t){return e&&e.length?r(e,o(t)):void 0}},4201:function(e,t,n){var r=n(3504);e.exports=function(e,t){var n=e.length;if(n)return r(t+=t<0?n:0,n)?e[t]:void 0}},4202:function(e,t,n){var r=n(3432)(n(3768));e.exports=r},4203:function(e,t){e.exports=function(e,t,n,r){for(var o=n-1,c=e.length;++o<c;)if(r(e[o],t))return o;return-1}},4204:function(e,t,n){var r=n(3444),o=n(3694);e.exports=function(e,t,n){return e&&e.length&&t&&t.length?o(e,t,r(n,2)):e}},4205:function(e,t,n){var r=n(3694);e.exports=function(e,t,n){return e&&e.length&&t&&t.length?r(e,t,void 0,n):e}},4206:function(e,t,n){var r=n(3474),o=n(4207),c=n(3769),l=n(4210),d=n(3751),h=n(3504),f=d((function(e,t){var n=null==e?0:e.length,d=o(e,t);return c(e,r(t,(function(e){return h(e,n)?+e:e})).sort(l)),d}));e.exports=f},4207:function(e,t,n){var r=n(3748);e.exports=function(object,e){for(var t=-1,n=e.length,o=Array(n),c=null==object;++t<n;)o[t]=c?void 0:r(object,e[t]);return o}},4208:function(e,t,n){var r=n(3620),o=n(3482),c=n(4209),l=n(3542);e.exports=function(object,path){return path=r(path,object),null==(object=c(object,path))||delete object[l(o(path))]}},4209:function(e,t,n){var r=n(3677),o=n(3475);e.exports=function(object,path){return path.length<2?object:r(object,o(path,0,-1))}},4210:function(e,t,n){var r=n(3516);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,c=e==e,l=r(e),d=void 0!==t,h=null===t,f=t==t,m=r(t);if(!h&&!m&&!l&&e>t||l&&d&&f&&!h&&!m||o&&d&&f||!n&&f||!c)return 1;if(!o&&!l&&!m&&e<t||m&&n&&c&&!o&&!l||h&&n&&c||!d&&c||!f)return-1}return 0}},4211:function(e,t,n){var r=n(3444),o=n(3769);e.exports=function(e,t){var n=[];if(!e||!e.length)return n;var c=-1,l=[],d=e.length;for(t=r(t,3);++c<d;){var h=e[c];t(h,c,e)&&(n.push(h),l.push(c))}return o(e,l),n}},4212:function(e,t){var n=Array.prototype.reverse;e.exports=function(e){return null==e?e:n.call(e)}},4213:function(e,t,n){var r=n(3475),o=n(3690),c=n(3441);e.exports=function(e,t,n){var l=null==e?0:e.length;return l?(n&&"number"!=typeof n&&o(e,t,n)?(t=0,n=l):(t=null==t?0:c(t),n=void 0===n?l:c(n)),r(e,t,n)):[]}},4214:function(e,t,n){var r=n(3623);e.exports=function(e,t){return r(e,t)}},4215:function(e,t,n){var r=n(3444),o=n(3695);e.exports=function(e,t,n){return o(e,t,r(n,2))}},4216:function(e,t,n){var r=n(3623),o=n(3401);e.exports=function(e,t){var n=null==e?0:e.length;if(n){var c=r(e,t);if(c<n&&o(e[c],t))return c}return-1}},4217:function(e,t,n){var r=n(3623);e.exports=function(e,t){return r(e,t,!0)}},4218:function(e,t,n){var r=n(3444),o=n(3695);e.exports=function(e,t,n){return o(e,t,r(n,2),!0)}},4219:function(e,t,n){var r=n(3623),o=n(3401);e.exports=function(e,t){if(null==e?0:e.length){var n=r(e,t,!0)-1;if(o(e[n],t))return n}return-1}},4220:function(e,t,n){var r=n(3770);e.exports=function(e){return e&&e.length?r(e):[]}},4221:function(e,t,n){var r=n(3444),o=n(3770);e.exports=function(e,t){return e&&e.length?o(e,r(t,2)):[]}},4222:function(e,t,n){var r=n(3475);e.exports=function(e){var t=null==e?0:e.length;return t?r(e,1,t):[]}},4223:function(e,t,n){var r=n(3475),o=n(3441);e.exports=function(e,t,n){return e&&e.length?(t=n||void 0===t?1:o(t),r(e,0,t<0?0:t)):[]}},4224:function(e,t,n){var r=n(3475),o=n(3441);e.exports=function(e,t,n){var c=null==e?0:e.length;return c?(t=n||void 0===t?1:o(t),r(e,(t=c-t)<0?0:t,c)):[]}},4225:function(e,t,n){var r=n(3444),o=n(3622);e.exports=function(e,t){return e&&e.length?o(e,r(t,3),!1,!0):[]}},4226:function(e,t,n){var r=n(3444),o=n(3622);e.exports=function(e,t){return e&&e.length?o(e,r(t,3)):[]}},4227:function(e,t,n){var r=n(3468),o=n(3432),c=n(3523),l=n(3469),d=o((function(e){return c(r(e,1,l,!0))}));e.exports=d},4228:function(e,t,n){var r=n(3724),o=n(3734),c=n(3676),l=r&&1/c(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=l},4229:function(e,t,n){var r=n(3468),o=n(3444),c=n(3432),l=n(3523),d=n(3469),h=n(3482),f=c((function(e){var t=h(e);return d(t)&&(t=void 0),l(r(e,1,d,!0),o(t,2))}));e.exports=f},4230:function(e,t,n){var r=n(3468),o=n(3432),c=n(3523),l=n(3469),d=n(3482),h=o((function(e){var t=d(e);return t="function"==typeof t?t:void 0,c(r(e,1,l,!0),void 0,t)}));e.exports=h},4231:function(e,t,n){var r=n(3523);e.exports=function(e){return e&&e.length?r(e):[]}},4232:function(e,t,n){var r=n(3444),o=n(3523);e.exports=function(e,t){return e&&e.length?o(e,r(t,2)):[]}},4233:function(e,t,n){var r=n(3523);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?r(e,void 0,t):[]}},4234:function(e,t,n){var r=n(3578),o=n(3432),c=n(3469),l=o((function(e,t){return c(e)?r(e,t):[]}));e.exports=l},4235:function(e,t,n){var r=n(3564),o=n(3432),c=n(3697),l=n(3469),d=o((function(e){return c(r(e,l))}));e.exports=d},4236:function(e,t,n){var r=n(3564),o=n(3444),c=n(3432),l=n(3697),d=n(3469),h=n(3482),f=c((function(e){var t=h(e);return d(t)&&(t=void 0),l(r(e,d),o(t,2))}));e.exports=f},4237:function(e,t,n){var r=n(3564),o=n(3432),c=n(3697),l=n(3469),d=n(3482),h=o((function(e){var t=d(e);return t="function"==typeof t?t:void 0,c(r(e,l),void 0,t)}));e.exports=h},4238:function(e,t,n){var r=n(3432)(n(3696));e.exports=r},4239:function(e,t,n){var r=n(3360),o=n(3772);e.exports=function(e,t){return o(e||[],t||[],r)}},4240:function(e,t,n){var r=n(4241),o=n(3772);e.exports=function(e,t){return o(e||[],t||[],r)}},4241:function(e,t,n){var r=n(3360),o=n(3620),c=n(3504),l=n(3370),d=n(3542);e.exports=function(object,path,e,t){if(!l(object))return object;for(var n=-1,h=(path=o(path,object)).length,f=h-1,m=object;null!=m&&++n<h;){var v=d(path[n]),_=e;if("__proto__"===v||"constructor"===v||"prototype"===v)return object;if(n!=f){var y=m[v];void 0===(_=t?t(y,v,m):void 0)&&(_=l(y)?y:c(path[n+1])?[]:{})}r(m,v,_),m=m[v]}return object}},4242:function(e,t,n){var r=n(3432),o=n(3771),c=r((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,o(e,n)}));e.exports=c},427:function(e,t,n){"use strict";function r(e){return new TextDecoder("utf-8").decode(e)}n.d(t,"a",(function(){return r}))},428:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},n.p="/dist/",n(n.s=85)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,c,l,d){var h,f="function"==typeof e?e.options:e;if(t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0),r&&(f.functional=!0),c&&(f._scopeId="data-v-"+c),l?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},f._ssrRegister=h):o&&(h=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),h)if(f.functional){f._injectStyles=h;var m=f.render;f.render=function(e,t){return h.call(t),m(e,t)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,h):[h]}return{exports:e,options:f}}n.d(t,"a",(function(){return r}))},29:function(e,t){e.exports=n(588)},37:function(e,t,n){"use strict";t.a={inject:["rootMenu"],computed:{indexPath:function(){for(var path=[this.index],e=this.$parent;"ElMenu"!==e.$options.componentName;)e.index&&path.unshift(e.index),e=e.$parent;return path},parentMenu:function(){for(var e=this.$parent;e&&-1===["ElMenu","ElSubmenu"].indexOf(e.$options.componentName);)e=e.$parent;return e},paddingStyle:function(){if("vertical"!==this.rootMenu.mode)return{};var e=20,t=this.$parent;if(this.rootMenu.collapse)e=20;else for(;t&&"ElMenu"!==t.$options.componentName;)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return{paddingLeft:e+"px"}}}}},4:function(e,t){e.exports=n(170)},85:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-menu-item",class:{"is-active":e.active,"is-disabled":e.disabled},style:[e.paddingStyle,e.itemStyle,{backgroundColor:e.backgroundColor}],attrs:{role:"menuitem",tabindex:"-1"},on:{click:e.handleClick,mouseenter:e.onMouseEnter,focus:e.onMouseEnter,blur:e.onMouseLeave,mouseleave:e.onMouseLeave}},["ElMenu"===e.parentMenu.$options.componentName&&e.rootMenu.collapse&&e.$slots.title?n("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._t("title")],2),n("div",{staticStyle:{position:"absolute",left:"0",top:"0",height:"100%",width:"100%",display:"inline-block","box-sizing":"border-box",padding:"0 20px"}},[e._t("default")],2)]):[e._t("default"),e._t("title")]],2)};r._withStripped=!0;var o=n(37),c=n(29),l=n.n(c),d=n(4),h=n.n(d),f={name:"ElMenuItem",componentName:"ElMenuItem",mixins:[o.a,h.a],components:{ElTooltip:l.a},props:{index:{default:null,validator:function(e){return"string"==typeof e||null===e}},route:[String,Object],disabled:Boolean},computed:{active:function(){return this.index===this.rootMenu.activeIndex},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},itemStyle:function(){var style={color:this.active?this.activeTextColor:this.textColor};return"horizontal"!==this.mode||this.isNested||(style.borderBottomColor=this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent"),style},isNested:function(){return this.parentMenu!==this.rootMenu}},methods:{onMouseEnter:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.hoverBackground)},onMouseLeave:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.backgroundColor)},handleClick:function(){this.disabled||(this.dispatch("ElMenu","item-click",this),this.$emit("click",this))}},mounted:function(){this.parentMenu.addItem(this),this.rootMenu.addItem(this)},beforeDestroy:function(){this.parentMenu.removeItem(this),this.rootMenu.removeItem(this)}},m=n(0),component=Object(m.a)(f,r,[],!1,null,null,null);component.options.__file="packages/menu/src/menu-item.vue";var v=component.exports;v.install=function(e){e.component(v.name,v)};t.default=v}})},429:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},n.p="/dist/",n(n.s=72)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,c,l,d){var h,f="function"==typeof e?e.options:e;if(t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0),r&&(f.functional=!0),c&&(f._scopeId="data-v-"+c),l?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},f._ssrRegister=h):o&&(h=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),h)if(f.functional){f._injectStyles=h;var m=f.render;f.render=function(e,t){return h.call(t),m(e,t)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,h):[h]}return{exports:e,options:f}}n.d(t,"a",(function(){return r}))},11:function(e,t){e.exports=n(314)},2:function(e,t){e.exports=n(194)},4:function(e,t){e.exports=n(170)},72:function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),c=n(11),l=n.n(c),d=d||{};d.Utils=d.Utils||{},d.Utils.focusFirstDescendant=function(element){for(var i=0;i<element.childNodes.length;i++){var e=element.childNodes[i];if(d.Utils.attemptFocus(e)||d.Utils.focusFirstDescendant(e))return!0}return!1},d.Utils.focusLastDescendant=function(element){for(var i=element.childNodes.length-1;i>=0;i--){var e=element.childNodes[i];if(d.Utils.attemptFocus(e)||d.Utils.focusLastDescendant(e))return!0}return!1},d.Utils.attemptFocus=function(element){if(!d.Utils.isFocusable(element))return!1;d.Utils.IgnoreUtilFocusChanges=!0;try{element.focus()}catch(e){}return d.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===element},d.Utils.isFocusable=function(element){if(element.tabIndex>0||0===element.tabIndex&&null!==element.getAttribute("tabIndex"))return!0;if(element.disabled)return!1;switch(element.nodeName){case"A":return!!element.href&&"ignore"!==element.rel;case"INPUT":return"hidden"!==element.type&&"file"!==element.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},d.Utils.triggerEvent=function(e,t){var n=void 0;n=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var r=document.createEvent(n),o=arguments.length,c=Array(o>2?o-2:0),l=2;l<o;l++)c[l-2]=arguments[l];return r.initEvent.apply(r,[t].concat(c)),e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r),e},d.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27};var h=d.Utils,f=function(e,t){this.domNode=t,this.parent=e,this.subMenuItems=[],this.subIndex=0,this.init()};f.prototype.init=function(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()},f.prototype.gotoSubIndex=function(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e},f.prototype.addListeners=function(){var e=this,t=h.keys,n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(function(r){r.addEventListener("keydown",(function(r){var o=!1;switch(r.keyCode){case t.down:e.gotoSubIndex(e.subIndex+1),o=!0;break;case t.up:e.gotoSubIndex(e.subIndex-1),o=!0;break;case t.tab:h.triggerEvent(n,"mouseleave");break;case t.enter:case t.space:o=!0,r.currentTarget.click()}return o&&(r.preventDefault(),r.stopPropagation()),!1}))}))};var m=f,v=function(e){this.domNode=e,this.submenu=null,this.init()};v.prototype.init=function(){this.domNode.setAttribute("tabindex","0");var e=this.domNode.querySelector(".el-menu");e&&(this.submenu=new m(this,e)),this.addListeners()},v.prototype.addListeners=function(){var e=this,t=h.keys;this.domNode.addEventListener("keydown",(function(n){var r=!1;switch(n.keyCode){case t.down:h.triggerEvent(n.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(0),r=!0;break;case t.up:h.triggerEvent(n.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(e.submenu.subMenuItems.length-1),r=!0;break;case t.tab:h.triggerEvent(n.currentTarget,"mouseleave");break;case t.enter:case t.space:r=!0,n.currentTarget.click()}r&&n.preventDefault()}))};var _=v,y=function(e){this.domNode=e,this.init()};y.prototype.init=function(){var e=this.domNode.childNodes;[].filter.call(e,(function(e){return 1===e.nodeType})).forEach((function(e){new _(e)}))};var w=y,x=n(2),k={name:"ElMenu",render:function(e){var component=e("ul",{attrs:{role:"menubar"},key:+this.collapse,style:{backgroundColor:this.backgroundColor||""},class:{"el-menu--horizontal":"horizontal"===this.mode,"el-menu--collapse":this.collapse,"el-menu":!0}},[this.$slots.default]);return this.collapseTransition?e("el-menu-collapse-transition",[component]):component},componentName:"ElMenu",mixins:[o.a,l.a],provide:function(){return{rootMenu:this}},components:{"el-menu-collapse-transition":{functional:!0,render:function(e,t){return e("transition",{props:{mode:"out-in"},on:{beforeEnter:function(e){e.style.opacity=.2},enter:function(e){Object(x.addClass)(e,"el-opacity-transition"),e.style.opacity=1},afterEnter:function(e){Object(x.removeClass)(e,"el-opacity-transition"),e.style.opacity=""},beforeLeave:function(e){e.dataset||(e.dataset={}),Object(x.hasClass)(e,"el-menu--collapse")?(Object(x.removeClass)(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(x.addClass)(e,"el-menu--collapse")):(Object(x.addClass)(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(x.removeClass)(e,"el-menu--collapse")),e.style.width=e.scrollWidth+"px",e.style.overflow="hidden"},leave:function(e){Object(x.addClass)(e,"horizontal-collapse-transition"),e.style.width=e.dataset.scrollWidth+"px"}}},t.children)}}},props:{mode:{type:String,default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:Array,uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0}},data:function(){return{activeIndex:this.defaultActive,openedMenus:this.defaultOpeneds&&!this.collapse?this.defaultOpeneds.slice(0):[],items:{},submenus:{}}},computed:{hoverBackground:function(){return this.backgroundColor?this.mixColor(this.backgroundColor,.2):""},isMenuPopup:function(){return"horizontal"===this.mode||"vertical"===this.mode&&this.collapse}},watch:{defaultActive:function(e){this.items[e]||(this.activeIndex=null),this.updateActiveIndex(e)},defaultOpeneds:function(e){this.collapse||(this.openedMenus=e)},collapse:function(e){e&&(this.openedMenus=[]),this.broadcast("ElSubmenu","toggle-collapse",e)}},methods:{updateActiveIndex:function(e){var t=this.items[e]||this.items[this.activeIndex]||this.items[this.defaultActive];t?(this.activeIndex=t.index,this.initOpenedMenu()):this.activeIndex=null},getMigratingConfig:function(){return{props:{theme:"theme is removed."}}},getColorChannels:function(e){if(e=e.replace("#",""),/^[0-9a-fA-F]{3}$/.test(e)){e=e.split("");for(var i=2;i>=0;i--)e.splice(i,0,e[i]);e=e.join("")}return/^[0-9a-fA-F]{6}$/.test(e)?{red:parseInt(e.slice(0,2),16),green:parseInt(e.slice(2,4),16),blue:parseInt(e.slice(4,6),16)}:{red:255,green:255,blue:255}},mixColor:function(e,t){var n=this.getColorChannels(e),r=n.red,o=n.green,c=n.blue;return t>0?(r*=1-t,o*=1-t,c*=1-t):(r+=(255-r)*t,o+=(255-o)*t,c+=(255-c)*t),"rgb("+Math.round(r)+", "+Math.round(o)+", "+Math.round(c)+")"},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},openMenu:function(e,t){var n=this.openedMenus;-1===n.indexOf(e)&&(this.uniqueOpened&&(this.openedMenus=n.filter((function(e){return-1!==t.indexOf(e)}))),this.openedMenus.push(e))},closeMenu:function(e){var i=this.openedMenus.indexOf(e);-1!==i&&this.openedMenus.splice(i,1)},handleSubmenuClick:function(e){var t=e.index,n=e.indexPath;-1!==this.openedMenus.indexOf(t)?(this.closeMenu(t),this.$emit("close",t,n)):(this.openMenu(t,n),this.$emit("open",t,n))},handleItemClick:function(e){var t=this,n=e.index,r=e.indexPath,o=this.activeIndex,c=null!==e.index;c&&(this.activeIndex=e.index),this.$emit("select",n,r,e),("horizontal"===this.mode||this.collapse)&&(this.openedMenus=[]),this.router&&c&&this.routeToItem(e,(function(e){if(t.activeIndex=o,e){if("NavigationDuplicated"===e.name)return;console.error(e)}}))},initOpenedMenu:function(){var e=this,t=this.activeIndex,n=this.items[t];n&&"horizontal"!==this.mode&&!this.collapse&&n.indexPath.forEach((function(t){var n=e.submenus[t];n&&e.openMenu(t,n.indexPath)}))},routeToItem:function(e,t){var n=e.route||e.index;try{this.$router.push(n,(function(){}),t)}catch(e){console.error(e)}},open:function(e){var t=this,n=this.submenus[e.toString()].indexPath;n.forEach((function(i){return t.openMenu(i,n)}))},close:function(e){this.closeMenu(e)}},mounted:function(){this.initOpenedMenu(),this.$on("item-click",this.handleItemClick),this.$on("submenu-click",this.handleSubmenuClick),"horizontal"===this.mode&&new w(this.$el),this.$watch("items",this.updateActiveIndex)}},S=k,I=n(0),component=Object(I.a)(S,undefined,undefined,!1,null,null,null);component.options.__file="packages/menu/src/menu.vue";var menu=component.exports;menu.install=function(e){e.component(menu.name,menu)};t.default=menu}})},430:function(e,t,n){"use strict";var r=n(233),o=n(234),c=(n(8),n(29),n(42)),l=function(){return Object(o.a)((function e(t,n,o){Object(r.a)(this,e),this.url=t,this.socket=null,this.isConnected=!1,this.heartbeatInterval=null,this.heartBeat={time:15e3,reconnect:5e3},this.isReconnect=!0,this.reconnectTimer=null,this.callback=n,this.messageCallback=o,this.init()}),[{key:"init",value:function(){var e=this;this.socket=new WebSocket(this.url),this.socket.onopen=function(){var t=Object(c.l)();e.isConnected=!0,e.socket.send(JSON.stringify({type:7,token:t}));try{"function"==typeof e.callback&&e.callback()}catch(e){}e.startHeartBeat(e.heartBeat.time)},this.socket.onmessage=function(t){var n=JSON.parse(t.data);if(n&&4===n.type)e.isConnected=!0;else try{"function"==typeof e.messageCallback&&e.messageCallback(n)}catch(e){}},this.socket.onclose=function(){e.isConnected=!1,e.stopHeartbeat()},this.socket.onerror=function(t){e.isConnected=!1,e.reconnectWebSocket()}}},{key:"close",value:function(){try{this.socket&&this.socket.close()}catch(e){}}},{key:"stopHeartbeat",value:function(){clearTimeout(this.heartbeatInterval),this.heartbeatInterval=null}},{key:"startHeartBeat",value:function(time){var e=this;this.heartbeatInterval=setTimeout((function(){if(e.socket.send(JSON.stringify({type:4,content:"ping"})),e.isConnected)e.startHeartBeat(time);else{try{e.close()}catch(e){}e.reconnectWebSocket()}}),time)}},{key:"reconnectWebSocket",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isReconnect){this.reconnectTimer&&clearTimeout(this.reconnectTimer);try{this.socket.send(JSON.stringify({type:4,content:"ping"}))}catch(e){this.isConnected=!1}this.reconnectTimer=setTimeout((function(){if(!e.isConnected||t){try{e.close()}catch(e){}e.init()}}),this.heartBeat.reconnect)}}},{key:"destroy",value:function(){try{this.close(),this.heartbeatInterval&&clearTimeout(this.heartbeatInterval),this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.heartbeatInterval=null,this.reconnectTimer=null}catch(e){}}}])}();t.a=l},47:function(e,t,n){"use strict";var r=n(46),o=n(164).findIndex,c=n(568),l="findIndex",d=!0;l in[]&&Array(1)[l]((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c(l)},53:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return m}));var r=n(15);n(16),n(19),n(439),n(361),n(362),n(300),n(4),n(50),n(386),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(48);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",map=new Map(e.map((function(e){return[e[n],!0]})));return t.reduce((function(e,t){return map.has(t[n])?e:[].concat(Object(r.a)(e),[t])}),[])}function c(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return new Blob([r],{type:n})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=e/t;return"width"===(e>t?"width":"height")?(e=n,t=Math.round(e/r)):(t=n,e=Math.round(t*r)),{width:e,height:t}}function d(e,t,n){var r=e/t;return{width:n,height:Math.round(n/r)}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return new Promise((function(n,r){var img=new Image;img.onload=function(){var canvas=document.createElement("canvas");canvas.width=img.width,canvas.height=img.height;var e=canvas.getContext("2d");e.drawImage(img,0,0,img.width,img.height);for(var r=e.getImageData(0,0,canvas.width,canvas.height),data=r.data,i=0;i<data.length/4;i++){var o=4*i,c=data[o],g=data[o+1],b=data[o+2];data[o+3];data[o+3]=Math.max(c,g,b),0===c&&0===g&&0===b&&(data[o+3]=0)}e.putImageData(r,0,0);var l=canvas.toDataURL("image/png",.1);t&&t(l),n()},img.onerror=function(){n()},img.setAttribute("crossOrigin","anonymous"),img.src="".concat(e,"?t=").concat(Date.now())}))}function f(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Math.floor(2147483643*Math.random())+1:Math.floor(4294967294*Math.random())+1}function m(){return{v5:1,v6:2,midjourney:3,4:1,sdxl:5,hy21:6,2:2,5:5,6:6,7:7,studio:7,11:7}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||1}},573:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},n.p="/dist/",n(n.s=126)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,c,l,d){var h,f="function"==typeof e?e.options:e;if(t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0),r&&(f.functional=!0),c&&(f._scopeId="data-v-"+c),l?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},f._ssrRegister=h):o&&(h=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),h)if(f.functional){f._injectStyles=h;var m=f.render;f.render=function(e,t){return h.call(t),m(e,t)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,h):[h]}return{exports:e,options:f}}n.d(t,"a",(function(){return r}))},126:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-drawer-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-drawer__wrapper",attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-drawer__container",class:e.visible&&"el-drawer__open",attrs:{role:"document",tabindex:"-1"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{ref:"drawer",staticClass:"el-drawer",class:[e.direction,e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,attrs:{"aria-modal":"true","aria-labelledby":"el-drawer__title","aria-label":e.title,role:"dialog",tabindex:"-1"}},[e.withHeader?n("header",{staticClass:"el-drawer__header",attrs:{id:"el-drawer__title"}},[e._t("title",[n("span",{attrs:{role:"heading",title:e.title}},[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-drawer__close-btn",attrs:{"aria-label":"close "+(e.title||"drawer"),type:"button"},on:{click:e.closeDrawer}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2):e._e(),e.rendered?n("section",{staticClass:"el-drawer__body"},[e._t("default")],2):e._e()])])])])};r._withStripped=!0;var o=n(13),c=n.n(o),l=n(4),d=n.n(l),h={name:"ElDrawer",mixins:[c.a,d.a],props:{appendToBody:{type:Boolean,default:!1},beforeClose:{type:Function},customClass:{type:String,default:""},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},direction:{type:String,default:"rtl",validator:function(e){return-1!==["ltr","rtl","ttb","btt"].indexOf(e)}},modalAppendToBody:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},size:{type:[Number,String],default:"30%"},title:{type:String,default:""},visible:{type:Boolean},wrapperClosable:{type:Boolean,default:!0},withHeader:{type:Boolean,default:!0}},computed:{isHorizontal:function(){return"rtl"===this.direction||"ltr"===this.direction},drawerSize:function(){return"number"==typeof this.size?this.size+"px":this.size}},data:function(){return{closed:!1,prevActiveElement:null}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.appendToBody&&document.body.appendChild(this.$el),this.prevActiveElement=document.activeElement):(this.closed||(this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1)),this.$nextTick((function(){t.prevActiveElement&&t.prevActiveElement.focus()})))}},methods:{afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1),this.closed=!0)},handleWrapperClick:function(){this.wrapperClosable&&this.closeDrawer()},closeDrawer:function(){"function"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},handleClose:function(){this.closeDrawer()}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},f=n(0),component=Object(f.a)(h,r,[],!1,null,null,null);component.options.__file="packages/drawer/src/main.vue";var main=component.exports;main.install=function(e){e.component(main.name,main)};t.default=main},13:function(e,t){e.exports=n(315)},4:function(e,t){e.exports=n(170)}})},575:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(9),n(7),n(11),n(12),n(8),n(6);var r=n(3),o=n(2),c=(n(4),n(20),n(5)),l=n(1),d=n(109);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f={data:function(){return{captchaAction:"",captchaToken:"",apiParamsObj:{tc_v1:1,ttc_v1:2,cmfy_app:3,ttc_v2:4}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(l.c)("user",["isLoggedIn"])),mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.t0=!e.isLoggedIn,!t.t0){t.next=5;break}return t.next=5,e.loadCaptcha();case 5:t.next=10;break;case 7:t.prev=7,t.t1=t.catch(0),console.log("Google Captcha failed to load or execute",t.t1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},methods:{loadCaptcha:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=window)||void 0===t||!t.grecaptcha||null===(n=window)||void 0===n||null===(n=n.grecaptcha)||void 0===n||!n.enterprise){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(c.w)("https://www.recaptcha.net/recaptcha/enterprise.js?render=".concat("6LfuV2wqAAAAAJ83QW1gae0CmT7GrgzzecQbFpJ5"));case 5:return e.next=7,new Promise((function(e,t){var n,r;null!==(n=window)&&void 0!==n&&n.grecaptcha&&null!==(r=window)&&void 0!==r&&null!==(r=r.grecaptcha)&&void 0!==r&&r.enterprise?grecaptcha.enterprise.ready(e):t(new Error("grecaptcha.enterprise not available"))}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Google Captcha failed to load or execute",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},getToken:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(r=window)&&void 0!==r&&null!==(r=r.grecaptcha)&&void 0!==r&&r.enterprise){n.next=2;break}return n.abrupt("return");case 2:if(n.prev=2,o=t.apiParamsObj[e],t.isLoggedIn||!o){n.next=8;break}return n.next=7,t.checkGoogleRecaptchaStatus({action:e,scene:o});case 7:return n.abrupt("return");case 8:return n.next=10,grecaptcha.enterprise.execute("6LfuV2wqAAAAAJ83QW1gae0CmT7GrgzzecQbFpJ5",{action:e});case 10:t.captchaToken=n.sent,console.log("getToken captchaToken"),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),console.error("Error executing recaptcha:",n.t0);case 17:case"end":return n.stop()}}),n,null,[[2,14]])})))()},updateCaptcha:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isLoggedIn){n.next=2;break}return n.abrupt("return");case 2:if(null===(r=window)||void 0===r||!r.grecaptcha||null===(o=window)||void 0===o||null===(o=o.grecaptcha)||void 0===o||!o.enterprise){n.next=7;break}return n.next=5,t.getToken(e);case 5:n.next=18;break;case 7:return n.prev=7,n.next=10,t.loadCaptcha();case 10:return n.next=12,t.getToken(e);case 12:console.log("captchaToken",t.captchaToken),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(7),console.log("Google Captcha failed to load or execute",n.t0);case 18:case"end":return n.stop()}}),n,null,[[7,15]])})))()},checkGoogleRecaptchaStatus:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,h,f,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.scene,o=void 0===r?"":r,c=e.action,l=void 0===c?"":c,n.prev=1,n.next=4,Object(d.a)({scene:o});case 4:if(h=n.sent,f=h.data,1!==(null==(data=void 0===f?{}:f)?void 0:data.state)){n.next=12;break}return n.next=9,grecaptcha.enterprise.execute("6LfuV2wqAAAAAJ83QW1gae0CmT7GrgzzecQbFpJ5",{action:l});case 9:t.captchaToken=n.sent,n.next=13;break;case 12:t.captchaToken="";case 13:n.next=18;break;case 15:return n.prev=15,n.t0=n.catch(1),n.abrupt("return");case 18:case"end":return n.stop()}}),n,null,[[1,15]])})))()}}}},674:function(e,t,n){"use strict";n(233),n(234),n(70),n(36),n(14),n(8),n(23),n(37),n(110),n(728),n(29);var r=new(n(3684).Converter)({emoji:!0,literalMidWordUnderscores:!0,parseImgDimensions:!0,tables:!0});t.a=function(e){var t,n,o;return e=(e=(e=(e=e.replace(/```[\s\S]*?```|``[\s\S]*?``|`[\s\S]*?`|(\".+?\")|(\u201C.+?\u201D)/gm,(function(e,t,n){return t?"<q>"+t.replace(/\"/g,"")+"</q>":n?"<q>"+n.replace(/\u201C|\u201D/g,"")+"</q>":e}))).replace(/\*\*(.+?)\*\*/g,"<b>$1</b>")).replaceAll("\\begin{align*}","$$")).replaceAll("\\end{align*}","$$"),t=e,n=localStorage.getItem("userInfo"),o=(n?JSON.parse(n):{}).name,e=(t||"").replace(/{{(.*?)}}/g,(function(){return o})),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=function(e){return(null!=e?e:"").replace(/\{\{[\s\S]*?\}\}/gm,"")}(e=r.makeHtml(e))).replace(/<code(.*)>[\s\S]*?<\/code>/g,(function(e){return e.replace(/\n/gm,"\0")}))).replace(/\n/g,"<br/>")).replace(/\u0000/g,"\n")).trim()).replace(/<code(.*)>[\s\S]*?<\/code>/g,(function(e){return e.replace(/&amp;/g,"&")}))).replace(/(<code[^>]*>)([\s\S]*?)(<\/code>)/gi,(function(e){return e.replace("<br/>","\n")}))).replace(/<code>/gi,"<p>").replace(/<\/code>/gi,"</p>")).replace(/<pre>/gi,"<p>").replace(/<\/pre>/gi,"</p>")).replace(/```/g,"`")}},675:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),o=n(233),c=n(234),l=(n(20),n(36),n(8),n(4),n(23),n(118),n(71),function(){return Object(c.a)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.url=t.url,this.headers=t.headers||{},this.method=t.method||"GET",this.onUpdate=t.onUpdate||function(){},this.onFinish=t.onFinish||function(){},this.onResponseReceived=t.onResponseReceived||function(){},this.onError=t.onError||console.error,this.originalMsg="",this.expend=[0,0,0,0]}),[{key:"fetchSSE",value:(e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.url,{method:this.method,headers:this.headers});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("HTTP error! status: ".concat(t.status));case 6:this.onResponseReceived(t),console.log("SSE connection established"),n=t.body.getReader(),r=new TextDecoder;case 10:return e.next=13,n.read();case 13:if(o=e.sent,c=o.done,l=o.value,!c){e.next=19;break}return console.log("SSE 流式获取完全结束"),e.abrupt("break",23);case 19:d=r.decode(l),this.processChunk(d),e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),console.error("SSE fetch error:",e.t0),this.onError(e.t0);case 29:case"end":return e.stop()}}),e,this,[[0,25]])}))),function(){return e.apply(this,arguments)})},{key:"processChunk",value:function(e){for(var t=e.split("\n"),i=0;i<t.length;i++){var line=t[i];if(line.startsWith("data: ")){var content=line.slice(6);this.originalMsg+=content,content.match(/\[([^\]]*)\][^\[]*$/)?(this.expend=JSON.parse(content),this.onFinish(this.originalMsg,this.expend)):this.onUpdate({content:content})}else"event: end"===line&&console.log("chunk-end")}}}]);var e}())},682:function(e,t,n){"use strict";var r=n(3),o=(n(20),n(70),n(36),n(29),n(25));function c(e,t){var n=document.body,r={},o=t.passive||!0;function c(c){var h,f,m;if(t.allowClass&&(null==c||null===(h=c.target)||void 0===h||!h.classList.contains(t.allowClass)))return;if(("undefined"!=typeof TouchEvent&&c instanceof TouchEvent?(f=c.touches[0].clientX,m=c.touches[0].clientY):(f=c.clientX,m=c.clientY),r.event=c,r.x=f,r.y=m,r.offsetX=0,r.offsetY=0,r.startOffsetX=0,r.startOffsetY=0,r.lastStartOffsetX=0,r.lastStartOffsetY=0,r.fixStartOffsetX=0,r.fixStartOffsetY=0,r.startX=f,r.startY=m,r.startStyleX=e.style.left?parseFloat(e.style.left):e.getBoundingClientRect().left,r.startStyleY=e.style.top?parseFloat(e.style.top):e.getBoundingClientRect().top,r.startEvent=c,t.callback_start)&&t.callback_start(r))return;e.classList.toggle("moveable-moving",!0),n.classList.toggle("moveable-doc-moving",!0),n.addEventListener("mousemove",l,o),n.addEventListener("touchmove",l,o),n.addEventListener("mouseup",d,!1),n.addEventListener("touchend",d,!1)}function l(n){var o,c;if("undefined"!=typeof TouchEvent&&n instanceof TouchEvent)o=n.touches[0].clientX,c=n.touches[0].clientY;else{if(0===n.buttons)return void d();o=n.clientX,c=n.clientY}if((r.event=n,r.offsetX=o-r.x,r.offsetY=c-r.y,r.startOffsetX=o-r.startX,r.startOffsetY=c-r.startY,r.fixStartOffsetX=r.startOffsetX-r.lastStartOffsetX,r.fixStartOffsetY=r.startOffsetY-r.lastStartOffsetY,r.lastStartOffsetX=r.startOffsetX,r.lastStartOffsetY=r.startOffsetY,r.x=o,r.y=c,t.callback_move)&&t.callback_move(r))return;t.setMove&&(e.style.left=r.startStyleX+r.startOffsetX+"px",e.style.top=r.startStyleY+r.startOffsetY+"px"),n.preventDefault()}function d(){r.startEvent=null,n.removeEventListener("mousemove",l,o),n.removeEventListener("touchmove",l,o),n.removeEventListener("mouseup",d,!1),n.removeEventListener("touchend",d,!1),t.callback_end&&t.callback_end(r),e.classList.toggle("moveable-moving",!1),n.classList.toggle("moveable-doc-moving",!1),r.startOffsetX+r.startOffsetY>1&&(e.classList.toggle("moveable-moved-recent",!0),setTimeout((function(){e.classList.toggle("moveable-moved-recent",!1)}),300))}e.addEventListener("mousedown",c,!1),e.addEventListener("touchstart",c,!1);var h=function(){e.removeEventListener("mousedown",c,!1),e.removeEventListener("contextmenu",c,!1),e.removeEventListener("touchstart",c,!1),e.removeEventListener("touchmove",l,o),e.removeEventListener("mousemove",l,o),e.removeEventListener("mouseup",d,!1),e.removeEventListener("touchend",d,!1)};return t.vueIns&&t.vueIns.$once("hook:beforeDestroy",(function(){h()})),h}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.parentElement?t(e.parentElement,n)?e.parentElement:l(e.parentElement,t,n+1):void 0}function d(e,t,n){if(e.classList.contains(t))return!0;if(e.classList.contains(n))return!1;var r=e.parentElement;return!!r&&d(r,t,n)}function h(e,t){var n=null,r=!1,o=0,h=0;function f(){var t;null===(t=n)||void 0===t||t.remove(),n=null,r=!1,e.classList.toggle("dnd-org",!1),document.body.classList.toggle("dnd-ing",!1)}c(e,{callback_start:function(e){var rect=e.startEvent.target.getBoundingClientRect();return o=rect.x,h=rect.y,!1},callback_move:function(t){return!r&&Math.abs(t.startOffsetX)+Math.abs(t.startOffsetY)>10&&(document.body.classList.toggle("dnd-ing",!0),r=!0,(n=e.cloneNode(!0)).classList.toggle("dnd-ghost"),document.querySelector(".work-panel").appendChild(n),e.classList.toggle("dnd-org",!0)),n&&(n.style.left=" ".concat(o+t.startOffsetX,"px"),n.style.top="".concat(h+t.startOffsetY,"px")),!1},callback_end:function(e){var n,r=null===(n=e.event)||void 0===n?void 0:n.target;if(d(r,"PromptDictPad","OPSIndexPage"))f();else{if(r.classList.contains("dnd-slot-pre")||r.classList.contains("dnd-slot-next")){var o=l(r,(function(e){return e.classList.contains("PromptItem")}));if(o){var c=o.__vue__,h=c.item,m=c.list,v=t.item,_=t.list;null==_||_.removePrompt(v);var y=r.classList.contains("dnd-slot-next")?1:0;(v=m.insertPromptOf(h,v,y)).data.word.subType=h.data.word.subType,v.data.word.lv=h.data.word.lv,c.$emit("update")}}else if(r.classList.contains("PromptList-list")){var w=l(r,(function(e){return e.classList.contains("PromptList")}));if(w){var x=w.__vue__,k=x.list,S=t.item,I=t.list;null==I||I.removePrompt(S),(S=k.insertPromptLast(S)).data.word.subType=k.data.type,x.$emit("update")}}f()}}})}var f=n(5).d,m=o.default.extend({inject:["top"],props:{item:{type:Object,required:!0},list:{type:Object}},watch:{item:{handler:function(e){o.default.observable(e)},immediate:!0},"item.state.isEdit":{handler:function(e){var t=this;e&&setTimeout((function(){return t.doFoucs()}),100)},immediate:!0}},mounted:function(){var e=this;this.$el.classList.contains("dict-word")||this.$nextTick((function(){return h(e.$el,e)}))},methods:{copy:f,onMousedown:function(e){e.detail>1&&e.preventDefault()},doOpenUrl:function(e){window.open(e)},doFoucs:function(){var e=this;setTimeout((function(){var t,n;"text"==e.item.state.isEdit&&(null===(t=e.$refs.input)||void 0===t||t.focus());"lang"==e.item.state.isEdit&&(null===(n=e.$refs.inputLang)||void 0===n||n.focus());document.execCommand("selectAll",!1)}))},onClick:function(e){this.item.state.isEdit||this.$emit("click",e)},onKeydown:function(e){"Enter"===e.key&&this.doEditDone()},onKeydownLang:function(e){"Enter"===e.key&&this.doEditDone()},onBlur:function(){this.doEditDone()},onBlurLang:function(){},doEditDone:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("text"!=e.item.state.isEdit){t.next=6;break}return t.next=3,e.item.updateContent(null===(n=e.$refs)||void 0===n||null===(n=n.input)||void 0===n?void 0:n.innerText);case 3:e.$emit("update"),t.next=7;break;case 6:"lang"==e.item.state.isEdit&&(e.item.data.word.langText=null===(r=e.$refs)||void 0===r||null===(r=r.inputLang)||void 0===r?void 0:r.innerText);case 7:e.item.state.isEdit=!1;case 8:case"end":return t.stop()}}),t)})))()}},computed:{displayName:function(){var e=this.item.data.word;return e.text,e.rawText,"command"==e.subType?e.rawText:e.text.slice(0,200)},langName:function(){var e,t=this.item.data.word;return t.text,t.langText,t.langText?"command"==t.subType?t.langText+" "+(null===(e=t.args)||void 0===e?void 0:e.join("")):t.langText:void 0},displayLv:function(){var e=this.item.data.word;if(e.lv&&1!=e.lv)return e.lv}}});t.a=m},684:function(e,t,n){"use strict";n(8),n(23),n(37);var r=n(25),o=n(3233),c=n(3235),l=r.default.extend({data:function(){return{showDictPad:"mobile"!==localStorage.getItem("visitFrom")&&window.innerWidth>1215,needDictPad:"mobile"!==localStorage.getItem("visitFrom")&&window.innerWidth>1215,version:"版本号1.4.3",initPrompts:null}},methods:{toggleDictPad:function(e){this.showDictPad=e||!this.showDictPad,this.showDictPad&&(this.needDictPad=!0)},getPromptsFromUrlQuery:function(){var e;if(null!==(e=this.$route)&&void 0!==e&&null!==(e=e.query)&&void 0!==e&&e.prompts)try{var t=JSON.parse(this.$route.query.prompts);this.initPrompts=t;var n=Object.assign({},this.$route.query);delete n.prompts,this.$router.replace({query:n})}catch(e){console.error(e)}}},components:{PromptEditor:o.a,PromptDict:c.a},created:function(){this.getPromptsFromUrlQuery()}});t.a=l},685:function(e,t,n){"use strict";var r=n(2),o=n(3),c=(n(20),n(9),n(7),n(10),n(70),n(4),n(11),n(12),n(8),n(110),n(6),n(29),n(25)),l=n(1840),d=n(3236),h=n(3239),f=n(3675),m=n.n(f),v=n(5),_=n(3237),y=n(1839);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=v.d,S=c.default.extend({props:{promptWork:{type:Object,required:!0}},inject:["PromptEditor","top"],data:function(){return{inputText:"",outputText:"",inputParser:"stable-diffusion-webui",isPNGExporting:!1,textToImageMode:{category:""}}},created:function(){var e=this;this.doImportByInputThrottle=m()((function(){e.doImportByInput()}),30,{maxWait:50}),this.doAddInputDebounce=m()((function(){e.doImportByInputThrottle()}),300),this.inputText=this.promptWork.data.initText||"",this.doImportByInputThrottle()},mounted:function(){},watch:{inputParser:function(e){this.promptWork.data.parser=e,this.doImportByInputThrottle()},"top.config.textToImage.category":{handler:function(e){this.textToImageMode.category=this.top.config.textToImage.category||1},deep:!0,immediate:!0},"$i18n.locale":function(e){this.doImportByInputThrottle()}},methods:{handleInput:function(e){var t;this.textToImageMode=e,null==this||null===(t=this.top)||void 0===t||t.setTextToImageConfig("category",this.textToImageMode.category)},doImportByInputThrottle:function(){},doImportByInput:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.inputText,e.promptWork.dictAdd.length>0&&(n+=", "+e.promptWork.dictAdd.join(", ")),t.next=4,e.promptWork.importPrompts(n,{parser:e.inputParser});case 4:e.doExportPrompt();case 5:case"end":return t.stop()}}),t)})))()},doExportPrompt:function(){var text=this.promptWork.exportPrompts();this.outputText=text},onUserInput:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout((function(){e.doImportByInputThrottle()}),0);case 1:case"end":return t.stop()}}),t)})))()},onUserInputDebounce:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.doAddInputDebounce();case 1:case"end":return t.stop()}}),t)})))()},doClear:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.inputText="",e.promptWork.dictAdd=[],t.next=4,e.doImportByInputThrottle();case 4:e.doExportPrompt();case 5:case"end":return t.stop()}}),t)})))()},doSwitchIO:function(){this.inputText=this.promptWork.exportPrompts()},doDisableAll:function(){this.promptWork.disableAll(),this.doExportPrompt()},doDeleteWorkspace:function(){this.$emit("delete",this.promptWork)},onItemClick:function(e){e.data.disabled=!e.data.disabled,this.doExportPrompt()},onItemUpdate:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.doExportPrompt();case 1:case"end":return e.stop()}}),e)})))()},onPromptListDblick:function(e,t,data){var n;null!=e&&null!==(n=e.target)&&void 0!==n&&null!==(n=n.classList)&&void 0!==n&&n.contains("list")&&this.doAddNewByList(t,data)},onPromptListClick:function(e,t,data){this.doAddNewByList(t,data)},copy:function(text){text.trim()&&(this.$message.success(window.$nuxt.$t("CopySuccess")),k(text))},handleGenerate:function(text){var e;["",null,void 0].includes(text.trim())||null==this||null===(e=this.top)||void 0===e||e.setTextToImageConfig("prompt",text)},toPng:function(e){return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},doAddNewByList:function(e,data){e.pushPrompt("",data).state.isEdit="text"},doOpenItemMenu:function(e,t){this.$refs.menu.open(x(x({},e),{},{promptList:t}))},onWorkClick:function(){document.body.querySelectorAll(".PromptWork").forEach((function(e){return e.classList.toggle("active",!1)})),this.$el.classList.toggle("active",!0)}},components:{PromptMenu:_.a,PromptItem:l.a,AddButton:d.a,PromptList:h.a,selectGenerateModelType:y.a}});t.a=S},686:function(e,t,n){"use strict";var r=n(25).default.extend({props:{list:{type:Object,required:!0}},data:function(){return{}}});t.a=r},707:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),o=(n(9),n(7),n(47),n(75),n(10),n(19),n(43),n(11),n(12),n(8),n(4),n(237),n(50),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(6),n(48),n(142),n(143),n(112),n(22)),c=n(219),l=n(53),d=n(1);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f={data:function(){return{successTaskList:[]}},watch:{list:{handler:function(e){var t;(["v2"].includes(null==this?void 0:this.taskVersion)||null!==(t=window)&&void 0!==t&&null!==(t=t.$nuxt)&&void 0!==t&&null!==(t=t.$cookies)&&void 0!==t&&t.get("T"))&&((e||[]).filter((function(e){return[1,2,"1","2"].includes(e.status)})).map((function(e){return e.id})).length&&this.mockProcessTask())},immediate:!0,deep:!0},userInfo:{handler:function(e){var t=["v2"].includes(null==this?void 0:this.taskVersion),n=(e||{}).id;!(void 0===n?"":n)&&!t&&this.endPoll()},immediate:!0,deep:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(d.e)("user",["userInfo"])),beforeCreate:function(){var e=this;this.pollingMiddleware=new c.a(3e3,(function(){e.fetchTaskData()}))},beforeDestroy:function(){this.pollingMiddleware&&this.pollingMiddleware.stop(),this.pollingMiddleware=null},methods:{mockProcessTask:function(){var e=this.list.filter((function(e){return[1,2,"1","2"].includes(e.status)})).map((function(e){return e.id}));e.length?this.startPoll(e):this.endPoll()},startPoll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.pollingMiddleware&&this.pollingMiddleware.checkStart(e)},endPoll:function(){this.pollingMiddleware&&this.pollingMiddleware.stop()},fetchTaskData:function(){var e=this.list.filter((function(e){return[1,2,"1","2"].includes(e.status)})).map((function(e){return e.id}));e.length?this.getTaskInfo(e):this.endPoll()},getTaskInfo:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r={};return r.task_ids=n,!["v2"].includes(null==this?void 0:this.taskVersion)||null!=this&&null!==(e=this.userInfo)&&void 0!==e&&e.id||(r.g_mode=1),Object(o.a)(r).then((function(e){var n=(e&&e.data?e.data:{}).items;((void 0===n?[]:n)||[]).forEach((function(e){if(e&&[3,4].includes(e.status)){var n,r;if([3].includes(e.status))1===(null==e?void 0:e.reason)&&t.$message.info(t.$t("studio48")),t.$message.success(t.$t("creativeSuccessDone")),(!["v2"].includes(null==t?void 0:t.taskVersion)||null!=t&&null!==(r=t.userInfo)&&void 0!==r&&r.id)&&t.$EventBus.$emit("shareToNetworks",{imageTask:e,from:"createTask"});t.successTaskList.push(e.task_id),(!["v2"].includes(null==t?void 0:t.taskVersion)||null!=t&&null!==(n=t.userInfo)&&void 0!==n&&n.id)&&t.$store.dispatch("payment/getPaymentInfo")}t.updateData(e,e.task_id)})),t.successTaskList=Array.from(new Set(t.successTaskList));try{t.$store.dispatch("creation/setGenerateTaskNum",t.successTaskList.length)}catch(e){}}))},updateData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.list.forEach((function(r){if(n===r.id){if([4,"4"].includes(t.status)&&0===t.process)return e.$set(r,"status",t.status),void e.$set(r,"status_desc",t.status_desc);if(![0,100].includes(t.process)&&r.process>=t.process)return e.$set(r,"status",t.status),void e.$set(r,"status_desc",t.status_desc);e.$set(r,"pub_community",(null==t?void 0:t.pub_community)||0),e.$set(r,"deduction_detail",t.deduction_detail),e.$set(r,"process",t.process>100?100:t.process),e.$set(r,"status",t.status),e.$set(r,"pub_artwork_no",t.pub_artwork_no),e.$set(r,"pub_artwork_nos",t.pub_artwork_nos||[]),e.$set(r,"nsfw",t.nsfw),e.$set(r,"category",t.category),e.$set(r,"status_desc",t.status_desc),e.$set(r,"expiration_time",null==t?void 0:t.expiration_time),["",null,void 0].includes(t.type)||e.$set(r,"type",t.type),e.$set(r,"preprocess_images",t.preprocess_images||[]);var o=t.banner||{};if(e.$set(r,"banner",Object.assign(o,{url:t.img_url})),e.$set(r,"base_64_banner",t.img_base_64||""),e.$set(r,"img_uris",(t.img_uris||[]).filter((function(e){return null==e?void 0:e.url}))),e.$set(r,"components",(t.img_uris||[]).filter((function(e){return null==e?void 0:e.url}))),e.$set(r,"reverse_prompts",t.reverse_prompts||[]),e.$set(r,"reverse_local_prompts",t.reverse_local_prompts||[]),t.img_base_64){var c=Object(l.a)("data:image/webp;base64,".concat(t.img_base_64));e.$set(r,"base_64_banner_url",URL.createObjectURL(c))}}}));try{if("PRIVATE"!==this.top.channelId&&["userCancelDesc"].includes(t.status_desc)){var r=this.list.findIndex((function(e){return e.id===n}));-1!==r&&this.list.splice(r,1)}}catch(e){}}}}},716:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=[{width:768,height:768,showAspectRatio:"1:1",code:2},{width:1024,height:1024,showAspectRatio:"1:1",code:2},{width:1536,height:1536,showAspectRatio:"1:1",code:2},{width:512,height:768,showAspectRatio:"2:3",code:1},{width:768,height:1152,showAspectRatio:"2:3",code:1},{width:688,height:1024,showAspectRatio:"2:3",code:1},{width:1024,height:1536,showAspectRatio:"2:3",code:1},{width:432,height:768,showAspectRatio:"9:16",code:3},{width:810,height:1440,showAspectRatio:"9:16",code:3},{width:592,height:1024,showAspectRatio:"9:16",code:3},{width:864,height:1536,showAspectRatio:"9:16",code:3},{width:768,height:576,showAspectRatio:"4:3",code:4},{width:1024,height:768,showAspectRatio:"4:3",code:4},{width:1536,height:1152,showAspectRatio:"4:3",code:4},{width:512,height:1024,showAspectRatio:"1:2",code:6},{width:768,height:1536,showAspectRatio:"1:2",code:6},{width:576,height:768,showAspectRatio:"3:4",code:7},{width:768,height:1024,showAspectRatio:"3:4",code:7},{width:1152,height:1536,showAspectRatio:"3:4",code:7},{width:612,height:765,showAspectRatio:"4:5",code:8},{width:1152,height:1440,showAspectRatio:"4:5",code:8},{width:768,height:960,showAspectRatio:"4:5",code:8},{width:765,height:612,showAspectRatio:"5:4",code:9},{width:1440,height:1152,showAspectRatio:"5:4",code:9},{width:960,height:768,showAspectRatio:"5:4",code:9},{width:1024,height:512,showAspectRatio:"2:1",code:13},{width:1536,height:768,showAspectRatio:"2:1",code:13},{width:768,height:512,showAspectRatio:"3:2",code:11},{width:1152,height:768,showAspectRatio:"3:2",code:11},{width:1024,height:688,showAspectRatio:"3:2",code:11},{width:1536,height:1024,showAspectRatio:"3:2",code:11},{width:768,height:432,showAspectRatio:"16:9",code:12},{width:1440,height:810,showAspectRatio:"16:9",code:12},{width:1024,height:592,showAspectRatio:"16:9",code:12},{width:1536,height:864,showAspectRatio:"16:9",code:12}]},79:function(e,t,n){"use strict";n.d(t,"j",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"s",(function(){return d})),n.d(t,"r",(function(){return h})),n.d(t,"t",(function(){return f})),n.d(t,"v",(function(){return m})),n.d(t,"q",(function(){return v})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return y})),n.d(t,"h",(function(){return w})),n.d(t,"o",(function(){return x})),n.d(t,"d",(function(){return k})),n.d(t,"i",(function(){return S})),n.d(t,"k",(function(){return I})),n.d(t,"a",(function(){return O})),n.d(t,"p",(function(){return j})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return P})),n.d(t,"n",(function(){return C})),n.d(t,"u",(function(){return M})),n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return A}));var r=n(17),o="/api/v1/square";function c(data){return Object(r.a)({url:"/api/v1/tag/suggest",method:"POST",data:data})}function l(data){return Object(r.a)({url:"/api/v1/tag/v2/hot",method:"POST",data:data})}function d(data){return Object(r.a)({url:"/api/v1/model/tag/edit",method:"post",data:data})}function h(data){return Object(r.a)({url:"/api/v1/artwork/tag/edit",method:"post",data:data})}function f(data){return Object(r.a)({url:"/api/v1/portfolio/tag/edit",method:"post",data:data})}function m(data){return Object(r.a)({url:"/api/v1/lookbook/tag/edit",method:"post",data:data})}function v(data){return Object(r.a)({url:"/api/v1/ai-video/tag/edit",method:"post",data:data})}function _(data){return Object(r.a)({url:"/api/v1/model/tag",method:"post",data:data})}function y(data){return Object(r.a)({url:"/api/v1/artwork/tag",method:"post",data:data})}function w(data){return Object(r.a)({url:"/api/v1/portfolio/tag",method:"post",data:data})}function x(data){return Object(r.a)({url:"/api/v1/lookbook/tag",method:"post",data:data})}function k(data){return Object(r.a)({url:"/api/v1/ai-video/tag",method:"post",data:data})}function S(data){return Object(r.a)({url:"/api/v1/square/model/list",method:"post",data:data})}function I(data){return Object(r.a)({url:"/api/v1/tag/detail",method:"post",data:data})}function O(data){return Object(r.a)({url:"/api/v1/collect-v2/add",method:"post",data:data})}function j(data){return Object(r.a)({url:"/api/v1/collect-v2/remove",method:"post",data:data})}function T(data){return Object(r.a)({url:o+"/tag/explore",method:"post",data:data})}function P(data){return Object(r.a)({url:o+"/tag/model",method:"post",data:data})}function C(data){return Object(r.a)({url:o+"/tag/post",method:"post",data:data})}function M(data){return Object(r.a)({url:o+"/post/tag/audit",method:"post",data:data})}function E(data){return Object(r.a)({url:o+"/tag/ai-video",method:"post",data:data})}function A(data){return Object(r.a)({url:o+"/timbre/list",method:"post",data:data})}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n(17),path="/api/v1/task";function o(data){return Object(r.a)({url:path+"/index/save-personal",method:"post",data:data})}function c(data){return Object(r.a)({url:path+"/index/delete",method:"post",data:data})}function l(data){return Object(r.a)({url:path+"/speed-up",method:"post",data:data,customConfig:{isSilent:!0}})}},94:function(e,t,n){(function(t){e.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(e,n,r){(function(e){"use strict";var t,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var c=0,l=new o(f),element=e.document.createTextNode("");l.observe(element,{characterData:!0}),t=function(){element.data=c=++c%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var d=new e.MessageChannel;d.port1.onmessage=f,t=function(){d.port2.postMessage(0)}}var h=[];function f(){var i,e;r=!0;for(var t=h.length;t;){for(e=h,h=[],i=-1;++i<t;)e[i]();t=h.length}r=!1}function m(e){1!==h.push(e)||r||t()}n.exports=m}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function o(){}var c={},l=["REJECTED"],d=["FULFILLED"],h=["PENDING"];function f(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,e!==o&&y(this,e)}function m(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function v(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return c.reject(e,t)}r===e?c.reject(e,new TypeError("Cannot resolve promise with itself")):c.resolve(e,r)}))}function _(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function y(e,t){var n=!1;function r(t){n||(n=!0,c.reject(e,t))}function o(t){n||(n=!0,c.resolve(e,t))}function l(){t(o,r)}var d=w(l);"error"===d.status&&r(d.value)}function w(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function x(e){return e instanceof this?e:c.resolve(new this(o),e)}function k(e){var t=new this(o);return c.reject(t,e)}function S(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var l=new Array(n),d=0,i=-1,h=new this(o);++i<n;)f(e[i],i);return h;function f(e,i){function o(e){l[i]=e,++d!==n||r||(r=!0,c.resolve(h,l))}t.resolve(e).then(o,(function(e){r||(r=!0,c.reject(h,e))}))}}function I(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=-1,l=new this(o);++i<n;)d(e[i]);return l;function d(e){t.resolve(e).then((function(e){r||(r=!0,c.resolve(l,e))}),(function(e){r||(r=!0,c.reject(l,e))}))}}t.exports=f,f.prototype.catch=function(e){return this.then(null,e)},f.prototype.then=function(e,t){if("function"!=typeof e&&this.state===d||"function"!=typeof t&&this.state===l)return this;var n=new this.constructor(o);return this.state!==h?v(n,this.state===d?e:t,this.outcome):this.queue.push(new m(n,e,t)),n},m.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},m.prototype.otherCallFulfilled=function(e){v(this.promise,this.onFulfilled,e)},m.prototype.callRejected=function(e){c.reject(this.promise,e)},m.prototype.otherCallRejected=function(e){v(this.promise,this.onRejected,e)},c.resolve=function(e,t){var n=w(_,t);if("error"===n.status)return c.reject(e,n.value);var r=n.value;if(r)y(e,r);else{e.state=d,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},c.reject=function(e,t){e.state=l,e.outcome=t;for(var i=-1,n=e.queue.length;++i<n;)e.queue[i].callRejected(t);return e},f.resolve=x,f.reject=k,f.all=S,f.race=I},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var l=c();function d(){try{if(!l||!l.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function h(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var f=Promise;function m(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function v(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function _(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function y(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var w="local-forage-detect-blob-support",x=void 0,k={},S=Object.prototype.toString,I="readonly",O="readwrite";function j(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function T(e){return new f((function(t){var n=e.transaction(w,O),r=h([""]);n.objectStore(w).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function P(e){return"boolean"==typeof x?f.resolve(x):T(e).then((function(e){return x=e}))}function C(e){var t=k[e.name],n={};n.promise=new f((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function M(e){var t=k[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function E(e,t){var n=k[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function A(e,t){return new f((function(n,r){if(k[e.name]=k[e.name]||H(),e.db){if(!t)return n(e.db);C(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var c=l.open.apply(l,o);t&&(c.onupgradeneeded=function(t){var n=c.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(w)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),c.onerror=function(e){e.preventDefault(),r(c.error)},c.onsuccess=function(){var t=c.result;t.onversionchange=function(e){e.target.close()},n(t),M(e)}}))}function D(e){return A(e,!1)}function $(e){return A(e,!0)}function L(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var c=e.db.version+1;c>e.version&&(e.version=c)}return!0}return!1}function R(e){return new f((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function N(e){return h([j(atob(e.data))],{type:e.type})}function B(e){return e&&e.__local_forage_encoded_blob}function z(e){var t=this,n=t._initReady().then((function(){var e=k[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return v(n,e,e),n}function U(e){C(e);for(var t=k[e.name],n=t.forages,i=0;i<n.length;i++){var r=n[i];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return e.db=null,D(e).then((function(t){return e.db=t,L(e)?$(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw E(e,t),t}))}function F(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return f.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),$(e)})).then((function(){return U(e).then((function(){F(e,t,n,r-1)}))})).catch(n);n(o)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function W(e){var t=this,n={db:null};if(e)for(var i in e)n[i]=e[i];var r=k[n.name];r||(r=H(),k[n.name]=r),r.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=z);var o=[];function c(){return f.resolve()}for(var l=0;l<r.forages.length;l++){var d=r.forages[l];d!==t&&o.push(d._initReady().catch(c))}var h=r.forages.slice(0);return f.all(o).then((function(){return n.db=r.db,D(n)})).then((function(e){return n.db=e,L(n,t._defaultConfig.version)?$(n):e})).then((function(e){n.db=r.db=e,t._dbInfo=n;for(var o=0;o<h.length;o++){var c=h[o];c!==t&&(c._dbInfo.db=n.db,c._dbInfo.version=n.version)}}))}function G(e,t){var n=this;e=_(e);var r=new f((function(t,r){n.ready().then((function(){F(n._dbInfo,I,(function(o,c){if(o)return r(o);try{var l=c.objectStore(n._dbInfo.storeName).get(e);l.onsuccess=function(){var e=l.result;void 0===e&&(e=null),B(e)&&(e=N(e)),t(e)},l.onerror=function(){r(l.error)}}catch(e){r(e)}}))})).catch(r)}));return m(r,t),r}function V(e,t){var n=this,r=new f((function(t,r){n.ready().then((function(){F(n._dbInfo,I,(function(o,c){if(o)return r(o);try{var l=c.objectStore(n._dbInfo.storeName).openCursor(),d=1;l.onsuccess=function(){var cursor=l.result;if(cursor){var n=cursor.value;B(n)&&(n=N(n));var r=e(n,cursor.key,d++);void 0!==r?t(r):cursor.continue()}else t()},l.onerror=function(){r(l.error)}}catch(e){r(e)}}))})).catch(r)}));return m(r,t),r}function X(e,t,n){var r=this;e=_(e);var o=new f((function(n,o){var c;r.ready().then((function(){return c=r._dbInfo,"[object Blob]"===S.call(t)?P(c.db).then((function(e){return e?t:R(t)})):t})).then((function(t){F(r._dbInfo,O,(function(c,l){if(c)return o(c);try{var d=l.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var h=d.put(t,e);l.oncomplete=function(){void 0===t&&(t=null),n(t)},l.onabort=l.onerror=function(){var e=h.error?h.error:h.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return m(o,n),o}function J(e,t){var n=this;e=_(e);var r=new f((function(t,r){n.ready().then((function(){F(n._dbInfo,O,(function(o,c){if(o)return r(o);try{var l=c.objectStore(n._dbInfo.storeName).delete(e);c.oncomplete=function(){t()},c.onerror=function(){r(l.error)},c.onabort=function(){var e=l.error?l.error:l.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return m(r,t),r}function K(e){var t=this,n=new f((function(e,n){t.ready().then((function(){F(t._dbInfo,O,(function(r,o){if(r)return n(r);try{var c=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=c.error?c.error:c.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return m(n,e),n}function Y(e){var t=this,n=new f((function(e,n){t.ready().then((function(){F(t._dbInfo,I,(function(r,o){if(r)return n(r);try{var c=o.objectStore(t._dbInfo.storeName).count();c.onsuccess=function(){e(c.result)},c.onerror=function(){n(c.error)}}catch(e){n(e)}}))})).catch(n)}));return m(n,e),n}function Z(e,t){var n=this,r=new f((function(t,r){e<0?t(null):n.ready().then((function(){F(n._dbInfo,I,(function(o,c){if(o)return r(o);try{var l=c.objectStore(n._dbInfo.storeName),d=!1,h=l.openKeyCursor();h.onsuccess=function(){var cursor=h.result;cursor?0===e||d?t(cursor.key):(d=!0,cursor.advance(e)):t(null)},h.onerror=function(){r(h.error)}}catch(e){r(e)}}))})).catch(r)}));return m(r,t),r}function Q(e){var t=this,n=new f((function(e,n){t.ready().then((function(){F(t._dbInfo,I,(function(r,o){if(r)return n(r);try{var c=o.objectStore(t._dbInfo.storeName).openKeyCursor(),l=[];c.onsuccess=function(){var cursor=c.result;cursor?(l.push(cursor.key),cursor.continue()):e(l)},c.onerror=function(){n(c.error)}}catch(e){n(e)}}))})).catch(n)}));return m(n,e),n}function ee(e,t){t=y.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var c=e.name===n.name&&o._dbInfo.db?f.resolve(o._dbInfo.db):D(e).then((function(t){var n=k[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));r=e.storeName?c.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;C(e);var r=k[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var c=o[i];c._dbInfo.db=null,c._dbInfo.version=n}var d=new f((function(t,r){var o=l.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return d.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,M(n._dbInfo)}})).catch((function(t){throw(E(e,t)||f.resolve()).catch((function(){})),t}))}})):c.then((function(t){C(e);var n=k[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;var o=new f((function(t,n){var r=l.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return o.then((function(e){n.db=e;for(var i=0;i<r.length;i++)M(r[i]._dbInfo)})).catch((function(t){throw(E(e,t)||f.resolve()).catch((function(){})),t}))}))}else r=f.reject("Invalid arguments");return m(r,t),r}var te={_driver:"asyncStorage",_initStorage:W,_support:d(),iterate:V,getItem:G,setItem:X,removeItem:J,clear:K,length:Y,key:Z,keys:Q,dropInstance:ee};function ne(){return"function"==typeof openDatabase}var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe="~~local_forage_type~",ie=/^~~local_forage_type~([^~]+)~/,ae="__lfsc__:",se=ae.length,ue="arbf",ce="blob",le="si08",de="ui08",he="uic8",fe="si16",pe="si32",me="ur16",ge="ui32",ve="fl32",_e="fl64",be=se+ue.length,ye=Object.prototype.toString;function we(e){var i,t,n,r,o,c=.75*e.length,l=e.length,p=0;"="===e[e.length-1]&&(c--,"="===e[e.length-2]&&c--);var d=new ArrayBuffer(c),h=new Uint8Array(d);for(i=0;i<l;i+=4)t=re.indexOf(e[i]),n=re.indexOf(e[i+1]),r=re.indexOf(e[i+2]),o=re.indexOf(e[i+3]),h[p++]=t<<2|n>>4,h[p++]=(15&n)<<4|r>>2,h[p++]=(3&r)<<6|63&o;return d}function xe(e){var i,t=new Uint8Array(e),n="";for(i=0;i<t.length;i+=3)n+=re[t[i]>>2],n+=re[(3&t[i])<<4|t[i+1]>>4],n+=re[(15&t[i+1])<<2|t[i+2]>>6],n+=re[63&t[i+2]];return t.length%3==2?n=n.substring(0,n.length-1)+"=":t.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function ke(e,t){var n="";if(e&&(n=ye.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===ye.call(e.buffer))){var r,marker=ae;e instanceof ArrayBuffer?(r=e,marker+=ue):(r=e.buffer,"[object Int8Array]"===n?marker+=le:"[object Uint8Array]"===n?marker+=de:"[object Uint8ClampedArray]"===n?marker+=he:"[object Int16Array]"===n?marker+=fe:"[object Uint16Array]"===n?marker+=me:"[object Int32Array]"===n?marker+=pe:"[object Uint32Array]"===n?marker+=ge:"[object Float32Array]"===n?marker+=ve:"[object Float64Array]"===n?marker+=_e:t(new Error("Failed to get type for BinaryArray"))),t(marker+xe(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=oe+e.type+"~"+xe(this.result);t(ae+ce+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function Se(e){if(e.substring(0,se)!==ae)return JSON.parse(e);var t,n=e.substring(be),r=e.substring(se,be);if(r===ce&&ie.test(n)){var o=n.match(ie);t=o[1],n=n.substring(o[0].length)}var c=we(n);switch(r){case ue:return c;case ce:return h([c],{type:t});case le:return new Int8Array(c);case de:return new Uint8Array(c);case he:return new Uint8ClampedArray(c);case fe:return new Int16Array(c);case me:return new Uint16Array(c);case pe:return new Int32Array(c);case ge:return new Uint32Array(c);case ve:return new Float32Array(c);case _e:return new Float64Array(c);default:throw new Error("Unkown type: "+r)}}var Ie={serialize:ke,deserialize:Se,stringToBuffer:we,bufferToString:xe};function Oe(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function je(e){var t=this,n={db:null};if(e)for(var i in e)n[i]="string"!=typeof e[i]?e[i].toString():e[i];var r=new f((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){Oe(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=Ie,r}function Te(e,t,n,r,o,c){e.executeSql(n,r,o,(function(e,l){l.code===l.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,d){d.rows.length?c(e,l):Oe(e,t,(function(){e.executeSql(n,r,o,c)}),c)}),c):c(e,l)}),c)}function Pe(e,t){var n=this;e=_(e);var r=new f((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Te(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return m(r,t),r}function Ce(e,t){var n=this,r=new f((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Te(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var c=r.rows,l=c.length,i=0;i<l;i++){var d=c.item(i),h=d.value;if(h&&(h=o.serializer.deserialize(h)),void 0!==(h=e(h,d.key,i+1)))return void t(h)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return m(r,t),r}function Me(e,t,n,r){var o=this;e=_(e);var c=new f((function(c,l){o.ready().then((function(){void 0===t&&(t=null);var d=t,h=o._dbInfo;h.serializer.serialize(t,(function(t,f){f?l(f):h.db.transaction((function(n){Te(n,h,"INSERT OR REPLACE INTO "+h.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){c(d)}),(function(e,t){l(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void c(Me.apply(o,[e,d,n,r-1]));l(t)}}))}))})).catch(l)}));return m(c,n),c}function Ee(e,t,n){return Me.apply(this,[e,t,n,1])}function Ae(e,t){var n=this;e=_(e);var r=new f((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Te(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return m(r,t),r}function De(e){var t=this,n=new f((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Te(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return m(n,e),n}function $e(e){var t=this,n=new f((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Te(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return m(n,e),n}function Le(e,t){var n=this,r=new f((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Te(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return m(r,t),r}function Re(e){var t=this,n=new f((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Te(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return m(n,e),n}function Ne(e){return new f((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Be(e,t){t=y.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return m(r=e.name?new f((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ne(r))})).then((function(e){return new f((function(t,n){e.db.transaction((function(r){function o(e){return new f((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var c=[],i=0,l=e.storeNames.length;i<l;i++)c.push(o(e.storeNames[i]));f.all(c).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):f.reject("Invalid arguments"),t),r}var ze={_driver:"webSQLStorage",_initStorage:je,_support:ne(),iterate:Ce,getItem:Pe,setItem:Ee,removeItem:Ae,clear:De,length:$e,key:Le,keys:Re,dropInstance:Be};function Ue(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Fe(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function qe(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function He(){return!qe()||localStorage.length>0}function We(e){var t=this,n={};if(e)for(var i in e)n[i]=e[i];return n.keyPrefix=Fe(e,t._defaultConfig),He()?(t._dbInfo=n,n.serializer=Ie,f.resolve()):f.reject()}function Ge(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var n=localStorage.key(i);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return m(n,e),n}function Ve(e,t){var n=this;e=_(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return m(r,t),r}function Xe(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,c=localStorage.length,l=1,i=0;i<c;i++){var d=localStorage.key(i);if(0===d.indexOf(r)){var h=localStorage.getItem(d);if(h&&(h=t.serializer.deserialize(h)),void 0!==(h=e(h,d.substring(o),l++)))return h}}}));return m(r,t),r}function Je(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return m(r,t),r}function Ke(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return m(n,e),n}function Ye(e){var t=this.keys().then((function(e){return e.length}));return m(t,e),t}function Ze(e,t){var n=this;e=_(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return m(r,t),r}function Qe(e,t,n){var r=this;e=_(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new f((function(o,c){var l=r._dbInfo;l.serializer.serialize(t,(function(t,r){if(r)c(r);else try{localStorage.setItem(l.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||c(e),c(e)}}))}))}));return m(o,n),o}function et(e,t){if(t=y.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new f((function(t){e.storeName?t(Fe(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var i=localStorage.length-1;i>=0;i--){var t=localStorage.key(i);0===t.indexOf(e)&&localStorage.removeItem(t)}})):f.reject("Invalid arguments"),m(r,t),r}var tt={_driver:"localStorageWrapper",_initStorage:We,_support:Ue(),iterate:Xe,getItem:Ve,setItem:Qe,removeItem:Ze,clear:Ge,length:Ye,key:Je,keys:Ke,dropInstance:et},nt=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},ot=function(e,t){for(var n=e.length,i=0;i<n;){if(nt(e[i],t))return!0;i++}return!1},it=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},at={},st={},ut={INDEXEDDB:te,WEBSQL:ze,LOCALSTORAGE:tt},ct=[ut.INDEXEDDB._driver,ut.WEBSQL._driver,ut.LOCALSTORAGE._driver],lt=["dropInstance"],ht=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(lt),ft={description:"",driver:ct.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function pt(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function mt(){for(var i=1;i<arguments.length;i++){var e=arguments[i];if(e)for(var t in e)e.hasOwnProperty(t)&&(it(e[t])?arguments[0][t]=e[t].slice():arguments[0][t]=e[t])}return arguments[0]}var gt=function(){function e(t){for(var n in o(this,e),ut)if(ut.hasOwnProperty(n)){var r=ut[n],c=r._driver;this[n]=c,at[c]||this.defineDriver(r)}this._defaultConfig=mt({},ft),this._config=mt({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in e){if("storeName"===i&&(e[i]=e[i].replace(/\W/g,"_")),"version"===i&&"number"!=typeof e[i])return new Error("Database version must be a number.");this._config[i]=e[i]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new f((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var c=ht.concat("_initStorage"),i=0,l=c.length;i<l;i++){var d=c[i];if((!ot(lt,d)||e[d])&&"function"!=typeof e[d])return void n(o)}var h=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=f.reject(t);return m(n,arguments[arguments.length-1]),n}},n=0,r=lt.length;n<r;n++){var o=lt[n];e[o]||(e[o]=t(o))}};h();var v=function(n){at[r]&&console.info("Redefining LocalForage driver: "+r),at[r]=e,st[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(v,n):v(!!e._support):v(!0)}catch(e){n(e)}}));return v(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=at[e]?f.resolve(at[e]):f.reject(new Error("Driver not found."));return v(r,t,n),r},e.prototype.getSerializer=function(e){var t=f.resolve(Ie);return v(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return v(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;it(e)||(e=[e]);var o=this._getSupportedDrivers(e);function c(){r._config.driver=r.driver()}function l(e){return r._extend(e),c(),r._ready=r._initStorage(r._config),r._ready}function d(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(l).catch(n)}c();var d=new Error("No available storage method found.");return r._driverSet=f.reject(d),r._driverSet}return n()}}var h=null!==this._driverSet?this._driverSet.catch((function(){return f.resolve()})):f.resolve();return this._driverSet=h.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,c(),r._wrapLibraryMethodsWithReady(),r._initDriver=d(o)}))})).catch((function(){c();var e=new Error("No available storage method found.");return r._driverSet=f.reject(e),r._driverSet})),v(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!st[e]},e.prototype._extend=function(e){mt(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];this.supports(r)&&t.push(r)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,e=ht.length;i<e;i++)pt(this,ht[i])},e.prototype.createInstance=function(t){return new e(t)},e}(),vt=new gt;t.exports=vt},{3:3}]},{},[4])(4)}).call(this,n(117))}}]);